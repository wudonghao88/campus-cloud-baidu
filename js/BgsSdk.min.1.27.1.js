var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};function _await(value,then,direct){if(direct){return then?then(value):value;}if(!value||!value.then){value=Promise.resolve(value);}return then?value.then(then):value;}function _invoke(body,then){var result=body();if(result&&result.then){return result.then(then);}return then(result);}function _call(body,then,direct){if(direct){return then?then(body()):body();}try{var result=Promise.resolve(body());return then?result.then(then):result;}catch(e){return Promise.reject(e);}}function _async(f){return function(){for(var args=[],i=0;i<arguments.length;i++){args[i]=arguments[i];}try{return Promise.resolve(f.apply(this,args));}catch(e){return Promise.reject(e);}};}function _empty(){}function _callIgnored(body,direct){return _call(body,_empty,direct);}function _awaitIgnored(value,direct){if(!direct){return value&&value.then?value.then(_empty):Promise.resolve();}}function _invokeIgnored(body){var result=body();if(result&&result.then){return result.then(_empty);}}function _catch(body,recover){try{var result=body();}catch(e){return recover(e);}if(result&&result.then){return result.then(void 0,recover);}return result;}function _continue(value,then){return value&&value.then?value.then(then):then(value);}function _settle(pact,state,value){if(!pact.s){if(value instanceof _Pact){if(value.s){if(state&1){state=value.s;}value=value.v;}else{value.o=_settle.bind(null,pact,state);return;}}if(value&&value.then){value.then(_settle.bind(null,pact,state),_settle.bind(null,pact,2));return;}pact.s=state;pact.v=value;const observer=pact.o;if(observer){observer(pact);}}}const _Pact=/*#__PURE__*/function(){function _Pact(){}_Pact.prototype.then=function(onFulfilled,onRejected){const result=new _Pact();const state=this.s;if(state){const callback=state&1?onFulfilled:onRejected;if(callback){try{_settle(result,1,callback(this.v));}catch(e){_settle(result,2,e);}return result;}else{return this;}}this.o=function(_this){try{const value=_this.v;if(_this.s&1){_settle(result,1,onFulfilled?onFulfilled(value):value);}else if(onRejected){_settle(result,1,onRejected(value));}else{_settle(result,2,value);}}catch(e){_settle(result,2,e);}};return result;};return _Pact;}();function _isSettledPact(thenable){return thenable instanceof _Pact&&thenable.s&1;}function _for(test,update,body){var stage;for(;;){var shouldContinue=test();if(_isSettledPact(shouldContinue)){shouldContinue=shouldContinue.v;}if(!shouldContinue){return result;}if(shouldContinue.then){stage=0;break;}var result=body();if(result&&result.then){if(_isSettledPact(result)){result=result.s;}else{stage=1;break;}}if(update){var updateValue=update();if(updateValue&&updateValue.then&&!_isSettledPact(updateValue)){stage=2;break;}}}var pact=new _Pact();var reject=_settle.bind(null,pact,2);(stage===0?shouldContinue.then(_resumeAfterTest):stage===1?result.then(_resumeAfterBody):updateValue.then(_resumeAfterUpdate)).then(void 0,reject);return pact;function _resumeAfterBody(value){result=value;do{if(update){updateValue=update();if(updateValue&&updateValue.then&&!_isSettledPact(updateValue)){updateValue.then(_resumeAfterUpdate).then(void 0,reject);return;}}shouldContinue=test();if(!shouldContinue||_isSettledPact(shouldContinue)&&!shouldContinue.v){_settle(pact,1,result);return;}if(shouldContinue.then){shouldContinue.then(_resumeAfterTest).then(void 0,reject);return;}result=body();if(_isSettledPact(result)){result=result.v;}}while(!result||!result.then);result.then(_resumeAfterBody).then(void 0,reject);}function _resumeAfterTest(shouldContinue){if(shouldContinue){result=body();if(result&&result.then){result.then(_resumeAfterBody).then(void 0,reject);}else{_resumeAfterBody(result);}}else{_settle(pact,1,result);}}function _resumeAfterUpdate(){if(shouldContinue=test()){if(shouldContinue.then){shouldContinue.then(_resumeAfterTest).then(void 0,reject);}else{_resumeAfterTest(shouldContinue);}}else{_settle(pact,1,result);}}}function _continueIgnored(value){if(value&&value.then){return value.then(_empty);}}function _switch(discriminant,cases){var dispatchIndex=-1;var awaitBody;outer:{for(var i=0;i<cases.length;i++){var test=cases[i][0];if(test){var testValue=test();if(testValue&&testValue.then){break outer;}if(testValue===discriminant){dispatchIndex=i;break;}}else{// Found the default case, set it as the pending dispatch case
dispatchIndex=i;}}if(dispatchIndex!==-1){do{var body=cases[dispatchIndex][1];while(!body){dispatchIndex++;body=cases[dispatchIndex][1];}var result=body();if(result&&result.then){awaitBody=true;break outer;}var fallthroughCheck=cases[dispatchIndex][2];dispatchIndex++;}while(fallthroughCheck&&!fallthroughCheck());return result;}}const pact=new _Pact();const reject=_settle.bind(null,pact,2);(awaitBody?result.then(_resumeAfterBody):testValue.then(_resumeAfterTest)).then(void 0,reject);return pact;function _resumeAfterTest(value){for(;;){if(value===discriminant){dispatchIndex=i;break;}if(++i===cases.length){if(dispatchIndex!==-1){break;}else{_settle(pact,1,result);return;}}test=cases[i][0];if(test){value=test();if(value&&value.then){value.then(_resumeAfterTest).then(void 0,reject);return;}}else{dispatchIndex=i;}}do{var body=cases[dispatchIndex][1];while(!body){dispatchIndex++;body=cases[dispatchIndex][1];}var result=body();if(result&&result.then){result.then(_resumeAfterBody).then(void 0,reject);return;}var fallthroughCheck=cases[dispatchIndex][2];dispatchIndex++;}while(fallthroughCheck&&!fallthroughCheck());_settle(pact,1,result);}function _resumeAfterBody(result){for(;;){var fallthroughCheck=cases[dispatchIndex][2];if(!fallthroughCheck||fallthroughCheck()){break;}dispatchIndex++;var body=cases[dispatchIndex][1];while(!body){dispatchIndex++;body=cases[dispatchIndex][1];}result=body();if(result&&result.then){result.then(_resumeAfterBody).then(void 0,reject);return;}}_settle(pact,1,result);}}function MyLog(e){let t=e||4;function r(){return new Date().Format("yyyy-MM-dd hh:mm:ss.S");}function n(){}var i={d:function(e){return r()+" [D]: "+e;},i:function(e){return r()+" [I]: "+e;},w:function(e){return r()+" [W]: "+e;},e:function(e){return r()+" [E]: "+e;},setLevel:function(e){i.debug=console.log,i.info=console.info,i.warn=console.warn,i.error=console.error,t=e,t>1&&(i.debug=n),t>2&&(i.info=n),t>3&&(i.warn=n);},debug:console.log,info:console.info,warn:console.warn,error:console.error,getLevel:function(){return t;}};return i.setLevel(t),i;}!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).adapter=e();}}(function(){return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var d="function"==typeof require&&require;if(!s&&d)return d(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c;}var f=r[a]={exports:{}};t[a][0].call(f.exports,function(e){return i(t[a][1][e]||e);},f,f.exports,e,t,r,n);}return r[a].exports;}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i;}({1:[function(e,t,r){"use strict";var n=(0,e("./adapter_factory.js").adapterFactory)({window:window});t.exports=n;},{"./adapter_factory.js":2}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.adapterFactory=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.window,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},c=n.log,f=n.detectBrowser(t),u={browserDetails:f,commonShim:d,extractVersion:n.extractVersion,disableLog:n.disableLog,disableWarnings:n.disableWarnings};switch(f.browser){case"chrome":if(!i||!i.shimPeerConnection||!r.shimChrome)return c("Chrome shim is not included in this adapter release."),u;c("adapter.js shimming chrome."),u.browserShim=i,i.shimGetUserMedia(t),i.shimMediaStream(t),i.shimPeerConnection(t),i.shimOnTrack(t),i.shimAddTrackRemoveTrack(t),i.shimGetSendersWithDtmf(t),i.shimGetStats(t),i.shimSenderReceiverGetStats(t),i.fixNegotiationNeeded(t),d.shimRTCIceCandidate(t),d.shimConnectionState(t),d.shimMaxMessageSize(t),d.shimSendThrowTypeError(t),d.removeAllowExtmapMixed(t);break;case"firefox":if(!a||!a.shimPeerConnection||!r.shimFirefox)return c("Firefox shim is not included in this adapter release."),u;c("adapter.js shimming firefox."),u.browserShim=a,a.shimGetUserMedia(t),a.shimPeerConnection(t),a.shimOnTrack(t),a.shimRemoveStream(t),a.shimSenderGetStats(t),a.shimReceiverGetStats(t),a.shimRTCDataChannel(t),d.shimRTCIceCandidate(t),d.shimConnectionState(t),d.shimMaxMessageSize(t),d.shimSendThrowTypeError(t);break;case"edge":if(!o||!o.shimPeerConnection||!r.shimEdge)return c("MS edge shim is not included in this adapter release."),u;c("adapter.js shimming edge."),u.browserShim=o,o.shimGetUserMedia(t),o.shimGetDisplayMedia(t),o.shimPeerConnection(t),o.shimReplaceTrack(t),d.shimMaxMessageSize(t),d.shimSendThrowTypeError(t);break;case"safari":if(!s||!r.shimSafari)return c("Safari shim is not included in this adapter release."),u;c("adapter.js shimming safari."),u.browserShim=s,s.shimRTCIceServerUrls(t),s.shimCreateOfferLegacy(t),s.shimCallbacksAPI(t),s.shimLocalStreamsAPI(t),s.shimRemoteStreamsAPI(t),s.shimTrackEventTransceiver(t),s.shimGetUserMedia(t),d.shimRTCIceCandidate(t),d.shimMaxMessageSize(t),d.shimSendThrowTypeError(t),d.removeAllowExtmapMixed(t);break;default:c("Unsupported browser!");}return u;};var n=c(e("./utils")),i=c(e("./chrome/chrome_shim")),o=c(e("./edge/edge_shim")),a=c(e("./firefox/firefox_shim")),s=c(e("./safari/safari_shim")),d=c(e("./common_shim"));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t;}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=r.shimGetUserMedia=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e;}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e;},i=e("./getusermedia");Object.defineProperty(r,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia;}});var o=e("./getdisplaymedia");Object.defineProperty(r,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia;}}),r.shimMediaStream=function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream;},r.shimOnTrack=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack;},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e);},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",function(n){var i=void 0;i=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find(function(e){return e.track&&e.track.id===n.track.id;}):{track:n.track};var o=new Event("track");o.track=n.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],r.dispatchEvent(o);}),t.stream.getTracks().forEach(function(n){var i=void 0;i=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find(function(e){return e.track&&e.track.id===n.id;}):{track:n};var o=new Event("track");o.track=n,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],r.dispatchEvent(o);});},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments);};}else a.wrapPeerConnectionEvent(e,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e;});},r.shimGetSendersWithDtmf=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf;},_pc:e};};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice();};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var i=r.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i;};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1);};}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach(function(e){r._senders.push(t(r,e));});};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],a.apply(this,[e]),e.getTracks().forEach(function(e){var r=t._senders.find(function(t){return t.track===e;});r&&t._senders.splice(t._senders.indexOf(r),1);});};}else if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var s=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=s.apply(this,[]);return t.forEach(function(t){return t._pc=e;}),t;},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf;}});}},r.shimGetStats=function(e){if(!e.RTCPeerConnection)return;var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,r,n){var i=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof arguments[0]))return t.apply(this,[]);var a=function(e){var t={};return e.result().forEach(function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){r[t]=e.stat(t);}),t[r.id]=r;}),t;},s=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]];}));};if(arguments.length>=2){var d=function(e){o[1](s(a(e)));};return t.apply(this,[d,arguments[0]]);}return new Promise(function(e,r){t.apply(i,[function(t){e(s(a(t)));},r]);}).then(r,n);};},r.shimSenderReceiverGetStats=function(e){if(!("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach(function(t){return t._pc=e;}),r;});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e;}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return a.filterStats(t,e.track,!0);});};}if(!("getStats"in e.RTCRtpReceiver.prototype)){var i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(this,[]);return t.forEach(function(t){return t._pc=e;}),t;}),a.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e;}),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return a.filterStats(t,e.track,!1);});};}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],r=void 0,n=void 0,i=void 0;return this.getSenders().forEach(function(e){e.track===t&&(r?i=!0:r=e);}),this.getReceivers().forEach(function(e){return e.track===t&&(n?i=!0:n=e),e.track===t;}),i||r&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"));}return o.apply(this,arguments);};},r.shimAddTrackRemoveTrackWithNative=s,r.shimAddTrackRemoveTrack=function(e){if(!e.RTCPeerConnection)return;var t=a.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return s(e);var r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=r.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id];});};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(function(e){var t=r.getSenders().find(function(t){return t.track===e;});if(t)throw new DOMException("Track already exists.","InvalidAccessError");}),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i;}n.apply(this,[t]);};var i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(i.id,"g"),n.id);}),new RTCSessionDescription({type:t.type,sdp:r});}function d(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),i.id);}),new RTCSessionDescription({type:t.type,sdp:r});}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id];},e.RTCPeerConnection.prototype.addTrack=function(t,r){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t;}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var o=this.getSenders().find(function(e){return e.track===t;});if(o)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var a=this._streams[r.id];if(a)a.addTrack(t),Promise.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"));});else{var s=new e.MediaStream([t]);this._streams[r.id]=s,this._reverseStreams[s.id]=r,this.addStream(s);}return this.getSenders().find(function(e){return e.track===t;});},["createOffer","createAnswer"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this,t=arguments,n=arguments.length&&"function"==typeof arguments[0];return n?r.apply(this,[function(r){var n=o(e,r);t[0].apply(null,[n]);},function(e){t[1]&&t[1].apply(null,e);},arguments[2]]):r.apply(this,arguments).then(function(t){return o(e,t);});};});var c=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=d(this,arguments[0]),c.apply(this,arguments)):c.apply(this,arguments);};var f=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=f.get.apply(this);return""===e.type?e:o(this,e);}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var r=void 0;Object.keys(this._streams).forEach(function(n){t._streams[n].getTracks().find(function(t){return e.track===t;})&&(r=t._streams[n]);}),r&&(1===r.getTracks().length?this.removeStream(this._reverseStreams[r.id]):r.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")));};},r.shimPeerConnection=function(e){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection);if(!e.RTCPeerConnection)return;["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments);};});var t=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve());};},r.fixNegotiationNeeded=function(e){a.wrapPeerConnectionEvent(e,"negotiationneeded",function(e){if("stable"===e.target.signalingState)return e;});};var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t;}(e("../utils.js"));function s(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0];});};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n;};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){var r=t.getSenders().find(function(t){return t.track===e;});if(r)throw new DOMException("Track already exists.","InvalidAccessError");});var n=this.getSenders();r.apply(this,arguments);var i=this.getSenders().filter(function(e){return-1===n.indexOf(e);});this._shimmedLocalStreams[e.id]=[e].concat(i);};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments);};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(r){var n=t._shimmedLocalStreams[r].indexOf(e);-1!==n&&t._shimmedLocalStreams[r].splice(n,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r];}),i.apply(this,arguments);};}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=function(e,t){if(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)return;if(!e.navigator.mediaDevices)return;if("function"!=typeof t)return void console.error("shimGetDisplayMedia: getSourceId argument is not a function");e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(function(t){var n=r.video&&r.video.width,i=r.video&&r.video.height,o=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},n&&(r.video.mandatory.maxWidth=n),i&&(r.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(r);});};};},{}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e;}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e;};r.shimGetUserMedia=function(e){var t=e&&e.navigator;if(!t.mediaDevices)return;var r=i.detectBrowser(e),a=function(e){if("object"!==(void 0===e?"undefined":n(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var i="object"===n(e[r])?e[r]:{ideal:e[r]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t;};if(void 0!==i.ideal){t.optional=t.optional||[];var a={};"number"==typeof i.ideal?(a[o("min",r)]=i.ideal,t.optional.push(a),(a={})[o("max",r)]=i.ideal,t.optional.push(a)):(a[o("",r)]=i.ideal,t.optional.push(a));}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",r)]=i.exact):["min","max"].forEach(function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,r)]=i[e]);});}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t;},s=function(e,i){if(r.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===n(e.audio)){var s=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t]);};s((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),s(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=a(e.audio);}if(e&&"object"===n(e.video)){var d=e.video.facingMode;d=d&&("object"===(void 0===d?"undefined":n(d))?d:{ideal:d});var c=r.version<66;if(d&&("user"===d.exact||"environment"===d.exact||"user"===d.ideal||"environment"===d.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||c)){delete e.video.facingMode;var f=void 0;if("environment"===d.exact||"environment"===d.ideal?f=["back","rear"]:"user"!==d.exact&&"user"!==d.ideal||(f=["front"]),f)return t.mediaDevices.enumerateDevices().then(function(t){var r=(t=t.filter(function(e){return"videoinput"===e.kind;})).find(function(e){return f.some(function(t){return e.label.toLowerCase().includes(t);});});return!r&&t.length&&f.includes("back")&&(r=t[t.length-1]),r&&(e.video.deviceId=d.exact?{exact:r.deviceId}:{ideal:r.deviceId}),e.video=a(e.video),o("chrome: "+JSON.stringify(e)),i(e);});}e.video=a(e.video);}return o("chrome: "+JSON.stringify(e)),i(e);},d=function(e){return r.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message;}};};if(t.getUserMedia=function(e,r,n){s(e,function(e){t.webkitGetUserMedia(e,r,function(e){n&&n(d(e));});});}.bind(t),t.mediaDevices.getUserMedia){var c=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return s(e,function(e){return c(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop();}),new DOMException("","NotFoundError");return t;},function(e){return Promise.reject(d(e));});});};}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t;}(e("../utils.js"));var o=i.log;},{"../utils.js":15}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e;}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e;};r.shimRTCIceCandidate=function(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var r=new t(e),i=a.default.parseCandidate(e.candidate),o=Object.assign(r,i);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment};},o;}return new t(e);},e.RTCIceCandidate.prototype=t.prototype,s.wrapPeerConnectionEvent(e,"icecandidate",function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t;});},r.shimMaxMessageSize=function(e){if(e.RTCSctpTransport||!e.RTCPeerConnection)return;var t=s.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp;}});var r=function(e){if(!e||!e.sdp)return!1;var t=a.default.splitSections(e.sdp);return t.shift(),t.some(function(e){var t=a.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP");});},n=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var r=parseInt(t[1],10);return r!=r?-1:r;},i=function(e){var r=65536;return"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r;},o=function(e,r){var n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);var i=a.default.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?n=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==r&&(n=2147483637),n;},d=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,r(arguments[0])){var e=n(arguments[0]),t=i(e),a=o(arguments[0],e),s=void 0;s=0===t&&0===a?Number.POSITIVE_INFINITY:0===t||0===a?Math.max(t,a):Math.min(t,a);var c={};Object.defineProperty(c,"maxMessageSize",{get:function(){return s;}}),this._sctp=c;}return d.apply(this,arguments);};},r.shimSendThrowTypeError=function(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){var r=e.send;e.send=function(){var n=arguments[0],i=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments);};}var r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=r.apply(this,arguments);return t(e,this),e;},s.wrapPeerConnectionEvent(e,"datachannel",function(e){return t(e.channel,e.target),e;});},r.shimConnectionState=function(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState;},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null;},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e);},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(e){var r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var r=new Event("connectionstatechange",e);t.dispatchEvent(r);}return e;},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments);};});},r.removeAllowExtmapMixed=function(e){if(!e.RTCPeerConnection)return;s.detectBrowser(e);var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter(function(e){return"a=extmap-allow-mixed"!==e.trim();}).join("\n")),t.apply(this,arguments);};};var i,o=e("sdp"),a=(i=o)&&i.__esModule?i:{default:i},s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t;}(e("./utils"));},{"./utils":15,sdp:17}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=r.shimGetUserMedia=void 0;var n=e("./getusermedia");Object.defineProperty(r,"shimGetUserMedia",{enumerable:!0,get:function(){return n.shimGetUserMedia;}});var i=e("./getdisplaymedia");Object.defineProperty(r,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia;}}),r.shimPeerConnection=function(e){var t=a.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e;}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e;}),t.version<15025)){var r=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){r.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t);}});}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf;}});e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var n=(0,c.default)(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,s.filterIceServers)(e.iceServers,t.version),a.log("ICE servers after filtering:",e.iceServers)),new n(e);},e.RTCPeerConnection.prototype=n.prototype;},r.shimReplaceTrack=function(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack);};var o,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t;}(e("../utils")),s=e("./filtericeservers"),d=e("rtcpeerconnection-shim"),c=(o=d)&&o.__esModule?o:{default:o};},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.filterIceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&n.deprecated("RTCIceServer.url","RTCIceServer.urls");var i="string"==typeof t;return i&&(t=[t]),t=t.filter(function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!r?(r=!0,!0):t&&!r;}),delete e.url,e.urls=i?t[0]:t,!!t.length;}});};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t;}(e("../utils"));},{"../utils":15}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=function(e){if(!("getDisplayMedia"in e.navigator))return;if(!e.navigator.mediaDevices)return;if(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)return;e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator);};},{}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetUserMedia=function(e){var t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch(function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name;}};}(e));});};};},{}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=r.shimGetUserMedia=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e;}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e;},i=e("./getusermedia");Object.defineProperty(r,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia;}});var o=e("./getdisplaymedia");Object.defineProperty(r,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia;}}),r.shimOnTrack=function(e){"object"===(void 0===e?"undefined":n(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver};}});},r.shimPeerConnection=function(e){var t=a.detectBrowser(e);if("object"!==(void 0===e?"undefined":n(e))||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection);["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments);};});var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve());};var i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,r,n){return o.apply(this,[e||null]).then(function(e){if(t.version<53&&!r)try{e.forEach(function(e){e.type=i[e.type]||e.type;});}catch(t){if("TypeError"!==t.name)throw t;e.forEach(function(t,r){e.set(r,Object.assign({},t,{type:i[t.type]||t.type}));});}return e;}).then(r,n);};},r.shimSenderGetStats=function(e){if("object"!==(void 0===e?"undefined":n(e))||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach(function(t){return t._pc=e;}),r;});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e;});e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map());};},r.shimReceiverGetStats=function(e){if("object"!==(void 0===e?"undefined":n(e))||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,r=t.apply(this,[]);return r.forEach(function(t){return t._pc=e;}),r;});a.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e;}),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track);};},r.shimRemoveStream=function(e){if(!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype)return;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;a.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(r){r.track&&e.getTracks().includes(r.track)&&t.removeTrack(r);});};},r.shimRTCDataChannel=function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel);};var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t;}(e("../utils"));},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=function(e,t){if(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)return;if(!e.navigator.mediaDevices)return;e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){var n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n);}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r);};};},{}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e;}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e;};r.shimGetUserMedia=function(e){var t=i.detectBrowser(e),r=e&&e.navigator,o=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,n){i.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,n);},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){var a=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t]);},s=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(e){return"object"===(void 0===e?"undefined":n(e))&&"object"===n(e.audio)&&(e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","mozAutoGainControl"),a(e.audio,"noiseSuppression","mozNoiseSuppression")),s(e);},o&&o.prototype.getSettings){var d=o.prototype.getSettings;o.prototype.getSettings=function(){var e=d.apply(this,arguments);return a(e,"mozAutoGainControl","autoGainControl"),a(e,"mozNoiseSuppression","noiseSuppression"),e;};}if(o&&o.prototype.applyConstraints){var c=o.prototype.applyConstraints;o.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(void 0===e?"undefined":n(e))&&(e=JSON.parse(JSON.stringify(e)),a(e,"autoGainControl","mozAutoGainControl"),a(e,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[e]);};}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t;}(e("../utils"));},{"../utils":15}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e;}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e;};r.shimLocalStreamsAPI=function(e){if("object"!==(void 0===e?"undefined":n(e))||!e.RTCPeerConnection)return;"getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams;});if(!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getTracks().forEach(function(n){return t.call(r,n,e);});},e.RTCPeerConnection.prototype.addTrack=function(e,r){return r&&(this._localStreams?this._localStreams.includes(r)||this._localStreams.push(r):this._localStreams=[r]),t.call(this,e,r);};}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var r=this._localStreams.indexOf(e);if(-1!==r){this._localStreams.splice(r,1);var n=e.getTracks();this.getSenders().forEach(function(e){n.includes(e.track)&&t.removeTrack(e);});}});},r.shimRemoteStreamsAPI=function(e){if("object"!==(void 0===e?"undefined":n(e))||!e.RTCPeerConnection)return;"getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[];});if(!("onaddstream"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream;},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e,t.dispatchEvent(r);}});});}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var r=new Event("addstream");r.stream=t,e.dispatchEvent(r);}});}),t.apply(e,arguments);};}},r.shimCallbacksAPI=function(e){if("object"!==(void 0===e?"undefined":n(e))||!e.RTCPeerConnection)return;var t=e.RTCPeerConnection.prototype,r=t.createOffer,i=t.createAnswer,o=t.setLocalDescription,a=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i;},t.createAnswer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],n=i.apply(this,[r]);return t?(n.then(e,t),Promise.resolve()):n;};var d=function(e,t,r){var n=o.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n;};t.setLocalDescription=d,d=function(e,t,r){var n=a.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n;},t.setRemoteDescription=d,d=function(e,t,r){var n=s.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n;},t.addIceCandidate=d;},r.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var r=t.mediaDevices,n=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=function(e){return n(o(e));};}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r,n);}.bind(t));},r.shimConstraints=o,r.shimRTCIceServerUrls=function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){for(var n=[],o=0;o<e.iceServers.length;o++){var a=e.iceServers[o];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(i.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,n.push(a)):n.push(e.iceServers[o]);}e.iceServers=n;}return new t(e,r);},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate;}});},r.shimTrackEventTransceiver=function(e){"object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver};}});},r.shimCreateOfferLegacy=function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=this.getTransceivers().find(function(e){return"audio"===e.receiver.track.kind;});!1===e.offerToReceiveAudio&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveAudio||r||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var n=this.getTransceivers().find(function(e){return"video"===e.receiver.track.kind;});!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video");}return t.apply(this,arguments);};};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t;}(e("../utils"));function o(e){return e&&void 0!==e.video?Object.assign({},e,{video:i.compactObject(e.video)}):e;}},{"../utils":15}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e;}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e;};r.extractVersion=a,r.wrapPeerConnectionEvent=function(e,t,r){if(!e.RTCPeerConnection)return;var n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=r(e);t&&n(t);};return this._eventMap=this._eventMap||{},this._eventMap[n]=o,i.apply(this,[e,o]);};var o=n.removeEventListener;n.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[r])return o.apply(this,arguments);var n=this._eventMap[r];return delete this._eventMap[r],o.apply(this,[e,n]);},Object.defineProperty(n,"on"+t,{get:function(){return this["_on"+t];},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e);},enumerable:!0,configurable:!0});},r.disableLog=function(e){if("boolean"!=typeof e)return new Error("Argument type: "+(void 0===e?"undefined":n(e))+". Please use a boolean.");return i=e,e?"adapter.js logging disabled":"adapter.js logging enabled";},r.disableWarnings=function(e){if("boolean"!=typeof e)return new Error("Argument type: "+(void 0===e?"undefined":n(e))+". Please use a boolean.");return o=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled");},r.log=function(){if("object"===("undefined"==typeof window?"undefined":n(window))){if(i)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments);}},r.deprecated=function(e,t){if(!o)return;console.warn(e+" is deprecated, please use "+t+" instead.");},r.detectBrowser=function(e){var t=e.navigator,r={browser:null,version:null};if(void 0===e||!e.navigator)return r.browser="Not a browser.",r;if(t.mozGetUserMedia)r.browser="firefox",r.version=a(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)r.browser="chrome",r.version=a(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))r.browser="edge",r.version=a(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return r.browser="Not a supported browser.",r;r.browser="safari",r.version=a(t.userAgent,/AppleWebKit\/(\d+)\./,1);}return r;},r.compactObject=function e(t){if("object"!==(void 0===t?"undefined":n(t)))return t;return Object.keys(t).reduce(function(r,i){var o="object"===n(t[i]),a=o?e(t[i]):t[i],s=o&&!Object.keys(a).length;return void 0===a||s?r:Object.assign(r,function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e;}({},i,a));},{});},r.walkStats=s,r.filterStats=function(e,t,r){var n=r?"outbound-rtp":"inbound-rtp",i=new Map();if(null===t)return i;var o=[];return e.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e);}),o.forEach(function(t){e.forEach(function(r){r.type===n&&r.trackId===t.id&&s(e,r,i);});}),i;};var i=!0,o=!0;function a(e,t,r){var n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10);}function s(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach(function(n){n.endsWith("Id")?s(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach(function(t){s(e,e.get(t),r);});}));}},{}],16:[function(e,t,r){"use strict";var n=e("sdp");function i(e,t,r,i,o){var a=n.writeRtpDescription(e.kind,t);if(a+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":o||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var d="msid:"+(i?i.id:"-")+" "+s+"\r\n";a+="a="+d,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+d,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+d,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n");}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),a;}function o(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r];},i=function(e,t,r,i){var o=n(e.parameters.apt,r),a=n(t.parameters.apt,i);return o&&a&&o.name.toLowerCase()===a.name.toLowerCase();};return e.codecs.forEach(function(n){for(var o=0;o<t.codecs.length;o++){var a=t.codecs[o];if(n.name.toLowerCase()===a.name.toLowerCase()&&n.clockRate===a.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&a.parameters.apt&&!i(n,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(n.numChannels,a.numChannels),r.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter(function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1;});break;}}}),e.headerExtensions.forEach(function(e){for(var n=0;n<t.headerExtensions.length;n++){var i=t.headerExtensions[n];if(e.uri===i.uri){r.headerExtensions.push(i);break;}}}),r;}function a(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r);}function s(e,t){var r=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type;});return r||e.addRemoteCandidate(t),!r;}function d(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r;}t.exports=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}));}function c(t,r,n,i){var o=new Event("track");o.track=r,o.receiver=n,o.transceiver={receiver:n},o.streams=i,e.setTimeout(function(){t._dispatchEvent("track",o);});}var f=function(r){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){i[e]=o[e].bind(o);}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle="max-bundle"===r.bundlePolicy,"negotiate"===r.rtcpMuxPolicy)throw d("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require"),r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all";}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced";}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof n;return i&&(n=[n]),n=n.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||r?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(r=!0,!0);}),delete e.url,e.urls=i?n[0]:n,!!n.length;}});}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var a=r.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=n.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1;};Object.defineProperty(f.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription;}}),Object.defineProperty(f.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription;}}),f.prototype.onicecandidate=null,f.prototype.onaddstream=null,f.prototype.ontrack=null,f.prototype.onremovestream=null,f.prototype.onsignalingstatechange=null,f.prototype.oniceconnectionstatechange=null,f.prototype.onconnectionstatechange=null,f.prototype.onicegatheringstatechange=null,f.prototype.onnegotiationneeded=null,f.prototype.ondatachannel=null,f.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t));},f.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e);},f.prototype.getConfiguration=function(){return this._config;},f.prototype.getLocalStreams=function(){return this.localStreams;},f.prototype.getRemoteStreams=function(){return this.remoteStreams;},f.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();n.iceTransport=i.iceTransport,n.dtlsTransport=i.dtlsTransport;}return t||this.transceivers.push(n),n;},f.prototype.addTrack=function(t,r){if(this._isClosed)throw d("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n,i=this.transceivers.find(function(e){return e.track===t;});if(i)throw d("InvalidAccessError","Track already exists.");for(var o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(n=this.transceivers[o]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),n.track=t,n.stream=r,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender;},f.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach(function(t){r.addTrack(t,e);});else{var n=e.clone();e.getTracks().forEach(function(e,t){var r=n.getTracks()[t];e.addEventListener("enabled",function(e){r.enabled=e.enabled;});}),n.getTracks().forEach(function(e){r.addTrack(e,n);});}},f.prototype.removeTrack=function(t){if(this._isClosed)throw d("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var r=this.transceivers.find(function(e){return e.rtpSender===t;});if(!r)throw d("InvalidAccessError","Sender was not created by this connection.");var n=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map(function(e){return e.stream;}).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded();},f.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var r=t.getSenders().find(function(t){return t.track===e;});r&&t.removeTrack(r);});},f.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender;}).map(function(e){return e.rtpSender;});},f.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver;}).map(function(e){return e.rtpReceiver;});},f.prototype._createIceGatherer=function(t,r){var n=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;i.state=r?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e);},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i;},f.prototype._gather=function(t,r){var i=this,o=this.transceivers[r].iceGatherer;if(!o.onlocalcandidate){var a=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),o.onlocalcandidate=function(e){if(!(i.usingBundle&&r>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:r};var s=e.candidate,d=!s||0===Object.keys(s).length;if(d)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),s.component=1,s.ufrag=o.getLocalParameters().usernameFragment;var c=n.writeCandidate(s);a.candidate=Object.assign(a.candidate,n.parseCandidate(c)),a.candidate.candidate=c,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment};};}var f=n.getMediaSections(i._localDescription.sdp);f[a.candidate.sdpMLineIndex]+=d?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",i._localDescription.sdp=n.getDescription(i._localDescription.sdp)+f.join("");var u=i.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state;});"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),d||i._dispatchEvent("icecandidate",a),u&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange());}},e.setTimeout(function(){a.forEach(function(e){o.onlocalcandidate(e);});},0);}},f.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState();};var n=new e.RTCDtlsTransport(r);return n.ondtlsstatechange=function(){t._updateConnectionState();},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState();},{iceTransport:r,dtlsTransport:n};},f.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport);},f.prototype._transceive=function(e,r,i){var a=o(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(a.encodings=e.sendEncodingParameters,a.rtcp={cname:n.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(a.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(a)),i&&e.rtpReceiver&&a.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx;}),e.recvEncodingParameters.length?a.encodings=e.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(a.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(a.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(a));},f.prototype.setLocalDescription=function(e){var t,r,i=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(d("TypeError",'Unsupported type "'+e.type+'"'));if(!a("setLocalDescription",e.type,i.signalingState)||i._isClosed)return Promise.reject(d("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=n.splitSections(e.sdp),r=t.shift(),t.forEach(function(e,t){var r=n.parseRtpParameters(e);i.transceivers[t].localCapabilities=r;}),i.transceivers.forEach(function(e,t){i._gather(e.mid,t);});else if("answer"===e.type){t=n.splitSections(i._remoteDescription.sdp),r=t.shift();var s=n.matchPrefix(r,"a=ice-lite").length>0;t.forEach(function(e,t){var a=i.transceivers[t],d=a.iceGatherer,c=a.iceTransport,f=a.dtlsTransport,u=a.localCapabilities,l=a.remoteCapabilities;if(!(n.isRejected(e)&&0===n.matchPrefix(e,"a=bundle-only").length)&&!a.rejected){var p=n.getIceParameters(e,r),h=n.getDtlsParameters(e,r);s&&(h.role="server"),i.usingBundle&&0!==t||(i._gather(a.mid,t),"new"===c.state&&c.start(d,p,s?"controlling":"controlled"),"new"===f.state&&f.start(h));var g=o(u,l);i._transceive(a,g.codecs.length>0,!1);}});}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),Promise.resolve();},f.prototype.setRemoteDescription=function(i){var f=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(d("TypeError",'Unsupported type "'+i.type+'"'));if(!a("setRemoteDescription",i.type,f.signalingState)||f._isClosed)return Promise.reject(d("InvalidStateError","Can not set remote "+i.type+" in state "+f.signalingState));var u={};f.remoteStreams.forEach(function(e){u[e.id]=e;});var l=[],p=n.splitSections(i.sdp),h=p.shift(),g=n.matchPrefix(h,"a=ice-lite").length>0,y=n.matchPrefix(h,"a=group:BUNDLE ").length>0;f.usingBundle=y;var b=n.matchPrefix(h,"a=ice-options:")[0];return f.canTrickleIceCandidates=!!b&&b.substr(14).split(" ").indexOf("trickle")>=0,p.forEach(function(a,d){var c=n.splitLines(a),p=n.getKind(a),b=n.isRejected(a)&&0===n.matchPrefix(a,"a=bundle-only").length,m=c[0].substr(2).split(" ")[2],v=n.getDirection(a,h),S=n.parseMsid(a),k=n.getMid(a)||n.generateIdentifier();if(b||"application"===p&&("DTLS/SCTP"===m||"UDP/DTLS/SCTP"===m))f.transceivers[d]={mid:k,kind:p,protocol:m,rejected:!0};else{var C,T,P,_,w,O,M,I,E;!b&&f.transceivers[d]&&f.transceivers[d].rejected&&(f.transceivers[d]=f._createTransceiver(p,!0));var R,L,A=n.parseRtpParameters(a);b||(R=n.getIceParameters(a,h),(L=n.getDtlsParameters(a,h)).role="client"),M=n.parseRtpEncodingParameters(a);var D=n.parseRtcpParameters(a),G=n.matchPrefix(a,"a=end-of-candidates",h).length>0,x=n.matchPrefix(a,"a=candidate:").map(function(e){return n.parseCandidate(e);}).filter(function(e){return 1===e.component;});if(("offer"===i.type||"answer"===i.type)&&!b&&y&&d>0&&f.transceivers[d]&&(f._disposeIceAndDtlsTransports(d),f.transceivers[d].iceGatherer=f.transceivers[0].iceGatherer,f.transceivers[d].iceTransport=f.transceivers[0].iceTransport,f.transceivers[d].dtlsTransport=f.transceivers[0].dtlsTransport,f.transceivers[d].rtpSender&&f.transceivers[d].rtpSender.setTransport(f.transceivers[0].dtlsTransport),f.transceivers[d].rtpReceiver&&f.transceivers[d].rtpReceiver.setTransport(f.transceivers[0].dtlsTransport)),"offer"!==i.type||b){if("answer"===i.type&&!b){T=(C=f.transceivers[d]).iceGatherer,P=C.iceTransport,_=C.dtlsTransport,w=C.rtpReceiver,O=C.sendEncodingParameters,I=C.localCapabilities,f.transceivers[d].recvEncodingParameters=M,f.transceivers[d].remoteCapabilities=A,f.transceivers[d].rtcpParameters=D,x.length&&"new"===P.state&&(!g&&!G||y&&0!==d?x.forEach(function(e){s(C.iceTransport,e);}):P.setRemoteCandidates(x)),y&&0!==d||("new"===P.state&&P.start(T,R,"controlling"),"new"===_.state&&_.start(L)),!o(C.localCapabilities,C.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase();}).length&&C.sendEncodingParameters[0].rtx&&delete C.sendEncodingParameters[0].rtx,f._transceive(C,"sendrecv"===v||"recvonly"===v,"sendrecv"===v||"sendonly"===v),!w||"sendrecv"!==v&&"sendonly"!==v?delete C.rtpReceiver:(E=w.track,S?(u[S.stream]||(u[S.stream]=new e.MediaStream()),r(E,u[S.stream]),l.push([E,w,u[S.stream]])):(u.default||(u.default=new e.MediaStream()),r(E,u.default),l.push([E,w,u.default])));}}else{(C=f.transceivers[d]||f._createTransceiver(p)).mid=k,C.iceGatherer||(C.iceGatherer=f._createIceGatherer(d,y)),x.length&&"new"===C.iceTransport.state&&(!G||y&&0!==d?x.forEach(function(e){s(C.iceTransport,e);}):C.iceTransport.setRemoteCandidates(x)),I=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(I.codecs=I.codecs.filter(function(e){return"rtx"!==e.name;})),O=C.sendEncodingParameters||[{ssrc:1001*(2*d+2)}];var B,N=!1;if("sendrecv"===v||"sendonly"===v){if(N=!C.rtpReceiver,w=C.rtpReceiver||new e.RTCRtpReceiver(C.dtlsTransport,p),N)E=w.track,S&&"-"===S.stream||(S?(u[S.stream]||(u[S.stream]=new e.MediaStream(),Object.defineProperty(u[S.stream],"id",{get:function(){return S.stream;}})),Object.defineProperty(E,"id",{get:function(){return S.track;}}),B=u[S.stream]):(u.default||(u.default=new e.MediaStream()),B=u.default)),B&&(r(E,B),C.associatedRemoteMediaStreams.push(B)),l.push([E,w,B]);}else C.rtpReceiver&&C.rtpReceiver.track&&(C.associatedRemoteMediaStreams.forEach(function(t){var r=t.getTracks().find(function(e){return e.id===C.rtpReceiver.track.id;});r&&function(t,r){r.removeTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}));}(r,t);}),C.associatedRemoteMediaStreams=[]);C.localCapabilities=I,C.remoteCapabilities=A,C.rtpReceiver=w,C.rtcpParameters=D,C.sendEncodingParameters=O,C.recvEncodingParameters=M,f._transceive(f.transceivers[d],!1,N);}}}),void 0===f._dtlsRole&&(f._dtlsRole="offer"===i.type?"active":"passive"),f._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?f._updateSignalingState("have-remote-offer"):f._updateSignalingState("stable"),Object.keys(u).forEach(function(t){var r=u[t];if(r.getTracks().length){if(-1===f.remoteStreams.indexOf(r)){f.remoteStreams.push(r);var n=new Event("addstream");n.stream=r,e.setTimeout(function(){f._dispatchEvent("addstream",n);});}l.forEach(function(e){var t=e[0],n=e[1];r.id===e[2].id&&c(f,t,n,[r]);});}}),l.forEach(function(e){e[2]||c(f,e[0],e[1],[]);}),e.setTimeout(function(){f&&f.transceivers&&f.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}));});},4e3),Promise.resolve();},f.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop();}),this._isClosed=!0,this._updateSignalingState("closed");},f.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t);},f.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e);}},0));},f.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++;}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r);}},f.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++);}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r);}},f.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(d("InvalidStateError","Can not call createOffer after close"));var o=r.transceivers.filter(function(e){return"audio"===e.kind;}).length,a=r.transceivers.filter(function(e){return"video"===e.kind;}).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(o=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(a=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo);}for(r.transceivers.forEach(function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1);});o>0||a>0;)o>0&&(r._createTransceiver("audio"),o--),a>0&&(r._createTransceiver("video"),a--);var c=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach(function(i,o){var a=i.track,s=i.kind,d=i.mid||n.generateIdentifier();i.mid=d,i.iceGatherer||(i.iceGatherer=r._createIceGatherer(o,r.usingBundle));var c=e.RTCRtpSender.getCapabilities(s);t<15019&&(c.codecs=c.codecs.filter(function(e){return"rtx"!==e.name;})),c.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType);});}),c.headerExtensions.forEach(function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id);});});var f=i.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];a&&t>=15019&&"video"===s&&!f[0].rtx&&(f[0].rtx={ssrc:f[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,s)),i.localCapabilities=c,i.sendEncodingParameters=f;}),"max-compat"!==r._config.bundlePolicy&&(c+="a=group:BUNDLE "+r.transceivers.map(function(e){return e.mid;}).join(" ")+"\r\n"),c+="a=ice-options:trickle\r\n",r.transceivers.forEach(function(e,t){c+=i(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),c+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,c+="a="+n.writeCandidate(e)+"\r\n";}),"completed"===e.iceGatherer.state&&(c+="a=end-of-candidates\r\n"));});var f=new e.RTCSessionDescription({type:"offer",sdp:c});return Promise.resolve(f);},f.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(d("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(d("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var a=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(a+="a=group:BUNDLE "+r.transceivers.map(function(e){return e.mid;}).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n";var s=n.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach(function(e,n){if(!(n+1>s)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?a+="m=application 0 DTLS/SCTP 5000\r\n":a+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var d;if(e.stream)"audio"===e.kind?d=e.stream.getAudioTracks()[0]:"video"===e.kind&&(d=e.stream.getVideoTracks()[0]),d&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var c=o(e.localCapabilities,e.remoteCapabilities);!c.codecs.filter(function(e){return"rtx"===e.name.toLowerCase();}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=i(e,c,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n");}});var c=new e.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(c);},f.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(i,o){if(!r._remoteDescription)return o(d("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var c=0;c<r.transceivers.length;c++)if(r.transceivers[c].mid===e.sdpMid){a=c;break;}var f=r.transceivers[a];if(!f)return o(d("OperationError","Can not add ICE candidate"));if(f.rejected)return i();var u=Object.keys(e.candidate).length>0?n.parseCandidate(e.candidate):{};if("tcp"===u.protocol&&(0===u.port||9===u.port))return i();if(u.component&&1!==u.component)return i();if((0===a||a>0&&f.iceTransport!==r.transceivers[0].iceTransport)&&!s(f.iceTransport,u))return o(d("OperationError","Can not add ICE candidate"));var l=e.candidate.trim();0===l.indexOf("a=")&&(l=l.substr(2)),(t=n.getMediaSections(r._remoteDescription.sdp))[a]+="a="+(u.type?l:"end-of-candidates")+"\r\n",r._remoteDescription.sdp=n.getDescription(r._remoteDescription.sdp)+t.join("");}else for(var p=0;p<r.transceivers.length&&(r.transceivers[p].rejected||(r.transceivers[p].iceTransport.addRemoteCandidate({}),(t=n.getMediaSections(r._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",r._remoteDescription.sdp=n.getDescription(r._remoteDescription.sdp)+t.join(""),!r.usingBundle));p++);i();});},f.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver);}),!r)throw d("InvalidAccessError","Invalid selector.");return r.getStats();}var n=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&n.push(e[t].getStats());});}),Promise.all(n).then(function(e){var t=new Map();return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e);});}),t;});};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then(function(e){var t=new Map();return Object.keys(e).forEach(function(r){var n;e[r].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(n=e[r]).type]||n.type,t.set(r,e[r]);}),t;});};}});var u=["createOffer","createAnswer"];return u.forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t]);},function(t){"function"==typeof e[1]&&e[1].apply(null,[t]);}):t.apply(this,arguments);};}),(u=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null);},function(t){"function"==typeof e[2]&&e[2].apply(null,[t]);}):t.apply(this,arguments);};}),["getStats"].forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null);}):t.apply(this,arguments);};}),f;};},{sdp:17}],17:[function(e,t,r){"use strict";var n={generateIdentifier:function(){return Math.random().toString(36).substr(2,10);}};n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim();});},n.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n";});},n.getDescription=function(e){var t=n.splitSections(e);return t&&t[0];},n.getMediaSections=function(e){var t=n.splitSections(e);return t.shift(),t;},n.matchPrefix=function(e,t){return n.splitLines(e).filter(function(e){return 0===e.indexOf(t);});},n.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":r.relatedAddress=t[n+1];break;case"rport":r.relatedPort=parseInt(t[n+1],10);break;case"tcptype":r.tcpType=t[n+1];break;case"ufrag":r.ufrag=t[n+1],r.usernameFragment=t[n+1];break;default:r[t[n]]=t[n+1];}return r;},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ");},n.parseIceOptions=function(e){return e.substr(14).split(" ");},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r;},n.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n";},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]};},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n";},n.parseFmtp=function(e){for(var t,r={},n=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<n.length;i++)r[(t=n[i].trim().split("="))[0].trim()]=t[1];return r;},n.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach(function(t){e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t);}),t+="a=fmtp:"+r+" "+n.join(";")+"\r\n";}return t;},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")};},n.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n";}),t;},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(r.attribute=e.substr(t+1,n-t-1),r.value=e.substr(n+1)):r.attribute=e.substr(t+1),r;},n.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(e){return parseInt(e,10);})};},n.getMid=function(e){var t=n.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6);},n.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]};},n.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:n.matchPrefix(e+t,"a=fingerprint:").map(n.parseFingerprint)};},n.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n";}),r;},n.getIceParameters=function(e,t){var r=n.splitLines(e);return{usernameFragment:(r=r.concat(n.splitLines(t))).filter(function(e){return 0===e.indexOf("a=ice-ufrag:");})[0].substr(12),password:r.filter(function(e){return 0===e.indexOf("a=ice-pwd:");})[0].substr(10)};},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=n.splitLines(e)[0].split(" "),i=3;i<r.length;i++){var o=r[i],a=n.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=n.parseRtpMap(a),d=n.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=d.length?n.parseFmtp(d[0]):{},s.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(n.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase());}}}return n.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(n.parseExtmap(e));}),t;},n.writeRtpDescription=function(e,t){var r="";r+="m="+e+" ",r+=t.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType;}).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){r+=n.writeRtpMap(e),r+=n.writeFmtp(e),r+=n.writeRtcpFb(e);});var i=0;return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime);}),i>0&&(r+="a=maxptime:"+i+"\r\n"),r+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){r+=n.writeExtmap(e);}),r;},n.parseRtpEncodingParameters=function(e){var t,r=[],i=n.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e);}).filter(function(e){return"cname"===e.attribute;}),d=s.length>0&&s[0].ssrc,c=n.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10);});});c.length>0&&c[0].length>1&&c[0][0]===d&&(t=c[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:d,codecPayloadType:parseInt(e.parameters.apt,10)};d&&t&&(n.rtx={ssrc:t}),r.push(n),o&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:d,mechanism:a?"red+ulpfec":"red"},r.push(n));}}),0===r.length&&d&&r.push({ssrc:d});var f=n.matchPrefix(e,"b=");return f.length&&(f=0===f[0].indexOf("b=TIAS:")?parseInt(f[0].substr(7),10):0===f[0].indexOf("b=AS:")?1e3*parseInt(f[0].substr(5),10)*.95-16e3:void 0,r.forEach(function(e){e.maxBitrate=f;})),r;},n.parseRtcpParameters=function(e){var t={},r=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e);}).filter(function(e){return"cname"===e.attribute;})[0];r&&(t.cname=r.value,t.ssrc=r.ssrc);var i=n.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=n.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t;},n.parseMsid=function(e){var t,r=n.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(t=r[0].substr(7).split(" "))[0],track:t[1]};var i=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e);}).filter(function(e){return"msid"===e.attribute;});return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0;},n.generateSessionId=function(){return Math.random().toString().substr(2,21);},n.writeSessionBoilerplate=function(e,t,r){var i=void 0!==t?t:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||n.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n";},n.writeMediaSection=function(e,t,r,i){var o=n.writeRtpDescription(e.kind,t);if(o+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n");}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),o;},n.getDirection=function(e,t){for(var r=n.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2);}return t?n.getDirection(t):"sendrecv";},n.getKind=function(e){return n.splitLines(e)[0].split(" ")[0].substr(2);},n.isRejected=function(e){return"0"===e.split(" ",2)[1];},n.parseMLine=function(e){var t=n.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")};},n.parseOLine=function(e){var t=n.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]};},n.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=n.splitLines(e),r=0;r<t.length;r++)if(t[r].length<2||"="!==t[r].charAt(1))return!1;return!0;},"object"==typeof t&&(t.exports=n);},{}]},{},[1])(1);}),Date.prototype.Format=function(e){let t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(let r in t)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[r]:("00"+t[r]).substr((""+t[r]).length)));return e;},window.MLOG=new MyLog(4);class Emitter{on(e,t,r){const n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:r}),this;}once(e,t,r){const n=this;function i(...o){n.off(e,i),t.apply(r,o);}return i._=t,this.on(e,i,r);}emit(e,...t){const r=((this.e||(this.e={}))[e]||[]).slice();for(let e=0;e<r.length;e+=1)r[e].fn.apply(r[e].ctx,t);return this;}off(e,t){const r=this.e||(this.e={});if(!e)return Object.keys(r).forEach(e=>{delete r[e];}),void delete this.e;const n=r[e],i=[];if(n&&t)for(let e=0,r=n.length;e<r;e+=1)n[e].fn!==t&&n[e].fn._!==t&&i.push(n[e]);return i.length?r[e]=i:delete r[e],this;}}class VideoDraw{constructor(e){this.dom=e,this.trackGenerator=null,this.$video=null,this.vwriter=null,this.init();}init(){this.$video=document.getElementById(this.dom),this.trackGenerator=new MediaStreamTrackGenerator({kind:"video"}),this.$video.srcObject=new MediaStream([this.trackGenerator]),this.vwriter=this.trackGenerator.writable.getWriter();}destroy(){this.$video&&(this.$video.pause(),this.$video.currentTime=0,this.$video.src="",this.$video.removeAttribute("src"),this.$video=null),this.trackGenerator&&(this.trackGenerator.stop(),this.trackGenerator=null),this.vwriter&&(this.vwriter.close(),this.vwriter=null);}draw(e){this.vwriter&&this.vwriter.write(e);}}class CanvasDraw{constructor(e){this.dom=e,this.context2D=null,this.$canvas=null,this.init();}init(){this.$canvas=document.getElementById(this.dom),this.context2D=this.$canvas.getContext("2d");}destroy(){this.context2D&&(this.context2D.clearRect(0,0,this.$canvas.width,this.$canvas.height),this.context2D=null),this.$canvas&&(this.$canvas=null);}draw(e){this.context2D&&(this.$canvas.width=e.displayWidth,this.$canvas.height=e.displayHeight,this.context2D.drawImage(e,0,0,this.$canvas.width,this.$canvas.height),e.close());}}class WebCodecsDraw{constructor(e){this.dom=e,this.isVideo=!1,this.drawer=null,this.init(e);}static supportMediaStreamTrack(){return window.MediaStreamTrackGenerator&&"function"==typeof window.MediaStreamTrackGenerator;}init(e){this.isVideo=WebCodecsDraw.supportMediaStreamTrack(),this.drawer=this.isVideo?new VideoDraw(e):new CanvasDraw(e);}destroy(){this.drawer.destroy(),this.isVideo=!1,this.drawer=null;}draw(e){this.drawer&&this.drawer.draw(e);}}class WCSDecoder{constructor(e){this.sps=null,this.pps=null,this.spsLen=null,this.ppsLen=null,this.spsFrame=7,this.ppsFrame=8,this.seiFrame=6,this.keyFrame=5,this.initFrame=0,this.isFirstSps=!0,this.hasInit=!1,this.firstFrame=!0,this.vfmtSoft=null,this.hasSEI=!0,this.decoder=null,this.loop=null,this.emitter=null,this.keyFrameHead=null,this.frameQueue=[],this.visableEvent=null,this.stopPushing=!1,this.drawer=null,this.errorTime=null,this.dom=e,this.initDrawer(e),this.initDecoder(),this.initVisable();}static supportMediaStreamTrack(){return WebCodecsDraw.supportMediaStreamTrack();}static isSupportWCS(){return"VideoDecoder"in window&&("https:"===document.location.protocol||window.location.host.startsWith("localhost"));}setEmitter(e){this.emitter=e;}initDrawer(e){this.drawer=new WebCodecsDraw(e);}initVisable(){this.visableEvent=()=>{this.stopPushing=document.hidden,this.errorTime&&clearTimeout(this.errorTime),document.hidden?this.stopError=!0:(this.frameQueue=[],this.errorTime=setTimeout(()=>{this.stopError=!1,this.errorTime=null;},3e3));};document.addEventListener("visibilitychange",this.visableEvent);}cancelVisable(){document.removeEventListener("visibilitychange",this.visableEvent);}initDecoder(){const e=this;this.decoder=new VideoDecoder({output:t=>{e.handleDecode(t);},error:t=>{e.handleError(t);}});}handleDecode(e){this.drawer&&(this.firstFrame&&this.emitter.emit("wcs_decode_first_frame"),this.firstFrame=!1,this.drawer.draw(e),e.close());}handleError(e){this.stopError||this.emitter.emit("wcs_decode_error");}getVideoConfigCodecs(e){let t=e.subarray(5,9),r="avc1.";for(let e=0;e<3;e++){let n=t[e].toString(16);n.length<2&&(n="0"+n),r+=n;}return r;}formatVideoDecoderConfigure(e){return{codec:this.getVideoConfigCodecs(e),avc:"annexb",hardwareAcceleration:"prefer-hardware"};}decodeFrame(e,t){const _this=this;return _call(function(){let _exit=false;return _await(_invoke(function(){if(!_this.hasInit){const e=_this.formatVideoDecoderConfigure(t);const _this$decoder$configu=_this.decoder.configure(e);return _await(VideoDecoder.isConfigSupported(e),function(_VideoDecoder$isConfi){const _temp=_VideoDecoder$isConfi.supported?void(_this.hasInit=!0):void _this.handleError();_exit=true;return _temp;});}},function(_result){if(_exit)return _result;if(!_this.hasInit)return;const r=new EncodedVideoChunk({timestamp:1e3*new Date().getTime(),type:e===_this.keyFrame?"key":"delta",data:t});try{_this.decoder.decode(r);}catch(e){}}));});}getFrameType(e){let t=null;return t=0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]?e.slice(4,5):e.slice(3,4),31&t[0];}pushFrame(e){this.stopPushing||this.frameQueue.push(e);}popFrame(){return this.frameQueue.shift();}reSet(){this.hasInit=!1,this.isFirstSps=!0,this.sps=null,this.pps=null,this.spsLen=null,this.ppsLen=null,this.keyFrameHead=null,this.vfmtSoft=null,this.firstFrame=!0,this.drawer&&(this.drawer.destroy(),this.drawer=null),this.decoder&&("closed"!==this.decoder.state&&this.decoder.close(),this.decoder=null);}destroy(){this.loopStop(),this.reSet(),this.cancelVisable();}loopStop(){this.loop&&(cancelAnimationFrame(this.loop),this.loop=null),this.frameQueue=[];}getKeyFrameHead(e,t){const r=new ArrayBuffer(e.length+t.length),n=new Uint8Array(r),i=e.length;return n.set(e,0),n.set(t,i),n;}reloadWCS(){let e=navigator.userAgent,t=e.indexOf("Android")>-1||e.indexOf("Adr")>-1,r=e.indexOf("Win64")>=0||e.indexOf("Win32")>=0;return!t&&!r;}handleFrame(e){let t=this.getFrameType(e);if([this.spsFrame,this.ppsFrame].includes(t)){if(this.keyFrameHead){if(this.isFirstSps||t!==this.spsFrame)return;{const r=e.subarray(this.sps.length+this.pps.length);if(null==this.vfmtSoft&&(this.vfmtSoft=this.getFrameType(r)===this.seiFrame),r.length&&!this.vfmtSoft)e=r,t=this.getFrameType(e);else if(r.length&&this.vfmtSoft){if(this.hasSEI){let n=0;for(let i=0;i<r.length;i++)if(0===r[i]&&0===r[i+1]&&1===r[i+2]&&(n++,2===n)){this.hasSEI=!1;const n=new Uint8Array(4+r.length-i-3);n.set(e.subarray(0,4),0),n.set(r.subarray(i+3),4),e=n,t=this.getFrameType(e);break;}}else{const n=new Uint8Array(4+r.length-3);n.set(e.subarray(0,4),0),n.set(r.subarray(3),4),e=n,t=this.getFrameType(e);}}else this.reloadWCS()&&(this.hasSEI=!0,this.reSet(),this.initDrawer(this.dom),this.initDecoder());}}if(t===this.spsFrame?this.sps=e:t===this.ppsFrame&&(this.pps=e),this.sps&&this.pps&&this.isFirstSps)return this.keyFrameHead=this.getKeyFrameHead(this.sps,this.pps),this.decodeFrame(this.initFrame,this.keyFrameHead),void(this.isFirstSps=!1);}if(this.sps&&this.pps){const r=e;let n=null;if(t===this.keyFrame){const e=this.sps.length+this.pps.length+r.length,t=new ArrayBuffer(e);n=new Uint8Array(t),n.set(this.sps,0),n.set(this.pps,this.sps.length),n.set(r,e-r.length);}else n=r;this.decodeFrame(t,n);}}loopAction(){if(this.loop)return;const e=this;this.loop=requestAnimationFrame(function t(){if(e.frameQueue.length>0){const t=e.popFrame();e.handleFrame(t.subarray(7));}e.loop=requestAnimationFrame(t);});}decode(e){this.pushFrame(e),this.loopAction();}}PeerGW.isWebrtcSupported=function(){return void 0!==window.RTCPeerConnection&&null!==window.RTCPeerConnection;},PeerGW.randomIndex=0,PeerGW.randomString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=""+PeerGW.randomIndex++,n=0;n<e;n++){var i=Math.floor(Math.random()*t.length);r+=t.substring(i,i+1);}return r;};var GWSESSION_CREATE_REQ="create",GWSESSION_DESTROY_REQ="destroy",GWSESSION_KEEPALIVE_REQ="keepalive",GWSESSION_TIMEOUT="timeout",GWSESSION_MESSAGE="message",GWSESSION_ATTACH="attach",GWSESSION_DETACH="detach",GWSESSION_SCREENING="screening",GWSESSION_START="start",GWSESSION_STOP="stop",GWSESSION_TRICKLE="trickle",GWSESSION_HANGUP="hangup",GWSESSION_RMSG="rmsg",PEERGW_ERR_CODE_UNSUPPORTED=-1e4,PEERGW_ERR_CODE_INVALID_SERVER=-10001,PEERGW_ERR_CODE_INVALID_CONTROL=-10002,PEERGW_ERR_CODE_CONNECT_FAILED=-10101,PEERGW_ERR_CODE_SESSION_CREATE=-10201,PEERGW_ERR_CODE_SESSION_ATTACH=-10202,opaqueId="redfinger-"+PeerGW.randomString(10);function PeerGW(e){const I=_async(function(e,t,r,n,i){let _exit6=false;var p,h,g,y;var o=m[e];if(null==o||null===o.webrtcStuff||void 0===o.webrtcStuff)return MLOG.warn(MLOG.w("Invalid handle")),void n.onerror("Invalid handle");var a=o.webrtcStuff;MLOG.debug(MLOG.d("streamsDone:",i)),i&&(MLOG.debug(MLOG.d("  -- Audio tracks:",i.getAudioTracks())),MLOG.debug(MLOG.d("  -- Video tracks:",i.getVideoTracks())));var u=!1;if(a.myStream&&r.update&&!a.streamExternal){if((!r.update&&A(r)||r.update&&(r.addAudio||r.replaceAudio))&&i.getAudioTracks()&&i.getAudioTracks().length)if(a.myStream.addTrack(i.getAudioTracks()[0]),PeerGW.unifiedPlan){MLOG.debug(MLOG.d((r.replaceAudio?"Replacing":"Adding")+" audio track:",i.getAudioTracks()[0]));var l=null;if((h=a.pc.getTransceivers())&&h.length>0)for(p=0;p<h.length;p++){if((y=h[p]).sender&&y.sender.track&&"audio"===y.sender.track.kind||y.receiver&&y.receiver.track&&"audio"===y.receiver.track.kind){l=y;break;}}l&&l.sender?l.sender.replaceTrack(i.getAudioTracks()[0]):a.pc.addTrack(i.getAudioTracks()[0],i);}else MLOG.debug(MLOG.d((r.replaceAudio?"Replacing":"Adding")+" audio track:",i.getAudioTracks()[0])),a.pc.addTrack(i.getAudioTracks()[0],i);if((!r.update&&G(r)||r.update&&(r.addVideo||r.replaceVideo))&&i.getVideoTracks()&&i.getVideoTracks().length)if(a.myStream.addTrack(i.getVideoTracks()[0]),PeerGW.unifiedPlan){MLOG.debug(MLOG.d((r.replaceVideo?"Replacing":"Adding")+" video track:",i.getVideoTracks()[0]));g=null;if((h=a.pc.getTransceivers())&&h.length>0)for(p=0;p<h.length;p++){if((y=h[p]).sender&&y.sender.track&&"video"===y.sender.track.kind||y.receiver&&y.receiver.track&&"video"===y.receiver.track.kind){g=y;break;}}g&&g.sender?g.sender.replaceTrack(i.getVideoTracks()[0]):a.pc.addTrack(i.getVideoTracks()[0],i);}else MLOG.debug(MLOG.d((r.replaceVideo?"Replacing":"Adding")+" video track:",i.getVideoTracks()[0])),a.pc.addTrack(i.getVideoTracks()[0],i);}else a.myStream=i,u=!0;return _invoke(function(){if(!a.pc){var b={iceServers:s,iceTransportPolicy:d,bundlePolicy:c};"chrome"===PeerGW.webRTCAdapter.browserDetails.browser&&(b.sdpSemantics=PeerGW.webRTCAdapter.browserDetails.version<72&&null!==PeerGW.webRTCAdapter.browserDetails.version?"plan-b":"unified-plan");var v={optional:[{DtlsSrtpKeyAgreement:!0}]};if(!0===f&&v.optional.push({googIPv6:!0}),n.rtcConstraints&&"object"==typeof n.rtcConstraints)for(var p in MLOG.debug(MLOG.d("Adding custom PeerConnection constraints:",n.rtcConstraints)),n.rtcConstraints)v.optional.push(n.rtcConstraints[p]);"edge"===PeerGW.webRTCAdapter.browserDetails.browser&&(b.bundlePolicy="max-bundle"),MLOG.debug(MLOG.d("Creating PeerConnection")),MLOG.debug(MLOG.d(v));return _continue(_catch(function(){TrackingTmpData.webrtcLinkStartTime=new Date().getTime(),TrackingTmpData.webrtcLinkResult=void 0,a.pc=new RTCPeerConnection(b,v);},function(e){let t=new Date().getTime();const _MLOG$warn3=MLOG.warn(MLOG.w("WebRTC not supported by this browser")),_MLOG$error4=MLOG.error(MLOG.e(e)),_redfinger$tracking$s=redfinger.tracking.setBaseInfo({webrtcLinkConnectTime:t-TrackingTmpData.webrtcLinkStartTime,webrtcLinkConnectResult:-1}),_TrackingTmpData$webr=TrackingTmpData.webrtcLinkResult=-1;return _await(C(PEERGW_ERR_CODE_UNSUPPORTED,"WebRTC not supported by this browser"),function(_C9){const _temp10=void _C9;_exit6=true;return _temp10;});}),function(_result8){if(_exit6)return _result8;a.pc.getStats&&(a.volume={},a.bitrate.value="0 kbits/sec"),MLOG.debug(MLOG.d("Preparing local SDP and gathering candidates (trickle="+a.trickle+")")),a.pc.oniceconnectionstatechange=function(e){a.pc&&o.iceState(a.pc.iceConnectionState);},a.pc.onicecandidate=function(t){if(null==t.candidate||"edge"===PeerGW.webRTCAdapter.browserDetails.browser&&t.candidate.candidate.indexOf("endOfCandidates")>0)MLOG.debug(MLOG.d("End of candidates.")),a.iceDone=!0,!0===a.trickle?E(e,{completed:!0}):function(e,t){var r=m[e];if(null==r||null===r.webrtcStuff||void 0===r.webrtcStuff)return void MLOG.debug(MLOG.d("Invalid handle, not sending anything"));var n=r.webrtcStuff;if(MLOG.debug(MLOG.d("Sending offer/answer SDP...")),null===n.mySdp||void 0===n.mySdp)return void MLOG.debug(MLOG.d("Local SDP instance is invalid, not sending anything..."));n.mySdp={type:n.pc.localDescription.type,sdp:n.pc.localDescription.sdp},!1===n.trickle&&(n.mySdp.trickle=!1);MLOG.debug(MLOG.d(t)),n.sdpSent=!0,t.onsuccess(n.mySdp);}(e,n);else{var r={candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex};!0===a.trickle&&E(e,r);}},a.pc.ontrack=function(e){MLOG.debug(MLOG.d("Handling Remote Track")),MLOG.debug(MLOG.d(e)),e.streams&&(a.remoteStream=e.streams[0],o.onremotestream(a.remoteStream),e.track&&!e.track.onended&&(MLOG.debug(MLOG.d("Adding onended callback to track:",e.track)),e.track.onended=function(e){MLOG.debug(MLOG.d("Remote track removed:",e)),a.remoteStream&&(a.remoteStream.removeTrack(e.target),o.onremotestream(a.remoteStream));}));};});}},function(_result9){if(_exit6)return _result9;if(u&&null!=i){MLOG.debug(MLOG.d("Adding local stream"));var S=!0===n.simulcast2;i.getTracks().forEach(function(e){MLOG.debug(MLOG.d("Adding local track:",e)),S?"audio"===e.kind?a.pc.addTrack(e,i):(MLOG.debug(MLOG.d("Enabling rid-based simulcasting:",e)),a.pc.addTransceiver(e,{direction:"sendrecv",streams:[i],sendEncodings:[{rid:"h",active:!0,maxBitrate:9e5},{rid:"m",active:!0,maxBitrate:3e5,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:1e5,scaleResolutionDownBy:4}]})):a.pc.addTrack(e,i);});}if(function(e){if(MLOG.debug(MLOG.d("isDataEnabled:",e)),"edge"==PeerGW.webRTCAdapter.browserDetails.browser)return MLOG.warn(MLOG.w("Edge doesn't support data channels yet")),!1;return null!=e&&!0===e.data;}(r)&&!a.dataChannel[PeerGW.dataChanDefaultLabel])try{MLOG.debug(MLOG.d("Creating data channel")),R(e,PeerGW.dataChanDefaultLabel,!1),a.pc.ondatachannel=function(t){MLOG.debug(MLOG.d("Data channel created by Janus:",t)),R(e,t.channel.label,t.channel);};}catch(e){return MLOG.error(MLOG.e(e)),MLOG.warn(MLOG.w("WebRTC not supported by this browser")),void C(PEERGW_ERR_CODE_UNSUPPORTED,"WebRTC not supported by this browser");}return function(){if(a.myStream&&o.onlocalstream(a.myStream),null==t)!function(e,t,r){r.customizeSdp="function"==typeof r.customizeSdp?r.customizeSdp:PeerGW.noop;var n=m[e];if(null==n||null===n.webrtcStuff||void 0===n.webrtcStuff)return MLOG.warn(MLOG.w("Invalid handle")),void r.onerror("Invalid handle");var i=n.webrtcStuff,o=!0===r.simulcast;o?MLOG.debug(MLOG.d("Creating offer (iceDone="+i.iceDone+", simulcast="+o+")")):MLOG.debug(MLOG.d("Creating offer (iceDone="+i.iceDone+")"));var a={};if(PeerGW.unifiedPlan){var s=null,d=null,c=i.pc.getTransceivers();if(c&&c.length>0)for(var f=0;f<c.length;f++){var u=c[f];u.sender&&u.sender.track&&"audio"===u.sender.track.kind||u.receiver&&u.receiver.track&&"audio"===u.receiver.track.kind?s||(s=u):(u.sender&&u.sender.track&&"video"===u.sender.track.kind||u.receiver&&u.receiver.track&&"video"===u.receiver.track.kind)&&(d||(d=u));}var l=A(t),p=D(t);l||p?l&&p?s&&(s.setDirection?s.setDirection("sendrecv"):s.direction="sendrecv",MLOG.debug(MLOG.d("Setting audio transceiver to sendrecv:",s))):l&&!p?s&&(s.setDirection?s.setDirection("sendonly"):s.direction="sendonly",MLOG.debug(MLOG.d("Setting audio transceiver to sendonly:",s))):!l&&p&&(s?(s.setDirection?s.setDirection("recvonly"):s.direction="recvonly",MLOG.debug(MLOG.d("Setting audio transceiver to recvonly:",s))):(s=i.pc.addTransceiver("audio",{direction:"recvonly"}),MLOG.debug(MLOG.d("Adding recvonly audio transceiver:",s)))):t.removeAudio&&s&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive",MLOG.debug(MLOG.d("Setting audio transceiver to inactive:",s)));var h=G(t),g=x(t);h||g?h&&g?d&&(d.setDirection?d.setDirection("sendrecv"):d.direction="sendrecv",MLOG.debug(MLOG.d("Setting video transceiver to sendrecv:",d))):h&&!g?d&&(d.setDirection?d.setDirection("sendonly"):d.direction="sendonly",MLOG.debug(MLOG.d("Setting video transceiver to sendonly:",d))):!h&&g&&(d?(d.setDirection?d.setDirection("recvonly"):d.direction="recvonly",MLOG.debug(MLOG.d("Setting video transceiver to recvonly:",d))):(d=i.pc.addTransceiver("video",{direction:"recvonly"}),MLOG.debug(MLOG.d("Adding recvonly video transceiver:",d)))):t.removeVideo&&d&&(d.setDirection?d.setDirection("inactive"):d.direction="inactive",MLOG.debug(MLOG.d("Setting video transceiver to inactive:",d)));}else a.offerToReceiveAudio=D(t),a.offerToReceiveVideo=x(t);var y=!0===r.iceRestart;y&&(a.iceRestart=!0);MLOG.debug(MLOG.d(a));var b=G(t);if(b&&o&&"firefox"===PeerGW.webRTCAdapter.browserDetails.browser){MLOG.debug(MLOG.d("Enabling Simulcasting for Firefox (RID)"));var v=i.pc.getSenders().find(function(e){return"video"==e.track.kind;});if(v){var S=v.getParameters();S||(S={}),S.encodings=[{rid:"h",active:!0,maxBitrate:9e5},{rid:"m",active:!0,maxBitrate:3e5,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:1e5,scaleResolutionDownBy:4}],v.setParameters(S);}}i.pc.createOffer(a).then(function(e){MLOG.debug(MLOG.d(e));var t={type:e.type,sdp:e.sdp};r.customizeSdp(t),e.sdp=t.sdp,MLOG.debug(MLOG.d("Setting local description")),b&&o&&("chrome"===PeerGW.webRTCAdapter.browserDetails.browser||"safari"===PeerGW.webRTCAdapter.browserDetails.browser?(MLOG.debug(MLOG.d("Enabling Simulcasting for Chrome (SDP munging)")),e.sdp=function(e){for(var t=e.split("\r\n"),r=!1,n=[-1],i=[-1],o=null,a=null,s=null,d=null,c=-1,f=0;f<t.length;f++){if(l=t[f].match(/m=(\w+) */)){if("video"===l[1]){if(!(n[0]<0)){c=f;break;}r=!0;}else if(n[0]>-1){c=f;break;}}else if(r){var u=t[f].match(/a=ssrc-group:FID (\d+) (\d+)/);if(u)n[0]=u[1],i[0]=u[2],t.splice(f,1),f--;else{if(n[0]){if((h=t[f].match("a=ssrc:"+n[0]+" cname:(.+)"))&&(o=h[1]),(h=t[f].match("a=ssrc:"+n[0]+" msid:(.+)"))&&(a=h[1]),(h=t[f].match("a=ssrc:"+n[0]+" mslabel:(.+)"))&&(s=h[1]),(h=t[f].match("a=ssrc:"+n[0]+" label:(.+)"))&&(d=h[1]),0===t[f].indexOf("a=ssrc:"+i[0])){t.splice(f,1),f--;continue;}if(0===t[f].indexOf("a=ssrc:"+n[0])){t.splice(f,1),f--;continue;}}0!=t[f].length||(t.splice(f,1),f--);}}}if(n[0]<0){c=-1,r=!1;for(f=0;f<t.length;f++){var l;if(l=t[f].match(/m=(\w+) */)){if("video"===l[1]){if(!(n[0]<0)){c=f;break;}r=!0;}else if(n[0]>-1){c=f;break;}}else if(r){if(n[0]<0){var p=t[f].match(/a=ssrc:(\d+)/);if(p){n[0]=p[1],t.splice(f,1),f--;continue;}}else{var h;if((h=t[f].match("a=ssrc:"+n[0]+" cname:(.+)"))&&(o=h[1]),(h=t[f].match("a=ssrc:"+n[0]+" msid:(.+)"))&&(a=h[1]),(h=t[f].match("a=ssrc:"+n[0]+" mslabel:(.+)"))&&(s=h[1]),(h=t[f].match("a=ssrc:"+n[0]+" label:(.+)"))&&(d=h[1]),0===t[f].indexOf("a=ssrc:"+i[0])){t.splice(f,1),f--;continue;}if(0===t[f].indexOf("a=ssrc:"+n[0])){t.splice(f,1),f--;continue;}}0!=t[f].length||(t.splice(f,1),f--);}}}if(n[0]<0)return MLOG.warn(MLOG.w("Couldn't find the video SSRC, simulcasting NOT enabled")),e;c<0&&(c=t.length);n[1]=Math.floor(4294967295*Math.random()),n[2]=Math.floor(4294967295*Math.random()),i[1]=Math.floor(4294967295*Math.random()),i[2]=Math.floor(4294967295*Math.random());for(f=0;f<n.length;f++)o&&(t.splice(c,0,"a=ssrc:"+n[f]+" cname:"+o),c++),a&&(t.splice(c,0,"a=ssrc:"+n[f]+" msid:"+a),c++),s&&(t.splice(c,0,"a=ssrc:"+n[f]+" mslabel:"+s),c++),d&&(t.splice(c,0,"a=ssrc:"+n[f]+" label:"+d),c++),o&&(t.splice(c,0,"a=ssrc:"+i[f]+" cname:"+o),c++),a&&(t.splice(c,0,"a=ssrc:"+i[f]+" msid:"+a),c++),s&&(t.splice(c,0,"a=ssrc:"+i[f]+" mslabel:"+s),c++),d&&(t.splice(c,0,"a=ssrc:"+i[f]+" label:"+d),c++);t.splice(c,0,"a=ssrc-group:FID "+n[2]+" "+i[2]),t.splice(c,0,"a=ssrc-group:FID "+n[1]+" "+i[1]),t.splice(c,0,"a=ssrc-group:FID "+n[0]+" "+i[0]),t.splice(c,0,"a=ssrc-group:SIM "+n[0]+" "+n[1]+" "+n[2]),(e=t.join("\r\n")).endsWith("\r\n")||(e+="\r\n");return e;}(e.sdp)):"firefox"!==PeerGW.webRTCAdapter.browserDetails.browser&&MLOG.debug(MLOG.d("simulcast=true, but this is not Chrome nor Firefox, ignoring"))),i.mySdp=e.sdp,i.pc.setLocalDescription(e).catch(r.onerror),i.mediaConstraints=a,i.iceDone||i.trickle?(MLOG.debug(MLOG.d("Offer ready")),r.onsuccess(e)):MLOG.debug(MLOG.d("Waiting for all candidates..."));},r.onerror);}(e,r,n);else return _catch(function(){t.sdp=redfinger.transSdpHost(t.sdp),a.pc.setRemoteDescription(t).then(_async(function(){let _exit7=false;return _invoke(function(){if(MLOG.debug(MLOG.d("Remote description accepted!")),a.remoteSdp=t.sdp,a.candidates&&a.candidates.length>0){var i=0;return _continue(_for(function(){return!_exit7&&i<a.candidates.length;},function(){return i++;},function(){var o=a.candidates[i];return function(){if(MLOG.debug(MLOG.d("Adding remote candidate:",o)),o&&!0!==o.completed){return _invoke(function(){if(null===(o=redfinger.transGWhost(o))){const _MLOG$warn4=MLOG.warn(MLOG.w("tansGWdomain failed"));return _await(C(PEERGW_ERR_CODE_CONNECT_FAILED,"webrtc domian dns analyze fail"),function(_C11){const _temp11=void _C11;_exit7=true;return _temp11;});}},function(_result12){if(_exit7)return _result12;a.pc.addIceCandidate(o);});}else a.pc.addIceCandidate();}();}),function(_result14){if(_exit7)return _result14;a.candidates=[];});}},function(_result15){if(_exit7)return _result15;!function(e,t,r){r.customizeSdp="function"==typeof r.customizeSdp?r.customizeSdp:PeerGW.noop;var n=m[e];if(null==n||null===n.webrtcStuff||void 0===n.webrtcStuff)return MLOG.error(MLOG.e("Invalid handle")),void r.onerror("Invalid handle");var i=n.webrtcStuff,o=!0===r.simulcast;o?MLOG.debug(MLOG.d("Creating answer (iceDone="+i.iceDone+", simulcast="+o+")")):MLOG.debug(MLOG.d("Creating answer (iceDone="+i.iceDone+")"));var a=null;if(PeerGW.unifiedPlan){a={};var s=null,d=null,c=i.pc.getTransceivers();if(c&&c.length>0)for(var f=0;f<c.length;f++){var u=c[f];u.sender&&u.sender.track&&"audio"===u.sender.track.kind||u.receiver&&u.receiver.track&&"audio"===u.receiver.track.kind?s||(s=u):(u.sender&&u.sender.track&&"video"===u.sender.track.kind||u.receiver&&u.receiver.track&&"video"===u.receiver.track.kind)&&(d||(d=u));}var l=A(t),p=D(t);if(l||p){if(l&&p){if(s)try{s.setDirection?s.setDirection("sendrecv"):s.direction="sendrecv",MLOG.debug(MLOG.d("Setting audio transceiver to sendrecv:",s));}catch(e){MLOG.warn(MLOG.w(e));}}else if(l&&!p)try{s&&(s.setDirection?s.setDirection("sendonly"):s.direction="sendonly",MLOG.debug(MLOG.d("Setting audio transceiver to sendonly:",s)));}catch(e){MLOG.warn(MLOG.w(e));}else if(!l&&p)if(s)try{s.setDirection?s.setDirection("recvonly"):s.direction="recvonly",MLOG.debug(MLOG.d("Setting audio transceiver to recvonly:",s));}catch(e){MLOG.warn(MLOG.w(e));}else s=i.pc.addTransceiver("audio",{direction:"recvonly"}),MLOG.debug(MLOG.d("Adding recvonly audio transceiver:",s));}else if(t.removeAudio&&s)try{s.setDirection?s.setDirection("inactive"):s.direction="inactive",MLOG.debug(MLOG.d("Setting audio transceiver to inactive:",s));}catch(e){MLOG.warn(MLOG.w(e));}var h=G(t),g=x(t);if(h||g){if(h&&g){if(d)try{d.setDirection?d.setDirection("sendrecv"):d.direction="sendrecv",MLOG.debug(MLOG.d("Setting video transceiver to sendrecv:",d));}catch(e){MLOG.warn(MLOG.w(e));}}else if(h&&!g){if(d)try{d.setDirection?d.setDirection("sendonly"):d.direction="sendonly",MLOG.debug(MLOG.d("Setting video transceiver to sendonly:",d));}catch(e){MLOG.warn(MLOG.w(e));}}else if(!h&&g)if(d)try{d.setDirection?d.setDirection("recvonly"):d.direction="recvonly",MLOG.debug(MLOG.d("Setting video transceiver to recvonly:",d));}catch(e){MLOG.warn(MLOG.w(e));}else d=i.pc.addTransceiver("video",{direction:"recvonly"}),MLOG.debug(MLOG.d("Adding recvonly video transceiver:",d));}else if(t.removeVideo&&d)try{d.setDirection?d.setDirection("inactive"):d.direction="inactive",MLOG.debug(MLOG.d("Setting video transceiver to inactive:",d));}catch(e){MLOG.warn(MLOG.w(e));}}else a="firefox"==PeerGW.webRTCAdapter.browserDetails.browser||"edge"==PeerGW.webRTCAdapter.browserDetails.browser?{offerToReceiveAudio:D(t),offerToReceiveVideo:x(t)}:{mandatory:{OfferToReceiveAudio:D(t),OfferToReceiveVideo:x(t)}};MLOG.debug(MLOG.d(a));var y=G(t);if(y&&o&&"firefox"===PeerGW.webRTCAdapter.browserDetails.browser){MLOG.debug(MLOG.d("Enabling Simulcasting for Firefox (RID)"));var b=i.pc.getSenders()[1];b.getParameters();b.setParameters({encodings:[{rid:"high",active:!0,priority:"high",maxBitrate:1e6},{rid:"medium",active:!0,priority:"medium",maxBitrate:3e5},{rid:"low",active:!0,priority:"low",maxBitrate:1e5}]});}i.pc.createAnswer(a).then(function(e){MLOG.debug(MLOG.d(e));var t={type:e.type,sdp:e.sdp};r.customizeSdp(t),e.sdp=t.sdp,MLOG.debug(MLOG.d("Setting local description")),y&&o&&("chrome"===PeerGW.webRTCAdapter.browserDetails.browser?MLOG.debug(MLOG.d("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it")):"firefox"!==PeerGW.webRTCAdapter.browserDetails.browser&&MLOG.debug(MLOG.d("simulcast=true, but this is not Chrome nor Firefox, ignoring"))),i.mySdp=e.sdp;try{i.pc.setLocalDescription(e).catch(e=>{MLOG.error(MLOG.e("WebRTC not supported by this browser")),r.onerror(e);});}catch(e){MLOG.error(MLOG.e("WebRTC not supported by this browser")),r.onerror(e);}i.mediaConstraints=a,i.iceDone||i.trickle?r.onsuccess(e):MLOG.debug(MLOG.d("Waiting for all candidates..."));},r.onerror);}(e,r,n);});})).catch(_async(function(e){const _MLOG$error8=MLOG.error(MLOG.e("WebRTC not supported by this browser")),_MLOG$error7=MLOG.error(MLOG.e(e));return _await(C(PEERGW_ERR_CODE_UNSUPPORTED,"WebRTC not supported by this browser"),function(_C12){_C12;});}));},function(e){const _MLOG$error6=MLOG.error(MLOG.e("WebRTC not supported by this browser")),_MLOG$error5=MLOG.error(MLOG.e(e));return _await(C(PEERGW_ERR_CODE_UNSUPPORTED,"WebRTC not supported by this browser"),function(_C10){return void _C10;});});}();});});const C=function(t,r){return _call(O,function(){0,e.onerror(t,r);});};var t=null,r={},n=null,i=null,o=0,a=e.server;Array.isArray(a)?(MLOG.info(MLOG.i("Multiple servers provided ("+a.length+"), will use the first that works")),a=null,i=e.server,MLOG.debug(MLOG.d(i))):MLOG.info(MLOG.i("Using WebSockets to contact Janus Server: "+a));var s=e.iceServers;null==s&&(s=[{urls:"stun:stun.l.google.com:19302"}]);var d=e.iceTransportPolicy,c=e.bundlePolicy,f=e.ipv6;null==f&&(f=!1);var u=10;void 0!==e.max_poll_events&&null!==e.max_poll_events&&(u=e.max_poll_events),u<1&&(u=1);var l=null;void 0!==e.token&&null!==e.token&&(l=e.token);var p=null;void 0!==e.apisecret&&null!==e.apisecret&&(p=e.apisecret),this.destroyOnUnload=!0,void 0!==e.destroyOnUnload&&null!==e.destroyOnUnload&&(this.destroyOnUnload=!0===e.destroyOnUnload);var h=1e3;void 0!==e.keepAlivePeriod&&null!==e.keepAlivePeriod&&(h=e.keepAlivePeriod),isNaN(h)&&(h=3e4);var g=6e4;void 0!==e.longPollTimeout&&null!==e.longPollTimeout&&(g=e.longPollTimeout),isNaN(g)&&(g=6e4);var y=!1,b=null,m={},v=this,S={},k=new Date();function T(e){var n=PeerGW.randomString(10),s={janus:GWSESSION_CREATE_REQ,transaction:n};for(var d in null!=l&&(s.token=l),null!=p&&(s.apisecret=p),null===a&&Array.isArray(i)&&(a=i[o],MLOG.debug(MLOG.d("Server #"+(o+1)+": trying WebSockets to contact Janus ("+a+")"))),TrackingTmpData.signalLinkStartTime=new Date().getTime(),TrackingTmpData.signalLinkResult=void 0,t=new WebSocket(a,"janus-protocol"),r={error:function(){if(MLOG.error(MLOG.e("Error connecting to the Janus WebSockets server... "+a)),Array.isArray(i)&&!e.reconnect){if(++o==i.length)return;return a=null,void setTimeout(function(){T(e);},200);}if(!redfinger.isDestory&&void 0===TrackingTmpData.signalLinkResult){let e=new Date().getTime();TrackingTmpData.signalLinkResult=-1,redfinger.tracking.setBaseInfo({signalConnectTime:e-TrackingTmpData.signalLinkStartTime,signalLinkConnectResult:-1});}},open:function(){let e=new Date().getTime();TrackingTmpData.signalLinkResult=0,redfinger.tracking.setBaseInfo({signalConnectTime:e-TrackingTmpData.signalLinkStartTime,signalLinkConnectResult:0}),S[n]=_async(function(e){let _exit2=false;return _invoke(function(){if("success"!==e.janus){const _MLOG$debug=MLOG.debug(MLOG.d("Ooops: "+e.error.code+" "+e.error.reason));return _await(C(PEERGW_ERR_CODE_SESSION_CREATE,e.error.reason),function(_C){const _temp2=void _C;_exit2=true;return _temp2;});}},function(_result2){if(_exit2)return _result2;y=!0,b=e.session_id?e.session_id:e.data.id,PeerGW.sessions[b]=v,setTimeout(w,0);});}),1==t.readyState&&t.send(JSON.stringify(s)),MLOG.debug(MLOG.d(JSON.stringify(s)));},message:function(e){!function(e,r){0;var n=e.janus;if("keepalive"!==n){if("ack"!==n){if("success"!==n){if("trickle"===n){if(null==(d=e.sender))return void MLOG.debug(MLOG.d("Missing sender..."));if(null==(f=m[d]))return void MLOG.debug(MLOG.d("This handle is not attached to this session"));var i=e.candidate;MLOG.debug(MLOG.d("Got a trickled candidate on session "+b)),MLOG.debug(MLOG.d(JSON.stringify(i)));var o=f.webrtcStuff;o.pc&&o.remoteSdp?(MLOG.debug(MLOG.d("Adding remote candidate:",i)),i&&!0!==i.completed?o.pc.addIceCandidate(i):o.pc.addIceCandidate()):(MLOG.info(MLOG.i("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate")),o.candidates||(o.candidates=[]),o.candidates.push(i),MLOG.debug(MLOG.d(o.candidates)));}else{if("webrtcup"===n)return MLOG.debug(MLOG.d("Got a webrtcup event on session "+b)),MLOG.debug(MLOG.d(e)),null==(d=e.sender)?void MLOG.debug(MLOG.d("Missing sender...")):null==(f=m[d])?void MLOG.debug(MLOG.d("This handle is not attached to this session")):void f.webrtcState(!0);if("hangup"===n){if(MLOG.debug(MLOG.d("Got a hangup event on session "+b)),MLOG.debug(MLOG.d(e)),null==(d=e.sender))return void MLOG.debug(MLOG.d("Missing sender..."));if(null==(f=m[d]))return void MLOG.debug(MLOG.d("This handle is not attached to this session"));f.webrtcState(!1,e.reason),f.hangup();}else if("detached"===n){if(MLOG.debug(MLOG.d("Got a detached event on session "+b)),MLOG.debug(MLOG.d(e)),null==(d=e.sender))return void MLOG.debug(MLOG.d("Missing sender..."));if(null==(f=m[d]))return;f.detached=!0,f.ondetached(),f.detach();}else if("media"===n){if(MLOG.debug(MLOG.d("Got a media event on session "+b)),MLOG.debug(MLOG.d(e)),null==(d=e.sender))return void MLOG.debug(MLOG.d("Missing sender..."));if(null==(f=m[d]))return void MLOG.debug(MLOG.d("This handle is not attached to this session"));f.mediaState(e.type,e.receiving);}else if("slowlink"===n){if(MLOG.debug(MLOG.d("Got a slowlink event on session "+b)),MLOG.debug(MLOG.d(e)),null==(d=e.sender))return void MLOG.debug(MLOG.d("Missing sender..."));if(null==(f=m[d]))return void MLOG.debug(MLOG.d("This handle is not attached to this session"));f.slowLink(e.uplink,e.lost);}else{var a,s;if("error"===n)return MLOG.debug(MLOG.d("handleEvent, Ooops: "+e.error.code+" "+e.error.reason)),MLOG.debug(MLOG.d(e)),void(null!=(a=e.transaction)&&(null!=(s=S[a])&&s(e),delete S[a]));if("event"===n){var d;if(MLOG.debug(MLOG.d("Got a plugin event on session "+b)),null==(d=e.sender))return void MLOG.debug(MLOG.d("Missing sender..."));var c=e.plugindata;if(null==c)return void MLOG.debug(MLOG.d("Missing plugindata..."));MLOG.debug(MLOG.d("  -- Event is coming from "+d+" ("+c.plugin+")"));var f,u=c.data;if(null==(f=m[d]))return void MLOG.debug(MLOG.d("This handle is not attached to this session"));var l=e.jsep;null!=l&&(MLOG.debug(MLOG.d("Handling SDP as well...")),MLOG.debug(MLOG.d(l)));var p=f.onmessage;null!=p?(MLOG.debug(MLOG.d("Notifying application...")),p(u,l)):MLOG.debug(MLOG.d("No provided notification callback"));}else{if(n===GWSESSION_TIMEOUT)return void t.close(3504,"Gateway timeout");MLOG.debug(MLOG.d("Unknown message/event  '"+e.janus+"' on session "+b)),MLOG.debug(MLOG.d(e));}}}}else MLOG.debug(MLOG.d("Got a success on session "+b)),null!=(a=e.transaction)&&(null!=(s=S[a])&&s(e),delete S[a]);}else null!=(a=e.transaction)&&(null!=(s=S[a])&&s(e),delete S[a]);}else redfinger.webrtcRunInfo.netDelay=parseInt(new Date()-k);}(JSON.parse(e.data));},close:function(){if(null!==a&&y){if(y=!1,!redfinger.isDestory&&void 0===TrackingTmpData.signalLinkResult){let e=new Date().getTime();TrackingTmpData.signalLinkResult=-1,redfinger.tracking.setBaseInfo({signalConnectTime:e-TrackingTmpData.signalLinkStartTime,signalLinkConnectResult:-1});}MLOG.debug(MLOG.d("onclose:"+a));}}},r)t.addEventListener(d,r[d]);}this.getServer=function(){return wsserver;},this.destroy=function(e){O(e);},this.start=_async(function(){const _PeerGW$isWebrtcSuppo=PeerGW.isWebrtcSupported(),_MLOG$warn=_PeerGW$isWebrtcSuppo||MLOG.warn(MLOG.w("WebRTC not supported by this browser"));return _await(_PeerGW$isWebrtcSuppo?null===e.server||void 0===e.server?(MLOG.error(MLOG.e("Invalid server url")),PEERGW_ERR_CODE_INVALID_SERVER):(T(e),0):C(PEERGW_ERR_CODE_UNSUPPORTED,"WebRTC not supported by this browser"),function(_temp3){return _PeerGW$isWebrtcSuppo?_temp3:(0,PEERGW_ERR_CODE_UNSUPPORTED);},_PeerGW$isWebrtcSuppo);}),this.stop=_async(function(){return _callIgnored(O);}),this.getWebrtcStates=function(){try{for(var e in m)m[e]&&null!==m[e].webrtcStuff.pc&&function(e,t){var r=e.getRemoteStreams()[0].getVideoTracks()[0];e.getStats(r).then(function(e){let r=[];e.forEach(function(e){r.push(e);}),t(r);}).catch(function(e){t([{packetsLost:0,packetsReceived:0}]);});}(m[e].webrtcStuff.pc,function(e){for(var t=0;t<e.length;++t){var r=e[t];if(void 0!==r.packetsReceived&&void 0!==r.packetsLost){redfinger.webrtcStates.packetsReceivedSec=r.packetsReceived-redfinger.webrtcStates.packetsReceived,redfinger.webrtcStates.packetsLostSec=r.packetsLost-redfinger.webrtcStates.packetsLost,redfinger.webrtcStates.packetsLost=r.packetsLost,redfinger.webrtcStates.packetsReceived=r.packetsReceived,redfinger.webrtcStates.framesDecoded=r.framesDecoded,redfinger.webrtcStates.pliCountSec=r.pliCount-redfinger.webrtcStates.pliCount,redfinger.webrtcStates.pliCount=r.pliCount,redfinger.webrtcStates.pliCountSec>0&&redfinger._pushIframeReq();break;}}});}catch(e){MLOG.error(MLOG.e("getWebrtcStates fail"));}};var P=void 0,_=!1;function w(){!_async(function(e){let _exit3=false;var r,n,i,o,a;return _invoke(function(){if(!y){return _await(C(PEERGW_ERR_CODE_CONNECT_FAILED,"Is the server down? (connected=false)"),function(_C2){const _temp4=void _C2;_exit3=true;return _temp4;});}},function(_result3){if(_exit3)return _result3;r=e.plugin;n=e.opaqueId;i=e.token?e.token:l;o=PeerGW.randomString(10);a={janus:GWSESSION_ATTACH,plugin:r,opaque_id:n,transaction:o};null!=i&&(a.token=i);null!=p&&(a.apisecret=p);S[o]=_async(function(n){let _exit4=false;return _invoke(function(){if("success"!==n.janus){const _MLOG$warn2=MLOG.warn(MLOG.w("Ooops: "+n.error.code+" "+n.error.reason));return _await(C(PEERGW_ERR_CODE_SESSION_ATTACH,n.error.reason),function(_C3){const _temp5=void _C3;_exit4=true;return _temp5;});}},function(_result4){if(_exit4)return _result4;MLOG.debug(MLOG.d(n));var o=n.data.id;MLOG.debug(MLOG.d("Created handle: "+o));var a={session:v,plugin:r,id:o,token:i,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return o;},getPlugin:function(){return r;},getBitrate:function(){return function(e){var t=m[e];if(null==t||null===t.webrtcStuff||void 0===t.webrtcStuff)return MLOG.warn(MLOG.w("Invalid handle")),"Invalid handle";var r=t.webrtcStuff;if(null===r.pc||void 0===r.pc)return"Invalid PeerConnection";return r.pc.getStats?null===r.bitrate.timer||void 0===r.bitrate.timer?(MLOG.debug(MLOG.d("Starting bitrate timer (via getStats)")),r.bitrate.timer=setInterval(function(){r.pc.getStats().then(function(e){e.forEach(function(e){if(e){var t=!1;if(("video"===e.mediaType||e.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===e.type&&e.id.indexOf("rtcp")<0?t=!0:"ssrc"!=e.type||!e.bytesReceived||"VP8"!==e.googCodecName&&""!==e.googCodecName||(t=!0),t){if(r.bitrate.bsnow=e.bytesReceived,r.bitrate.tsnow=e.timestamp,null===r.bitrate.bsbefore||null===r.bitrate.tsbefore)r.bitrate.bsbefore=r.bitrate.bsnow,r.bitrate.tsbefore=r.bitrate.tsnow;else{var n=r.bitrate.tsnow-r.bitrate.tsbefore;"safari"==PeerGW.webRTCAdapter.browserDetails.browser&&(n/=1e3);var i=Math.round(8*(r.bitrate.bsnow-r.bitrate.bsbefore)/n);"safari"===PeerGW.webRTCAdapter.browserDetails.browser&&(i=parseInt(i/1e3)),r.bitrate.value=i+" kbits/sec",r.bitrate.bsbefore=r.bitrate.bsnow,r.bitrate.tsbefore=r.bitrate.tsnow;}redfinger.resizePhone();}}});});},1e3),"0 kbits/sec"):r.bitrate.value:(MLOG.debug(MLOG.d("Getting the video bitrate unsupported by browser")),"Feature unsupported by browser");}(o);},send:function(e){!function(e,r){if(r=r||{},r.onsuccess="function"==typeof r.onsuccess?r.onsuccess:PeerGW.noop,r.onerror="function"==typeof r.onerror?r.onerror:PeerGW.noop,!y)return MLOG.warn(MLOG.w("Is the server down? (connected=false)")),void r.onerror("Is the server down? (connected=false)");var n=m[e];if(null==n||null===n.webrtcStuff||void 0===n.webrtcStuff)return MLOG.error(MLOG.e("Invalid handle")),void r.onerror("Invalid handle");var i=r.message,o=r.jsep,a=PeerGW.randomString(10),s={janus:GWSESSION_MESSAGE,body:i,transaction:a};null!==n.token&&void 0!==n.token&&(s.token=n.token);null!=p&&(s.apisecret=p);null!=o&&(s.jsep=o);s.session_id=b,s.handle_id=e,S[a]=function(e){if("success"!==e.janus)"ack"===e.janus?(null===r.onsuccess||r.onsuccess,r.onsuccess()):void 0!==e.error&&null!==e.error?(MLOG.error(MLOG.e("Ooops: "+e.error.code+" "+e.error.reason)),r.onerror(e.error.code+" "+e.error.reason)):(MLOG.error(MLOG.e("Unknown error")),r.onerror("Unknown error"));else{var t=e.plugindata;if(null==t)return MLOG.debug(MLOG.d("Request succeeded, but missing plugindata...")),void r.onsuccess();MLOG.debug(MLOG.d("Synchronous transaction successful ("+t.plugin+")"));var n=t.data;r.onsuccess(n);}},1==t.readyState&&t.send(JSON.stringify(s));}(o,e);},data:function(e){!function(e,t){t=t||{},t.onsuccess="function"==typeof t.onsuccess?t.onsuccess:PeerGW.noop,t.onerror="function"==typeof t.onerror?t.onerror:PeerGW.noop;var r=m[e];if(null==r||null===r.webrtcStuff||void 0===r.webrtcStuff)return MLOG.warn(MLOG.w("Invalid handle")),void t.onerror("Invalid handle");var n=r.webrtcStuff,i=t.text;if(null==i)return MLOG.warn(MLOG.w("Invalid text")),void t.onerror("Invalid text");var o=t.label?t.label:PeerGW.dataChanDefaultLabel;if(!n.dataChannel[o])return R(e,o,!1,i),void t.onsuccess();if("open"!==n.dataChannel[o].readyState)return n.dataChannel[o].pending.push(i),void t.onsuccess();n.dataChannel[o].send(i),t.onsuccess();}(o,e);},iceState:_async(function(e){return _invoke(function(){if(MLOG.debug(MLOG.d("iceState:"+e)),"failed"==e&&!redfinger.wsClosed){if(!redfinger.isDestory&&void 0===TrackingTmpData.webrtcLinkResult){let e=new Date().getTime();TrackingTmpData.webrtcLinkResult=-1,redfinger.tracking.setBaseInfo({webrtcLinkConnectTime:e-TrackingTmpData.webrtcLinkStartTime,webrtcLinkConnectResult:-1});}return _awaitIgnored(C(2005,"iceState  disconnected"));}},function(){if("connected"===e){let e=new Date().getTime();TrackingTmpData.webrtcLinkResult=0,redfinger.tracking.setBaseInfo({webrtcLinkConnectTime:e-TrackingTmpData.webrtcLinkStartTime,webrtcLinkConnectResult:0});}});}),webrtcState:function(){MLOG.debug(MLOG.d("webrtcState:"));},slowLink:function(e,t){MLOG.debug(MLOG.d("slowLink, uplink:"+e+", nacks:"+t));},onmessage:e.onmessage,createAnswer:function(e){!function(e,t){var r=t.jsep;t.media=t.media||{audio:!0,video:!0};var n=t.media,i=m[e];if(null==i||null===i.webrtcStuff||void 0===i.webrtcStuff)return MLOG.warn(MLOG.w("Invalid handle")),void t.onerror("Invalid handle");var o=i.webrtcStuff;if(o.trickle=function(e){return MLOG.debug(MLOG.d("isTrickleEnabled:",e)),null==e||!0===e;}(t.trickle),void 0===o.pc||null===o.pc)n.update=!1,n.keepAudio=!1,n.keepVideo=!1;else if(void 0!==o.pc&&null!==o.pc){if(MLOG.debug(MLOG.d("Updating existing media session")),n.update=!0,null!==t.stream&&void 0!==t.stream)t.stream!==o.myStream&&MLOG.debug(MLOG.d("Renegotiation involves a new external stream"));else{if(n.addAudio){if(n.keepAudio=!1,n.replaceAudio=!1,n.removeAudio=!1,n.audioSend=!0,o.myStream&&o.myStream.getAudioTracks()&&o.myStream.getAudioTracks().length)return MLOG.error(MLOG.e("Can't add audio stream, there already is one")),void t.onerror("Can't add audio stream, there already is one");}else n.removeAudio?(n.keepAudio=!1,n.replaceAudio=!1,n.addAudio=!1,n.audioSend=!1):n.replaceAudio&&(n.keepAudio=!1,n.addAudio=!1,n.removeAudio=!1,n.audioSend=!0);if(null===o.myStream||void 0===o.myStream?(n.replaceAudio&&(n.keepAudio=!1,n.replaceAudio=!1,n.addAudio=!0,n.audioSend=!0),A(n)&&(n.keepAudio=!1,n.addAudio=!0)):null===o.myStream.getAudioTracks()||void 0===o.myStream.getAudioTracks()||0===o.myStream.getAudioTracks().length?(n.replaceAudio&&(n.keepAudio=!1,n.replaceAudio=!1,n.addAudio=!0,n.audioSend=!0),A(n)&&(n.keepVideo=!1,n.addAudio=!0)):!A(n)||n.removeAudio||n.replaceAudio||(n.keepAudio=!0),n.addVideo){if(n.keepVideo=!1,n.replaceVideo=!1,n.removeVideo=!1,n.videoSend=!0,o.myStream&&o.myStream.getVideoTracks()&&o.myStream.getVideoTracks().length)return MLOG.error(MLOG.e("Can't add video stream, there already is one")),void t.onerror("Can't add video stream, there already is one");}else n.removeVideo?(n.keepVideo=!1,n.replaceVideo=!1,n.addVideo=!1,n.videoSend=!1):n.replaceVideo&&(n.keepVideo=!1,n.addVideo=!1,n.removeVideo=!1,n.videoSend=!0);null===o.myStream||void 0===o.myStream||null===o.myStream.getVideoTracks()||void 0===o.myStream.getVideoTracks()||0===o.myStream.getVideoTracks().length?(n.replaceVideo&&(n.keepVideo=!1,n.replaceVideo=!1,n.addVideo=!0,n.videoSend=!0),G(n)&&(n.keepVideo=!1,n.addVideo=!0)):!G(n)||n.removeVideo||n.replaceVideo||(n.keepVideo=!0),n.addData&&(n.data=!0);}if(A(n)&&n.keepAudio&&G(n)&&n.keepVideo)return void I(e,r,n,t,o.myStream);}if(n.update&&!o.streamExternal){if(n.removeAudio||n.replaceAudio){if(o.myStream&&o.myStream.getAudioTracks()&&o.myStream.getAudioTracks().length){var a=o.myStream.getAudioTracks()[0];MLOG.debug(MLOG.d("Removing audio track:",a)),o.myStream.removeTrack(a);try{a.stop();}catch(e){}}if(o.pc.getSenders()&&o.pc.getSenders().length){var s=!0;if(n.replaceAudio&&PeerGW.unifiedPlan&&(s=!1),s)for(var d=0;d<o.pc.getSenders().length;d++){(a=o.pc.getSenders()[d])&&a.track&&"audio"===a.track.kind&&(MLOG.debug(MLOG.d("Removing audio sender:",a)),o.pc.removeTrack(a));}}}if(n.removeVideo||n.replaceVideo){if(o.myStream&&o.myStream.getVideoTracks()&&o.myStream.getVideoTracks().length){a=o.myStream.getVideoTracks()[0];MLOG.debug(MLOG.d("Removing video track:",a)),o.myStream.removeTrack(a);try{a.stop();}catch(e){}}if(o.pc.getSenders()&&o.pc.getSenders().length){var c=!0;if(n.replaceVideo&&PeerGW.unifiedPlan&&(c=!1),c)for(d=0;d<o.pc.getSenders().length;d++){(a=o.pc.getSenders()[d])&&a.track&&"video"===a.track.kind&&(MLOG.debug(MLOG.d("Removing video sender:",a)),o.pc.removeTrack(a));}}}}if(null!==t.stream&&void 0!==t.stream){var f=t.stream;if(MLOG.debug(MLOG.d("MediaStream provided by the application")),n.update&&o.myStream&&o.myStream!==t.stream&&!o.streamExternal){try{for(var u=o.myStream.getTracks(),l=0;l<u.length;l++){var p=u[l];null!=p&&p.stop();}}catch(e){}o.myStream=null;}return o.streamExternal=!0,void I(e,r,n,t,f);}A(n)||G(n)||I(e,r,n,t);}(o,e);},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,hangup:function(e){L(o,!0===e);}};m[o]=a,e.onsuccess(a);});}),a.session_id=b,1==t.readyState&&t.send(JSON.stringify(a));MLOG.debug(MLOG.d(JSON.stringify(a)));});})({plugin:"janus.plugin.streaming",opaqueId:opaqueId,onsuccess:function(t){var r;P=t,MLOG.debug(MLOG.d("Plugin attached! ("+t.getPlugin()+", id="+t.getId()+")")),(r=e.control).request=GWSESSION_SCREENING,P.send({message:r});},onmessage:_async(function(t,r){let _exit5=false;MLOG.debug(MLOG.d(" ::: Got a message :::"+JSON.stringify(t)));var n,i=t.result;return _invoke(function(){if(null!=i){if(void 0!==i.status&&null!==i.status){var o=i.status;"starting"===o||("started"===o?(_=!0,e.onstarted(),P.getBitrate()):"stopped"===o&&(_=!1,n={request:GWSESSION_STOP},P.send({message:n}),P.hangup()));}else"event"===t.streaming&&MLOG.debug(MLOG.d("streaming......"));}else{return _invoke(function(){if(void 0!==t.error&&null!==t.error){const _MLOG$error=MLOG.error(MLOG.e(t.error));return _await(C(t.error,"error"),function(_C4){const _temp6=void _C4;_exit5=true;return _temp6;});}},function(_result5){if(_exit5)return _result5;if(void 0!==t.rmsg&&null!==t.rmsg){const _temp7=void e.onrecvMsg(t.rmsg);_exit5=true;return _temp7;}return function(){if(void 0!==t.kick&&null!==t.kick){return _await(C(t.kick,""),function(_C5){const _temp8=void _C5;_exit5=true;return _temp8;});}}();});}},function(_result7){if(_exit5)return _result7;null!=r&&(MLOG.debug(MLOG.d("Handling SDP as well...")),MLOG.debug(MLOG.d(r)),P.createAnswer({jsep:r,media:{audioSend:!1,videoSend:!1,data:!0},onsuccess:function(e){MLOG.debug(MLOG.d("Got SDP!")),MLOG.debug(MLOG.d(e));var t={request:GWSESSION_START};P.send({message:t,jsep:e});},onerror:_async(function(e){const _MLOG$error2=MLOG.error(MLOG.e("WebRTC error... "+JSON.stringify(e)));return _await(C(PEERGW_ERR_CODE_UNSUPPORTED,"WebRTC not supported by this browser"),function(_C6){_C6;});})}));});}),onremotestream:function(t){MLOG.debug(MLOG.d(" ::: Got a remote stream :::")),MLOG.debug(MLOG.d(t)),PeerGW.attachMediaStream(e.viewOjb,t);},ondataopen:function(e){MLOG.debug(MLOG.d("The DataChannel is available!")),!0;},ondata:function(e){MLOG.debug(MLOG.d("We got data from the DataChannel! "+e));},oncleanup:function(){MLOG.debug(MLOG.d(" ::: Got a cleanup notification :::"));}});}function O(i){return new Promise((o,a)=>{(i=i||{}).success="function"==typeof i.success?i.success:PeerGW.noop,i.error="function"==typeof i.error?i.error:PeerGW.noop;var s=!0;void 0!==i.asyncRequest&&null!==i.asyncRequest&&(s=!0===i.asyncRequest);var d=!1;void 0!==i.notifyDestroyed&&null!==i.notifyDestroyed&&(d=!0===i.notifyDestroyed);var c=!0;void 0!==i.cleanupHandles&&null!==i.cleanupHandles&&(c=!0===i.cleanupHandles),MLOG.info(MLOG.i("Destroying session "+b+" (async="+s+")")),redfinger.isDestorying=!0;var f=function(){redfinger.isDestorying=!1,redfinger.isDestory=!0,function(){if(c)for(var e in m)M(e,{noRequest:!0});}(),o(!0);};if(!y)return t&&t.close(),i.success(),void f();if(null==b)return MLOG.debug(MLOG.d("No session to destroy")),i.success(),d&&gatewayCallbacks.destroyed(),void f();var u={janus:GWSESSION_DESTROY_REQ,transaction:PeerGW.randomString(10)};null!=l&&(u.token=l),null!=p&&(u.apisecret=p),u.session_id=b;var h=function(){for(var e in r)t.removeEventListener(e,r[e]);t.removeEventListener("message",g),t.removeEventListener("error",v),n&&clearTimeout(n),t.close();},g=function(t){var r=JSON.parse(t.data);r.session_id==u.session_id&&r.transaction==u.transaction&&(h(),i.success(),d&&e.destroyed());},v=function(t){h(),i.error("Failed to destroy the server: Is the server down?"),d&&e.destroyed(),f();};t.addEventListener("message",g),t.addEventListener("error",v),t.addEventListener("close",f),1==t.readyState&&t.send(JSON.stringify(u)),redfinger.wsClosed=!0,t.close(),setTimeout(()=>{redfinger.isDestorying&&f();},500),delete PeerGW.sessions[b],b=null;});}function M(e,r){(r=r||{}).success="function"==typeof r.success?r.success:PeerGW.noop,r.error="function"==typeof r.error?r.error:PeerGW.noop;var n=!0;void 0!==r.asyncRequest&&null!==r.asyncRequest&&(n=!0===r.asyncRequest);var i=!0;void 0!==r.noRequest&&null!==r.noRequest&&(i=!0===r.noRequest),MLOG.debug(MLOG.d("Destroying handle "+e+" (async="+n+")")),L(e);var o=m[e];if(null==o||o.detached)return delete m[e],void r.success();if(i)return delete m[e],void r.success();if(y){var a={janus:GWSESSION_DETACH,transaction:PeerGW.randomString(10)};null!==o.token&&void 0!==o.token&&(a.token=o.token),null!=p&&(a.apisecret=p),a.session_id=b,a.handle_id=e,1==t.readyState&&t.send(JSON.stringify(a)),delete m[e],r.success();}else r.error("Is the server down? (connected=false)");}function E(e,r){if(y){var n=m[e];if(null!=n&&null!==n.webrtcStuff&&void 0!==n.webrtcStuff){var i={janus:GWSESSION_TRICKLE,candidate:r,transaction:PeerGW.randomString(10)};null!==n.token&&void 0!==n.token&&(i.token=n.token),null!=p&&(i.apisecret=p),MLOG.debug(MLOG.d("Sending trickle candidate (handle="+e+"):")),i.session_id=b,i.handle_id=e,1==t.readyState&&t.send(JSON.stringify(i)),MLOG.debug(MLOG.d(JSON.stringify(i)));}else MLOG.warn(MLOG.w("Invalid handle"));}else MLOG.warn(MLOG.w("Is the server down? (connected=false)"));}function R(e,t,r,n){var i=m[e];if(null!=i&&null!==i.webrtcStuff&&void 0!==i.webrtcStuff){var o=i.webrtcStuff,a=_async(function(e){var t,r;MLOG.debug(MLOG.d("Received state change on data channel:",e));t=e.target.label;r=null!==o.dataChannel[t]&&void 0!==o.dataChannel[t]?o.dataChannel[t].readyState:"null";return _invokeIgnored(function(){if(MLOG.debug(MLOG.d("State change on <"+t+"> data channel: "+r)),"open"===r){if(o.dataChannel[t].pending&&o.dataChannel[t].pending.length>0){MLOG.debug(MLOG.d("Sending pending messages on <' + label + '>:",o.dataChannel[t].pending.length));for(var n=0;n<o.dataChannel[t].pending.length;n++){var a=o.dataChannel[t].pending[n];MLOG.debug(MLOG.d("Sending string on data channel <"+t+">: "+a)),o.dataChannel[t].send(a);}o.dataChannel[t].pending=[];}i.ondataopen(t);}else return _await("close"===r&&C(2006,"Invalid handle or DataChannel is not available."),function(_C7){_C7;},!("close"===r));});});o.dataChannel[t]=r||o.pc.createDataChannel(t,{ordered:!1}),o.dataChannel[t].onmessage=function(e){MLOG.debug(MLOG.d("Received message on data channel:",e));var t=e.target.label;i.ondata(e.data,t);},o.dataChannel[t].onopen=a,o.dataChannel[t].onclose=a,o.dataChannel[t].onerror=_async(function(e){const _MLOG$error3=MLOG.error(MLOG.e("Got error on data channel:",e)),_temp9=redfinger.net_work_status!==redfinger.shake_stat_list.destory;return _await(_temp9&&C(2006,"Invalid handle or DataChannel is not available."),function(_C8){_C8;},!_temp9);}),o.dataChannel[t].pending=[],n&&o.dataChannel[t].pending.push(n);}else MLOG.warn(MLOG.w("Invalid handle"));}function L(e,r){MLOG.debug(MLOG.d("Cleaning WebRTC stuff"));var n=m[e];if(null!=n){var i=n.webrtcStuff;if(null!=i){if(!0===r){var o={janus:GWSESSION_HANGUP,transaction:PeerGW.randomString(10)};null!==n.token&&void 0!==n.token&&(o.token=n.token),null!=p&&(o.apisecret=p),MLOG.debug(MLOG.d("Sending hangup request (handle="+e+"):")),o.session_id=b,o.handle_id=e,1==t.readyState&&t.send(JSON.stringify(o)),MLOG.debug(MLOG.d(JSON.stringify(o)));}i.remoteStream=null,i.volume&&(i.volume.local&&i.volume.local.timer&&clearInterval(i.volume.local.timer),i.volume.remote&&i.volume.remote.timer&&clearInterval(i.volume.remote.timer)),i.volume={},i.bitrate.timer&&clearInterval(i.bitrate.timer),i.bitrate.timer=null,i.bitrate.bsnow=null,i.bitrate.bsbefore=null,i.bitrate.tsnow=null,i.bitrate.tsbefore=null,i.bitrate.value=null;try{if(!i.streamExternal&&null!==i.myStream&&void 0!==i.myStream){MLOG.debug(MLOG.d("Stopping local stream tracks"));for(var a=i.myStream.getTracks(),s=0;s<a.length;s++){var d=a[s];null!=d&&d.stop();}}}catch(e){}i.streamExternal=!1,i.myStream=null;try{i.pc.close();}catch(e){}i.pc=null,i.candidates=null,i.mySdp=null,i.remoteSdp=null,i.iceDone=!1,i.dataChannel={},i.dtmfSender=null;}n.oncleanup();}}function A(e){return MLOG.debug(MLOG.d("isAudioSendEnabled:",e)),null!=e&&!1!==e.audio&&void 0!==e.audioSend&&null!==e.audioSend&&!0===e.audioSend;}function D(e){return MLOG.debug(MLOG.d("isAudioRecvEnabled:",e)),null==e||!1!==e.audio&&(void 0===e.audioRecv||null===e.audioRecv||!0===e.audioRecv);}function G(e){return MLOG.debug(MLOG.d("isVideoSendEnabled:",e)),null!=e&&!1!==e.video&&void 0!==e.videoSend&&null!==e.videoSend&&!0===e.videoSend;}function x(e){return MLOG.debug(MLOG.d("isVideoRecvEnabled:",e)),null==e||!1!==e.video&&(void 0===e.videoRecv||null===e.videoRecv||!0===e.videoRecv);}this.getWsState=function(){return t.readyState;},this.sendto=function(e){return null==P?(MLOG.warn(MLOG.w("Invalid handle or DataChannel is not available.")),-1):(P.data({text:e}),0);},this.sendmsg=function(e){if(null==P||!1===_)return-1;if(null==e||e.length>512||!(e instanceof ArrayBuffer))return MLOG.error(MLOG.e("data Invalid.")),-2;var t={request:GWSESSION_RMSG,data:redfinger.encode(e)};P.send({message:t});},this.changeBitrateModel=function(e){var t={request:"bitrate_mode",data:e};P.send({message:t});},this.getBitrate=function(){return 1==_&&null!=P?P.getBitrate():"Invalid data";};}PeerGW.sessions={},PeerGW.dataChanDefaultLabel="JanusDataChannel",PeerGW.noop=function(){},PeerGW.init=function(){PeerGW.webRTCAdapter=adapter,PeerGW.attachMediaStream=function(e,t){if(MLOG.debug(MLOG.d("---browse:"+PeerGW.webRTCAdapter.browserDetails.browser)),MLOG.debug(MLOG.d("---version:"+PeerGW.webRTCAdapter.browserDetails.version)),"chrome"===PeerGW.webRTCAdapter.browserDetails.browser){var r=PeerGW.webRTCAdapter.browserDetails.version;r>=52?e.srcObject=t:r?void 0!==e.src?e.src=URL.createObjectURL(t):MLOG.error(MLOG.e("Error attaching stream to element")):e.srcObject=t;}else e.srcObject=t;},PeerGW.reattachMediaStream=function(e,t){"chrome"===PeerGW.webRTCAdapter.browserDetails.browser?PeerGW.webRTCAdapter.browserDetails.version>=52?e.srcObject=t.srcObject:void 0!==e.src?e.src=t.src:MLOG.error(MLOG.e("Error reattaching stream to element")):e.srcObject=t.srcObject;};var e=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0;window["on"+(e?"pagehide":"beforeunload")];if(PeerGW.unifiedPlan=!1,"firefox"===PeerGW.webRTCAdapter.browserDetails.browser&&PeerGW.webRTCAdapter.browserDetails.version>=59)PeerGW.unifiedPlan=!0;else if("chrome"===PeerGW.webRTCAdapter.browserDetails.browser&&PeerGW.webRTCAdapter.browserDetails.version<72)PeerGW.unifiedPlan=!1;else if("undefined"!=typeof RTCRtpTransceiver)"currentDirection"in RTCRtpTransceiver.prototype||(PeerGW.unifiedPlan=!1);else{var t=null;try{(t=new RTCPeerConnection()).addTransceiver("audio"),PeerGW.unifiedPlan=!0,t.close();}catch(e){PeerGW.unifiedPlan=!1;}}PeerGW.initDone=!0;},P2p.isWebrtcSupported=function(){let e=!1;if(navigator.userAgent.toLowerCase().indexOf("like mac os x")>0){let t=/os [\d._]*/gi,r=(navigator.userAgent.toLowerCase().match(t)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".").split("."),n=14;r.length>0&&(n=parseFloat(r[0]),r.length>1&&(n=parseFloat(r[0]+"."+r[1])),n<13&&(e=!0));}return void 0!==window.RTCPeerConnection&&null!==window.RTCPeerConnection&&!e;},P2p.randomIndex=0,P2p.randomString=function(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=""+P2p.randomIndex++;for(let n=0;n<e;n++){let e=Math.floor(Math.random()*t.length);r+=t.substring(e,e+1);}return r;};GWSESSION_CREATE_REQ="create",GWSESSION_DESTROY_REQ="destroy",GWSESSION_KEEPALIVE_REQ="keepalive",GWSESSION_TIMEOUT="timeout",GWSESSION_MESSAGE="message",GWSESSION_ATTACH="attach",GWSESSION_DETACH="detach",GWSESSION_SCREENING="screening",GWSESSION_START="start",GWSESSION_STOP="stop",GWSESSION_TRICKLE="trickle",GWSESSION_HANGUP="hangup",GWSESSION_RMSG="rmsg";var P2p_ERR_CODE_UNSUPPORTED=-1e4,P2p_ERR_CODE_INVALID_SERVER=-10001,P2p_ERR_CODE_INVALID_CONTROL=-10002,P2p_ERR_CODE_CONNECT_FAILED=-10101,P2p_ERR_CODE_SESSION_CREATE=-10201,P2p_ERR_CODE_SESSION_ATTACH=-10202;opaqueId="redfinger-"+P2p.randomString(10);function P2p(t){const M=_async(function(t,r,n,i,o){var p,h,g;let a=S[t];if(null==a||null===a.webrtcStuff||void 0===a.webrtcStuff)return MLOG.error(MLOG.e("Invalid handle")),void i.onerror("Invalid handle");let s=a.webrtcStuff;MLOG.debug(MLOG.d("streamsDone:",o)),o&&(MLOG.debug(MLOG.d("  -- Audio tracks:",o.getAudioTracks())),MLOG.debug(MLOG.d("  -- Video tracks:",o.getVideoTracks())));let l=!1;if(s.myStream&&n.update&&!s.streamExternal){if((!n.update&&A(n)||n.update&&(n.addAudio||n.replaceAudio))&&o.getAudioTracks()&&o.getAudioTracks().length)if(s.myStream.addTrack(o.getAudioTracks()[0]),P2p.unifiedPlan){MLOG.debug(MLOG.d((n.replaceAudio?"Replacing":"Adding")+" audio track:",o.getAudioTracks()[0]));let e=null;if((h=s.pc.getTransceivers())&&h.length>0)for(p=0;p<h.length;p++){if((g=h[p]).sender&&g.sender.track&&"audio"===g.sender.track.kind||g.receiver&&g.receiver.track&&"audio"===g.receiver.track.kind){e=g;break;}}e&&e.sender?e.sender.replaceTrack(o.getAudioTracks()[0]):s.pc.addTrack(o.getAudioTracks()[0],o);}else MLOG.debug(MLOG.d((n.replaceAudio?"Replacing":"Adding")+" audio track:",o.getAudioTracks()[0])),s.pc.addTrack(o.getAudioTracks()[0],o);if((!n.update&&G(n)||n.update&&(n.addVideo||n.replaceVideo))&&o.getVideoTracks()&&o.getVideoTracks().length)if(s.myStream.addTrack(o.getVideoTracks()[0]),P2p.unifiedPlan){MLOG.debug(MLOG.d((n.replaceVideo?"Replacing":"Adding")+" video track:",o.getVideoTracks()[0]));let e=null;if((h=s.pc.getTransceivers())&&h.length>0)for(p=0;p<h.length;p++){if((g=h[p]).sender&&g.sender.track&&"video"===g.sender.track.kind||g.receiver&&g.receiver.track&&"video"===g.receiver.track.kind){e=g;break;}}e&&e.sender?e.sender.replaceTrack(o.getVideoTracks()[0]):s.pc.addTrack(o.getVideoTracks()[0],o);}else MLOG.debug(MLOG.d((n.replaceVideo?"Replacing":"Adding")+" video track:",o.getVideoTracks()[0])),s.pc.addTrack(o.getVideoTracks()[0],o);}else s.myStream=o,l=!0;return _invoke(function(){if(!s.pc){let e={iceServers:d,iceTransportPolicy:c,bundlePolicy:f};"chrome"===P2p.webRTCAdapter.browserDetails.browser&&(e.sdpSemantics=P2p.webRTCAdapter.browserDetails.version<72?"plan-b":"unified-plan");let r={optional:[{DtlsSrtpKeyAgreement:!0}]};if(!0===u&&r.optional.push({googIPv6:!0}),i.rtcConstraints&&"object"==typeof i.rtcConstraints)for(var p in MLOG.debug(MLOG.d("Adding custom PeerConnection constraints:",i.rtcConstraints)),i.rtcConstraints)r.optional.push(i.rtcConstraints[p]);"edge"===P2p.webRTCAdapter.browserDetails.browser&&(e.bundlePolicy="max-bundle"),MLOG.debug(MLOG.d("Creating PeerConnection")),MLOG.debug(MLOG.d(r));return _continue(_catch(function(){TrackingTmpData.webrtcLinkStartTime=new Date().getTime(),TrackingTmpData.webrtcLinkResult=void 0,s.pc=new RTCPeerConnection(e,r);},function(){let t=new Date().getTime();const _MLOG$warn5=MLOG.warn(MLOG.w("WebRTC not supported by this browser")),_redfinger$tracking$s2=redfinger.tracking.setBaseInfo({webrtcLinkConnectTime:t-TrackingTmpData.webrtcLinkStartTime,webrtcLinkConnectResult:-1}),_TrackingTmpData$webr2=TrackingTmpData.webrtcLinkResult=-1;return _await(C(P2p_ERR_CODE_UNSUPPORTED,"WebRTC not supported by this browser"),function(_C17){_C17;});}),function(){s.pc.getStats&&(s.volume={},s.bitrate.value="0 kbits/sec"),MLOG.debug(MLOG.d("Preparing local SDP and gathering candidates (trickle="+s.trickle+")")),s.pc.oniceconnectionstatechange=function(e){s.pc&&a.iceState(s.pc.iceConnectionState);},s.pc.onicecandidate=_async(function(e){if(null==e.candidate||"edge"===P2p.webRTCAdapter.browserDetails.browser&&e.candidate.candidate.indexOf("endOfCandidates")>0)MLOG.debug(MLOG.d("End of candidates.")),s.iceDone=!0,!0===s.trickle?I(t,{completed:!0}):function(e,t){let r=S[e];if(null==r||null===r.webrtcStuff||void 0===r.webrtcStuff)return void MLOG.debug(MLOG.d("Invalid handle, not sending anything"));let n=r.webrtcStuff;if(MLOG.debug(MLOG.d("Sending offer/answer SDP...")),null===n.mySdp||void 0===n.mySdp)return void MLOG.debug(MLOG.d("Local SDP instance is invalid, not sending anything..."));n.mySdp={type:n.pc.localDescription.type,sdp:n.pc.localDescription.sdp},!1===n.trickle&&(n.mySdp.trickle=!1);n.sdpSent=!0,t.onsuccess(n.mySdp);}(t,i);else{if(e.candidate.candidate.indexOf("::")>0)return;let r={candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex};!0===s.trickle&&I(t,r);}return _await();}),s.pc.ontrack=function(e){MLOG.debug(MLOG.d("Handling Remote Track")),MLOG.debug(MLOG.d(e)),e.streams&&(s.remoteStream=e.streams[0],a.onremotestream(s.remoteStream),e.track&&!e.track.onended&&(MLOG.debug(MLOG.d("Adding onended callback to track:",e.track)),e.track.onended=function(e){MLOG.debug(MLOG.d("Remote track removed:",e)),s.remoteStream&&(s.remoteStream.removeTrack(e.target),a.onremotestream(s.remoteStream));}));};});}},function(){if(l&&null!=o){MLOG.debug(MLOG.d("Adding local stream"));let e=!0===i.simulcast2;o.getTracks().forEach(function(t){MLOG.debug(MLOG.d("Adding local track:",t)),e?"audio"===t.kind?s.pc.addTrack(t,o):(MLOG.debug(MLOG.d("Enabling rid-based simulcasting:",t)),s.pc.addTransceiver(t,{direction:"sendrecv",streams:[o],sendEncodings:[{rid:"h",active:!0,maxBitrate:9e5},{rid:"m",active:!0,maxBitrate:3e5,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:1e5,scaleResolutionDownBy:4}]})):s.pc.addTrack(t,o);});}return _invokeIgnored(function(){if(function(e){if(MLOG.debug(MLOG.d("isDataEnabled:",e)),"edge"==P2p.webRTCAdapter.browserDetails.browser)return MLOG.debug(MLOG.d("Edge doesn't support data channels yet")),!1;if(null==e)return!1;return!0===e.data;}(n)&&!s.dataChannel[P2p.dataChanDefaultLabel]&&(MLOG.debug(MLOG.d("Creating data channel")),E(t,P2p.dataChanDefaultLabel,!1),s.pc.ondatachannel=function(e){MLOG.debug(MLOG.d("Data channel created by Janus:",e)),E(t,e.channel.label,e.channel);}),s.myStream&&a.onlocalstream(s.myStream),null==r)!function(e,t,r){r.customizeSdp="function"==typeof r.customizeSdp?r.customizeSdp:P2p.noop;let n=S[e];if(null==n||null===n.webrtcStuff||void 0===n.webrtcStuff)return MLOG.warn(MLOG.w("Invalid handle")),void r.onerror("Invalid handle");let i=n.webrtcStuff,o=!0===r.simulcast;o?MLOG.debug(MLOG.d("Creating offer (iceDone="+i.iceDone+", simulcast="+o+")")):MLOG.debug(MLOG.d("Creating offer (iceDone="+i.iceDone+")"));let a={};if(P2p.unifiedPlan){let e=null,r=null,n=i.pc.getTransceivers();if(n&&n.length>0)for(let t=0;t<n.length;t++){let i=n[t];i.sender&&i.sender.track&&"audio"===i.sender.track.kind||i.receiver&&i.receiver.track&&"audio"===i.receiver.track.kind?e||(e=i):(i.sender&&i.sender.track&&"video"===i.sender.track.kind||i.receiver&&i.receiver.track&&"video"===i.receiver.track.kind)&&(r||(r=i));}let o=A(t),a=D(t);o||a?o&&a?e&&(e.setDirection?e.setDirection("sendrecv"):e.direction="sendrecv",MLOG.debug(MLOG.d("Setting audio transceiver to sendrecv:",e))):o&&!a?e&&(e.setDirection?e.setDirection("sendonly"):e.direction="sendonly",MLOG.debug(MLOG.d("Setting audio transceiver to sendonly:",e))):!o&&a&&(e?(e.setDirection?e.setDirection("recvonly"):e.direction="recvonly",MLOG.debug(MLOG.d("Setting audio transceiver to recvonly:",e))):(e=i.pc.addTransceiver("audio",{direction:"recvonly"}),MLOG.debug(MLOG.d("Adding recvonly audio transceiver:",e)))):t.removeAudio&&e&&(e.setDirection?e.setDirection("inactive"):e.direction="inactive",MLOG.debug(MLOG.d("Setting audio transceiver to inactive:",e)));let s=G(t),d=x(t);s||d?s&&d?r&&(r.setDirection?r.setDirection("sendrecv"):r.direction="sendrecv",MLOG.debug(MLOG.d("Setting video transceiver to sendrecv:",r))):s&&!d?r&&(r.setDirection?r.setDirection("sendonly"):r.direction="sendonly",MLOG.debug(MLOG.d("Setting video transceiver to sendonly:",r))):!s&&d&&(r?(r.setDirection?r.setDirection("recvonly"):r.direction="recvonly",MLOG.debug(MLOG.d("Setting video transceiver to recvonly:",r))):(r=i.pc.addTransceiver("video",{direction:"recvonly"}),MLOG.debug(MLOG.d("Adding recvonly video transceiver:",r)))):t.removeVideo&&r&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive",MLOG.debug(MLOG.d("Setting video transceiver to inactive:",r)));}else a.offerToReceiveAudio=D(t),a.offerToReceiveVideo=x(t);let s=!0===r.iceRestart;s&&(a.iceRestart=!0);let d=G(t);if(d&&o&&"firefox"===P2p.webRTCAdapter.browserDetails.browser){MLOG.debug(MLOG.d("Enabling Simulcasting for Firefox (RID)"));let e=i.pc.getSenders().find(function(e){return"video"===e.track.kind;});if(e){let t=e.getParameters();t||(t={}),t.encodings=[{rid:"h",active:!0,maxBitrate:9e5},{rid:"m",active:!0,maxBitrate:3e5,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:1e5,scaleResolutionDownBy:4}],e.setParameters(t);}}i.pc.createOffer(a).then(function(e){MLOG.debug(MLOG.d(e));let t={type:e.type,sdp:e.sdp};r.customizeSdp(t),e.sdp=t.sdp,MLOG.debug(MLOG.d("Setting local description")),d&&o&&("chrome"===P2p.webRTCAdapter.browserDetails.browser||"safari"===P2p.webRTCAdapter.browserDetails.browser?(MLOG.debug(MLOG.d("Enabling Simulcasting for Chrome (SDP munging)")),e.sdp=function(e){let t=e.split("\r\n"),r=!1,n=[-1],i=[-1],o=null,a=null,s=null,d=null,c=-1;for(var f=0;f<t.length;f++){if(u=t[f].match(/m=(\w+) */)){if("video"===u[1]){if(!(n[0]<0)){c=f;break;}r=!0;}else if(n[0]>-1){c=f;break;}continue;}if(!r)continue;let e=t[f].match(/a=ssrc-group:FID (\d+) (\d+)/);if(e)n[0]=e[1],i[0]=e[2],t.splice(f,1),f--;else{if(n[0]){if((l=t[f].match("a=ssrc:"+n[0]+" cname:(.+)"))&&(o=l[1]),(l=t[f].match("a=ssrc:"+n[0]+" msid:(.+)"))&&(a=l[1]),(l=t[f].match("a=ssrc:"+n[0]+" mslabel:(.+)"))&&(s=l[1]),(l=t[f].match("a=ssrc:"+n[0]+" label:(.+)"))&&(d=l[1]),0===t[f].indexOf("a=ssrc:"+i[0])){t.splice(f,1),f--;continue;}if(0===t[f].indexOf("a=ssrc:"+n[0])){t.splice(f,1),f--;continue;}}0!==t[f].length||(t.splice(f,1),f--);}}if(n[0]<0){c=-1,r=!1;for(f=0;f<t.length;f++){var u;if(u=t[f].match(/m=(\w+) */)){if("video"===u[1]){if(!(n[0]<0)){c=f;break;}r=!0;}else if(n[0]>-1){c=f;break;}}else if(r){if(n[0]<0){let e=t[f].match(/a=ssrc:(\d+)/);if(e){n[0]=e[1],t.splice(f,1),f--;continue;}}else{var l;if((l=t[f].match("a=ssrc:"+n[0]+" cname:(.+)"))&&(o=l[1]),(l=t[f].match("a=ssrc:"+n[0]+" msid:(.+)"))&&(a=l[1]),(l=t[f].match("a=ssrc:"+n[0]+" mslabel:(.+)"))&&(s=l[1]),(l=t[f].match("a=ssrc:"+n[0]+" label:(.+)"))&&(d=l[1]),0===t[f].indexOf("a=ssrc:"+i[0])){t.splice(f,1),f--;continue;}if(0===t[f].indexOf("a=ssrc:"+n[0])){t.splice(f,1),f--;continue;}}0!=t[f].length||(t.splice(f,1),f--);}}}if(n[0]<0)return MLOG.warn(MLOG.w("Couldn't find the video SSRC, simulcasting NOT enabled")),e;c<0&&(c=t.length);n[1]=Math.floor(4294967295*Math.random()),n[2]=Math.floor(4294967295*Math.random()),i[1]=Math.floor(4294967295*Math.random()),i[2]=Math.floor(4294967295*Math.random());for(f=0;f<n.length;f++)o&&(t.splice(c,0,"a=ssrc:"+n[f]+" cname:"+o),c++),a&&(t.splice(c,0,"a=ssrc:"+n[f]+" msid:"+a),c++),s&&(t.splice(c,0,"a=ssrc:"+n[f]+" mslabel:"+s),c++),d&&(t.splice(c,0,"a=ssrc:"+n[f]+" label:"+d),c++),o&&(t.splice(c,0,"a=ssrc:"+i[f]+" cname:"+o),c++),a&&(t.splice(c,0,"a=ssrc:"+i[f]+" msid:"+a),c++),s&&(t.splice(c,0,"a=ssrc:"+i[f]+" mslabel:"+s),c++),d&&(t.splice(c,0,"a=ssrc:"+i[f]+" label:"+d),c++);t.splice(c,0,"a=ssrc-group:FID "+n[2]+" "+i[2]),t.splice(c,0,"a=ssrc-group:FID "+n[1]+" "+i[1]),t.splice(c,0,"a=ssrc-group:FID "+n[0]+" "+i[0]),t.splice(c,0,"a=ssrc-group:SIM "+n[0]+" "+n[1]+" "+n[2]),(e=t.join("\r\n")).endsWith("\r\n")||(e+="\r\n");return e;}(e.sdp)):"firefox"!==P2p.webRTCAdapter.browserDetails.browser&&MLOG.debug(MLOG.d("simulcast=true, but this is not Chrome nor Firefox, ignoring"))),i.mySdp=e.sdp,i.pc.setLocalDescription(e).catch(r.onerror),i.mediaConstraints=a,i.iceDone||i.trickle?(MLOG.debug(MLOG.d("Offer ready")),r.onsuccess(e)):MLOG.debug(MLOG.d("Waiting for all candidates..."));},r.onerror);}(t,n,i);else return _continueIgnored(_catch(function(){s.pc.setRemoteDescription(r).then(_async(function(){if(MLOG.debug(MLOG.d("Remote description accepted!")),s.remoteSdp=r.sdp,s.candidates&&s.candidates.length>0){for(let e=0;e<s.candidates.length;e++){let t=s.candidates[e];MLOG.debug(MLOG.d("Adding remote candidate:",t)),t&&!0!==t.completed?s.pc.addIceCandidate(t):s.pc.addIceCandidate();}s.candidates=[];}!function(e,t,r){r.customizeSdp="function"==typeof r.customizeSdp?r.customizeSdp:P2p.noop;let n=S[e];if(null==n||null===n.webrtcStuff||void 0===n.webrtcStuff)return MLOG.warn(MLOG.w("Invalid handle")),void r.onerror("Invalid handle");let i=n.webrtcStuff,o=!0===r.simulcast;o?MLOG.debug(MLOG.d("Creating answer (iceDone="+i.iceDone+", simulcast="+o+")")):MLOG.debug(MLOG.d("Creating answer (iceDone="+i.iceDone+")"));let a=null;if(P2p.unifiedPlan){a={};let e=null,r=null,n=i.pc.getTransceivers();if(n&&n.length>0)for(let t=0;t<n.length;t++){let i=n[t];i.sender&&i.sender.track&&"audio"===i.sender.track.kind||i.receiver&&i.receiver.track&&"audio"===i.receiver.track.kind?e||(e=i):(i.sender&&i.sender.track&&"video"===i.sender.track.kind||i.receiver&&i.receiver.track&&"video"===i.receiver.track.kind)&&(r||(r=i));}let o=A(t),s=D(t);if(o||s){if(o&&s){if(e)try{e.setDirection?e.setDirection("sendrecv"):e.direction="sendrecv",MLOG.debug(MLOG.d("Setting audio transceiver to sendrecv:",e));}catch(e){MLOG.error(MLOG.e(e));}}else if(o&&!s)try{e&&(e.setDirection?e.setDirection("sendonly"):e.direction="sendonly",MLOG.debug(MLOG.d("Setting audio transceiver to sendonly:",e)));}catch(e){MLOG.error(MLOG.e(e));}else if(!o&&s)if(e)try{e.setDirection?e.setDirection("recvonly"):e.direction="recvonly",MLOG.debug(MLOG.d("Setting audio transceiver to recvonly:",e));}catch(e){MLOG.error(MLOG.e(e));}else e=i.pc.addTransceiver("audio",{direction:"recvonly"}),MLOG.debug(MLOG.d("Adding recvonly audio transceiver:",e));}else if(t.removeAudio&&e)try{e.setDirection?e.setDirection("inactive"):e.direction="inactive",MLOG.debug(MLOG.d("Setting audio transceiver to inactive:",e));}catch(e){MLOG.error(MLOG.e(e));}let d=G(t),c=x(t);if(d||c){if(d&&c){if(r)try{r.setDirection?r.setDirection("sendrecv"):r.direction="sendrecv",MLOG.debug(MLOG.d("Setting video transceiver to sendrecv:",r));}catch(e){MLOG.error(MLOG.e(e));}}else if(d&&!c){if(r)try{r.setDirection?r.setDirection("sendonly"):r.direction="sendonly",MLOG.debug(MLOG.d("Setting video transceiver to sendonly:",r));}catch(e){MLOG.error(MLOG.e(e));}}else if(!d&&c)if(r)try{r.setDirection?r.setDirection("recvonly"):r.direction="recvonly",MLOG.debug(MLOG.d("Setting video transceiver to recvonly:",r));}catch(e){MLOG.error(MLOG.e(e));}else r=i.pc.addTransceiver("video",{direction:"recvonly"}),MLOG.debug(MLOG.d("Adding recvonly video transceiver:",r));}else if(t.removeVideo&&r)try{r.setDirection?r.setDirection("inactive"):r.direction="inactive",MLOG.debug(MLOG.d("Setting video transceiver to inactive:",r));}catch(e){MLOG.error(MLOG.e(e));}}else a="firefox"===P2p.webRTCAdapter.browserDetails.browser||"edge"===P2p.webRTCAdapter.browserDetails.browser?{offerToReceiveAudio:D(t),offerToReceiveVideo:x(t)}:{mandatory:{OfferToReceiveAudio:D(t),OfferToReceiveVideo:x(t)}};MLOG.debug(MLOG.d(a));let s=G(t);if(s&&o&&"firefox"===P2p.webRTCAdapter.browserDetails.browser){MLOG.debug(MLOG.d("Enabling Simulcasting for Firefox (RID)"));let e=i.pc.getSenders()[1],t=e.getParameters();MLOG.debug(MLOG.d(t)),e.setParameters({encodings:[{rid:"high",active:!0,priority:"high",maxBitrate:1e6},{rid:"medium",active:!0,priority:"medium",maxBitrate:3e5},{rid:"low",active:!0,priority:"low",maxBitrate:1e5}]});}i.pc.createAnswer(a).then(function(e){MLOG.debug(MLOG.d(e));let t={type:e.type,sdp:e.sdp};r.customizeSdp(t),e.sdp=t.sdp,MLOG.debug(MLOG.d("Setting local description")),s&&o&&("chrome"===P2p.webRTCAdapter.browserDetails.browser?MLOG.debug(MLOG.d("simulcast=true, but this is an answer,and video breaks in Chrome if we enable it")):"firefox"!==P2p.webRTCAdapter.browserDetails.browser&&MLOG.debug(MLOG.d("simulcast=true, but this is not Chrome nor Firefox, ignoring"))),i.mySdp=e.sdp;try{i.pc.setLocalDescription(e).catch(e=>{MLOG.error(MLOG.e("WebRTC not supported by this browser")),r.onerror(e);});}catch(e){MLOG.error(MLOG.e("WebRTC not supported by this browser")),r.onerror(e);}i.mediaConstraints=a,i.iceDone||i.trickle?r.onsuccess(e):MLOG.debug(MLOG.d("Waiting for all candidates..."));},r.onerror);}(t,n,i);return _await();}),_async(function(t){const _MLOG$error10=MLOG.error(MLOG.e("WebRTC not supported by this browser"));return _await(C(P2p_ERR_CODE_UNSUPPORTED,"setRemoteDescription error:"+e),function(_C19){_C19;});}));},function(e){const _MLOG$error9=MLOG.error(MLOG.e("WebRTC not supported by this browser"));return _await(C(P2p_ERR_CODE_UNSUPPORTED,"setRemoteDescription error:"+e),function(_C18){_C18;});}));});});});const C=function(e,r){return _call(w,function(){0,t.onerror(e,r);});};let r=null,n={},i=null,o=null,a=0,s=t.server;Array.isArray(s)?(MLOG.debug(MLOG.d("Multiple servers provided ("+s.length+"), will use the first that works")),s=null,o=t.server,MLOG.debug(MLOG.d(o))):MLOG.debug(MLOG.d("Using WebSockets to contact Janus Server: "+s));let d=t.iceServers;null==d&&(d=[{urls:"stun:stun.l.google.com:19302"}]);let c=t.iceTransportPolicy,f=t.bundlePolicy,u=t.ipv6;null==u&&(u=!1);let l=10;void 0!==t.max_poll_events&&null!==t.max_poll_events&&(l=t.max_poll_events),l<1&&(l=1);let p=null;void 0!==t.token&&null!==t.token&&(p=t.token);let h=null;void 0!==t.apisecret&&null!==t.apisecret&&(h=t.apisecret),this.destroyOnUnload=!0,void 0!==t.destroyOnUnload&&null!==t.destroyOnUnload&&(this.destroyOnUnload=!0===t.destroyOnUnload);let g=1e3;void 0!==t.keepAlivePeriod&&null!==t.keepAlivePeriod&&(g=t.keepAlivePeriod),isNaN(g)&&(g=3e4);let y=6e4;void 0!==t.longPollTimeout&&null!==t.longPollTimeout&&(y=t.longPollTimeout),isNaN(y)&&(y=6e4);let b,m=!1,v=null,S={},k={};new Date();function T(){if(null===s||!m)return;i=setTimeout(T,g);let e=redfinger.fillControllDelay();r.send(e);}function P(e){null===s&&Array.isArray(o)&&(s=o[a],MLOG.debug(MLOG.d("Server #"+(a+1)+": trying WebSockets to contact Janus ("+s+")"))),TrackingTmpData.signalLinkStartTime=new Date().getTime(),TrackingTmpData.signalLinkResult=void 0,r=new WebSocket(s),n={error:function(t){if(MLOG.error(MLOG.e("Error connecting to the WebSockets server... "+s)),Array.isArray(o)&&!e.reconnect){if(a++,a===o.length)return;return s=null,void setTimeout(function(){P(e);},200);}if(!redfinger.isDestory&&void 0===TrackingTmpData.signalLinkResult){let e=new Date().getTime();TrackingTmpData.signalLinkResult=-1,redfinger.tracking.setBaseInfo({signalConnectTime:e-TrackingTmpData.signalLinkStartTime,signalLinkConnectResult:-1});}},open:function(){let t=new Date().getTime();TrackingTmpData.signalLinkResult=0,redfinger.tracking.setBaseInfo({signalConnectTime:t-TrackingTmpData.signalLinkStartTime,signalLinkConnectResult:0}),m=!0,redfinger.net_work_status=redfinger.shake_stat_list.sendshake;let n=e.control,i=redfinger.fillShakeOnline(n.userid,n.token,n.padcode,n.appname,0);r.send(i),MLOG.debug(MLOG.d("fillShakeOnline:"+n.userid+", "+n.token+", "+n.padcode+", "+n.appname));},message:function(t){e.onrecvMsg(t.data);},close:function(){if(null!==s&&m){if(m=!1,!redfinger.isDestory&&void 0===TrackingTmpData.signalLinkResult){let e=new Date().getTime();TrackingTmpData.signalLinkResult=-1,redfinger.tracking.setBaseInfo({signalConnectTime:e-TrackingTmpData.signalLinkStartTime,signalLinkConnectResult:-1});}MLOG.debug(MLOG.d("onclose:"+s));}}};for(let e in n)r.addEventListener(e,n[e]);}this.getServer=function(){return wsserver;},this.destroy=function(e){w(e);},this.start=function(){return P2p.isWebrtcSupported()?null===t.server||void 0===t.server?(MLOG.error(MLOG.e("Invalid server url")),P2p_ERR_CODE_INVALID_SERVER):(P(t),0):(MLOG.warn(MLOG.w("WebRTC not supported by this browser")),C(P2p_ERR_CODE_UNSUPPORTED,"WebRTC not supported by this browser"),P2p_ERR_CODE_UNSUPPORTED);},this.stop=_async(function(){return _callIgnored(w);}),this.triggerError=function(e,t){C(e,t);};let _=!1;function w(e){return new Promise((o,a)=>{(e=e||{}).success="function"==typeof e.success?e.success:P2p.noop,e.error="function"==typeof e.error?e.error:P2p.noop;let s=!0;void 0!==e.asyncRequest&&null!==e.asyncRequest&&(s=!0===e.asyncRequest);let d=!1;void 0!==e.notifyDestroyed&&null!==e.notifyDestroyed&&(d=!0===e.notifyDestroyed);let c=!0;void 0!==e.cleanupHandles&&null!==e.cleanupHandles&&(c=!0===e.cleanupHandles),MLOG.debug(MLOG.d("Destroying session ")),redfinger.isDestorying=!0;var f=function(){redfinger.isDestorying=!1,redfinger.isDestory=!0,function(){if(c)for(var e in S)O(e,{noRequest:!0});}(),o(!0);};if(!m)return MLOG.debug(MLOG.d("Is the server down? (connected=false)")),r&&r.close(),e.success(),void f();i&&clearTimeout(i);let u=function(){for(let e in n)r.removeEventListener(e,n[e]);r.removeEventListener("message",l),r.removeEventListener("error",p),i&&clearTimeout(i),r.close();};var l=function(r){let n=JSON.parse(r.data);n.session_id===request.session_id&&n.transaction===request.transaction&&(u(),e.success(),d&&t.destroyed());},p=function(e){u(),d&&t.destroyed(),f();};r.removeEventListener("message",n.message),r.removeEventListener("error",n.error),r.addEventListener("message",l),r.addEventListener("error",p),r.addEventListener("close",f),redfinger.wsClosed=!0,r.close(),setTimeout(()=>{redfinger.isDestorying&&f();},500),delete P2p.sessions[v],v=null;});}function O(e,t){(t=t||{}).success="function"==typeof t.success?t.success:P2p.noop,t.error="function"==typeof t.error?t.error:P2p.noop;let r=!0;void 0!==t.asyncRequest&&null!==t.asyncRequest&&(r=!0===t.asyncRequest);let n=!0;void 0!==t.noRequest&&null!==t.noRequest&&(n=!0===t.noRequest),MLOG.debug(MLOG.d("Destroying handle "+e+" (async="+r+")")),L(e);let i=S[e];return null==i||i.detached||n||m?(delete S[e],void t.success()):(MLOG.debug(MLOG.d("Is the server down? (connected=false)")),void t.error("Is the server down? (connected=false)"));}function I(e,t){if(!m)return void MLOG.debug(MLOG.d("Is the server down? (connected=false)"));let n=S[e];if(null==n||null===n.webrtcStuff||void 0===n.webrtcStuff)return void MLOG.warn(MLOG.w("Invalid handle"));let i=redfinger.fillShakeCandidate(t);r.send(i),MLOG.debug(MLOG.d("fillShakeCandidate:"));}function E(e,t,r,n){let i=S[e];if(null==i||null===i.webrtcStuff||void 0===i.webrtcStuff)return void MLOG.warn(MLOG.w("Invalid handle"));let o=i.webrtcStuff,a=_async(function(e){MLOG.debug(MLOG.d("Received state change on data channel:",e));let t=e.target.label,r=null!==o.dataChannel[t]&&void 0!==o.dataChannel[t]?o.dataChannel[t].readyState:"null";return _invokeIgnored(function(){if(MLOG.debug(MLOG.d("State change on <"+t+"> data channel: "+r)),"open"===r){if(o.dataChannel[t].pending&&o.dataChannel[t].pending.length>0){MLOG.debug(MLOG.d("Sending pending messages on <' + label + '>:",o.dataChannel[t].pending.length));for(let e=0;e<o.dataChannel[t].pending.length;e++){let r=o.dataChannel[t].pending[e];MLOG.debug(MLOG.d("Sending string on data channel <"+t+">: "+r)),o.dataChannel[t].send(r);}o.dataChannel[t].pending=[];}i.ondataopen(t);}else return _await("close"===r&&C(2006,"Invalid handle or DataChannel is not available."),function(_C13){_C13;},!("close"===r));});});o.dataChannel[t]=r||o.pc.createDataChannel(t,{ordered:!1}),o.dataChannel[t].onmessage=function(e){MLOG.debug(MLOG.d("Received message on data channel:",e));let t=e.target.label;i.ondata(e.data,t);},o.dataChannel[t].onopen=a,o.dataChannel[t].onclose=a,o.dataChannel[t].onerror=_async(function(e){const _MLOG$debug2=MLOG.debug(MLOG.d("Got error on data channel:",e)),_temp12=redfinger.net_work_status!==redfinger.shake_stat_list.destory;return _await(_temp12&&C(2006,"Invalid handle or DataChannel is not available."),function(_C14){_C14;},!_temp12);}),o.dataChannel[t].pending=[],n&&o.dataChannel[t].pending.push(n);}function R(e){let t=S[e];if(null==t||null===t.webrtcStuff||void 0===t.webrtcStuff)return MLOG.debug(MLOG.d("Invalid handle")),"Invalid handle";let r=t.webrtcStuff;return null===r.pc||void 0===r.pc?"Invalid PeerConnection":r.pc.getStats?null===r.bitrate.timer||void 0===r.bitrate.timer?(MLOG.debug(MLOG.d("Starting bitrate timer (via getStats)")),r.bitrate.timer=setInterval(function(){r.pc.getStats().then(function(e){e.forEach(function(e){if(!e)return;let t=!1;if(("video"===e.mediaType||e.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===e.type&&e.id.indexOf("rtcp")<0?t=!0:"ssrc"!==e.type||!e.bytesReceived||"VP8"!==e.googCodecName&&""!==e.googCodecName||(t=!0),t){if(r.bitrate.bsnow=e.bytesReceived,r.bitrate.tsnow=e.timestamp,null===r.bitrate.bsbefore||null===r.bitrate.tsbefore)r.bitrate.bsbefore=r.bitrate.bsnow,r.bitrate.tsbefore=r.bitrate.tsnow;else{let e=r.bitrate.tsnow-r.bitrate.tsbefore;"safari"===P2p.webRTCAdapter.browserDetails.browser&&(e/=1e3);let t=Math.round(8*(r.bitrate.bsnow-r.bitrate.bsbefore)/e);"safari"===P2p.webRTCAdapter.browserDetails.browser&&(t=parseInt(t/1e3,10)),r.bitrate.value=t+" kbits/sec",r.bitrate.bsbefore=r.bitrate.bsnow,r.bitrate.tsbefore=r.bitrate.tsnow;}redfinger.resizePhone();}});});},1e3),"0 kbits/sec"):r.bitrate.value:(MLOG.debug(MLOG.d("Getting the video bitrate unsupported by browser")),"Feature unsupported by browser");}function L(e,t){MLOG.debug(MLOG.d("Cleaning WebRTC stuff"));let r=S[e];if(null==r)return;let n=r.webrtcStuff;if(null!=n){n.remoteStream=null,n.volume&&(n.volume.local&&n.volume.local.timer&&clearInterval(n.volume.local.timer),n.volume.remote&&n.volume.remote.timer&&clearInterval(n.volume.remote.timer)),n.volume={},n.bitrate.timer&&clearInterval(n.bitrate.timer),n.bitrate.timer=null,n.bitrate.bsnow=null,n.bitrate.bsbefore=null,n.bitrate.tsnow=null,n.bitrate.tsbefore=null,n.bitrate.value=null;try{if(!n.streamExternal&&null!==n.myStream&&void 0!==n.myStream){MLOG.debug(MLOG.d("Stopping local stream tracks"));let e=n.myStream.getTracks();for(let t=0;t<e.length;t++){let r=e[t];MLOG.debug(MLOG.d(r)),null!=r&&r.stop();}}}catch(e){}n.streamExternal=!1,n.myStream=null;try{n.pc.close();}catch(e){}n.pc=null,n.candidates=null,n.mySdp=null,n.remoteSdp=null,n.iceDone=!1,n.dataChannel={},n.dtmfSender=null;}r.oncleanup();}function A(e){return MLOG.debug(MLOG.d("isAudioSendEnabled:",e)),null!=e&&!1!==e.audio&&void 0!==e.audioSend&&null!==e.audioSend&&!0===e.audioSend;}function D(e){return MLOG.debug(MLOG.d("isAudioRecvEnabled:",e)),null==e||!1!==e.audio&&(void 0===e.audioRecv||null===e.audioRecv||!0===e.audioRecv);}function G(e){return MLOG.debug(MLOG.d("isVideoSendEnabled:",e)),null!=e&&!1!==e.video&&void 0!==e.videoSend&&null!==e.videoSend&&!0===e.videoSend;}function x(e){return MLOG.debug(MLOG.d("isVideoRecvEnabled:",e)),null==e||!1!==e.video&&(void 0===e.videoRecv||null===e.videoRecv||!0===e.videoRecv);}this.getWebrtcStates=function(){try{for(var e in S)S[e]&&null!==S[e].webrtcStuff.pc&&function(e,t){let r=e.getRemoteStreams();var n=null;for(let e=0;e<r.length;e++)if("video"===r[e].getTracks()[0].kind){n=r[e].getVideoTracks()[0];break;}null!==n?e.getStats(n).then(function(e){let r=[];e.forEach(function(e){r.push(e);}),t(r);}).catch(function(e){t([{packetsLost:0,packetsReceived:0}]);}):t([{packetsLost:0,packetsReceived:0}]);}(S[e].webrtcStuff.pc,function(e){for(var t=0;t<e.length;++t){var r=e[t];if(void 0!==r.packetsReceived&&void 0!==r.packetsLost){redfinger.webrtcStates.packetsReceivedSec=r.packetsReceived-redfinger.webrtcStates.packetsReceived,redfinger.webrtcStates.packetsLostSec=r.packetsLost-redfinger.webrtcStates.packetsLost,redfinger.webrtcStates.packetsLost=r.packetsLost,redfinger.webrtcStates.packetsReceived=r.packetsReceived,redfinger.webrtcStates.framesDecoded=r.framesDecoded;break;}}});}catch(e){console.log(e),MLOG.error(MLOG.e("getWebrtcStates fail"));}},this.onSessinCreate=function(){MLOG.debug(MLOG.d("onSessinCreate")),m=!0,_async(function(e){let _exit8=false;return _invoke(function(){if(!m){return _await(C(P2p_ERR_CODE_CONNECT_FAILED,"Is the server down? (connected=false)"),function(_C15){const _temp13=void _C15;_exit8=true;return _temp13;});}},function(_result16){if(_exit8)return _result16;let t=1;MLOG.debug(MLOG.d("Created handle: "+t));let n={detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return t;},getPlugin:function(){return plugin;},getBitrate:function(){return R(t);},send:function(e){!function(e,t){if(t=t||{},t.onsuccess="function"==typeof t.onsuccess?t.onsuccess:P2p.noop,t.onerror="function"==typeof t.onerror?t.onerror:P2p.noop,!m)return MLOG.warn(MLOG.w("Is the server down? (connected=false)")),void t.onerror("Is the server down? (connected=false)");let n=S[e];if(null==n||null===n.webrtcStuff||void 0===n.webrtcStuff)return MLOG.warn(MLOG.w("Invalid handle")),void t.onerror("Invalid handle");let i=t.message,o=t.jsep,a=P2p.randomString(10),s={janus:GWSESSION_MESSAGE,body:i,transaction:a};null!==n.token&&void 0!==n.token&&(s.token=n.token);null!=h&&(s.apisecret=h);null!=o&&(s.jsep=o);s.session_id=v,s.handle_id=e,k[a]=function(e){if("success"!==e.janus)"ack"===e.janus?(null===t.onsuccess||t.onsuccess,t.onsuccess()):void 0!==e.error&&null!==e.error?(MLOG.debug(MLOG.d("Ooops: "+e.error.code+" "+e.error.reason)),t.onerror(e.error.code+" "+e.error.reason)):(MLOG.warn(MLOG.w("Unknown error")),t.onerror("Unknown error"));else{let r=e.plugindata;if(null==r)return MLOG.debug(MLOG.d("Request succeeded, but missing plugindata...")),void t.onsuccess();MLOG.debug(MLOG.d("Synchronous transaction successful ("+r.plugin+")"));let n=r.data;t.onsuccess(n);}},1===r.readyState&&r.send(JSON.stringify(s));}(t,e);},data:function(e){!function(e,t){t=t||{},t.onsuccess="function"==typeof t.onsuccess?t.onsuccess:P2p.noop,t.onerror="function"==typeof t.onerror?t.onerror:P2p.noop;let r=S[e];if(null==r||null===r.webrtcStuff||void 0===r.webrtcStuff)return MLOG.warn(MLOG.w("Invalid handle")),void t.onerror("Invalid handle");let n=r.webrtcStuff,i=t.text;if(null==i)return MLOG.warn(MLOG.w("Invalid text")),void t.onerror("Invalid text");let o=t.label?t.label:P2p.dataChanDefaultLabel;if(!n.dataChannel[o])return E(e,o,!1,i),void t.onsuccess();if("open"!==n.dataChannel[o].readyState)return n.dataChannel[o].pending.push(i),void t.onsuccess();n.dataChannel[o].send(i),t.onsuccess();}(t,e);},iceState:_async(function(e){return _invoke(function(){if(MLOG.debug(MLOG.d("iceState:"+e)),"failed"===e&&!redfinger.wsClosed){if(!redfinger.isDestory&&void 0===TrackingTmpData.webrtcLinkResult){let e=new Date().getTime();TrackingTmpData.webrtcLinkResult=-1,redfinger.tracking.setBaseInfo({webrtcLinkConnectTime:e-TrackingTmpData.webrtcLinkStartTime,webrtcLinkConnectResult:-1});}return _awaitIgnored(C(2005,"iceState  disconnected"));}},function(){if("connected"===e){let e=new Date().getTime();TrackingTmpData.webrtcLinkResult=0,redfinger.tracking.setBaseInfo({webrtcLinkConnectTime:e-TrackingTmpData.webrtcLinkStartTime,webrtcLinkConnectResult:0}),R(t);}});}),webrtcState:function(){MLOG.debug(MLOG.d("webrtcState:"));},slowLink:function(e,t){MLOG.debug(MLOG.d("slowLink, uplink:"+e+", nacks:"+t));},onmessage:e.onmessage,createAnswer:function(e){!function(e,t){let r=t.jsep;t.media=t.media||{audio:!0,video:!0};let n=t.media,i=S[e];if(null==i||null===i.webrtcStuff||void 0===i.webrtcStuff)return MLOG.debug(MLOG.d("Invalid handle")),void t.onerror("Invalid handle");let o=i.webrtcStuff;if(o.trickle=function(e){if(MLOG.debug(MLOG.d("isTrickleEnabled:",e)),null==e)return!0;return!0===e;}(t.trickle),void 0===o.pc||null===o.pc)n.update=!1,n.keepAudio=!1,n.keepVideo=!1;else if(void 0!==o.pc&&null!==o.pc){if(MLOG.debug(MLOG.d("Updating existing media session")),n.update=!0,null!==t.stream&&void 0!==t.stream)t.stream!==o.myStream&&MLOG.debug(MLOG.d("Renegotiation involves a new external stream"));else{if(n.addAudio){if(n.keepAudio=!1,n.replaceAudio=!1,n.removeAudio=!1,n.audioSend=!0,o.myStream&&o.myStream.getAudioTracks()&&o.myStream.getAudioTracks().length)return MLOG.debug(MLOG.d("Can't add audio stream, there already is one")),void t.onerror("Can't add audio stream, there already is one");}else n.removeAudio?(n.keepAudio=!1,n.replaceAudio=!1,n.addAudio=!1,n.audioSend=!1):n.replaceAudio&&(n.keepAudio=!1,n.addAudio=!1,n.removeAudio=!1,n.audioSend=!0);if(null===o.myStream||void 0===o.myStream?(n.replaceAudio&&(n.keepAudio=!1,n.replaceAudio=!1,n.addAudio=!0,n.audioSend=!0),A(n)&&(n.keepAudio=!1,n.addAudio=!0)):null===o.myStream.getAudioTracks()||void 0===o.myStream.getAudioTracks()||0===o.myStream.getAudioTracks().length?(n.replaceAudio&&(n.keepAudio=!1,n.replaceAudio=!1,n.addAudio=!0,n.audioSend=!0),A(n)&&(n.keepVideo=!1,n.addAudio=!0)):!A(n)||n.removeAudio||n.replaceAudio||(n.keepAudio=!0),n.addVideo){if(n.keepVideo=!1,n.replaceVideo=!1,n.removeVideo=!1,n.videoSend=!0,o.myStream&&o.myStream.getVideoTracks()&&o.myStream.getVideoTracks().length)return MLOG.debug(MLOG.d("Can't add video stream, there already is one")),void t.onerror("Can't add video stream, there already is one");}else n.removeVideo?(n.keepVideo=!1,n.replaceVideo=!1,n.addVideo=!1,n.videoSend=!1):n.replaceVideo&&(n.keepVideo=!1,n.addVideo=!1,n.removeVideo=!1,n.videoSend=!0);null===o.myStream||void 0===o.myStream||null===o.myStream.getVideoTracks()||void 0===o.myStream.getVideoTracks()||0===o.myStream.getVideoTracks().length?(n.replaceVideo&&(n.keepVideo=!1,n.replaceVideo=!1,n.addVideo=!0,n.videoSend=!0),G(n)&&(n.keepVideo=!1,n.addVideo=!0)):!G(n)||n.removeVideo||n.replaceVideo||(n.keepVideo=!0),n.addData&&(n.data=!0);}if(A(n)&&n.keepAudio&&G(n)&&n.keepVideo)return void M(e,r,n,t,o.myStream);}if(n.update&&!o.streamExternal){if(n.removeAudio||n.replaceAudio){if(o.myStream&&o.myStream.getAudioTracks()&&o.myStream.getAudioTracks().length){var a=o.myStream.getAudioTracks()[0];MLOG.debug(MLOG.d("Removing audio track:",a)),o.myStream.removeTrack(a);try{a.stop();}catch(e){}}if(o.pc.getSenders()&&o.pc.getSenders().length){let e=!0;if(n.replaceAudio&&P2p.unifiedPlan&&(e=!1),e)for(var s=0;s<o.pc.getSenders().length;s++){(a=o.pc.getSenders()[s])&&a.track&&"audio"===a.track.kind&&(MLOG.debug(MLOG.d("Removing audio sender:",a)),o.pc.removeTrack(a));}}}if(n.removeVideo||n.replaceVideo){if(o.myStream&&o.myStream.getVideoTracks()&&o.myStream.getVideoTracks().length){a=o.myStream.getVideoTracks()[0];MLOG.debug(MLOG.d("Removing video track:",a)),o.myStream.removeTrack(a);try{a.stop();}catch(e){}}if(o.pc.getSenders()&&o.pc.getSenders().length){let e=!0;if(n.replaceVideo&&P2p.unifiedPlan&&(e=!1),e)for(s=0;s<o.pc.getSenders().length;s++){(a=o.pc.getSenders()[s])&&a.track&&"video"===a.track.kind&&(MLOG.debug(MLOG.d("Removing video sender:",a)),o.pc.removeTrack(a));}}}}if(null!==t.stream&&void 0!==t.stream){let i=t.stream;if(MLOG.debug(MLOG.d("MediaStream provided by the application")),n.update&&o.myStream&&o.myStream!==t.stream&&!o.streamExternal){try{let e=o.myStream.getTracks();for(let t=0;t<e.length;t++){let r=e[t];MLOG.debug(MLOG.d(r)),null!=r&&r.stop();}}catch(e){}o.myStream=null;}return o.streamExternal=!0,void M(e,r,n,t,i);}A(n)||G(n)||M(e,r,n,t);}(t,e);},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,hangup:function(e){L(t,!0===e);}};S[t]=n,e.onsuccess(n);});})({onsuccess:function(e){b=e,function(){let e="",t=[];for(let e=0;e<d.length;e++)t.push(d[e].urls);e=t.join("&&");let n=redfinger.fillShakeOffer(3,redfinger.config.webrtcFmt,e);r.send(n),MLOG.debug(MLOG.d("fillShakeOffer:"));}();},onmessage:function(e,n){t.onstarted(),null!=n&&(MLOG.debug(MLOG.d("Handling SDP as well...")),b.createAnswer({jsep:n,media:{audioSend:!1,videoSend:!1,data:!0},onsuccess:function(e){MLOG.debug(MLOG.d("Got SDP!")),MLOG.debug(MLOG.d("createAnswer, sdp:"+e.sdp));let t=redfinger.fillShakeAnswer(e.sdp);r.send(t),MLOG.debug(MLOG.d("fillShakeAnswer:"));},onerror:_async(function(e){const _MLOG$debug3=MLOG.debug(MLOG.d("WebRTC error... "+JSON.stringify(e)));return _await(C(PEERGW_ERR_CODE_UNSUPPORTED,"WebRTC not supported by this browser"),function(_C16){_C16;});})}));},onremotestream:function(e){MLOG.debug(MLOG.d(" ::: Got a remote stream :::"));let r=e.getTracks(),n="";r.length>0&&("audio"===r[0].kind?(MLOG.debug(MLOG.d("get stream audio")),n="audio"):"video"===r[0].kind&&(MLOG.debug(MLOG.d("get stream video")),n="video")),"video"===n?P2p.attachMediaStream(t.viewOjb,e):"audio"===n&&t.audioObj&&P2p.attachMediaStream(t.audioObj,e);},ondataopen:function(e){MLOG.debug(MLOG.d("The DataChannel is available!")),_=!0;},ondata:function(e){MLOG.debug(MLOG.d("We got data from the DataChannel! "+e));},oncleanup:function(){MLOG.debug(MLOG.d(" ::: Got a cleanup notification :::"));}}),i=setTimeout(T,g);},this.getWsState=function(){return r.readyState;},this.sendto=function(e){return null==b?(MLOG.debug(MLOG.d("Invalid handle or DataChannel is not available.")),-1):(b.data({text:e}),0);},this.sendmsg=function(e){null==b&&MLOG.debug(MLOG.d("Invalid handle or streaming is not available.")),m&&r.send(e);},this.changeBitrateModel=function(e){let t={request:"bitrate_mode",data:e};b.send({message:t});},this.getBitrate=function(){return"Invalid data";},this.onShakeOfferR=function(e){b.onmessage("",e);},this.transCandidate=function(e){MLOG.debug(MLOG.d("old candidate:"+e.candidate));let t=redfinger.inputConfigInfo.resultInfo.remoteList;if(void 0!==t&&t.length>0){let r=e.candidate,n=r.split(" ");n[4]=t[0].remoteUdpIp,n[5]=t[0].remoteUdpPort,r=n.join(" "),e.candidate=r;}return MLOG.debug(MLOG.d("new candidate:"+e.candidate)),e;},this.onShakeCandidate=function(e){let t=b.webrtcStuff;e=this.transCandidate(e),t.pc&&t.remoteSdp?(MLOG.debug(MLOG.d("Adding remote candidate:",e)),e&&1!==e.completed?t.pc.addIceCandidate(e):t.pc.addIceCandidate()):(MLOG.debug(MLOG.d("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate")),t.candidates||(t.candidates=[]),t.candidates.push(e),MLOG.debug(MLOG.d(t.candidates)));};}P2p.sessions={},P2p.dataChanDefaultLabel="JanusDataChannel",P2p.noop=function(){},P2p.init=function(){P2p.webRTCAdapter=adapter,P2p.attachMediaStream=function(e,t){if(MLOG.debug(MLOG.d("---browse:"+P2p.webRTCAdapter.browserDetails.browser)),MLOG.debug(MLOG.d("---version:"+P2p.webRTCAdapter.browserDetails.version)),"chrome"===P2p.webRTCAdapter.browserDetails.browser){let r=P2p.webRTCAdapter.browserDetails.version;r>=52?e.srcObject=t:r?void 0!==e.src?e.src=URL.createObjectURL(t):MLOG.error(MLOG.e("Error attaching stream to element")):e.srcObject=t;}else e.srcObject=t;},P2p.reattachMediaStream=function(e,t){if("chrome"===P2p.webRTCAdapter.browserDetails.browser){P2p.webRTCAdapter.browserDetails.version>=52?e.srcObject=t.srcObject:void 0!==e.src?e.src=t.src:MLOG.error(MLOG.e("Error reattaching stream to element"));}else e.srcObject=t.srcObject;};let e=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0;window["on"+(e?"pagehide":"beforeunload")];if(P2p.unifiedPlan=!1,"firefox"===P2p.webRTCAdapter.browserDetails.browser&&P2p.webRTCAdapter.browserDetails.version>=59)P2p.unifiedPlan=!0;else if("chrome"===P2p.webRTCAdapter.browserDetails.browser&&P2p.webRTCAdapter.browserDetails.version<72)P2p.unifiedPlan=!1;else if("undefined"!=typeof RTCRtpTransceiver)"currentDirection"in RTCRtpTransceiver.prototype||(PeerGW.unifiedPlan=!1);else{let e=null;try{e=new RTCPeerConnection(),e.addTransceiver("audio"),PeerGW.unifiedPlan=!0,e.close();}catch(e){PeerGW.unifiedPlan=!1;}}P2p.initDone=!0;},function(e,t){"function"==typeof define&&(define.amd||define.cmd)?define(function(){return t(e);}):t(e,!0);}(this,function(e,t){function r(t,r,n){e.WeixinJSBridge?WeixinJSBridge.invoke(t,i(r),function(e){a(t,e,n);}):d(t,n);}function n(t,r,n){e.WeixinJSBridge?WeixinJSBridge.on(t,function(e){n&&n.trigger&&n.trigger(e),a(t,e,r);}):d(t,n||r);}function i(e){return(e=e||{}).appId=O.appId,e.verifyAppId=O.appId,e.verifySignType="sha1",e.verifyTimestamp=O.timestamp+"",e.verifyNonceStr=O.nonceStr,e.verifySignature=O.signature,e;}function o(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"};}function a(e,t,r){"openEnterpriseChat"==e&&(t.errCode=t.err_code),delete t.err_code,delete t.err_desc,delete t.err_detail;var n=t.errMsg;n||(n=t.err_msg,delete t.err_msg,n=function(e,t){var r=e,n=h[r];n&&(r=n);var i="ok";if(t){var o=t.indexOf(":");"confirm"==(i=t.substring(o+1))&&(i="ok"),"failed"==i&&(i="fail"),-1!=i.indexOf("failed_")&&(i=i.substring(7)),-1!=i.indexOf("fail_")&&(i=i.substring(5)),"access denied"!=(i=(i=i.replace(/_/g," ")).toLowerCase())&&"no permission to execute"!=i||(i="permission denied"),"config"==r&&"function not exist"==i&&(i="ok"),""==i&&(i="fail");}return r+":"+i;}(e,n),t.errMsg=n),(r=r||{})._complete&&(r._complete(t),delete r._complete),n=t.errMsg||"",O.debug&&!r.isInnerInvoke&&alert(JSON.stringify(t));var i=n.indexOf(":");switch(n.substring(i+1)){case"ok":r.success&&r.success(t);break;case"cancel":r.cancel&&r.cancel(t);break;default:r.fail&&r.fail(t);}r.complete&&r.complete(t);}function s(e){if(e){for(var t=0,r=e.length;t<r;++t){var n=e[t],i=p[n];i&&(e[t]=i);}return e;}}function d(e,t){if(!(!O.debug||t&&t.isInnerInvoke)){var r=h[e];r&&(e=r),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"");}}function c(){return new Date().getTime();}function f(t){k&&(e.WeixinJSBridge?t():g.addEventListener&&g.addEventListener("WeixinJSBridgeReady",t,!1));}function u(){L.invoke||(L.invoke=function(t,r,n){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,i(r),n);},L.on=function(t,r){e.WeixinJSBridge&&WeixinJSBridge.on(t,r);});}function l(e){if("string"==typeof e&&e.length>0){var t=e.split("?")[0],r=e.split("?")[1];return t+=".html",void 0!==r?t+"?"+r:t;}}if(!e.jWeixin){var p={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},h=function(){var e={};for(var t in p)e[p[t]]=t;return e;}(),g=e.document,y=g.title,b=navigator.userAgent.toLowerCase(),m=navigator.platform.toLowerCase(),v=!(!m.match("mac")&&!m.match("win")),S=-1!=b.indexOf("wxdebugger"),k=-1!=b.indexOf("micromessenger"),C=-1!=b.indexOf("android"),T=-1!=b.indexOf("iphone")||-1!=b.indexOf("ipad"),P=function(){var e=b.match(/micromessenger\/(\d+\.\d+\.\d+)/)||b.match(/micromessenger\/(\d+\.\d+)/);return e?e[1]:"";}(),_={initStartTime:c(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},w={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:T?1:C?2:-1,clientVersion:P,url:encodeURIComponent(location.href)},O={},M={_completes:[]},I={state:0,data:{}};f(function(){_.initEndTime=c();});var E=!1,R=[],L={config:function(e){O=e,d("config",e);var t=!1!==O.check;f(function(){if(t)r(p.config,{verifyJsApiList:s(O.jsApiList)},function(){M._complete=function(e){_.preVerifyEndTime=c(),I.state=1,I.data=e;},M.success=function(e){w.isPreVerifyOk=0;},M.fail=function(e){M._fail?M._fail(e):I.state=-1;};var e=M._completes;return e.push(function(){!function(e){if(!(v||S||O.debug||P<"6.0.2"||w.systemType<0)){var t=new Image();w.appId=O.appId,w.initTime=_.initEndTime-_.initStartTime,w.preVerifyTime=_.preVerifyEndTime-_.preVerifyStartTime,L.getNetworkType({isInnerInvoke:!0,success:function(e){w.networkType=e.networkType;var r="https://open.weixin.qq.com/sdk/report?v="+w.version+"&o="+w.isPreVerifyOk+"&s="+w.systemType+"&c="+w.clientVersion+"&a="+w.appId+"&n="+w.networkType+"&i="+w.initTime+"&p="+w.preVerifyTime+"&u="+w.url;t.src=r;}});}}();}),M.complete=function(t){for(var r=0,n=e.length;r<n;++r)e[r]();M._completes=[];},M;}()),_.preVerifyStartTime=c();else{I.state=1;for(var e=M._completes,n=0,i=e.length;n<i;++n)e[n]();M._completes=[];}}),u();},ready:function(e){0!=I.state?e():(M._completes.push(e),!k&&O.debug&&e());},error:function(e){P<"6.0.2"||(-1==I.state?e(I.data):M._fail=e);},checkJsApi:function(e){r("checkJsApi",{jsApiList:s(e.jsApiList)},(e._complete=function(e){if(C){var t=e.checkResult;t&&(e.checkResult=JSON.parse(t));}e=function(e){var t=e.checkResult;for(var r in t){var n=h[r];n&&(t[n]=t[r],delete t[r]);}return e;}(e);},e));},onMenuShareTimeline:function(e){n(p.onMenuShareTimeline,{complete:function(){r("shareTimeline",{title:e.title||y,desc:e.title||y,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e);}},e);},onMenuShareAppMessage:function(e){n(p.onMenuShareAppMessage,{complete:function(t){"favorite"===t.scene?r("sendAppMessage",{title:e.title||y,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""}):r("sendAppMessage",{title:e.title||y,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e);}},e);},onMenuShareQQ:function(e){n(p.onMenuShareQQ,{complete:function(){r("shareQQ",{title:e.title||y,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e);}},e);},onMenuShareWeibo:function(e){n(p.onMenuShareWeibo,{complete:function(){r("shareWeiboApp",{title:e.title||y,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e);}},e);},onMenuShareQZone:function(e){n(p.onMenuShareQZone,{complete:function(){r("shareQZone",{title:e.title||y,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e);}},e);},startRecord:function(e){r("startRecord",{},e);},stopRecord:function(e){r("stopRecord",{},e);},onVoiceRecordEnd:function(e){n("onVoiceRecordEnd",e);},playVoice:function(e){r("playVoice",{localId:e.localId},e);},pauseVoice:function(e){r("pauseVoice",{localId:e.localId},e);},stopVoice:function(e){r("stopVoice",{localId:e.localId},e);},onVoicePlayEnd:function(e){n("onVoicePlayEnd",e);},uploadVoice:function(e){r("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e);},downloadVoice:function(e){r("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e);},translateVoice:function(e){r("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e);},chooseImage:function(e){r("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},(e._complete=function(e){if(C){var t=e.localIds;try{t&&(e.localIds=JSON.parse(t));}catch(e){}}},e));},getLocation:function(e){},previewImage:function(e){r(p.previewImage,{current:e.current,urls:e.urls},e);},uploadImage:function(e){r("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e);},downloadImage:function(e){r("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e);},getLocalImgData:function(e){!1===E?(E=!0,r("getLocalImgData",{localId:e.localId},(e._complete=function(e){if(E=!1,R.length>0){var t=R.shift();wx.getLocalImgData(t);}},e))):R.push(e);},getNetworkType:function(e){r("getNetworkType",{},(e._complete=function(e){e=function(e){var t=e.errMsg;e.errMsg="getNetworkType:ok";var r=e.subtype;if(delete e.subtype,r)e.networkType=r;else{var n=t.indexOf(":"),i=t.substring(n+1);switch(i){case"wifi":case"edge":case"wwan":e.networkType=i;break;default:e.errMsg="getNetworkType:fail";}}return e;}(e);},e));},openLocation:function(e){r("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e);},getLocation:function(e){e=e||{},r(p.getLocation,{type:e.type||"wgs84"},(e._complete=function(e){delete e.type;},e));},hideOptionMenu:function(e){r("hideOptionMenu",{},e);},showOptionMenu:function(e){r("showOptionMenu",{},e);},closeWindow:function(e){r("closeWindow",{},e=e||{});},hideMenuItems:function(e){r("hideMenuItems",{menuList:e.menuList},e);},showMenuItems:function(e){r("showMenuItems",{menuList:e.menuList},e);},hideAllNonBaseMenuItem:function(e){r("hideAllNonBaseMenuItem",{},e);},showAllNonBaseMenuItem:function(e){r("showAllNonBaseMenuItem",{},e);},scanQRCode:function(e){r("scanQRCode",{needResult:(e=e||{}).needResult||0,scanType:e.scanType||["qrCode","barCode"]},(e._complete=function(e){if(T){var t=e.resultStr;if(t){var r=JSON.parse(t);e.resultStr=r&&r.scan_code&&r.scan_code.scan_result;}}},e));},openAddress:function(e){r(p.openAddress,{},(e._complete=function(e){e=function(e){return e.postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo,e;}(e);},e));},openProductSpecificView:function(e){r(p.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e);},addCard:function(e){for(var t=e.cardList,n=[],i=0,o=t.length;i<o;++i){var a=t[i],s={card_id:a.cardId,card_ext:a.cardExt};n.push(s);}r(p.addCard,{card_list:n},(e._complete=function(e){var t=e.card_list;if(t){for(var r=0,n=(t=JSON.parse(t)).length;r<n;++r){var i=t[r];i.cardId=i.card_id,i.cardExt=i.card_ext,i.isSuccess=!!i.is_succ,delete i.card_id,delete i.card_ext,delete i.is_succ;}e.cardList=t,delete e.card_list;}},e));},chooseCard:function(e){r("chooseCard",{app_id:O.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},(e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info;},e));},openCard:function(e){for(var t=e.cardList,n=[],i=0,o=t.length;i<o;++i){var a=t[i],s={card_id:a.cardId,code:a.code};n.push(s);}r(p.openCard,{card_list:n},e);},consumeAndShareCard:function(e){r(p.consumeAndShareCard,{consumedCardId:e.cardId,consumedCode:e.code},e);},chooseWXPay:function(e){r(p.chooseWXPay,o(e),e);},openEnterpriseRedPacket:function(e){r(p.openEnterpriseRedPacket,o(e),e);},startSearchBeacons:function(e){r(p.startSearchBeacons,{ticket:e.ticket},e);},stopSearchBeacons:function(e){r(p.stopSearchBeacons,{},e);},onSearchBeacons:function(e){n(p.onSearchBeacons,e);},openEnterpriseChat:function(e){r("openEnterpriseChat",{useridlist:e.userIds,chatname:e.groupName},e);},launchMiniProgram:function(e){r("launchMiniProgram",{targetAppId:e.targetAppId,path:l(e.path),envVersion:e.envVersion},e);},miniProgram:{navigateBack:function(e){e=e||{},f(function(){r("invokeMiniProgramAPI",{name:"navigateBack",arg:{delta:e.delta||1}},e);});},navigateTo:function(e){f(function(){r("invokeMiniProgramAPI",{name:"navigateTo",arg:{url:e.url}},e);});},redirectTo:function(e){f(function(){r("invokeMiniProgramAPI",{name:"redirectTo",arg:{url:e.url}},e);});},switchTab:function(e){f(function(){r("invokeMiniProgramAPI",{name:"switchTab",arg:{url:e.url}},e);});},reLaunch:function(e){f(function(){r("invokeMiniProgramAPI",{name:"reLaunch",arg:{url:e.url}},e);});},postMessage:function(e){f(function(){r("invokeMiniProgramAPI",{name:"postMessage",arg:e.data||{}},e);});},getEnv:function(t){f(function(){t({miniprogram:"miniprogram"===e.__wxjs_environment});});}}},A=1,D={};return g.addEventListener("error",function(e){if(!C){var t=e.target,r=t.tagName,n=t.src;if(("IMG"==r||"VIDEO"==r||"AUDIO"==r||"SOURCE"==r)&&-1!=n.indexOf("wxlocalresource://")){e.preventDefault(),e.stopPropagation();var i=t["wx-id"];if(i||(i=A++,t["wx-id"]=i),D[i])return;D[i]=!0,wx.ready(function(){wx.getLocalImgData({localId:n,success:function(e){t.src=e.localData;}});});}}},!0),g.addEventListener("load",function(e){if(!C){var t=e.target,r=t.tagName;if(t.src,"IMG"==r||"VIDEO"==r||"AUDIO"==r||"SOURCE"==r){var n=t["wx-id"];n&&(D[n]=!1);}}},!0),t&&(e.wx=e.jWeixin=L),L;}}),window.redfinger={},redfinger.version="1.27.1",redfinger.decoder={url:"http://d.ishunwan.com/js/ishunwan/",httpsURL:"https://yunapp-static.cdn.bcebos.com/common/",H264_base:"DecoderH264v2.min.js",H264_optimalize:"Decoderv2.min.js"};let otest={},vData=[];redfinger.isAvailable=!0,redfinger.websocketWorker,redfinger.localInput=!1;let ado,bdo,wsStateCheckTime=null;function initWebcodecs(){WCSDecoder.supportMediaStreamTrack()?redfinger.phoneDom="phoneVideo":redfinger.phoneDom="redPhone",document.getElementById(redfinger.phoneDom)||(WCSDecoder.supportMediaStreamTrack()?redfinger.createVideo(redfinger.dom):redfinger.createCanvas(redfinger.dom)),redfinger._listenEvent();const e=redfinger.emitter=new Emitter();redfinger.wcsDecoder=new WCSDecoder(redfinger.phoneDom),redfinger.wcsDecoder.setEmitter(e);const{WCS_DECODE_RESET:t,WCS_DECODE_ERR:r,WCS_DECODE_FIRST_FRAME:n}=redfinger.EVENT;e.on(r,_async(function(){return redfinger.config.useWCS=!1,redfinger._backupConnect();})),e.on(t,t=>{redfinger.wcsDecoder&&(redfinger.wcsDecoder.destroy(),Promise.resolve().then(()=>{redfinger.wcsDecoder=new WCSDecoder(redfinger.phoneDom),redfinger.wcsDecoder.setEmitter(e);}));}),e.on(n,e=>{const{width:t,height:r}=redfinger.videoinfo;redfinger.resizePhone(),redfinger.trigCallback(redfinger.onRenderedFirstFrame,[t,r],!0);});}function lockPointTrans(e,t){let r=t,n=e;return 1===redfinger.phone.rotation&&0===redfinger.sdkInfo.playMode&&(270===redfinger.config.transform?(n=redfinger.phone.width-t,r=e):90===redfinger.config.transform&&(n=redfinger.phone.height-e,r=t)),{x:n,y:r};}function onPointerLockChange(e,t,r,n){if(0===redfinger.config.pcKeyMode){let r=t,n=e,i=lockPointTrans(n,r);n=i.x,r=i.y;let o=!1;for(let e=0;e<keyboard.downKeyArray.length;e++)if("pointLock"===keyboard.downKeyArray[e].key){o=!0;break;}if(!o){keyboard.setPointerLockCurrPosition(keyboard.pointerLockDefPostion);let e=lockPointTrans(keyboard.pointerLockDefPostion.x,keyboard.pointerLockDefPostion.y),t=transform(e.x,e.y),r={key:"pointLock",status:!0,x:t.x,y:t.y};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_DOWN,r);let n=getCurrKeyDownArray();return void(1===n.length&&redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,n));}if(redfinger.phone.height<r||redfinger.phone.width<n||r<0||n<0){keyboard.setPointerLockCurrPosition(keyboard.pointerLockDefPostion);let e=lockPointTrans(keyboard.pointerLockDefPostion.x,keyboard.pointerLockDefPostion.y);n=e.x,r=e.y;let t={key:"pointLock",status:!1,x:-1,y:-1};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_UP,t);let i=getCurrKeyDownArray();return redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_UP,i),void freshKeyDownArray();}let a=transform(n,r),s={key:"pointLock",status:!0,x:a.x,y:a.y};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_MOVE,s);let d=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_MOVE,d);}else redfinger.sendMouseMoveRelative(r,n);}function getBase64Image(e,t){let r=document.createElement("canvas");return r.width=e.width,r.height=e.height,r.getContext("2d").drawImage(e,0,0,e.width,e.height),r.toDataURL("image/"+t);}function r(e){let t="";for(let r=0,n=e.length;n>r;r+=65535){let i=65535;r+65535>n&&(i=n-r),t+=String.fromCharCode.apply(null,e.subarray(r,r+i));}return t;}function getRotation(e){return 1===e&&1===redfinger.getorientation()?0:0===e&&1===redfinger.getorientation()?3:0===e&&0===redfinger.getorientation()?0:1===e&&0===redfinger.getorientation()?1:void 0;}function isGoogle(){let e=navigator.userAgent.toLocaleLowerCase(),t=null;if(null!==e.match(/msie/)||null!==e.match(/trident/))t="IE";else if(null!==e.match(/firefox/))t="火狐";else if(null!==e.match(/ubrowser/))t="UC";else if(null!==e.match(/opera/))t="欧朋";else if(null!==e.match(/bidubrowser/))t="百度";else if(null!==e.match(/metasr/))t="搜狗";else if(null!==e.match(/tencenttraveler/)||null!==e.match(/qqbrowse/))t="QQ";else if(null!==e.match(/maxthon/))t="遨游";else if(null!==e.match(/2345explorer/))t="2345";else if(null!==e.match(/lbbrowser/))t="猎豹";else if(null!==e.match(/edge/))t="edge";else if(null!==e.match(/chrome/)){t=function(e,t){let r=navigator.mimeTypes;for(let n in r)if(r[n][e]===t)return!0;return!1;}("type","application/vnd.chromium.remoting-viewer")?"360":"google";}else null!==e.match(/safari/)&&(t="Safari");return"google"===t;}function isMoblieGoogle(){let e=navigator.userAgent.toLocaleLowerCase();return!(e.indexOf("2345browser")>0)&&!(e.indexOf("qqbrowser")>0)&&!(e.indexOf("liebao")>0)&&!(e.indexOf("baidubrowser")>0)&&!(e.indexOf("sogou")>0)&&!(e.indexOf("ucbrowser")>0)&&!(e.indexOf("opr")>0)&&!(e.indexOf("android")>0||e.indexOf("qihoobrowser")>0);}function getBrowserVersion(e,t){let r=e.indexOf(t)+t.length+1;return e.substr(r,2);}redfinger.resetConfig=function(){redfinger.gw=null,redfinger.isAvailable=!0,redfinger.websocketWorker,redfinger.IDRCheckTime=null,redfinger.IDRCheckDelay=1e4,redfinger.isNeedReconnect=!1,redfinger.reconnectCount=0,redfinger._canSendHeartbeat=!1,redfinger.isConnecting=!1,redfinger.config={uid:"",sessionid:"",padcode:"",appName:"",gwHost:"armvm.com",isHaiWai:!1,protocol:"wss",videoQuality:2,devLevel:1,devWidth:720,devHeight:1280,warmLevel:2,isShowMutedBtn:!1,isAudio:!0,isDebug:!0,isLiveVideo:!1,isLiveRecovery:!1,maxFPS:15,minFPS:13,bitrate:2048,perDownFPS:1,perUpFPS:1,maxidr:150,vfmt:2,webrtcFmt:2,isAutoQuality:!1,isBrodway:!1,timeout:2,decoder:redfinger.decoder.H264_base,timeoutInterval:2,keyboard:null,cloudKeyboard:!0,isPass:!0,transform:270,isCanReport:!0,keyboardControlType:1,isDefualtVideo:!0,transformType:1,isPcTouch:!1,isOnReconnect:!1,connectState:0,websocketWorkerDisCounect:!1,reconnectCntLimit:8,reconnectCheckTime:3e3,reconnecting:!1,pointerLockPosition:{x:48,y:55},pointerLockKey:192,QRcodeSetType:0,isCameraLive:!1,isMicrophoneLive:!1,isMicroDown:!1,cameraTransform:0,mouseDpi:1.9,relMouseDpi:10,dnsServerUrl:"https://paas.armvm.com/dns/analysis/domain.html?auth_ver=3",screenShotType:2,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,isReport:!0,reportUrl:"https://gathers.gc.com.cn/bd-collector/deme/collect.html",reportSrc:"",isReportET:!0,reportETUrl:"https://gathers.gc.com.cn/bd-collector/deme/collect.html",reportETSrc:"coreSDK",playMode:0,keyCtrlConfigType:"paas",keyCtrlRotation:1,uuid:"",sampleRate:8e3,pcKeyMode:0,isAutoFocus:!0,isRotationResetToV:!1,audioChannelCnt:2,heartBeatTimeOut:1e4,logLevel:4,cameraCheckTime:2e3,callbackType:"sync",isAudioPlay:!0,isSendTouch:!0,autoControlQuality:!1,videoLevels:[],isTVBox:!1,useWCS:!1,wheelWidth:2,wheelDirection:1,wheelInterval:25},redfinger.wsClosed=!1,redfinger.videoinfo={},redfinger.initVideoinfo=function(){redfinger.videoinfo={width:0,height:0,fps:10,bitrate:1024,lastBitrate:1024,bitmode:2,canRotate:!0,isGetSPS:!1,reportType:0,netDelay:0,streamModeList:["1","2","3","4"],currSteamMode:"3",isWebRtc:!0,isP2p:!1};},redfinger.initVideoinfo(),redfinger.local={deviceInfo:null},redfinger.startTime={isFirst:!0,isFirstMessage:!0,playBegin:0,t1:0,t2:0,t3:0},redfinger.phone={width:720,height:1280,pWidth:720,pHeight:1280,letfOff:0,topOff:0,rotate:0,rotation:0,phoneRotate:0,offSetx:0,offSety:0,defaultRotation:0,remoteRotation:0},redfinger.webrtcRunInfo={currentTime:0,decodeFrameCount:0,droppedFrameCount:0,networkState:0,fps:0,netDelay:0,perDroppedFrameCount:0},redfinger.webrtcStates={packetsReceived:0,packetsLost:0,packetsReceivedSec:0,packetsLostSec:0,framesDecoded:0,pliCount:0,pliCountSec:0},redfinger.sdkInfo={sdkVersion:redfinger.version,sdkPlatform:2,playMode:0,clientInfo:""},redfinger.lasttouch={x:0,y:0},redfinger.dom="broadway",redfinger.phoneDom="redPhone",redfinger.canvas="",redfinger.jpegimgPool=null,redfinger.isOpen=!1,redfinger.isDestory=!0,redfinger.isDestroying=!1,redfinger.isDraw=!1,redfinger.backgroundColor="#0D0E1B",redfinger.publicKey="-----BEGIN PUBLIC KEY-----    MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAyEV8CQF1ScROYY/On0sn    3AL+hmhAugsU0U5mCfg20HP9acivvfkv3TloPB3W/3SArDy+PlLr9AbxOE530smM    wq0I10m2BDkw6+hl4Y7lNtUh8p6mddrhlIKLkddINnJ1ohATwsr7q7qn+2Bgc7Yn    Y0aIEhgWvc0y0Lr5vh/sKlbqaoVIefe7rDRLdaMDlx+aEemO8d4RGrbIpPyu1n9q    W0fHW3715hcL/g/8Tah4IPxzQsaiGhMy6VHf1NdqJa8kgEgcyRzfZjLMcifPa8NO    wBDql8jBwsHkSagouDBrnzfhWdChLkkGA/veDY0edKsfI0H/BkwIS19DjhF95+xH    BwIDAQAB    -----END PUBLIC KEY-----",redfinger.shake_stat_list={disconnect:0,connnect:1,sayhello:2,helloask:3,helloanswer:4,sendshake:5,online:6,sendapp:7,destory:8},redfinger.net_work_status=redfinger.shake_stat_list.disconnect,redfinger.NullWaitCount=0,redfinger.isPlaying=!1,redfinger.qrcode=void 0,redfinger.camera=void 0,redfinger.isFirstTouch=!0,redfinger.reconnectCount=0,redfinger.reconnectionStartTime=0,redfinger.webrtcReconnectCount=0,redfinger.isStartApp=!0,redfinger.isWarmup=!1,redfinger.isReturnReconnect=!0,redfinger.isShakeAndPlay=!1,redfinger.outBeginTime=new Date().getTime(),redfinger.timeoutError=!0,redfinger.timeoutToast=!0,redfinger.isTimeout=!1,redfinger.decodeWorker=void 0,redfinger.websock=void 0,redfinger.wfs=void 0,redfinger.usewfs=!1,redfinger.showVideo="",redfinger.webSocketFunction,redfinger.chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",redfinger._IframeReqCnt=0,redfinger._IframeTimeFlag=0;},redfinger.resetConfig(),redfinger.checkConfig=function(){redfinger.config.uuid+="",""===redfinger.config.uuid&&(redfinger.config.uuid=redfinger._generateUuid());let e=!0;for(let t in redfinger.config){let r=redfinger.checkParam.check(t,t,redfinger.config[t]);if(-1===r.code){e=!1;break;}1===r.code&&(redfinger.config[t]=r.data);}return e;},redfinger._generateUuid=function(){let e=document.createElement("canvas"),t=e.getContext("2d");return t.font="18pt Arial",t.textBaseline="top",t.fillText(navigator.userAgent,2,2),CryptoJS.MD5(e.toDataURL("image/jpeg")).toString();},redfinger.checkStreamMode=function(e){let t=redfinger.videoinfo.streamModeList;void 0!==redfinger.config.isWebRtc&&(t=!0===redfinger.config.isWebRtc?t.filter(e=>"1"===e||"3"===e):t.filter(e=>"2"===e||"4"===e)),PeerGW.isWebrtcSupported()||(t=t.filter(e=>"2"===e||"4"===e));let r=e.resultInfo.remoteList;null!=r&&0!==r.length&&r[0].remoteWsIp&&r[0].remoteWsPort||(t=t.filter(e=>"3"===e||"4"===e));let n=!1;switch(null!=e.resultInfo.gateway&&e.resultInfo.gateway.gatewayIp&&e.resultInfo.gateway.gatewayPort&&(n=!0),null!=e.resultInfo.webRtcControlList&&e.resultInfo.webRtcControlList.length>0&&null!=e.resultInfo.webRtcControlList[0].gateway&&e.resultInfo.webRtcControlList[0].gateway.gatewayIp&&e.resultInfo.webRtcControlList[0].gateway.gatewayPort&&(n=!0),n||(t=t.filter(e=>"3"!==e)),0===t.length&&(t=["4"]),redfinger.videoinfo.streamModeList=t,redfinger.videoinfo.currSteamMode=t[0],redfinger.videoinfo.currSteamMode){case"1":redfinger.videoinfo.isWebRtc=!0,redfinger.videoinfo.isP2p=!0,void 0!==redfinger.config.isWebRtc&&(redfinger.config.isWebRtc=!0);break;case"2":redfinger.videoinfo.isWebRtc=!1,redfinger.videoinfo.isP2p=!0,void 0!==redfinger.config.isWebRtc&&(redfinger.config.isWebRtc=!1);break;case"3":default:redfinger.videoinfo.isWebRtc=!0,redfinger.videoinfo.isP2p=!1,void 0!==redfinger.config.isWebRtc&&(redfinger.config.isWebRtc=!0);break;case"4":redfinger.videoinfo.isWebRtc=!1,redfinger.videoinfo.isP2p=!1,void 0!==redfinger.config.isWebRtc&&(redfinger.config.isWebRtc=!1);}},redfinger._listenEvent=function(){if(video=document.getElementById(redfinger.phoneDom),video)if(redfinger.isPc()){video.addEventListener("mousedown",doMouseDown,!1),video.addEventListener("mousemove",doMouseMove,!1),video.addEventListener("mouseup",doMouseUp,!1),video.addEventListener("mouseout",doMouseUp,!1),video.addEventListener("ended",doOnEnded,!1),video.addEventListener("touchstart",doTouchStart,!1),video.addEventListener("touchmove",doTouchMove,!1),video.addEventListener("touchend",doTouchEnd,!1),video.addEventListener("contextmenu",doRightMouseDown,!1),video.addEventListener("wheel",doWheel,!1);let e={x:parseInt(redfinger.phone.width*redfinger.config.pointerLockPosition.x/100,10),y:parseInt(redfinger.phone.height*redfinger.config.pointerLockPosition.y/100,10)};1===redfinger.phone.rotation&&(e.x=parseInt(redfinger.phone.height*redfinger.config.pointerLockPosition.y/100,10),e.y=parseInt(redfinger.phone.width*redfinger.config.pointerLockPosition.x/100,10)),redfinger.config.isHaiWai||keyboard.initPointerLock(redfinger.phoneDom,e,redfinger.config.pointerLockKey,onPointerLockChange);}else video.addEventListener("touchstart",doTouchStart,!1),video.addEventListener("touchmove",doTouchMove,!1),video.addEventListener("touchend",doTouchEnd,!1);},redfinger._196612Reconnect=function(){redfinger._196612Timer||(redfinger.reconnectError=196612,redfinger.webrtcReconnectCount>=3?(redfinger.webrtcReconnectCount=0,redfinger.trigCallback(redfinger.onErrorMessage,[196612],!0),redfinger.destory()):redfinger._196612Timer=setTimeout(()=>{redfinger.doReconnect(),redfinger._196612Timer=null,redfinger.webrtcReconnectCount++;},500));},redfinger._shakeAfterConnected=function(){redfinger._controlNavBarState(),redfinger._sendTransMsgShake();},redfinger._backupConnect=_async(function(){const _redfinger$isReconnec2=redfinger.isReconnecting,_redfinger$isReconnec=!_redfinger$isReconnec2&&(redfinger.isReconnecting=!0),_redfinger$config$isW=!_redfinger$isReconnec2&&(redfinger.config.isWebRtc=!1);return _await(_redfinger$isReconnec2||redfinger.destroyForSwitchMode(),function(){_redfinger$isReconnec2||(0,redfinger.videoinfo.streamModeList=["2","4"],redfinger.checkStreamMode(redfinger.local.deviceInfo),setTimeout(()=>{redfinger._startConnectDevice();},200));},_redfinger$isReconnec2);}),redfinger._startConnectDevice=function(){redfinger.isDestory=!1,redfinger.wsClosed=!1,redfinger.eventObj.addEventListener({mountName:"document",events:["visibilitychange","visableChange"],func:redfinger.visableChange}),redfinger.eventObj.addEventListener({mountName:"window",events:["mousewheel","ctrlWheel"]}),redfinger.eventObj.addEventListener({mountName:"window",events:["DOMMouseScroll","ctrlWheel"]});let e=JSON.parse(JSON.stringify(redfinger.local.deviceInfo));const t=redfinger.videoinfo.currSteamMode;if(redfinger.tracking.setBaseInfo({cloudEncodeType:redfinger.videoinfo.isWebRtc?redfinger.config.webrtcFmt:redfinger.config.vfmt,sdkDecodeType:redfinger.videoinfo.isWebRtc?"webrtc":"js",bitrate:redfinger.config.bitrate,fps:redfinger.config.minFPS,resolution:redfinger.config.devWidth+"x"+redfinger.config.devHeight,streamingProtocol:TrackingTmpData.streamingProtocolMap[t+""]}),redfinger.videoinfo.isWebRtc){if(null==e.resultInfo.gateway&&!redfinger.videoinfo.isP2p){e.resultInfo.gateway={};try{e.resultInfo.gateway.gatewayIp=e.resultInfo.webRtcControlList[0].gateway.gatewayIp,e.resultInfo.gateway.gatewayPort=e.resultInfo.webRtcControlList[0].gateway.gatewayPort,e.resultInfo.controlList[0].controlInfoList=e.resultInfo.webRtcControlList[0].webRtcControlInfoList;}catch(t){return void MLOG.error(MLOG.e("param gateway error deviceInfo:"+JSON.stringify(e)));}}redfinger.iosAdapter(),redfinger.sdkInfo.sdkPlatform=3,redfinger.phoneDom="phoneVideo";let t=document.getElementById(redfinger.phoneDom);t||(redfinger.createVideo(redfinger.dom),t=document.getElementById(redfinger.phoneDom));let r=null;redfinger.videoinfo.isP2p&&(redfinger.audioDom="phoneAudio",r=document.getElementById(redfinger.audioDom),r||(redfinger.createAudio(redfinger.dom),r=document.getElementById(redfinger.audioDom))),redfinger.eventObj.addEventListener({mountName:"document",events:["WeixinJSBridgeReady","phone"]}),redfinger.videoinfo.isP2p?P2p.init():PeerGW.init(),redfinger.phoneDom="phoneVideo",t=document.getElementById(redfinger.phoneDom),redfinger._listenEvent(),redfinger.inputConfigInfo=e,redfinger.config.uid=""+e.resultInfo.userId?""+e.resultInfo.userId:"10010",redfinger.config.sessionid=e.resultInfo.sessionId?e.resultInfo.sessionId:"token",redfinger.config.padcode=e.padCode,void 0!==redfinger.config.appName&&""!==redfinger.config.appName||(redfinger.config.appName="");let n=t,i="",o={};redfinger.videoinfo.isP2p?redfinger.videoinfo.isP2p&&(o.controlIp=e.resultInfo.remoteList[0].remoteWsIp,o.controlPort=e.resultInfo.remoteList[0].remoteWsPort,i=redfinger.config.protocol+"://"+o.controlIp+":"+o.controlPort):(i=redfinger.config.protocol+"://"+e.resultInfo.gateway.gatewayIp+":"+e.resultInfo.gateway.gatewayPort,o=e.resultInfo.controlList[0].controlInfoList[0]);let a=null;null!==e.resultInfo.iceServers&&void 0!==e.resultInfo.iceServers&&(a=e.resultInfo.iceServers);let s={};Object.assign(s,redfinger.sdkInfo),s.playMode=redfinger.config.playMode;let d=redfinger._transVideoLevel();let c={server:i,control:{id:redfinger.config.webrtcFmt,ip:o.controlIp,port:o.controlPort,padcode:redfinger.config.padcode,userid:""+redfinger.config.uid,token:redfinger.config.sessionid,appname:redfinger.config.appName,type:0,video_level:redfinger.config.devLevel,dev_width:redfinger.config.devWidth,dev_height:redfinger.config.devHeight,offer_audio:redfinger.config.isAudio,offer_video:!0,offer_data:!0,sdk_info:JSON.stringify(s),resolution_levels:d.resolution_levels,bitrate_levels:d.bitrate_levels,fps_levels:d.fps_levels},iceServers:a,viewOjb:n,audioObj:r,onstarted:function(){if(!0===redfinger.isOpen)return;redfinger._checkIFrameLost(),redfinger.net_work_status=redfinger.shake_stat_list.sendshake,redfinger.reconnectCount=0,redfinger.videoinfo.canRotate=!0,redfinger.phone.defaultRotation>=0&&redfinger.phoneRotation(redfinger.phone.defaultRotation),redfinger.trigCallback(redfinger.onOpen,[102,!0]),redfinger._shakeAfterConnected(),redfinger.heartbeatTimer=window.setTimeout(function(){redfinger._canSendHeartbeat=!0,redfinger.sendControlDelay();},1e3),null!==keyboard.keyCtrlUi&&keyboard.keyCtrlUi.reBuild(),redfinger.config.isAudioPlay&&redfinger.openAudioDiv(),redfinger.isOpen=!0;let e=document.getElementById("phoneVideo");if(e&&(e.muted=!0,e.play()),!0===redfinger.videoinfo.isP2p&&!0===redfinger.videoinfo.isWebRtc){let e=document.getElementById("phoneAudio");e&&(e.muted=!0,e.play());}redfinger.resizePhone(),redfinger.config.connectState=1,redfinger.config.isOnReconnect&&window.clearTimeout(redfinger.reconnectTimeout);let t=document.getElementById("redPhone");t&&t.parentNode.removeChild(t),redfinger.webrtcFirstFrame(),redfinger.webrtcCountInfoTimeout=window.setTimeout(function(){redfinger.webrtcCountInfo();},1e3),redfinger.outTimeTimer=window.setTimeout(function(){redfinger.countTime();},1e3);},onerror:_async(function(e,t){const _includes=196612==+e||["-10201","-10202","-10101","-10000","2005","2006","2002","200001","200002","200003","200004","200100"].includes(e+""),_redfinger$trigCallba=196612==+e||_includes||redfinger.trigCallback(redfinger.onErrorMessage,[e],!0),_redfinger$webrtcReco=196612==+e||_includes||(redfinger.webrtcReconnectCount=0);return _await(196612==+e?redfinger._196612Reconnect():_includes?redfinger._backupConnect():redfinger.destory(),function(_redfinger$destory){return 196612==+e?_redfinger$destory:_includes?_redfinger$destory:void _redfinger$destory;},196612==+e||_includes);}),onrecvMsg:function(e){if(redfinger.videoinfo.isP2p){let t=[],r=new FileReader();r.readAsArrayBuffer(e),r.onload=function(e){let r=new Uint8Array(this.result);redfinger.processData(r,t);};}else{let t=redfinger.decode(e),r=new Uint8Array(t);redfinger.processData(r,vData);}},onrecvFrom:function(e){MLOG.debug(MLOG.d("onrecvFrom: "+e));},onreconnect:function(e,t){}};redfinger.videoinfo.isP2p?redfinger.gw=new P2p(c):redfinger.gw=new PeerGW(c),redfinger.gw.start();}else{let{useWCS:t,vfmt:r}=redfinger.config;redfinger.sdkInfo.sdkPlatform=3;const{VFMT_SOFT:n,VFMT_HARD:i,VFMT_IMAGE_SOFT:o,VFMT_IMAGE_HARD:a}=redfinger.CONST;if([n,i].includes(r)&&(t&&(t=redfinger.config.useWCS=WCSDecoder.isSupportWCS()),t||MLOG.warn(MLOG.w("not support webcodecs")),!t))try{redfinger.setDecoder(),decodeUrl=URL.createObjectURL(new Blob([redfinger.decoderURL],{type:"application/javascript"}));}catch(e){redfinger.isAvailable=!1;}let s,d;redfinger.disableSelect(),redfinger.phoneDom="redPhone",t?initWebcodecs():[n,i].includes(r)?initPlay():[o,a].includes(r)&&initCanvas(),redfinger.startTime.playBegin=new Date().getTime(),redfinger.startTime.isFirst=!0,redfinger.isTimeout=!1,redfinger.isDraw=!1,vData.splice(0,vData.length),redfinger.net_work_status=redfinger.shake_stat_list.disconnect,redfinger.inputConfigInfo=e,redfinger.config.uid=""+e.resultInfo.userId,redfinger.config.sessionid=e.resultInfo.sessionId,redfinger.config.padcode=e.padCode,void 0!==redfinger.config.appName&&""!==redfinger.config.appName||(redfinger.config.appName=""),redfinger.config.operateMode=e.resultInfo.operateMode,void 0!==redfinger.config.operateMode&&""!==redfinger.config.operateMode||(redfinger.config.operateMode=1);try{s=e.resultInfo.webControlList[0].webControlInfoList[0],d=redfinger.config.protocol+"://"+s.controlIp+":"+s.controlPort,redfinger.videoinfo.isP2p&&(s.controlIp=e.resultInfo.remoteList[0].remoteWsIp,s.controlPort=e.resultInfo.remoteList[0].remoteWsPort,d=redfinger.config.protocol+"://"+s.controlIp+":"+s.controlPort);}catch(e){return redfinger.trigCallback(redfinger.onErrorMessage,[redfinger.SAAS_ERROR.SAAS_API_DEVICE_INFO_INVALID],!0),void MLOG.error(MLOG.e("invalid config.deviceInfo"));}redfinger.audioPlayer&&redfinger.audioPlayer.play(),MLOG.debug(MLOG.d(JSON.stringify(redfinger.config))),TrackingTmpData.tcpStartTime=new Date().getTime(),TrackingTmpData.tcpConnectResult=void 0,redfinger.websocketWorker=new Worker(redfinger.webSocketFunction);let c=redfinger.fillShakeOnline(redfinger.config.uid,redfinger.config.sessionid,redfinger.config.padcode,redfinger.config.appName);redfinger.websocketWorker.postMessage(c),redfinger.net_work_status=redfinger.shake_stat_list.sendshake,redfinger.websocketWorker.postMessage("createWebSocket:"+d),redfinger.websocketWorker.onmessage=function(e){if(redfinger.startTime.isFirstMessage){redfinger.startTime.isFirstMessage=!1;let e=new Date().getTime();redfinger.startTime.t1=e-redfinger.startTime.playBegin;}redfinger.resizePhone();let r=e.data;if("string"==typeof r&&r.indexOf("close")>0)redfinger.config.websocketWorkerDisCounect=!0,redfinger.isDestory||redfinger.onReturn(2002);else if("string"==typeof r&&r.indexOf("onOpen")>-1){let e=new Date().getTime();TrackingTmpData.tcpConnectResult=0,redfinger.tracking.setBaseInfo({tcpConnectTime:e-TrackingTmpData.tcpStartTime,tcpLinkConnectResult:0});let r=document.getElementById(redfinger.phoneDom);r&&t&&(redfinger.onReturn(redfinger.EVENT.START_APP,!0),WCSDecoder.supportMediaStreamTrack()&&(r.muted=!0,r.play())),redfinger._shakeAfterConnected();}else if("string"==typeof r&&r.indexOf("onError")>-1){if(!redfinger.isDestory&&void 0===TrackingTmpData.tcpConnectResult){let e=new Date().getTime();TrackingTmpData.tcpConnectResult=-1,redfinger.tracking.setBaseInfo({tcpConnectTime:e-TrackingTmpData.tcpStartTime,tcpLinkConnectResult:-1});}}else if("string"==typeof r&&r.indexOf("onTimeout")>-1){if(!redfinger.isDestory){let e=new Date().getTime();TrackingTmpData.tcpConnectResult=1,redfinger.tracking.setBaseInfo({tcpConnectTime:e-TrackingTmpData.tcpStartTime,tcpLinkConnectResult:1});}}else redfinger.processData(r,vData),redfinger.config.websocketWorkerDisCounect=!1;},redfinger.heartbeatTimer=window.setTimeout(function(){redfinger._canSendHeartbeat=!0,redfinger.sendControlDelay();},1e3),!t&&start(),redfinger.videoBufferCount=0,redfinger.alreadyCleanAsmInstance=!1;}},redfinger._checkIFrameLost=function(){if(redfinger.checkIFrameLostTimer)return;const e=new Date().getTime();function t(){clearInterval(redfinger.checkIFrameLostTimer),redfinger.firstFrameDone=!1,redfinger.checkIFrameLostTimer=null;}redfinger.checkIFrameLostTimer=setInterval(()=>{redfinger.firstFrameDone&&t();new Date().getTime()-e>=(redfinger.applyIframeTime||5e3)&&(redfinger.sendIframe(),redfinger.videoinfo.isWebRtc&&!redfinger.videoinfo.isP2p&&redfinger._startCheckIframe(),t());},500);},redfinger._transVideoLevel=function(){let e={resolution_levels:"",bitrate_levels:"",fps_levels:""};if(redfinger.config.autoControlQuality&&redfinger.config.videoLevels.length>0){for(let t=0;t<redfinger.config.videoLevels.length&&t<4;t++){let r=redfinger.config.videoLevels[t];e.resolution_levels+=r.width+"x"+r.height+",",e.bitrate_levels+=r.bitrate+",",e.fps_levels+=r.fps+"-"+r.fps+",";}e.resolution_levels=e.resolution_levels.substr(0,e.resolution_levels.length-1),e.bitrate_levels=e.bitrate_levels.substr(0,e.bitrate_levels.length-1),e.fps_levels=e.fps_levels.substr(0,e.fps_levels.length-1);}return e;},redfinger.disableSelect=function(){let e="#"+redfinger.dom+"{-moz-user-select: none;-webkit-user-select: none;-ms-user-select: none;-khtml-user-select: none;user-select: none;}",t=document.createElement("style");t.type="text/css";try{t.appendChild(document.createTextNode(e));}catch(r){t.styleSheet.cssText=e;}document.getElementsByTagName("head")[0].appendChild(t);},redfinger.getJsFile=function(e){let t=document.createElement("script");t.type="text/javascript",t.src=e,document.getElementsByTagName("head")[0].appendChild(t);},redfinger.playAudio=function(){redfinger.videoinfo.isWebRtc?redfinger.webrtcOpenAudio():redfinger.initAudio();},redfinger.stopAudio=function(){redfinger.videoinfo.isWebRtc?redfinger.webrtcStopAudio():redfinger.stopJsAudio();},redfinger.openAudioDiv=function(){let e=document;redfinger.isPc()?e.onclick=function(){redfinger.playAudio(),e.onclick=function(){};}:redfinger.videoinfo.isWebRtc?(redfinger.touchPlayAudio=function(){redfinger.playAudio(),e.removeEventListener("touchstart",redfinger.touchPlayAudio);},e.addEventListener("touchstart",redfinger.touchPlayAudio,!1)):redfinger.createOpenAudioBtn();},redfinger.createOpenAudioBtn=function(){let e=document.querySelector("#"+redfinger.dom),t=document.createElement("button");t.id="redAudio";const r=document.getElementById(redfinger.phoneDom).style;t.style.cssText=r.cssText,t.style.zIndex="2",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.backgroundColor="transparent",t.style.borderStyle="none",t.style.height="100%",t.style.width="100%",t.addEventListener("touchstart",doTouchStart,!1),t.addEventListener("touchmove",doTouchMove,!1),t.addEventListener("touchend",function(r){setTimeout(()=>{redfinger.playAudio(),e.removeChild(t);},300),doTouchEnd(r);},!1),e.appendChild(t);},redfinger.encodePadInfo=function(e){let t="";return t="ws"===redfinger.config.protocol?e.data.webRtcControlList[0].gateway.gatewayPort:e.data.webRtcControlList[0].gateway.gatewayWssPort,{padCode:e.data.padCode,resultCode:0,resultInfo:{webControlList:[{webControlCode:"GZ-TEST-WEBSOCKET-CONTROL",webControlInfoList:[{controlIp:e.data.webControlList[0].webControlInfoList[0].controlIp,controlPort:e.data.webControlList[0].webControlInfoList[0].controlPort}]}],controlList:[{controlCode:"NX-CONTROL-WEBRTC-TEST",controlInfoList:[{controlIp:e.data.webRtcControlList[0].webRtcControlInfoList[0].controlIp,controlPort:e.data.webRtcControlList[0].webRtcControlInfoList[0].controlPort}]}],sessionId:e.data.sessionId,userId:-1,gateway:{gatewayIp:e.data.webRtcControlList[0].gateway.gatewayIp,gatewayPort:t},domain:e.data.domain,merchantInfo:e.data.merchantInfo,webRtcMode:e.data.webRtcMode,remoteList:e.data.remoteList}};},redfinger.iosAdapter=function(){if(navigator.userAgent.toLowerCase().indexOf("like mac os x")>0){let e=/os [\d._]*/gi,t=(navigator.userAgent.toLowerCase().match(e)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".").split("."),r=14;t.length>0&&(r=parseFloat(t[0]),t.length>1&&(r=parseFloat(t[0]+"."+t[1])),r<12.2&&(redfinger.config.webrtcFmt=2));}},redfinger.onReturn=function(e,t){if(196612==+e)return redfinger._196612Reconnect();if(e===redfinger.EVENT.START_APP||65536<=e&&e<=196608||196627===e||196636===e||196637===e||196638===e||196639===e){if(redfinger.outBeginTime=new Date().getTime(),redfinger.startTime.isFirst&&(redfinger.startTime.t3=new Date()-redfinger.startTime.playBegin,redfinger.startTime.isFirst=!1),redfinger.outTimeTimer=window.setTimeout(function(){redfinger.countTime();},1e3),102!==e)return redfinger.trigCallback(redfinger.onErrorMessage,[e],!0),void redfinger.destory();102===e&&t&&(redfinger.webrtcReconnectCount=0,redfinger.phone.defaultRotation>=0&&redfinger.phoneRotation(redfinger.phone.defaultRotation)),redfinger.isOpen||redfinger.isDestory||(redfinger.trigCallback(redfinger.onOpen,[e,t]),redfinger.isOpen=!0,redfinger.config.isAudioPlay&&redfinger.openAudioDiv(),null!==keyboard.keyCtrlUi&&keyboard.keyCtrlUi.reBuild());}else e===redfinger.EVENT.SCREEN_ROTATION?redfinger.trigCallback(redfinger.onRotation,[e,t]):e===redfinger.ERROR.WEBSOCK_ERR&&redfinger.net_work_status!==redfinger.shake_stat_list.destory?redfinger.reconnectCount<3&&!redfinger.isTimeout?(redfinger.isPlaying=!1,MLOG.warn(MLOG.w("errno:"+e+" reconnectCount:"+redfinger.reconnectCount)),redfinger._canSendHeartbeat=!1,window.clearTimeout(redfinger.heartbeatTimer),window.clearTimeout(redfinger.outTimeTimer),window.clearTimeout(redfinger.reconnectTimeout),window.clearTimeout(redfinger.webrtcCountInfoTimeout),redfinger.net_work_status=redfinger.shake_stat_list.disconnect,redfinger.isReturnReconnect=!1):(redfinger.isPlaying=!1,redfinger.isTimeout):(redfinger.isPlaying=!1,redfinger.isOpen?(redfinger.trigCallback(redfinger.onErrorMessage,[e],!0),redfinger.destory()):redfinger.isDestory||(redfinger.trigCallback(redfinger.onOpen,[e,!1]),redfinger.destory()));},redfinger.checkHeartBeat=function(){if(0===redfinger.phone.lastHeartBeatTime)return!0;return!(new Date().getTime()-redfinger.phone.lastHeartBeatTime>redfinger.config.heartBeatTimeOut)||(MLOG.warn(MLOG.w("heart beat timeout")),!1);},redfinger.checkWsStats=_async(function(){let _exit9=false;window.clearTimeout(wsStateCheckTime);let e=redfinger.checkHeartBeat();return _invoke(function(){if(redfinger.videoinfo.isWebRtc){return function(){if(redfinger.isNeedReconnect||1!==redfinger.gw.getWsState()&&redfinger.net_work_status!==redfinger.shake_stat_list.destory||!e&&!redfinger.config.reconnecting){return _invoke(function(){if(redfinger.reconnectCount>=redfinger.config.reconnectCntLimit){const _redfinger$reconnecti=redfinger.reconnectionStartTime=0,_redfinger$reconnectC=redfinger.reconnectCount=0,_temp16=redfinger.reconnectError?(redfinger.trigCallback(redfinger.onErrorMessage,[redfinger.reconnectError],!0),redfinger.reconnectError=null):redfinger.trigCallback(redfinger.onErrorMessage,[2004],!0),_redfinger$trigCallba2=redfinger.trigCallback(redfinger.onReconnectFail,[]);return _await(redfinger.destory(),function(_redfinger$destory2){const _temp14=void _redfinger$destory2;_exit9=true;return _temp14;});}},function(_result17){return _exit9?_result17:_await(redfinger.doReconnect(),function(){0,redfinger.reconnectCount++,redfinger.trigCallback(redfinger.onReconnect,[redfinger.reconnectCount]),redfinger.isNeedReconnect=!1;});});}else if(redfinger.reconnectCount>0&&1===redfinger.gw.getWsState()&&e&&redfinger.config.reconnecting){Promise.resolve().then(()=>{redfinger.audioPlayer&&redfinger.audioPlayer.replay();}),redfinger.trigCallback(redfinger.onReconnectSuccess,[]),redfinger.webrtcReconnectCount=0;let e=new Date().getTime()-redfinger.reconnectionStartTime;redfinger.tracking.updateReconnectInfo(redfinger.reconnectCount,e),redfinger.reconnectCount=0,redfinger.reconnectionStartTime=0,redfinger.config.reconnecting=!1;}}();}else return function(){if(redfinger.config.websocketWorkerDisCounect||!e&&!redfinger.config.reconnecting){return _invoke(function(){if(redfinger.reconnectCount>=redfinger.config.reconnectCntLimit){const _temp17=redfinger.reconnectError?(redfinger.trigCallback(redfinger.onErrorMessage,[redfinger.reconnectError],!0),redfinger.reconnectError=null):redfinger.trigCallback(redfinger.onErrorMessage,[2004],!0),_redfinger$reconnectC2=redfinger.reconnectCount=0,_redfinger$trigCallba3=redfinger.trigCallback(redfinger.onReconnectFail,[]);return _await(redfinger.destory(),function(_redfinger$destory3){const _temp15=void _redfinger$destory3;_exit9=true;return _temp15;});}},function(_result20){return _exit9?_result20:_await(redfinger.doReconnect(),function(){0,redfinger.reconnectCount++,redfinger.trigCallback(redfinger.onReconnect,[redfinger.reconnectCount]);});});}else if(redfinger.reconnectCount>0&&redfinger.config.reconnecting){Promise.resolve().then(()=>{redfinger.audioPlayer&&redfinger.audioPlayer.replay();}),redfinger.trigCallback(redfinger.onReconnectSuccess,[]);let e=new Date().getTime()-redfinger.reconnectionStartTime;redfinger.tracking.updateReconnectInfo(redfinger.reconnectCount,e),redfinger.reconnectionStartTime=0,redfinger.reconnectCount=0,redfinger.config.reconnecting=!1;}}();},function(_result19){if(_exit9)return _result19;redfinger.net_work_status!==redfinger.shake_stat_list.destory&&(wsStateCheckTime=setTimeout(redfinger.checkWsStats,redfinger.config.reconnectCheckTime));});}),redfinger.doReconnect=_async(function(){const _redfinger$isReconnec4=redfinger.isReconnecting,_temp19=!_redfinger$isReconnec4&&!redfinger.videoinfo.isWebRtc&&redfinger.websocketWorker&&redfinger.websocketWorker.terminate(),_temp18=!_redfinger$isReconnec4&&0===redfinger.reconnectionStartTime&&(redfinger.reconnectionStartTime=new Date().getTime()),_redfinger$isConnecti=!_redfinger$isReconnec4&&(redfinger.isConnecting=!1),_redfinger$isReconnec3=!_redfinger$isReconnec4&&(redfinger.isReconnecting=!0),_redfinger$videoinfo$=!_redfinger$isReconnec4&&redfinger.videoinfo.isWebRtc;return _await(_redfinger$isReconnec4||_redfinger$videoinfo$&&redfinger.gw.stop(),function(_redfinger$gw$stop){_redfinger$isReconnec4||(_redfinger$gw$stop,redfinger.config.reconnecting=!0,redfinger.videoinfo.reportType=4,redfinger.config.isRotationResetToV&&(redfinger.phone.rotation=0),null!==keyboard.pointerLock&&keyboard.pointerLock.dispose(),redfinger.play(redfinger.dom,redfinger.config.videoQuality,redfinger.config.appName,redfinger.inputConfigInfo,redfinger.showVideo));},_redfinger$isReconnec4||!_redfinger$videoinfo$);}),redfinger.webrtcFirstFrame=function(){if(redfinger.gw.getWebrtcStates(),void 0!==redfinger.webrtcStates.framesDecoded&&redfinger.webrtcStates.framesDecoded>0){MLOG.debug(MLOG.d("webrtc first frame "+redfinger.webrtcStates.framesDecoded+" time:"+new Date().getTime()));let e=new Date().getTime(),t=redfinger.tracking.getTrackingData();redfinger.tracking.setBaseInfo({firstFrameTime:e-t.baseInfo.startPlayTime,firstFrameReceiveTime:e}),redfinger.resizePhone(),redfinger.firstFrameDone=!0,redfinger.trigCallback(redfinger.onRenderedFirstFrame,[redfinger.videoinfo.width,redfinger.videoinfo.height],!0);}else redfinger.webrtcFirstFrameTime=window.setTimeout(function(){redfinger.webrtcFirstFrame();},5);},redfinger.webrtcCountInfo=function(){if(redfinger.isDestory)return;if(1!==redfinger.gw.getWsState())return void(redfinger.webrtcCountInfoTimeout=window.setTimeout(function(){redfinger.webrtcCountInfo(),redfinger.gw.getWebrtcStates();},1e3));let e=document.getElementById("phoneVideo");e.paused&&redfinger.isOpen&&(redfinger.config.isFirstMessage?redfinger.config.isFirstMessage=!1:redfinger.trigCallback(redfinger.onWebrtcPaused,[]));let t="play";if(redfinger.videoinfo.isP2p){let e=document.getElementById("phoneAudio");e&&e.muted&&(t="muted");}else e.muted&&(t="muted");if(redfinger.trigCallback(redfinger.onWebrtcAudioStates,[t]),redfinger.isOpen&&"muted"===t&&(redfinger.trigCallback(redfinger.onWebrtcMuted,[]),redfinger.phone.letfOff>=0||redfinger.phone.topOff>=0)){let t=redfinger.phone.letfOff,r=redfinger.phone.topOff;if(1===redfinger.phone.rotation&&(t=(e.parentNode.clientWidth-e.clientHeight)/2,r=(e.parentNode.clientHeight-e.clientWidth)/2),redfinger.config.isShowMutedBtn){window.muteGui.show(redfinger.dom,t+5,r+5,redfinger.webrtcOpenAudio);let e=document.getElementById("redfinger-mute-ctrl");e&&(e.style.top=r+5+"px",e.style.left=t+5+"px");}}redfinger.webrtcRunInfo.currentTime=parseInt(e.currentTime),redfinger.webrtcRunInfo.networkState=e.networkState,redfinger.webrtcRunInfo.fps=e.webkitDecodedFrameCount-redfinger.webrtcRunInfo.decodeFrameCount,redfinger.webrtcRunInfo.perDroppedFrameCount=e.webkitDroppedFrameCount-redfinger.webrtcRunInfo.droppedFrameCount,redfinger.webrtcRunInfo.decodeFrameCount=e.webkitDecodedFrameCount,redfinger.webrtcRunInfo.droppedFrameCount=e.webkitDroppedFrameCount,redfinger.trigCallback(redfinger.onWebrtcRunInfo,[redfinger.webrtcRunInfo.networkState,redfinger.webrtcRunInfo.fps,redfinger.webrtcRunInfo.perDroppedFrameCount,redfinger.webrtcRunInfo.decodeFrameCount,redfinger.webrtcRunInfo.droppedFrameCount,redfinger.webrtcRunInfo.currentTime,redfinger.videoinfo.bitrate,redfinger.videoinfo.width,redfinger.videoinfo.height,redfinger.webrtcRunInfo.netDelay]);let r=0;redfinger.webrtcStates.packetsReceivedSec>0&&(r=parseFloat((redfinger.webrtcStates.packetsLostSec/(redfinger.webrtcStates.packetsReceivedSec+redfinger.webrtcStates.packetsLostSec)*100).toFixed(2)));let n={pCount:"",netDelay:redfinger.webrtcRunInfo.netDelay,decodeTime:"",width:redfinger.videoinfo.width,height:redfinger.videoinfo.height,perSecondFPS:redfinger.webrtcRunInfo.fps,bitrate:redfinger.videoinfo.bitrate,fps:redfinger.videoinfo.fps,perDroppedFrameCount:redfinger.webrtcRunInfo.perDroppedFrameCount,runTimeCount:redfinger.webrtcRunInfo.currentTime,packetsLostPercent:r};redfinger.tracking.setBaseInfo({resolution:redfinger.videoinfo.width+"x"+redfinger.videoinfo.height,surfaceResolution:redfinger.phone.width+"x"+redfinger.phone.height,bitrate:redfinger.videoinfo.bitrate,fps:redfinger.videoinfo.fps}),redfinger.tracking.updateNetDelayInfo(redfinger.webrtcRunInfo.netDelay),redfinger.tracking.updatePacketLoss(r),redfinger.trigCallback(redfinger.onRunInformation,["webrtc",n]),redfinger.webrtcCountInfoTimeout=window.setTimeout(function(){redfinger.webrtcCountInfo(),redfinger.gw.getWebrtcStates();},1e3);},redfinger.removeEvent=function(){redfinger.eventObj.removeEvents();},redfinger.processData=function(e,t){switch(redfinger.net_work_status){case redfinger.shake_stat_list.disconnect:case redfinger.shake_stat_list.connnect:break;case redfinger.shake_stat_list.sayhello:let n=redfinger.get_player_hello_ask(e);if(0!==n.nResultCode)return redfinger.onReturn(redfinger.ERROR.HELLO_ERR),-1;let i=new JSEncrypt();i.setPublicKey(redfinger.publicKey);let o=i.encrypt(n.nVerifyCode);o=o.substring(0,256),redfinger.send(o),redfinger.net_work_status=redfinger.shake_stat_list.helloanswer;break;case redfinger.shake_stat_list.helloask:case redfinger.shake_stat_list.helloanswer:if(0!==redfinger.readLittle32(e,0))return redfinger.onReturn(redfinger.ERROR.HELLO_ANSWER_ERR),-1;let a=redfinger.fill_player_hello_test_answer();redfinger.send(a),MLOG.debug(MLOG.d("player_hello_test_answer"));let s=redfinger.fillShakeOnline(redfinger.config.uid,redfinger.config.sessionid,redfinger.config.padcode,redfinger.config.appName);redfinger.send(s),redfinger.net_work_status=redfinger.shake_stat_list.sendshake;break;case redfinger.shake_stat_list.sendshake:var r=redfinger.getHead(e.buffer);if(r.mainType===redfinger.MSG_TYPE.MSG_SHAKE)return redfinger.conn_on_shake(e,r);if(r.mainType===redfinger.MSG_TYPE.MSG_CONTROL)return redfinger.conn_on_control(e,r);if(r.mainType===redfinger.MSG_TYPE.MSG_INPUT)return redfinger.conn_on_input(e,r);if(r.mainType===redfinger.MSG_TYPE.MSG_OUTPUT)return redfinger.conn_on_output(e,r);if(r.mainType===redfinger.MSG_TYPE.MSG_AV)return redfinger.conn_on_av(e,r,t);if(r.mainType===redfinger.MSG_TYPE.MSG_AUTH)return redfinger.conn_on_auth(e,r);MLOG.warn(MLOG.w("error main type:"+r.mainType)),redfinger.onReturn(redfinger.ERROR.MAIN_TYPE_ERR);}return 0;},redfinger.conn_on_shake=function(e,t){if(t.subType===redfinger.MSG_SHAKE_TYPE.MSG_SHAKE_ONLINE_R&&redfinger.sendSetScreenShot(redfinger.config.screenShotType),redfinger.videoinfo.isWebRtc&&!redfinger.videoinfo.isP2p)return;var r=new Uint8Array(e.buffer,6,e.length-6),n=new flatbuffers.ByteBuffer(r);switch(t.subType){case redfinger.MSG_SHAKE_TYPE.MSG_SHAKE_ONLINE_R:if(redfinger.videoinfo.isWebRtc&&redfinger.videoinfo.isP2p){var i=CSProto.ShakeOnlineR.getRootAsShakeOnlineR(n);if(!redfinger.checkControlError(i.code()))return-1;let e={};redfinger.sdkInfo.sdkPlatform=2,redfinger.videoinfo.isWebRtc&&(redfinger.sdkInfo.sdkPlatform=3),Object.assign(e,redfinger.sdkInfo),e.playMode=redfinger.config.playMode,redfinger.controlSdkInformation(JSON.stringify(e)),MLOG.debug(MLOG.d("ShakeOnlineR: "+i.code())),redfinger.isStartApp&&""!==redfinger.config.appName?redfinger.controlStartApp(redfinger.config.appName):redfinger.requestAVforP2p();}else{i=CSProto.ShakeOnlineR.getRootAsShakeOnlineR(n);if(!redfinger.checkControlError(i.code()))return-1;let e={};if(redfinger.sdkInfo.sdkPlatform=2,redfinger.videoinfo.isWebRtc&&(redfinger.sdkInfo.sdkPlatform=3),Object.assign(e,redfinger.sdkInfo),e.playMode=redfinger.config.playMode,redfinger.controlSdkInformation(JSON.stringify(e)),redfinger.isShakeAndPlay)break;redfinger.isStartApp&&""!==redfinger.config.appName?redfinger.controlStartApp(redfinger.config.appName):redfinger.requestAV();}break;case redfinger.MSG_SHAKE_TYPE.MSG_SHAKE_OFFER_R:MLOG.debug(MLOG.d("deal SHAKE_OFFER_R"));r=new Uint8Array(e.buffer,6,e.length-6),n=new flatbuffers.ByteBuffer(r);var o=CSProto.ShakeOfferR.getRootAsShakeOfferR(n);if(o.code())redfinger.gw.triggerError(-1e4);else{var a={type:"offer",sdp:o.offer()};redfinger.gw.onShakeOfferR(a);}break;case redfinger.MSG_SHAKE_TYPE.MSG_SHAKE_CANDIDATE:var s=new Uint8Array(e.buffer,6,e.length-6),d=new flatbuffers.ByteBuffer(s);i=CSProto.ShakeCandidate.getRootAsShakeCandidate(d);MLOG.debug(MLOG.d("onShakeCandidate: sdpMLineIndex:"+i.mlineindex()+",sdpMid:"+i.mid()+","+i.candidate()));var c={candidate:i.candidate(),sdpMid:i.mid(),sdpMLineIndex:i.mlineindex()};redfinger.gw.onShakeCandidate(c);break;case redfinger.MSG_SHAKE_TYPE.MSG_SHAKE_OFFLINE_R:i=CSProto.ShakeOfflineR.getRootAsShakeOfflineR(n);if(!redfinger.checkControlError(i.code()))return-1;break;case redfinger.MSG_SHAKE_TYPE.MSG_SHAKE_KICK:i=CSProto.ShakeKickR.getRootAsShakeKickR(n);if(!redfinger.checkControlError(i.code()))return-1;}return 0;},redfinger.conn_on_control=_async(function(e,t){let _exit10=false,_interrupt=false;var r,n,i;r=new Uint8Array(e.buffer,6,e.length-6);n=new flatbuffers.ByteBuffer(r);return _continue(_switch(t.subType,[[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_MTU_R;}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_DELAY_R;},function(){_interrupt=true;}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_DELAY;},function(){i=CSProto.ControlDelayR.getRootAsControlDelayR(n);let t=new Date().getTime();redfinger.phone.lastHeartBeatTime=t,redfinger.sendControlDelayR(Math.floor((t-i.time())/2),decodeTime);_interrupt=true;}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_APP_R;},function(){i=CSProto.ControlAppR.getRootAsControlAppR(n);return _invoke(function(){if(!redfinger.checkControlError(i.code())){const _redfinger$onReturn=redfinger.onReturn(redfinger.EVENT.START_APP,!1);return _await(redfinger.destory(),function(){const _temp20=(0,-1);_exit10=true;return _temp20;});}},function(_result22){if(_exit10)return _result22;MLOG.debug(MLOG.d("onControlAppR success")),!0===redfinger.videoinfo.isWebRtc&&!0===redfinger.videoinfo.isP2p?redfinger.requestAVforP2p():redfinger.isShakeAndPlay||redfinger.requestAV();_interrupt=true;});}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_AVFMT_R;},function(){{i=CSProto.ControlAVFmtR.getRootAsControlAVFmtR(n);if(!redfinger.checkControlError(i.code())){_exit10=true;return-1;}redfinger.resizePhone();let e=!1;if(redfinger.videoinfo.width!==i.vwidth()&&i.vwidth()>0&&(redfinger.trigCallback(redfinger.onChangeResolution,[i.vwidth(),i.vheight()],!0),e=!0),redfinger.videoinfo.width=i.vwidth(),redfinger.videoinfo.height=i.vheight(),redfinger.videoinfo.fps!==i.vfps()&&i.vfps()>0&&(redfinger.videoinfo.fps=i.vfps(),e=!0),redfinger.videoinfo.bitrate=i.vbitrate(),redfinger.videoinfo.bitrate!==redfinger.videoinfo.lastBitrate&&(redfinger.trigCallback(redfinger.onChangeBitrate,[redfinger.videoinfo.bitrate]),redfinger.videoinfo.lastBitrate=redfinger.videoinfo.bitrate,e=!0),null!==keyboard.keyCtrlUi&&keyboard.keyCtrlUi.reBuild(),redfinger.videoinfo.isWebRtc&&redfinger.videoinfo.isP2p&&(e=!1),e){let e={type:redfinger.videoinfo.reportType,width:redfinger.videoinfo.width,height:redfinger.videoinfo.height,fps:redfinger.videoinfo.fps,bitrate:redfinger.videoinfo.bitrate,devLevel:redfinger.config.devLevel,netDelay:redfinger.videoinfo.netDelay};redfinger.trigCallback(redfinger.onVideoInfoChange,[e]);}redfinger.videoinfo.reportType=0,MLOG.debug(MLOG.d(JSON.stringify(redfinger.videoinfo)));_interrupt=true;return;}}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_AVTRANS_R;},function(){i=CSProto.ControlAVTransR.getRootAsControlAVTransR(n);if(!redfinger.checkControlError(i.code())){_exit10=true;return-1;}const _redfinger$config$isL=redfinger.config.isLiveVideo,_temp21=_redfinger$config$isL&&!0===i.audio()&&!0===i.video()&&redfinger.config.isLiveRecovery,_redfinger$trigCallba4=_redfinger$config$isL&&_temp21&&redfinger.trigCallback(redfinger.onErrorMessage,[2008],!0);return _await(_redfinger$config$isL&&(_temp21?redfinger.destory():0),function(_redfinger$destory4){const _temp22=_temp21||!1===i.audio()&&!1===i.video(),_redfinger$trigCallba5=_temp21||_temp22&&redfinger.trigCallback(redfinger.onErrorMessage,[2009],!0),_redfinger$config$isL2=_temp21||_temp22&&(redfinger.config.isLiveRecovery=!0);return _await(_redfinger$config$isL&&(_temp21?_redfinger$destory4:_temp22&&redfinger.destory()),function(_redfinger$destory5){_redfinger$config$isL&&(_temp21?_redfinger$destory5:_temp22&&_redfinger$destory5);_interrupt=true;},!_redfinger$config$isL||_temp21||!_temp22);},!_redfinger$config$isL||!_temp21);}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_AUDIO_R;},function(){i=CSProto.ControlAudioR.getRootAsControlAudioR(n);if(!redfinger.checkControlError(i.code())){_exit10=true;return-1;}_interrupt=true;}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_VIDEO_R;},function(){{r=new Uint8Array(e.buffer,6,e.length-6),n=new flatbuffers.ByteBuffer(r),i=CSProto.ControlVideoR.getRootAsControlVideoR(n);if(!redfinger.checkControlError(i.code())){_exit10=true;return-1;}redfinger.resizePhone();let t=!1;if(redfinger.videoinfo.width!==i.width()&&i.width()>0&&(redfinger.trigCallback(redfinger.onChangeResolution,[i.width(),i.height()],!0),t=!0),redfinger.videoinfo.width=i.width(),redfinger.videoinfo.height=i.height(),redfinger.videoinfo.fps!==i.fps()&&i.fps()>0&&(redfinger.videoinfo.fps=i.fps(),t=!0),redfinger.videoinfo.bitrate=i.bitrate(),redfinger.videoinfo.bitmode=i.bitmode(),redfinger.videoinfo.bitrate!==redfinger.videoinfo.lastBitrate&&(redfinger.trigCallback(redfinger.onChangeBitrate,[redfinger.videoinfo.bitrate]),redfinger.videoinfo.lastBitrate=redfinger.videoinfo.bitrate,t=!0),redfinger.videoinfo.isWebRtc&&redfinger.videoinfo.isP2p&&(t=!1),t){let e={type:redfinger.videoinfo.reportType,width:redfinger.videoinfo.width,height:redfinger.videoinfo.height,fps:redfinger.videoinfo.fps,bitrate:redfinger.videoinfo.bitrate,devLevel:redfinger.config.devLevel,netDelay:redfinger.videoinfo.netDelay};redfinger.trigCallback(redfinger.onVideoInfoChange,[e]);}redfinger.videoinfo.reportType=0,MLOG.debug(MLOG.d(JSON.stringify(redfinger.videoinfo)));_interrupt=true;return;}}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_TIME;},function(){i=CSProto.ControlAudioR.getRootAsControlTime(n);redfinger.onReturn(redfinger.EVENT.COUNT_TIME,i.time()),MLOG.debug(MLOG.d("MSG_CONTROL_TIME:"+i.time()));_interrupt=true;}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_QUERYAUTH;},function(){let o=(i=CSProto.ControlQueryAuth.getRootAsControlQueryAuth(n)).queryauthority()?1:0;redfinger.trigCallback(redfinger.onControlQueryAuthReq,[o]);_interrupt=true;}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_CHANGENOTIFY;},function(){{let e=CSProto.ControlAuthChangeNotify.getRootAsControlAuthChangeNotify(n).ControlChangeNotify();redfinger.trigCallback(redfinger.onControlAuthChangeNotify,[e]);_interrupt=true;return;}}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_USERS_R;},function(){if((i=CSProto.ControlInput.getRootAsControlInput(n)).type()!==redfinger.MSG_INPUT_TYPE.MSG_INPUT_VIDEO&&i.type()!==redfinger.MSG_INPUT_TYPE.MSG_INPUT_VIDEO_FRONT||1!==i.state()){if(i.type()!==redfinger.MSG_INPUT_TYPE.MSG_INPUT_VIDEO&&i.type()!==redfinger.MSG_INPUT_TYPE.MSG_INPUT_VIDEO_FRONT||0!==i.state()){if(i.type()===redfinger.MSG_INPUT_TYPE.MSG_INPUT_AUDIO&&1===i.state()){if(redfinger.config.isMicrophoneLive){if(redfinger.audioRecoder){_exit10=true;return;}let e=i.samples();MLOG.info(MLOG.i("open mic audio samples:"+e)),e<8e3&&(e=8e3),redfinger.config.sampleRate=e,redfinger.audioRecoder=new AudioRecoder(redfinger.config.sampleRate),redfinger.audioRecoder.startRecord();}redfinger.trigCallback(redfinger.onSensorInput,[i.type(),i.state(),{samples:i.samples()}]);}else i.type()===redfinger.MSG_INPUT_TYPE.MSG_INPUT_AUDIO&&0===i.state()?(redfinger.audioRecoder&&(redfinger.audioRecoder.stopRecord(),redfinger.audioRecoder=null),redfinger.trigCallback(redfinger.onSensorInput,[i.type(),i.state(),{}])):redfinger.trigCallback(redfinger.onSensorInput,[i.type(),i.state(),{}]);}else clearTimeout(redfinger.startCameraTimer),redfinger.unSetUpCamera(),redfinger.trigCallback(redfinger.onSensorInput,[i.type(),i.state(),{}]);}else{let e=720,t=1280;i.width()&&i.height()&&(MLOG.debug(MLOG.d("摄像头返回分辨率："+i.width()+" X "+i.height())),e=i.width(),t=i.height()),redfinger.config.isCameraLive?(void 0===redfinger.camera&&(redfinger.startCameraTimer=window.setTimeout(function(){redfinger.camera=new UpLoadLiveStream(),redfinger.camera.initdom(e,t);let r="user";i.type()!==redfinger.MSG_INPUT_TYPE.MSG_INPUT_VIDEO||redfinger.isPc()||(r="environment",MLOG.debug(MLOG.d("启动后置摄像头"))),redfinger.camera.setupCamera(r);},1e3)),redfinger.eventObj.addEventListener({mountName:"window",events:["orientationchange","camera"]})):2===redfinger.config.QRcodeSetType?redfinger.trigCallback(redfinger.onCanUploadQRcode,[]):1===redfinger.config.QRcodeSetType&&redfinger.startUploadQRcode(),redfinger.trigCallback(redfinger.onSensorInput,[i.type(),i.state(),{width:i.width(),height:i.height()}]);}_interrupt=true;}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_INPUT;},function(){let a=CSProto.ControlInput.getRootAsControlInput(n);if(a.type()!==redfinger.MSG_INPUT_TYPE.MSG_INPUT_VIDEO&&a.type()!==redfinger.MSG_INPUT_TYPE.MSG_INPUT_VIDEO_FRONT||1!==a.state()){if(a.type()!==redfinger.MSG_INPUT_TYPE.MSG_INPUT_VIDEO&&a.type()!==redfinger.MSG_INPUT_TYPE.MSG_INPUT_VIDEO_FRONT||0!==a.state()){if(a.type()===redfinger.MSG_INPUT_TYPE.MSG_INPUT_AUDIO&&1===a.state()){if(redfinger.config.isMicrophoneLive){if(redfinger.audioRecoder){_exit10=true;return;}let e=a.samples();e<8e3&&(e=8e3),redfinger.config.sampleRate=e,MLOG.info(MLOG.i("open mic audio samples:"+e)),redfinger.audioRecoder=new AudioRecoder(redfinger.config.sampleRate),redfinger.audioRecoder.startRecord();}redfinger.trigCallback(redfinger.onSensorInput,[a.type(),a.state(),{samples:a.samples()}]);}else a.type()===redfinger.MSG_INPUT_TYPE.MSG_INPUT_AUDIO&&0===a.state()?(redfinger.audioRecoder&&(redfinger.audioRecoder.stopRecord(),redfinger.audioRecoder=null),redfinger.trigCallback(redfinger.onSensorInput,[a.type(),a.state(),{}])):redfinger.trigCallback(redfinger.onSensorInput,[a.type(),a.state(),{}]);}else clearTimeout(redfinger.startCameraTimer),redfinger.unSetUpCamera(),redfinger.trigCallback(redfinger.onSensorInput,[a.type(),a.state(),{}]);}else{let e=720,t=1280;a.width()&&a.height()&&(MLOG.debug(MLOG.d("摄像头返回分辨率："+a.width()+" X "+a.height())),e=a.width(),t=a.height()),redfinger.config.isCameraLive?(void 0===redfinger.camera&&(redfinger.startCameraTimer=window.setTimeout(function(){redfinger.camera=new UpLoadLiveStream(),redfinger.camera.initdom(e,t);let r="user";a.type()!==redfinger.MSG_INPUT_TYPE.MSG_INPUT_VIDEO||redfinger.isPc()||(r="environment",MLOG.debug(MLOG.d("启动后置摄像头"))),redfinger.camera.setupCamera(r);},1e3)),redfinger.eventObj.addEventListener({mountName:"window",events:["orientationchange","camera"]})):2===redfinger.config.QRcodeSetType?redfinger.trigCallback(redfinger.onCanUploadQRcode,[]):1===redfinger.config.QRcodeSetType&&redfinger.startUploadQRcode(),redfinger.trigCallback(redfinger.onSensorInput,[a.type(),a.state(),{width:a.width(),height:a.height()}]);}_interrupt=true;}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_TRANSPARENT_MSG;},function(){let s=CSProto.TransparentMsg.getRootAsTransparentMsg(n);redfinger.trigCallback(redfinger.onTransparentMsg,[s.type(),s.data(),s.service()]);_interrupt=true;}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_TRANSMSGENCODED;},function(){let d=CSProto.TransMsgEncoded.getRootAsTransMsgEncoded(n);redfinger.trigCallback(redfinger.onTransparentMsg,[d.type(),d.data(),d.binderSvc(),d.encType()]);_interrupt=true;}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_TRANSMSGENCODED_R;}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_TRAMSPARENT_MSG_R;},function(){let c=CSProto.TransparentMsgR.getRootAsTransparentMsgR(n),f=c.type(),u=c.result(),l=c.service();1===u&&redfinger.trigCallback(redfinger.onTransparentMsgFailed,[f,u,l]);_interrupt=true;}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_TRANSMSGSHAKE_R;},function(){const p=CSProto.TransMsgShake.getRootAsTransMsgShake(n).supportedEncryts().split(",").map(e=>+e);redfinger.checkParam.setRuleVal("encryptType","enums",p),redfinger.trigCallback(redfinger.onSupportMsgEncryptTypes,[p]);_interrupt=true;}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_SDK_INFORMATION_R;},function(){let h=CSProto.ControlSdkInformationR.getRootAsControlSdkInformationR(n).data();MLOG.debug(MLOG.d("sdkInfoR:"+h)),"string"==typeof h&&(h=JSON.parse(h)),void 0!==h.playMode&&(redfinger.sdkInfo.playMode=h.playMode);_interrupt=true;}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_APP_EVENT;},function(){{let e=CSProto.ControlAppEvent.getRootAsControlAppEvent(n);1===e.type()&&1===e.state()&&(2===redfinger.config.QRcodeSetType?redfinger.trigCallback(redfinger.onCanUploadQRcode,[]):1===redfinger.config.QRcodeSetType&&redfinger.startUploadQRcode()),redfinger.trigCallback(redfinger.onCloudAppEvent,[e.type(),e.state()]);_interrupt=true;return;}}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_NAVBAR_STATE_R;},function(){let g=CSProto.NavBarStateR.getRootAsNavBarStateR(n);redfinger.trigCallback(redfinger.onNavBarState,[g.navbarstate()]);_interrupt=true;}],[function(){return redfinger.MSG_CONTROL_TYPE.MSG_CONTROL_ACTIVE_KEYBOARD_R;},function(){const y=CSProto.ActiveKeyBoardR.getRootAsActiveKeyBoardR(n);redfinger.trigCallback(redfinger.onRemoteKeyboard,[y.result()]);},_empty]]),function(_result23){return _exit10?_result23:0;});}),redfinger.conn_on_input=function(e,t){return t.subType,0;},redfinger.conn_on_output=function(e,t){switch(t.subType){case redfinger.MSG_OUTPUT_TYPE.MSG_OUTPUT_STRING:break;case redfinger.MSG_OUTPUT_TYPE.MSG_OUTPUT_SCREEN:var n=new Uint8Array(e.buffer,6,e.length-6),i=new flatbuffers.ByteBuffer(n),o=CSProto.OutputScreen.getRootAsOutputScreen(i);redfinger.isPc(),redfinger.trigCallback(redfinger.onRotation,[redfinger.EVENT.SCREEN_ROTATION,o.rotation()]),redfinger.phoneRotation(o.rotation()),redfinger.phone.remoteRotation=o.rotation();break;case redfinger.MSG_OUTPUT_TYPE.MSG_OUTPUT_VIBRATION:break;case redfinger.MSG_OUTPUT_TYPE.MSG_OUTPUT_CURSOR:n=new Uint8Array(e.buffer,6,e.length-6),i=new flatbuffers.ByteBuffer(n);(o=CSProto.OutputCursor.getRootAsOutputCursor(i)).opt()===redfinger.CONST.ACTIVE_KEYBOARD&&keyboard&&redfinger.config.keyboard&&(redfinger.localInput=!0,keyboard.typing_flag=keyboard.on,keyboard.joystick_flag=keyboard.off,keyboard.joystick_destroy(),keyboard.typing_init()),o.opt()===redfinger.CONST.DEACTIVE_KEYBOARD&&keyboard&&redfinger.config.keyboard&&(keyboard.typing_flag=keyboard.off,keyboard.joystick_flag=keyboard.on,redfinger.localInput=!1,keyboard.softKeyboard&&(keyboard.typing_destroy(),keyboard.joystick_init()));break;case redfinger.MSG_OUTPUT_TYPE.MSG_OUTPUT_FILE:{let t=new Uint8Array(e.buffer,6,128),n=new Uint8Array(e.buffer,134,e.length-6-128),i="";for(let e=0;e<t.length&&0!==t[e];e++)i+=String.fromCharCode(t[e]);let o="data:image/"+i.substring(i.lastIndexOf(".")+1).toLowerCase()+";base64,"+btoa(r(n));redfinger.trigCallback(redfinger.onGameScreenshots,[i,o]);break;}case redfinger.MSG_OUTPUT_TYPE.MSG_OUTPUT_FILE_URL:{let t=new Uint8Array(e.buffer,6,e.length-6),r=new flatbuffers.ByteBuffer(t),n=CSProto.OutputFileUrl.getRootAsOutputFileUrl(r),i=n.pictureFileName(),o=n.pictureFileURL();redfinger.downloadImg(i,o);break;}case redfinger.MSG_OUTPUT_TYPE.MSG_OUTPUT_VIDEO_FILE_URL:{let t=new Uint8Array(e.buffer,6,e.length-6),r=new flatbuffers.ByteBuffer(t),n=CSProto.OutputVideoFileUrl.getRootAsOutputVideoFileUrl(r),i=n.fileName(),o=n.fileURL(),a=n.len();MLOG.debug(MLOG.d("onGameVideo: fileName:"+i+",fileUrl:"+o+" len:"+a)),redfinger.trigCallback(redfinger.onGameVideo,[o,i,a]);break;}case redfinger.MSG_OUTPUT_TYPE.MSG_OUTPUT_CLOUD_NOTIFY:{let t=new Uint8Array(e.buffer,6,e.length-6),r=new flatbuffers.ByteBuffer(t),n=CSProto.OutputCloudNotify.getRootAsOutputCloudNotify(r),i=n.type(),o=n.msg();MLOG.debug(MLOG.d("onCloudNotify: type:"+i+",msg:"+o)),redfinger.trigCallback(redfinger.onCloudNotify,[i,o]);break;}case redfinger.MSG_OUTPUT_TYPE.MSG_OUTPUT_CLIPPER:{let t=new Uint8Array(e.buffer,6,e.length-6),r=new flatbuffers.ByteBuffer(t),n=CSProto.OutputString.getRootAsOutputString(r).msg();MLOG.debug(MLOG.d("onOutputClipper: msg:"+n)),"string"==typeof n&&(n=JSON.parse(n)),redfinger.trigCallback(redfinger.onOutputClipper,[n.content]);break;}case redfinger.MSG_OUTPUT_TYPE.MSG_OUTPUT_CLOUD_PHONE_EVENT:{let t=new Uint8Array(e.buffer,6,e.length-6),r=new flatbuffers.ByteBuffer(t),n=CSProto.OutputCloudPhoneEvent.getRootAsOutputCloudPhoneEvent(r).data();MLOG.debug(MLOG.d("onCloudPhoneEvent: data:"+n)),"string"==typeof n&&(n=JSON.parse(n)),"phoneCall"===n.evType&&redfinger.trigCallback(redfinger.onTelephoneCall,[n.phoneNumber]);break;}case redfinger.MSG_OUTPUT_TYPE.MSG_OUTPUT_KEYBOARD_TYPE:{let t=new Uint8Array(e.buffer,6,e.length-6),r=new flatbuffers.ByteBuffer(t),n=CSProto.KeyboardSwitch.getRootAsKeyboardSwitch(r).sw();MLOG.debug(MLOG.d("onKeyboardSwitch: type:"+n)),redfinger.onKeyboardSwitch(n);break;}}return 0;},redfinger.conn_on_av=function(e,t,r){switch(t.subType){case redfinger.MSG_AV_TYPE.MSG_AV_AUDIO:if(0===e[6])return;redfinger.audioBuffer=new AV.Buffer(new Uint8Array(e.buffer.slice(7))),redfinger.aurora_source&&redfinger.audioPlayer&&(redfinger.audioPlayer.preload(),redfinger.aurora_source.emit("data",redfinger.audioBuffer));break;case redfinger.MSG_AV_TYPE.MSG_AV_VIDEO:const{VFMT_SOFT:n,VFMT_HARD:i}=redfinger.CONST,{useWCS:o,vfmt:a}=redfinger.config;if(redfinger.alreadyCleanAsmInstance||![n,i].includes(a)||o||(redfinger.cleanAsmInstance(),redfinger.alreadyCleanAsmInstance=!0,redfinger.warmupCount<redfinger.WARMUPCOUNTMAX&&(redfinger.warmupCount=redfinger.WARMUPCOUNTMAX-1)),redfinger.isPlaying||(redfinger.isPlaying=!0,redfinger.trigCallback(redfinger.onPlaySuccess,[])),redfinger.startTime.isFirst){let e=new Date().getTime();redfinger.startTime.t2=e-redfinger.startTime.playBegin;}if(redfinger.usewfs){if(e[6]<2)break;redfinger.wfs.attachH264Data(new Uint8Array(e.buffer,7));}else if([n,i].includes(a)){let n=e[6];if(n===redfinger.VIDEO_X264_IDR||(n===redfinger.VIDEO_X264_SPS?redfinger.videoinfo.isGetSPS=!0:n===redfinger.VIDEO_X264_PPS||redfinger.VIDEO_X264_P),!redfinger.videoinfo.isGetSPS)return;if(void 0===TrackingTmpData.receiveFirstFrame&&(TrackingTmpData.receiveFirstFrame=new Date().getTime(),redfinger.tracking.setBaseInfo({firstFrameReceiveTime:TrackingTmpData.receiveFirstFrame})),TrackingTmpData.receiveFrameLastTime>0){let e=new Date().getTime()-TrackingTmpData.receiveFrameLastTime;redfinger.tracking.updateReceiveFrameTime(e);}TrackingTmpData.receiveFrameLastTime=new Date().getTime(),redfinger.jumpFrameProc(e,t,r),r.push(e),o?redfinger.wcsDecoder.decode(r.shift()):DecoderFetchFrameData(r.shift());}else redfinger.jpegJump(vData),vData.push(new Uint8Array(e.buffer,7)),redfinger.drawJPEG(vData.shift());}return 0;},redfinger.conn_on_auth=function(e,t){return t.subType,redfinger.MSG_AUTH_TYPE.MSG_AUTH_LIST,0;},redfinger.startUploadQRcode=function(e){void 0===redfinger.qrcode&&(redfinger.qrcode=new UploadQRcode()),redfinger.qrcode.init(e);},redfinger.downloadImg=function(e,t){let r=new Image();r.setAttribute("crossorigin","anonymous"),r.onload=function(){let t=r.src.substring(r.src.lastIndexOf(".")+1).toLowerCase(),n=getBase64Image(r,t);redfinger.trigCallback(redfinger.onGameScreenshots,[e,n]);},r.onerror=function(){MLOG.error(MLOG.e("图片下载失败: "+t)),redfinger.trigCallback(redfinger.onImgDownloadError,[{imgUrl:t,errorCode:redfinger.ERROR.EP_IMG_DOWNLOAD_FAILED}]),redfinger.config.isReport&&redfinger.report.imgDownloadErr({imgUrl:t,errorCode:redfinger.ERROR.EP_IMG_DOWNLOAD_FAILED});},r.src=t;},redfinger.drawJPEG=function(e){redfinger.canvas||(redfinger.canvas=document.querySelector("#redPhone"));let t=new Date(),n=redfinger.canvas.getContext("2d"),i=btoa(r(e));null===redfinger.jpegimgPool&&(redfinger.jpegimgPool=new ImagePool(10));let o=redfinger.jpegimgPool.next();o.onload=function(){redfinger.resizePhone(),n.clearRect(0,0,redfinger.phone.width,redfinger.phone.height),n.drawImage(o,0,0,redfinger.canvas.width,redfinger.canvas.height),redfinger.onDrawed(),decodeTime=new Date()-t,redfinger.isOpen||(redfinger.onReturn(redfinger.EVENT.START_APP,!0),redfinger.isReturnAppStart=!0),i=null,o.onload=null;o.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",o=null;},o.src="data:image/jpeg;base64,"+i;},redfinger.drawRGB=function(e){redfinger.canvas||(redfinger.canvas=document.querySelector("#redPhone"));let t=redfinger.canvas.getContext("2d"),r=redfinger.canvas.imgData;t||(canvasObj.ctx=canvasObj.canvas.getContext("2d"),t=canvasObj.ctx,canvasObj.imgData=t.createImageData(576,1024),r=redfinger.canvas.imgData),r.data.set(e),t.putImageData(r,0,0),redfinger.isOpen||(redfinger.onReturn(redfinger.EVENT.START_APP,!0),redfinger.isReturnAppStart=!0);},redfinger.jpegJump=function(e){vData>redfinger.videoinfo.fps&&vData.splice(0,e.length);},redfinger.checkControlError=function(e){return 0!==e&&e!==redfinger.CONTROL_ERROR.EP_START_APP_FAILED&&redfinger.onReturn(e),0===e;},redfinger.setInitStreamInfo=function(){let e=720,t=1280,r=redfinger.config.devLevel;0===r?(e=redfinger.config.devWidth,t=redfinger.config.devHeight):1===r?(e=720,t=1280):2===r?(e=576,t=1024):3===r?(e=432,t=768):4===r&&(e=288,t=512),redfinger._setStreamConfig(e,t,redfinger.config.bitrate,redfinger.config.minFPS);},redfinger.requestAVforP2p=function(){redfinger.setInitStreamInfo(),redfinger.gw.onSessinCreate();},redfinger.requestAV=function(){if(redfinger.isStartApp=!0,redfinger.videoinfo.isWebRtc)return redfinger.m_resolutionLevel(redfinger.config.devLevel),0;redfinger.config.isDefualtVideo&&(this.m_setupVideoQuality(redfinger.config.videoQuality,redfinger.config.bitrate,redfinger.config.minFPS),redfinger.m_resolutionLevel(redfinger.config.devLevel),redfinger.sendControlAVTrans(redfinger.config.isAudio),5!==redfinger.config.vfmt&&6!==redfinger.config.vfmt||redfinger._setupPicQuality(redfinger.config.videoQuality));},redfinger.initAudio=function(){if(window.AudioContext||window.webkitAudioContext)if(redfinger.audioPlayer&&redfinger.aurora_source)redfinger.audioPlayer&&redfinger.audioPlayer.play();else{let e=AV.EventEmitter.extend({start:function(){this.emit("data",redfinger.audioBuffer);},pause:function(){},reset:function(){}});redfinger.aurora_source=new e(),asset=new AV.Asset(redfinger.aurora_source),redfinger.audioPlayer=new AV.Player(asset),redfinger.audioPlayer.play();}},redfinger.stopJsAudio=function(){redfinger.audioPlayer&&redfinger.audioPlayer.pause();},redfinger.m_resolutionLevel=function(e){redfinger.config.devLevel=e,MLOG.debug(MLOG.d("redfinger.config.devLevel:"+redfinger.config.devLevel));let t=0,r=0;0===e&&(t=redfinger.config.devWidth,r=redfinger.config.devHeight);let n=new flatbuffers.Builder(0);CSProto.ResolutionLevel.startResolutionLevel(n),CSProto.ResolutionLevel.addLevel(n,e),CSProto.ResolutionLevel.addWidth(n,t),CSProto.ResolutionLevel.addHeight(n,r);let i=CSProto.ResolutionLevel.endResolutionLevel(n);n.finish(i);let o=redfinger.fill_redfinger_pack(n.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_RESOLUTIONLEVEL);redfinger.send(o),redfinger.devicesChange(o);},redfinger.resolutionLevel=function(e){1!==redfinger.videoinfo.reportType&&(redfinger.videoinfo.reportType=2),redfinger.m_resolutionLevel(e);},redfinger.getHead=function(e){let t={},r=new DataView(e,0,6);return t.mainType=r.getUint8(0),t.subType=r.getUint8(1),t.len=r.getUint32(2,!0),t;},redfinger.fill_player_hello_package=function(){let e=new Date().getTime(),t=(e-e%1e3)/1e3,r=e%4294967295,n=(e-r)/4294967295,i=t%4294967295,o=(t-i)/4294967295;MLOG.debug(MLOG.d(n.toString(16)+" "+r.toString(16))),MLOG.debug(MLOG.d(o.toString(16)+" "+i.toString(16)));let a=new Uint8Array([71,67,80,50,0,0,2,0,255&i,i>>>8&255,i>>>16&255,i>>>24&255,255&o,o>>>8&255,o>>>16&255,o>>>24&255,255&r,r>>>8&255,r>>>16&255,r>>>24&255,255&n,n>>>8&255,n>>>16&255,n>>>24&255,0,0,0,0,0,0,0,0]);return redfinger.log(a),a;},redfinger.fill_player_hello_test_answer=function(){let e=new Date().getTime();return new Uint8Array([e>>>56&255,e>>>48&255,e>>>40&255,e>>>32&255,e>>>24&255,e>>>16&255,e>>>8&255,255&e]);},redfinger.get_player_hello_ask=function(e){return{nResultCode:redfinger.readLittle32(e,0),nVerifyCode:redfinger.readLittle32(e,4)};},redfinger.readBig32=function(e,t){return new DataView(e.buffer,t,4).getUint32(0,!1);},redfinger.readLittle32=function(e,t){return new DataView(e.buffer,t,4).getUint32(0,!0);},redfinger.resizePhone=function(){if(1===redfinger.sdkInfo.playMode)return void redfinger.resizePhoneCloudGame();const e=redfinger.phoneDom;let t=document.querySelector("#"+e),r=document.querySelector("#"+redfinger.dom);if(redfinger.videoinfo.isWebRtc?(t=document.getElementById(e),r=document.querySelector("#"+redfinger.dom)):(t=document.querySelector("#"+e),r=document.querySelector("#"+redfinger.dom)),redfinger.defaultPhoneRotation(),r&&(redfinger.phone.height=r.offsetHeight,redfinger.phone.pWidth=r.offsetWidth,redfinger.phone.width=parseInt(redfinger.phone.height*redfinger.videoinfo.width/redfinger.videoinfo.height),redfinger.phone.width>r.offsetWidth&&(redfinger.phone.width=r.offsetWidth,redfinger.phone.height=parseInt(redfinger.phone.width*redfinger.videoinfo.height/redfinger.videoinfo.width)),1===redfinger.phone.rotation&&0===redfinger.sdkInfo.playMode&&redfinger.videoinfo.canRotate&&(redfinger.phone.width=r.offsetHeight,redfinger.phone.height=parseInt(redfinger.phone.width*redfinger.videoinfo.height/redfinger.videoinfo.width))),t){if(t.style.height=redfinger.phone.height+"px",t.style.width=redfinger.phone.width+"px",t.style.margin="0 auto",redfinger.phone.letfOff=(redfinger.phone.pWidth-redfinger.phone.width)/2,redfinger.phone.width===r.offsetWidth&&(redfinger.phone.topOff=(r.offsetHeight-redfinger.phone.height)/2,t.style.marginTop=redfinger.phone.topOff+"px"),1===redfinger.phone.rotation&&redfinger.videoinfo.canRotate){if(redfinger.phone.height>r.offsetWidth){redfinger.phone.height=r.offsetWidth,redfinger.phone.width=redfinger.videoinfo.width*redfinger.phone.height/redfinger.videoinfo.height,t.style.height=redfinger.phone.height+"px",t.style.width=redfinger.phone.width+"px",t.style.transformOrigin="0 0",t.style.webkitTransOrigin="0 0",t.style.mozTransOrigin="0 0",t.style.oTransOrigin="0 0";var n=(r.offsetHeight-redfinger.phone.width)/2,i=(r.offsetWidth-redfinger.phone.height)/2,o=redfinger.phone.height+i,a=redfinger.phone.width+n;270===redfinger.config.transform?o=0:90===redfinger.config.transform&&(a=n),t.style.transform="translate("+o+"px,"+a+"px) rotate("+redfinger.config.transform+"deg)",t.style.webkitTransform="translate("+o+"px,"+a+"px) rotate("+redfinger.config.transform+"deg)",t.style.mozTransform="translate("+o+"px,"+a+"px) rotate("+redfinger.config.transform+"deg)",t.style.oTransform="translate("+o+"px,"+a+"px) rotate("+redfinger.config.transform+"deg)",redfinger.phone.offSetx=i,redfinger.phone.offSety=n;}else{t.style.transformOrigin="0 0",t.style.webkitTransOrigin="0 0",t.style.mozTransOrigin="0 0",t.style.oTransOrigin="0 0";n=(r.offsetHeight-redfinger.phone.width)/2,i=(r.offsetWidth-redfinger.phone.height)/2,o=redfinger.phone.height+i,a=redfinger.phone.width+n;270===redfinger.config.transform?o=i:90===redfinger.config.transform&&(a=n),t.style.transform="translate("+o+"px,"+a+"px) rotate("+redfinger.config.transform+"deg)",t.style.webkitTransform="translate("+o+"px,"+a+"px) rotate("+redfinger.config.transform+"deg)",t.style.mozTransform="translate("+o+"px,"+a+"px) rotate("+redfinger.config.transform+"deg)",t.style.oTransform="translate("+o+"px,"+a+"px) rotate("+redfinger.config.transform+"deg)",redfinger.phone.offSetx=i,redfinger.phone.offSety=n;}}else t.style.transformOrigin="0 0",t.style.webkitTransOrigin="0 0",t.style.mozTransOrigin="0 0",t.style.oTransOrigin="0 0",t.style.transform="rotate(0deg)",t.style.msTransform="rotate(0deg)",t.style.mozTransform="rotate(0deg)",t.style.webkitTransform="rotate(0deg)",t.style.oTransform="rotate(0deg)",redfinger.phone.offSetx=redfinger.phone.letfOff,redfinger.phone.offSety=redfinger.phone.topOff;let e={x:parseInt(redfinger.phone.width/2+10,10),y:parseInt(redfinger.phone.height/2+10,10)};redfinger.isPc()&&(e.x=parseInt(redfinger.phone.width*redfinger.config.pointerLockPosition.x/100,10),e.y=parseInt(redfinger.phone.height*redfinger.config.pointerLockPosition.y/100,10),1===redfinger.phone.rotation&&0===redfinger.sdkInfo.playMode?(e.x=parseInt(redfinger.phone.height*redfinger.config.pointerLockPosition.y/100,10),e.y=parseInt(redfinger.phone.width*redfinger.config.pointerLockPosition.x/100,10)):1===redfinger.phone.rotation&&1===redfinger.sdkInfo.playMode&&(e.x=parseInt(redfinger.phone.width*redfinger.config.pointerLockPosition.y/100,10),e.y=parseInt(redfinger.phone.height*redfinger.config.pointerLockPosition.x/100,10)),keyboard.setPointerLockDefPosition(e),null!==keyboard.keyCtrlUi&&keyboard.keyCtrlUi.resize());}},redfinger.resizePhoneCloudGame=function(){let e=document.querySelector("#redPhone"),t=document.querySelector("#"+redfinger.dom);if(redfinger.videoinfo.isWebRtc?(e=document.getElementById("phoneVideo"),t=document.querySelector("#"+redfinger.dom)):(e=document.querySelector("#redPhone"),t=document.querySelector("#"+redfinger.dom)),redfinger.defaultPhoneRotation(),t&&(redfinger.phone.height=t.offsetHeight,redfinger.phone.width=t.offsetWidth,redfinger.phone.width=parseInt(redfinger.phone.height*redfinger.videoinfo.width/redfinger.videoinfo.height,10),redfinger.phone.width>t.offsetWidth?(redfinger.phone.width=t.offsetWidth,redfinger.phone.height=parseInt(redfinger.phone.width*redfinger.videoinfo.height/redfinger.videoinfo.width,10)):(redfinger.phone.height=t.offsetHeight,redfinger.phone.width=parseInt(redfinger.phone.height*redfinger.videoinfo.width/redfinger.videoinfo.height,10)),3!==redfinger.phone.rotation&&1!==redfinger.phone.rotation||(redfinger.phone.width=t.offsetHeight,redfinger.phone.height=parseInt(redfinger.phone.width*redfinger.videoinfo.height/redfinger.videoinfo.width,10),redfinger.phone.height>t.offsetWidth&&(redfinger.phone.height=t.offsetWidth,redfinger.phone.width=parseInt(redfinger.phone.height*redfinger.videoinfo.width/redfinger.videoinfo.height,10)))),e){if(e.style.height=redfinger.phone.height+"px",e.style.width=redfinger.phone.width+"px",e.style.margin="0 auto",redfinger.phone.letfOff=(redfinger.phone.pWidth-redfinger.phone.width)/2,redfinger.isPc()){if(3===redfinger.phone.rotation&&redfinger.videoinfo.width>redfinger.videoinfo.height){e.style.transformOrigin="0 0",e.style.webkitTransOrigin="0 0",e.style.mozTransOrigin="0 0",e.style.oTransOrigin="0 0";let r=(t.offsetHeight-redfinger.phone.width)/2,n=(t.offsetWidth-redfinger.phone.height)/2,i=n+redfinger.phone.height,o=0;e.style.transform="translate("+i+"px,"+o+"px) rotate(90deg)",e.style.webkitTransform="translate("+i+"px,"+o+"px) rotate(90deg)",e.style.mozTransform="translate("+i+"px,"+o+"px) rotate(90deg)",e.style.oTransform="translate("+i+"px,"+o+"px) rotate(90deg)",redfinger.phone.offSetx=n,redfinger.phone.offSety=r;}else if(0===redfinger.phone.rotation&&redfinger.videoinfo.width>redfinger.videoinfo.height){let r=(t.offsetHeight-redfinger.phone.height)/2,n=(t.offsetWidth-redfinger.phone.width)/2,i=n,o=r;e.style.transformOrigin="0 0",e.style.webkitTransOrigin="0 0",e.style.mozTransOrigin="0 0",e.style.oTransOrigin="0 0",e.style.transform="translate("+i+"px,"+o+"px) rotate(0deg)",e.style.webkitTransform="translate("+i+"px,"+o+"px) rotate(0deg)",e.style.mozTransform="translate("+i+"px,"+o+"px) rotate(0deg)",e.style.oTransform="translate("+i+"px,"+o+"px) rotate(0deg)",redfinger.phone.offSetx=n,redfinger.phone.offSety=r;}else if(1===redfinger.phone.rotation&&redfinger.videoinfo.width>redfinger.videoinfo.height){e.style.transformOrigin="0 0",e.style.webkitTransOrigin="0 0",e.style.mozTransOrigin="0 0",e.style.oTransOrigin="0 0";let r=(t.offsetHeight-redfinger.phone.width)/2,n=(t.offsetWidth-redfinger.phone.height)/2,i=n,o=redfinger.phone.width;e.style.transform="translate("+i+"px,"+o+"px) rotate(270deg)",e.style.webkitTransform="translate("+i+"px,"+o+"px) rotate(270deg)",e.style.mozTransform="translate("+i+"px,"+o+"px) rotate(270deg)",e.style.oTransform="translate("+i+"px,"+o+"px) rotate(270deg)",redfinger.phone.offSetx=n,redfinger.phone.offSety=r;}else if(2===redfinger.phone.rotation&&redfinger.videoinfo.width>redfinger.videoinfo.height){e.style.transformOrigin="0 0",e.style.webkitTransOrigin="0 0",e.style.mozTransOrigin="0 0",e.style.oTransOrigin="0 0";let r=(t.offsetWidth-redfinger.phone.width)/2,n=(t.offsetHeight-redfinger.phone.height)/2,i=r+redfinger.phone.width,o=n+redfinger.phone.height;e.style.transform="translate("+i+"px,"+o+"px) rotate(180deg)",e.style.webkitTransform="translate("+i+"px,"+o+"px) rotate(180deg)",e.style.mozTransform="translate("+i+"px,"+o+"px) rotate(180deg)",e.style.oTransform="translate("+i+"px,"+o+"px) rotate(180deg)",redfinger.phone.offSetx=r,redfinger.phone.offSety=n;}}else if(0===redfinger.getorientation()){redfinger.phone.width=t.offsetHeight,redfinger.phone.height=parseInt(redfinger.phone.width*redfinger.videoinfo.height/redfinger.videoinfo.width,10),redfinger.phone.height>t.offsetWidth&&(redfinger.phone.height=t.offsetWidth,redfinger.phone.width=parseInt(redfinger.phone.height*redfinger.videoinfo.width/redfinger.videoinfo.height,10)),e.style.height=redfinger.phone.height+"px",e.style.width=redfinger.phone.width+"px";let r=(t.offsetHeight-redfinger.phone.width)/2,n=(t.offsetWidth-redfinger.phone.height)/2,i=n+redfinger.phone.height,o=r;e.style.transformOrigin="0 0",e.style.webkitTransOrigin="0 0",e.style.mozTransOrigin="0 0",e.style.oTransOrigin="0 0",e.style.transform="translate("+i+"px,"+o+"px) rotate(90deg)",e.style.webkitTransform="translate("+i+"px,"+o+"px) rotate(90deg)",e.style.mozTransform="translate("+i+"px,"+o+"px) rotate(90deg)",e.style.oTransform="translate("+i+"px,"+o+"px) rotate(90deg)",redfinger.phone.offSetx=n,redfinger.phone.offSety=r;}else{redfinger.phone.width=t.offsetWidth,redfinger.phone.height=parseInt(redfinger.phone.width*redfinger.videoinfo.height/redfinger.videoinfo.width,10),redfinger.phone.height>t.offsetHeight&&(redfinger.phone.height=t.offsetHeight,redfinger.phone.width=parseInt(redfinger.phone.height*redfinger.videoinfo.width/redfinger.videoinfo.height,10));let r=(t.offsetHeight-redfinger.phone.height)/2,n=(t.offsetWidth-redfinger.phone.width)/2,i=n,o=r;e.style.height=redfinger.phone.height+"px",e.style.width=redfinger.phone.width+"px",e.style.transformOrigin="0 0",e.style.webkitTransOrigin="0 0",e.style.mozTransOrigin="0 0",e.style.oTransOrigin="0 0",e.style.transform="translate("+i+"px,"+o+"px) rotate(0deg)",e.style.webkitTransform="translate("+i+"px,"+o+"px) rotate(0deg)",e.style.mozTransform="translate("+i+"px,"+o+"px) rotate(0deg)",e.style.oTransform="translate("+i+"px,"+o+"px) rotate(0deg)",redfinger.phone.offSetx=n,redfinger.phone.offSety=r;}let r={x:parseInt(redfinger.phone.width/2+10,10),y:parseInt(redfinger.phone.height/2+10,10)};redfinger.isPc()&&(r.x=parseInt(redfinger.phone.width*redfinger.config.pointerLockPosition.x/100,10),r.y=parseInt(redfinger.phone.height*redfinger.config.pointerLockPosition.y/100,10),1===redfinger.phone.rotation&&0===redfinger.sdkInfo.playMode?(r.x=parseInt(redfinger.phone.height*redfinger.config.pointerLockPosition.y/100,10),r.y=parseInt(redfinger.phone.width*redfinger.config.pointerLockPosition.x/100,10)):0===redfinger.phone.rotation&&1===redfinger.sdkInfo.playMode&&(r.x=parseInt(redfinger.phone.width*redfinger.config.pointerLockPosition.y/100,10),r.y=parseInt(redfinger.phone.height*redfinger.config.pointerLockPosition.x/100,10)),keyboard.setPointerLockDefPosition(r),redfinger.config.isPc&&null!==keyboard.keyCtrlUi&&keyboard.keyCtrlUi.resize());}},redfinger.phoneRotation=function(e){if(redfinger.isPc()){if(0===redfinger.sdkInfo.playMode){if(1===e){redfinger.phone.rotation=1;let e=document.querySelector("#"+redfinger.dom);e&&redfinger.videoinfo.canRotate&&(e.style.textAlign="");}else{redfinger.phone.rotation=0;let e=document.querySelector("#"+redfinger.dom);e&&(e.style.textAlign="center"),redfinger.phoneRotationToV();}}else if(1===redfinger.sdkInfo.playMode)if(redfinger.phone.rotation=e,0===e||2===e){let e=document.querySelector("#"+redfinger.dom);e&&redfinger.videoinfo.canRotate&&(e.style.textAlign="");}else{let e=document.querySelector("#"+redfinger.dom);e&&(e.style.textAlign="center");}redfinger.resizePhone();}else{if(1===redfinger.sdkInfo.playMode?redfinger.phoneRotationCloudGame(e):(1===redfinger.getorientation()&&redfinger.onorientationchange(),0===redfinger.getorientation()&&redfinger.phoneRotationToV()),"orientation"in window&&"onorientationchange"in window){const t=redfinger.eventObj.getFnFromMountWindow(["orientationchange","phone"]);redfinger.eventObj.addEventListener({mountName:"window",events:["orientationchange","phone"],func:()=>{t(e);}});}else redfinger.eventObj.addEventListener({mountName:"window",events:["resize","phone"]});}},redfinger.phoneRotationToV=function(){let e=document.querySelector("#"+redfinger.phoneDom);e&&(e.style.transformOrigin="0 0",e.style.webkitTransOrigin="0 0",e.style.mozTransOrigin="0 0",e.style.oTransOrigin="0 0",e.style.transform="rotate(0deg)",e.style.webkitTransform="rotate(0deg)",e.style.mozTransform="rotate(0deg)",e.style.oTransform="rotate(0deg)");},redfinger.phoneRotationByParam=function(e){let t=document.querySelector("#"+redfinger.dom);redfinger.getorientation()?(t.style.textAlign="",t.style.overflowY="hidden"):t.style.textAlign="center";let r=document.querySelector("#"+redfinger.phoneDom);r&&(r.style.transform="rotate(0deg)",r.style.webkitTransform="rotate("+e+"deg)",r.style.mozTransform="rotate("+e+"deg)",r.style.oTransform="rotate("+e+"deg)");},redfinger.phoneRotationCloudGame=function(e){let t=redfinger.getorientation();redfinger.phone.rotation=e,0===t?redfinger.videoinfo.width<=redfinger.videoinfo.height?redfinger.phoneRotationToV():redfinger.videoinfo.width>redfinger.videoinfo.height&&redfinger.phoneRotationByParam(90):redfinger.videoinfo.width<=redfinger.videoinfo.height?redfinger.phoneRotationByParam(270):redfinger.videoinfo.width>redfinger.videoinfo.height&&redfinger.phoneRotationToV();},redfinger.jumpFrameProc=function(e,t,r){0===r.length?(redfinger.jumpFrameing=!1,redfinger.NullWaitCount++):redfinger.NullWaitCount=0,redfinger.NullWaitCount>redfinger.videoinfo.fps&&(redfinger.videoinfo.fps<redfinger.config.maxFPS?(redfinger.videoinfo.reportType=3,this.m_setupVideoQuality(-1,0,redfinger.videoinfo.fps+redfinger.config.perUpFPS),redfinger.NullWaitCount=0):redfinger.config.isAutoQuality&&(redfinger.config.devLevel-1>=1?(redfinger.videoinfo.reportType=3,redfinger.m_resolutionLevel(redfinger.config.devLevel-1),redfinger.NullWaitCount=0):redfinger.videoinfo.bitrate+100<=2048&&(redfinger.videoinfo.reportType=3,this.m_setupVideoQuality(-1,redfinger.videoinfo.bitrate+100,redfinger.videoinfo.fps),redfinger.NullWaitCount=0)));let n=redfinger.videoinfo.fps;if(r.length<n)return;r.length>=redfinger.videoinfo.fps&&!redfinger.jumpFrameing&&(redfinger.jumpFrameing=!0,redfinger.videoinfo.fps-redfinger.config.perDownFPS>redfinger.config.minFPS?(redfinger.videoinfo.reportType=3,this.m_setupVideoQuality(-1,0,redfinger.videoinfo.fps-redfinger.config.perDownFPS)):redfinger.config.isAutoQuality&&(redfinger.config.devLevel+1<=4?(redfinger.videoinfo.reportType=3,redfinger.m_resolutionLevel(redfinger.config.devLevel+1)):redfinger.videoinfo.bitrate-100>=256&&(redfinger.videoinfo.reportType=3,this.m_setupVideoQuality(-1,redfinger.videoinfo.bitrate-100,redfinger.videoinfo.fps))),redfinger.sendIframe());let i=e[6];i===redfinger.VIDEO_X264_IDR||i===redfinger.VIDEO_X264_SPS&&redfinger.jumpFrameing?(r.splice(0,r.length),redfinger.jumpFrameing=!1,MLOG.debug(MLOG.d("reset"))):MLOG.warn(MLOG.w("jumpFrameing"));},redfinger.getFrameType=function(e){let t=31&e;return 7===t?redfinger.VIDEO_X264_SPS:8===t?redfinger.VIDEO_X264_PPS:5===t?redfinger.VIDEO_X264_IDR:redfinger.VIDEO_X264_P;},redfinger.debug=function(e){},redfinger.setuint64=function(e,t,r){let n=r%4294967295,i=(r-n)/4294967295,o=new DataView(e.buffer,t,8);o.setUint32(0,n,!0),o.setUint32(4,i,!0);},redfinger.setuint32=function(e,t,r){new DataView(e.buffer,t,4).setUint32(0,r,!0);},redfinger.setuint8=function(e,t,r){new DataView(e.buffer,t,1).setUint8(0,r,!0);},redfinger.fill_redfinger_pack=function(e,t,r){let n=new Uint8Array(e.byteLength+6);return this.setuint8(n,0,t),this.setuint8(n,1,r),this.setuint32(n,2,e.byteLength),n.set(e,6),n;},redfinger.getorientation=function(){return 180===window.orientation||0===window.orientation?0:90===window.orientation||-90===window.orientation?1:void 0;},redfinger.checkorientation=function(){var e=document.querySelector("#"+redfinger.phoneDom);0===redfinger.getorientation()?(redfinger.phone.rotation=0,redfinger.phone.phoneRotation=0,e&&(e.style.transform="rotate(0deg)",e.style.msTransform="rotate(0deg)",e.style.mozTransform="rotate(0deg)",e.style.webkitTransform="rotate(0deg)",e.style.oTransform="rotate(0deg)")):(e.style.transform="rotate(90deg)",redfinger.phone.rotation=1,redfinger.phone.phoneRotation=1,e&&(e.style.transform="rotate("+redfinger.config.transform+"deg)",e.style.msTransform="rotate("+redfinger.config.transform+"deg)",e.style.mozTransform="rotate("+redfinger.config.transform+"deg)",e.style.webkitTransform="rotate("+redfinger.config.transform+"deg)",e.style.oTransform="rotate("+redfinger.config.transform+"deg)"));},redfinger.send=function(e){redfinger.videoinfo.isWebRtc?null!==redfinger.gw&&redfinger.gw.sendmsg(e.buffer):redfinger.websocketWorker.postMessage(e.buffer);},redfinger.onresize=function(){let e=localStorage,t=e.getItem("recordOrient"),r=document.documentElement.clientWidth,n=0,i=0,o=document.getElementById("redFingerPhone"),a="";if(t){let e=t.split(",");n=e[0],i=e[1];}else sw=window.screen.width,sh=window.screen.height,n=sw<sh?sw:sh,i=sw>=sh?sw:sh,e.setItem("recordOrient",n+","+i);return r===n?(a+="-webkit-transform: rotate(0); transform: rotate(0);",a+="-webkit-transform-origin: "+i/2+"px "+n/2+"px;",a+="transform-origin: "+i/2+"px "+n/2+"px;",a+="text-align:center",o.style.cssText=a,void(redfinger.phone.phoneRotation=0)):r===i?(a+="-webkit-transform: rotate('+redfinger.config.transform+'deg); transform: rotate('+redfinger.config.transform+'deg);",a+="-webkit-transform-origin: "+n/2+"px "+n/2+"px;",a+="transform-origin: "+n/2+"px "+n/2+"px;",a+="overflowY:hidden",o.style.cssText=a,void(redfinger.phone.phoneRotation=1)):void 0;},redfinger.deBounce=function(e,t){let r=null;return function(){let n=this,i=arguments;clearTimeout(r),r=setTimeout(function(){e.apply(n,i);},t);};},redfinger.onorientationchange=function(){let e=document.querySelector("#"+redfinger.dom);redfinger.getorientation()?(redfinger.checkorientation(),e.style.textAlign="",e.style.overflowY="hidden"):(redfinger.checkorientation(),e.style.textAlign="center");},redfinger.isPc=function(){let e=navigator.userAgent.toLowerCase(),t=null!==e.match(/safari/i),r=null!==e.match(/ipad/i),n=null!==e.match(/iphone os/i),i="ontouchend"in document,o=null!==e.match(/midp/i),a=null!==e.match(/rv:1.2.3.4/i),s=null!==e.match(/ucweb/i),d=null!==e.match(/android/i),c=null!==e.match(/windows ce/i),f=null!==e.match(/windows mobile/i);return(t&&!n&&i&&!r||r||n||o||a||s||d||c||f)&&!redfinger.config.isTVBox?(redfinger.config.isPc=!1,!1):(redfinger.config.isPc=!0,!0);},redfinger.isIOS16=function(){let e=!1;if(redfinger.isIOS()){let t=/os [\d._]*/gi,r=(navigator.userAgent.toLowerCase().match(t)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".").split("."),n=14;r.length>0&&(n=parseFloat(r[0]),r.length>1&&(n=parseFloat(r[0]+"."+r[1])),n>=16&&(e=!0));}return e;},redfinger.isIOS=function(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);},redfinger.isUc=function(){return navigator.userAgent.indexOf("UCBrowser")>-1;},redfinger.executeOnce=function(e,t,r){t.addEventListener(e,function n(i){return t.removeEventListener(e,n),r(i);},!1);},redfinger.setDecoder=function(){redfinger.decoder.httpsURL=redfinger.config.httpsURL||redfinger.decoder.httpsURL,redfinger.config.isHaiWai&&(redfinger.decoder.httpsURL=redfinger.config.haiwaiURL||redfinger.decoder.haiwaiURL),redfinger.isOnlineDecode=!0;let e=navigator.userAgent.toLowerCase();redfinger.isPc()?e.indexOf("qqbrowser")>-1&&getBrowserVersion(e,"qqbrowser")>=10||isGoogle()?redfinger.config.decoder=redfinger.decoder.H264_optimalize:redfinger.config.decoder=redfinger.decoder.H264_base:isMoblieGoogle()?redfinger.config.decoder=redfinger.decoder.H264_optimalize:redfinger.config.decoder=redfinger.decoder.H264_base,redfinger.isPc&&e.indexOf("qqbrowser")>-1&&e.indexOf("qqbrowser/10")>-1||isGoogle()?redfinger.config.decoder=redfinger.decoder.H264_optimalize:redfinger.config.decoder=redfinger.decoder.H264_base,redfinger.decoderURL="importScripts('"+redfinger.decoder.httpsURL+redfinger.config.decoder+"?');";},otest.creatAudio=function(){otest.blobarr=[],otest.atime=0,otest.stime=new Date().getTime(),otest.CalcTime=0,otest.aoo=0,ado=document.createElement("audio"),bdo=document.createElement("audio"),ado.id="ado",bdo.id="bdo",document.body.appendChild(ado),document.body.appendChild(bdo),ado&&bdo&&(ado.autoplay=!0,bdo.autoplay=!0,ado.controls="controls",bdo.controls="controls");},otest.isChrome=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("chrome");},otest.autoPlay=function(){let e=!0;ado=document.getElementById("ado"),bdo=document.getElementById("bdo"),redfinger.executeOnce("touchend",document,function(){e&&ado&&bdo&&(ado.play(),bdo.play(),e=!1);});},otest.mobileInit=function(){redfinger.isPc()||otest.autoPlay();},otest.mobileInit(),otest.clientPlay=function(e,t){if(ado&&bdo)if(0===otest.aoo&&otest.aoo++,bdo.volume=.5,otest.atime%e==0){let t=new Blob(otest.blobarr.slice(otest.atime-e)),r=window.URL.createObjectURL(t);ado.src=r,otest.CalcTime=new Date().getTime(),otest.cTime=otest.CalcTime-otest.beginTime,otest.beginTime=otest.CalcTime,otest.aoo=0;}else if(otest.atime>e&&(otest.atime+2)%e==0){let t=new Blob(otest.blobarr.slice(otest.atime-(e+2),otest.atime-(e-2))),r=window.URL.createObjectURL(t);bdo.src=r,otest.autoPlay();}},otest.playAudio=function(e){if(otest.blobarr.push(e.buffer.slice(7)),otest.atime++,ado=document.getElementById("ado"),bdo=document.getElementById("bdo"),otest.clientPlay(),ado&&bdo)if(0===otest.aoo&&otest.aoo++,redfinger.isPc()){if(bdo.volume=.5,otest.atime%50==0){let e=new Blob(otest.blobarr.slice(otest.atime-50)),t=window.URL.createObjectURL(e);ado.src=t,otest.CalcTime=new Date().getTime(),otest.cTime=otest.CalcTime-otest.beginTime,otest.beginTime=otest.CalcTime,otest.aoo=0;}else if(otest.atime>50&&(otest.atime+2)%50==0){let e=new Blob(otest.blobarr.slice(otest.atime-50,otest.atime-46)),t=window.URL.createObjectURL(e);bdo.src=t;}}else if(bdo.volume=.5,otest.atime%50==0){let e=new Blob(otest.blobarr.slice(otest.atime-50)),t=window.URL.createObjectURL(e);ado.src=t,otest.CalcTime=new Date().getTime(),otest.cTime=otest.CalcTime-otest.beginTime,otest.beginTime=otest.CalcTime,otest.aoo=0;}else if(otest.atime>50&&(otest.atime+5)%50==0){let e=new Blob(otest.blobarr.slice(otest.atime-52,otest.atime-46)),t=window.URL.createObjectURL(e);bdo.src=t;}},redfinger.dnsCache=[],redfinger.getMciDns=function(e){let t="";for(let r=0;r<redfinger.dnsCache.length;r++)if(redfinger.dnsCache[r].domain===e){t=redfinger.dnsCache[r].ip;break;}if(""===t){let r=new XMLHttpRequest();if(r.open("post",redfinger.config.dnsServerUrl,!1),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify({domainList:[e]})),200===r.status){let n=r.responseText;if("string"==typeof n&&(n=JSON.parse(n)),0===n.code)for(let r=0;r<n.data.length;r++)if(n.data[r].domain===e)return t=n.data[r].domainIp,redfinger.dnsCache.push({domain:e,ip:t}),t;}else MLOG.warn(MLOG.w("get mci dns error"));}return t;},redfinger.transSdpHost=function(e){if(navigator.userAgent.toLowerCase().indexOf("firefox")>0){let t=e.split("\r\n");for(let e=0;e<t.length;e++)if(t[e].indexOf(redfinger.config.gwHost)>-1){let r=t[e].split(" "),n=r[r.length-1],i=redfinger.getMciDns(n);if(""===i)continue;r[r.length-1]=i,t[e]=r.join(" ");}return MLOG.debug(MLOG.d("mci_dns trans sdp result:"+t.join("\r\n"))),t.join("\r\n");}return e;},redfinger.transGWhost=function(e){let t=navigator.userAgent.toLowerCase().indexOf("like mac os x")>0,r=navigator.userAgent.toLowerCase().indexOf("firefox")>0;if(t||r){let t=/os [\d._]*/gi,n=(navigator.userAgent.toLowerCase().match(t)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".").split("."),i=14;if(n.length>0&&(i=parseFloat(n[0]),n.length>1&&(i=parseFloat(n[0]+"."+n[1])),i<12.2||r)){let t=e.candidate.split(" ");for(let e=0;e<t.length;e++)if(t[e].indexOf(redfinger.config.gwHost)>-1){let r=redfinger.getMciDns(t[e]);if(""===r)return null;t[e]=r;break;}e.candidate=t.join(" ");}}return MLOG.debug(MLOG.d("mci_dns trans result:"+JSON.stringify(e))),e;},redfinger.changeDirection=function(){let e="ontouchend"in document;redfinger.isPc()&&!e?redfinger.phoneRotation(1===redfinger.phone.rotation?0:1):redfinger.mobile_changeDirection();},redfinger.mobile_changeDirection=function(){let e=document.querySelector("#"+redfinger.dom),t=document.querySelector("#redPhone");t=redfinger.videoinfo.isWebRtc?document.getElementById("phoneVideo"):document.querySelector("#redPhone"),e&&t?0===redfinger.phone.rotation&&0===redfinger.phone.phoneRotate?(t.style.transform="rotate(270deg)",t.style.msTransform="rotate(270deg)",t.style.mozTransform="rotate(270deg)",t.style.webkitTransform="rotate(270deg)",t.style.oTransform="rotate(270deg)",redfinger.phone.rotation=1,redfinger.phone.phoneRotate=1,e.style.textAlign=""):1===redfinger.phone.rotation&&1===redfinger.phone.phoneRotate&&(t.style.transform="rotate(0deg)",t.style.msTransform="rotate(0deg)",t.style.mozTransform="rotate(0deg)",t.style.webkitTransform="rotate(0deg)",t.style.oTransform="rotate(0deg)",redfinger.phone.rotation=0,redfinger.phone.phoneRotate=0,e.style.textAlign="center",e.style.overflowY="hidden"):MLOG.info(MLOG.i("元素未加载成功"));},redfinger.changeGravity=function(){document;redfinger.isPc(),redfinger.changeGravityDirection();},redfinger.changeGravityDirection=function(){270===redfinger.config.transform?redfinger.config.transform=90:90===redfinger.config.transform&&(redfinger.config.transform=270);},redfinger.countTime=function(){let e=new Date().getTime()-redfinger.outBeginTime;e>60*(redfinger.config.timeout+redfinger.config.timeoutInterval)*1e3?redfinger.timeoutToast&&(redfinger.trigCallback(redfinger.onTimeOut,[2]),redfinger.timeoutToast=!1):e>60*redfinger.config.timeout*1e3&&redfinger.timeoutError&&(redfinger.trigCallback(redfinger.onTimeOut,[1]),redfinger.timeoutError=!1),redfinger.trigCallback(redfinger.onLeaveUnusedTime,[e]),redfinger.outTimeTimer=window.setTimeout(function(){redfinger.countTime();},1e3);},redfinger.offPlugin=function(){redfinger.audioRecoder&&(redfinger.audioRecoder.stopRecord(),redfinger.audioRecoder=void 0),redfinger.wcsDecoder&&(redfinger.wcsDecoder.destroy(),redfinger.wcsDecoder=null),redfinger.emitter&&(redfinger.emitter.off(),redfinger.emitter=null),redfinger.audioPlayer&&redfinger.audioPlayer.stop(),redfinger.muteTimer&&(clearInterval(redfinger.muteTimer),redfinger.muteTimer=null);},redfinger.destroyForSwitchMode=_async(function(){if(redfinger.videoinfo.isWebRtc){let e=document.getElementById("phoneVideo");if(e&&e.remove(),redfinger.videoinfo.isP2p){let e=document.getElementById(redfinger.audioDom);e&&e.remove();}}else{let e=document.getElementById("redPhone");e&&e.parentNode.removeChild(e);}const _redfinger$net_work_s=redfinger.net_work_status=redfinger.shake_stat_list.destory,_temp24=null!==keyboard.pointerLock&&keyboard.pointerLock.dispose(),_keyboard$joystick_de=keyboard.joystick_destroy(),_temp23=redfinger.videoinfo.isWebRtc&&redfinger.gw,_redfinger$config$con=_temp23&&(redfinger.config.connectState=2);return _await(_temp23&&redfinger.gw.stop(),function(_redfinger$gw$stop2){_temp23&&_redfinger$gw$stop2,MLOG.debug(MLOG.d("destory start!!!")),redfinger.videoinfo.isGetSPS=!1,redfinger.isReturnAppStart=!1,redfinger.isOpen=!1,redfinger.reconnectCount=0,redfinger._canSendHeartbeat=!1,window.clearTimeout(redfinger.heartbeatTimer),window.clearTimeout(redfinger.outTimeTimer),window.clearTimeout(redfinger.reconnectTimeout),window.clearTimeout(redfinger.webrtcCountInfoTimeout),window.clearTimeout(wsStateCheckTime),redfinger.timeoutError=!0,redfinger.config.websocketWorkerDisCounect=!0,redfinger.timeoutToast=!0,redfinger.videoinfo.isP2p=!1,redfinger.offPlugin(),redfinger.removeEvent(),redfinger.websocketWorker&&redfinger.websocketWorker.terminate(),redfinger.decodeWorker&&(redfinger.decodeWorker.terminate(),myplayer=null),redfinger.net_work_status===redfinger.shake_stat_list.destory&&wsStateCheckTime&&clearTimeout(wsStateCheckTime);},!_temp23);}),redfinger.destory=_async(function(){if(redfinger.isDestroying)return;const e=document.getElementById(redfinger.phoneDom);if(e&&e.remove(),redfinger.videoinfo.isP2p){let e=document.getElementById(redfinger.audioDom);e&&e.remove();}else if(!redfinger.videoinfo.isWebRtc){const e=document.getElementById("redAudio");e&&e.remove();}const _redfinger$isOpen=redfinger.isOpen=!1,_redfinger$isReturnAp=redfinger.isReturnAppStart=!1,_redfinger$videoinfo$2=redfinger.videoinfo.isGetSPS=!1,_MLOG$debug4=MLOG.debug(MLOG.d("destory start!!!")),_redfinger$net_work_s2=redfinger.net_work_status=redfinger.shake_stat_list.destory,_temp26=null!==keyboard.pointerLock&&keyboard.pointerLock.dispose(),_keyboard$joystick_de2=keyboard.joystick_destroy(),_temp25=redfinger.videoinfo.isWebRtc&&redfinger.gw,_redfinger$config$con2=_temp25&&(redfinger.config.connectState=2);return _await(_temp25&&redfinger.gw.stop(),function(_redfinger$gw$stop3){_temp25&&_redfinger$gw$stop3,redfinger.tracking.setBaseInfo({stopPlayTime:new Date().getTime()}),redfinger.reportET&&(redfinger.reportET.sendEndPlay(),redfinger.reportET=null),redfinger.isReconnecting=!1,redfinger.isConnecting=!1,redfinger.reconnectCount=0,redfinger._canSendHeartbeat=!1,window.clearTimeout(redfinger.heartbeatTimer),window.clearTimeout(redfinger.outTimeTimer),window.clearTimeout(redfinger.reconnectTimeout),window.clearTimeout(redfinger.webrtcCountInfoTimeout),window.clearTimeout(wsStateCheckTime),redfinger.webrtcFirstFrameTime&&clearTimeout(redfinger.webrtcFirstFrameTime),redfinger.timeoutError=!0,redfinger.config.websocketWorkerDisCounect=!0,redfinger.timeoutToast=!0,redfinger.videoinfo.isP2p=!1,redfinger.removeEvent(),redfinger.websocketWorker&&redfinger.websocketWorker.terminate(),redfinger.decodeWorker&&(redfinger.decodeWorker.terminate(),myplayer=null),redfinger.net_work_status===redfinger.shake_stat_list.destory&&wsStateCheckTime&&clearTimeout(wsStateCheckTime),redfinger.unSetUpCamera(),null!==keyboard.keyCtrlUi&&(keyboard.keyCtrlUi.destroy(),keyboard.keyCtrlUi=null),ws=null,otest={},vData=[],wsStateCheckTime=null,redfinger.offPlugin(),redfinger.resetConfig(),MLOG.debug(MLOG.d("destory end!!!")),redfinger.trigCallback(redfinger.onDestroy,[]),redfinger.tracking.stopPlay();},!_temp25);}),redfinger.trigCallback=function(e,t,r){if("function"==typeof e){if(r&&(redfinger.isReconnecting=!1),"async"===redfinger.config.callbackType)"undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]")?new Promise(function(e){e();}).then(function(){e.apply(this,t);}).catch(function(t){MLOG.warn(MLOG.w("callback error : "+e.name)),MLOG.warn(MLOG.w(t));}):setTimeout(function(){try{e.apply(this,t);}catch(t){MLOG.warn(MLOG.w("callback error : "+e.name)),MLOG.warn(MLOG.w(t));}});else try{e.apply(this,t);}catch(t){MLOG.warn(MLOG.w("callback error : "+e.name)),MLOG.warn(MLOG.w(t));}}else MLOG.warn(MLOG.w("callback type error: "+e));},redfinger._pushIframeReq=function(){redfinger._IframeReqCnt++;},redfinger._startCheckIframe=function(){1!==redfinger._IframeTimeFlag&&(redfinger._IframeTimeFlag=1,redfinger._trigIframeReq());},redfinger._trigIframeReq=function(){if(redfinger._IframeReqCnt<=0||redfinger.webrtcStates.pliCountSec<=0)return redfinger._IframeReqCnt=0,void(redfinger._IframeTimeFlag=0);redfinger.sendIframe(),redfinger._IframeReqCnt--,setTimeout(redfinger._trigIframeReq,1200);},redfinger._toggleKeyboard=function(e){if(!redfinger.changeKeyboard)return;if(redfinger.isPc()&&redfinger.config.cloudKeyboard)return;redfinger.changeKeyboard=!1;const t=redfinger.videoinfo.currSteamMode,r=1===t||3===t?3:2;redfinger.sendControlKeyboard(r,e);};class EventListener{constructor(){this.events=[{mountName:"window",events:{orientationchange:{phone:{fn:function(e){setTimeout(()=>{1===redfinger.sdkInfo.playMode?redfinger.phoneRotationCloudGame(e):(redfinger.onorientationchange(),redfinger.trigCallback(redfinger.onPhoneRotation,[e,getRotation(e)])),redfinger.resizePhone();},100);}},camera:{fn:function(){void 0!==redfinger.camera&&redfinger.camera.onRotateChange();}}},resize:{phone:{fn:function(){setTimeout(()=>{redfinger.deBounce(redfinger.onresize,300),redfinger.onresize();},100);}}},mousewheel:{ctrlWheel:{fn:function(e){(!0===e.ctrlKey||e.metaKey)&&e.preventDefault();},payload:{passive:!1}}},DOMMouseScroll:{ctrlWheel:{fn:function(e){(!0===e.ctrlKey||e.metaKey)&&e.preventDefault();},payload:{passive:!1}}}}},{mountName:"document",events:{WeixinJSBridgeReady:{phone:{fn:function(){redfinger.webrtcRePlay();}}}}}],this.eventsRemover={window:(e,t)=>{window.removeEventListener(e,t);},document:(e,t)=>{document.removeEventListener(e,t);}},this.eventListener={window:(e,t,r)=>{window.addEventListener(e,t,r);},document:(e,t,r)=>{document.addEventListener(e,t,r);}},this.eventMap={window:new Map(),document:new Map()};}getFnFromEvents(e,t){let r=()=>{};const n=[...t];for(r=this.events.find(t=>t.mountName===e).events;n.length;){const e=n.shift();try{if(r=r[e],r&&"function"==typeof r.fn)return r;}catch(e){return!1;}}return!1;}getFnFromMountWindow(e){return this.getFnFromEvents("window",e).fn;}getFnFromMountDocument(e){return this.getFnFromEvents("document",e).fn;}setEventMap(e,t){const r=this.eventMap[e];r.has(t[0])||r.set(t[0],new Set()),r.get(t[0]).has(t[1])||r.get(t[0]).add(t[1]);}getEventMap(e,t){const r=this.eventMap[e];return!(!r.has(t[0])||!r.get(t[0]).has(t[1]));}addEventListener({mountName:e,events:t,func:r,payload:n}){if(this.getEventMap(e,t))return;this.setEventMap(e,t);let i=this.getFnFromEvents(e,t);i&&!r||(i=this.setEvents(e,t,r,n));(0,this.eventListener[e])(t[0],i.fn,i.payload);}removeEvents(){this.eventMap={window:new Map(),document:new Map()},this.events.forEach(e=>{const t=this.eventsRemover[e.mountName];Object.keys(e.events).forEach(r=>{Object.keys(e.events[r]).forEach(n=>{t(r,e.events[r][n].fn);});});});}setEvents(e,t,r,n){const i=this.events.find(t=>t.mountName===e);return i.events[t[0]]||(i.events[t[0]]={}),i.events[t[0]][t[1]]||(i.events[t[0]][t[1]]={}),i.events[t[0]][t[1]].fn=r,i.events[t[0]][t[1]].payload=n,{fn:r,payload:n};}}function CheckParam(){let e=[{name:"uuid",require:!0,type:"string",min:1,max:64,default:""},{name:"protocol",require:!1,type:"enum",enums:["wss","ws"],default:"wss"},{name:"devLevel",require:!1,type:"int",min:0,default:1},{name:"devWidth",require:!1,type:"int",min:0,default:720},{name:"devHeight",require:!1,type:"int",min:0,default:1280},{name:"isShowMutedBtn",require:!1,type:"boolean",default:!1},{name:"maxFPS",require:!1,type:"int",min:0,max:120,default:15},{name:"minFPS",require:!1,type:"int",min:0,max:120,default:15},{name:"bitrate",require:!1,type:"int",min:0,default:2048},{name:"vfmt",require:!1,type:"enum",enums:[1,2],default:2},{name:"webrtcFmt",require:!1,type:"enum",enums:[1,2,3,4],default:2},{name:"isPass",require:!1,type:"boolean",default:!0},{name:"isWebRtc",require:!1,type:"boolean",default:!0},{name:"reconnectCntLimit",require:!1,type:"int",min:0,default:8},{name:"reconnectCheckTime",require:!1,type:"int",min:1e3,default:3e3},{name:"pointerLockPosition",require:!1,type:"object",default:{x:48,y:55}},{name:"pointerLockKey",require:!1,type:"int",min:0,max:256,default:192},{name:"QRcodeSetType",require:!1,type:"enum",enums:[0,1,2],default:0},{name:"isCameraLive",require:!1,type:"boolean",default:!1},{name:"isCameraLive",require:!1,type:"boolean",default:!1},{name:"isMicrophoneLive",require:!1,type:"boolean",default:!1},{name:"mouseDpi",require:!1,type:"float",min:0,max:20,default:1.9},{name:"relMouseDpi",require:!1,type:"float",min:0,max:20,default:10},{name:"isReport",require:!1,type:"boolean",default:!0},{name:"reportSrc",require:!1,type:"string",max:64,default:""},{name:"isReportET",require:!1,type:"boolean",default:!0},{name:"reportETSrc",require:!1,type:"string",max:64,default:""},{name:"playMode",require:!1,type:"enum",enums:[0,1],default:0},{name:"keyCtrlConfigType",require:!1,type:"enum",enums:["paas","custom","saas"],default:"paas"},{name:"pcKeyMode",require:!1,type:"enum",enums:[0,1],default:0},{name:"isAutoFocus",require:!1,type:"boolean",default:!0},{name:"isRotationResetToV",require:!1,type:"boolean",default:!1},{name:"heartBeatTimeOut",require:!1,type:"int",min:2e3,default:1e4},{name:"cameraCheckTime",require:!1,type:"int",min:2e3,default:2e3},{name:"callbackType",require:!1,type:"enum",enums:["async","sync"],default:"sync"},{name:"cloudKeyboard",require:!1,type:"boolean",default:!0},{name:"wheelWidth",require:!1,type:"int",min:1,max:100,default:2},{name:"wheelDirection",require:!1,type:"enum",enums:[1,2],default:1},{name:"wheelInterval",require:!1,type:"int",min:1,max:100,default:25},{name:"toggleWheel",require:!1,type:"boolean",default:!1},{name:"deviceInfo",require:!0,type:"object",default:""},{name:"viewId",require:!0,type:"string",min:1,default:""},{name:"width",require:!1,type:"int",min:0,default:720},{name:"height",require:!1,type:"int",min:0,default:1280},{name:"fps",require:!1,type:"int",min:0,max:120,default:30},{name:"isMicLive",require:!1,type:"boolean",default:!1},{name:"logLevel",require:!1,type:"int",min:1,max:4,default:4},{name:"audioChannelCnt",require:!1,type:"int",min:1,max:2,default:2},{name:"isAudioPlay",require:!1,type:"boolean",default:!0},{name:"isTVBox",require:!1,type:"boolean",default:!1},{name:"packageName",require:!1,type:"string",default:""},{name:"string",require:!1,type:"string",default:""},{name:"command",require:!1,type:"int",min:0,default:0},{name:"rotation",require:!1,type:"enum",enums:[0,1,2,3],default:0},{name:"flag",require:!1,type:"boolean",default:!1},{name:"array",require:!1,type:"array",default:[]},{name:"int",require:!1,type:"int",min:0,default:0},{name:"float",require:!1,type:"float",min:0,default:0},{name:"notNullStr",require:!1,type:"string",min:1,default:""},{name:"opacity",require:!1,type:"float",min:0,max:1,default:1},{name:"keyboardType",require:!1,type:"enum",enums:[0,1],default:0},{name:"navbarstate",require:!1,type:"enum",enums:[0,1,2],default:0},{name:"longitude",require:!1,type:"float",min:-180,max:180,default:0},{name:"latitude",require:!1,type:"float",min:-90,max:90,default:0},{name:"encryptType",require:!1,type:"enum",enums:[],default:""},{name:"serverToken",require:!0,min:1,type:"string",default:""},{name:"onlineTime",require:!0,min:60,type:"int",default:60},{name:"appId",require:!0,min:0,type:"int",default:""},{name:"instanceCode",require:!1,type:"string",default:""},{name:"clientIP",require:!1,type:"string",default:""}];let t=function(e,t){if("int"!==e&&"float"!==e&&"enum"!==e&&"array"!==e)return typeof t===e;if("int"===e){let e=!1;return"number"==typeof t&&~~t===t&&(e=!0),e;}if("float"===e){let e=!1;return"number"==typeof t&&(e=!0),e;}if("array"===e){return Array.isArray(t);}return"enum"===e;},r=function(e,t){let r=!1;return"string"==typeof t?t.length>=e&&(r=!0):"number"==typeof t&&t>=e&&(r=!0),r;},n=function(e,t){let r=!1;return"string"==typeof t?t.length<=e&&(r=!0):"number"==typeof t&&t<=e&&(r=!0),r;},i=function(e,t){let r=!1;for(let n=0;n<e.length;n++)if(e[n]===t){r=!0;break;}return r;};return{check:function(o,a,s){let d=null;for(let t=0;t<e.length;t++)if(a===e[t].name){d=e[t];break;}if(null===d)return MLOG.debug(MLOG.d("no rule to check param:"+o+" value: "+s)),{code:0,data:""};let c={code:0,data:d.default};for(let e in d)if("type"===e){if("enum"===d.type){if(!i(d.enums,s)){c.code=1,MLOG.error(MLOG.e("param "+o+" invalid, must in "+JSON.stringify(d.enums)+", default is "+d.default));break;}}else if(!t(d.type,s)){c.code=1,MLOG.error(MLOG.e("param "+o+" type invalid, must be "+d.type+", default is "+d.default));break;}}else if("min"===e){if(!r(d.min,s)){c.code=1,"string"===d.type?MLOG.error(MLOG.e("param "+o+" invalid, less than min length "+d.min+", default is "+d.default)):MLOG.error(MLOG.e("param "+o+" invalid, less than min value "+d.min+", default is "+d.default));break;}}else if("max"===e&&!n(d.max,s)){c.code=1,"string"===d.type?MLOG.error(MLOG.e("param "+o+" invalid, more than max length "+d.max+", default is "+d.default)):MLOG.error(MLOG.e("param "+o+" invalid, more than max value "+d.max+", default is "+d.default));break;}if("pointerLockPosition"===o&&0===c.code&&(void 0!==s.x&&void 0!==s.y&&t("int",s.x)&&r(0,s.x)&&t("int",s.y)&&r(0,s.y)||(c.code=1)),"viewId"===o&&0===c.code){document.getElementById(s)||(c.code=-1,MLOG.error(MLOG.e("param "+o+" invalid, dom is not found ")));}return void 0!==d.require&&d.require&&1===c.code&&(c.code=-1),c;},setRuleVal:function(t,r,n){const i=e.find(e=>e.name===t);i&&(i[r]=n);}};}redfinger.eventObj=new EventListener(),redfinger.ERROR={},redfinger.ERROR.SUCCESS=0,redfinger.ERROR.UNKNOW_ERR=1e3,redfinger.ERROR.HELLO_ERR=1001,redfinger.ERROR.HELLO_ANSWER_ERR=1002,redfinger.ERROR.MAIN_TYPE_ERR=1003,redfinger.ERROR.SHAKE_ONLINE_ERR=1004,redfinger.ERROR.SHAKE_KICK_ERR=1005,redfinger.ERROR.START_APP_ERR=1006,redfinger.ERROR.WCS_DECODE_ERR=1007,redfinger.ERROR.WEBSOCK_CLOSE=2001,redfinger.ERROR.WEBSOCK_ERR=2002,redfinger.ERROR.WEBSOCK_NOT_SUPPORT=2003,redfinger.ERROR.WEBSOCK_RECONNECT=2004,redfinger.ERROR.EP_NOT_SHAKE_HAND=2004,redfinger.ERROR.EP_INVALID_DATA=2005,redfinger.ERROR.EP_DEVICE_OFFLINE=2006,redfinger.ERROR.EP_DEVICE_DISCONNECT=2007,redfinger.ERROR.EP_DROPPED_BY_USER=2008,redfinger.ERROR.EP_DROPED_BY_IDLE=2009,redfinger.ERROR.EP_DEVICE_UNCONTROLED=2011,redfinger.ERROR.EP_DEVICE_DISABLED=2012,redfinger.ERROR.EP_DEVICE_NOT_EXIST=2013,redfinger.ERROR.EP_DEVICE_NOTBELONG_USER=2014,redfinger.ERROR.EP_DEVICE_EXPIRED=2015,redfinger.ERROR.EP_DEVICE_FAULTABLE=2016,redfinger.ERROR.EP_SESSION_EXPIRED=2017,redfinger.ERROR.EP_DEVICE_MALFUNCTIONS=2018,redfinger.ERROR.EP_DEVICE_GRANT_EXPIRED=2019,redfinger.ERROR.EP_INVALID_APP=2020,redfinger.ERROR.EP_ILLEGAL_OPERATION=2021,redfinger.ERROR.EP_DEVICE_CTL_TIME_LIMITED=2022,redfinger.ERROR.EP_START_APP_FAILED=2023,redfinger.ERROR.EP_CONNECT_DISCONECT=2024,redfinger.ERROR.EP_IMG_DOWNLOAD_FAILED=20011,redfinger.EVENT={},redfinger.EVENT.SCREEN_ROTATION=101,redfinger.EVENT.START_APP=102,redfinger.EVENT.COUNT_TIME=103,redfinger.EVENT.SET_NAVBAR={SHOW:1,HIDE:2,DONOT:0},redfinger.EVENT.CHECK_NAVBAR={CHECK:1,DONOT:0},redfinger.EVENT.WCS_DECODE_ERR="wcs_decode_error",redfinger.EVENT.WCS_DECODE_RESET="wcs_decode_reset",redfinger.EVENT.WCS_DECODE_FIRST_FRAME="wcs_decode_first_frame",redfinger.CONTROL_ERROR={EP_NOT_SHAKE_HAND:196609,EP_INVALID_DATA:196610,EP_DEVICE_OFFLINE:196611,EP_DEVICE_DISCONNECT:196612,EP_DROPPED_BY_USER:196613,EP_DROPED_BY_IDLE:196614,EP_DEVICE_UNCONTROLED:196615,EP_DEVICE_DISABLED:196616,EP_DEVICE_NOT_EXIST:196617,EP_DEVICE_NOTBELONG_USER:196618,EP_DEVICE_EXPIRED:196619,EP_DEVICE_FAULTABLE:196620,EP_SESSION_EXPIRED:196621,EP_DEVICE_MALFUNCTIONS:196622,EP_DEVICE_GRANT_EXPIRED:196623,EP_INVALID_APP:196624,EP_ILLEGAL_OPERATION:196625,EP_DEVICE_CTL_TIME_LIMITED:196626,EP_START_APP_FAILED:196627,EP_CONNECT_DISCONECT:196628},redfinger.SAAS_ERROR={SERVER_TOKEN_IS_NULL:330101,UUID_IS_NULL:330102,SDK_VIEW_IS_VALID:330103,ONLINE_TIME_VALID:330104,APP_ID_VALID:330105,SAAS_API_ERROR:330201,NOT_INIT_BEFORE_START:330202,SAAS_API_SERVER_INVALID:330204,SAAS_API_SERVER_ERROR:330205,SAAS_API_DEVICE_INFO_INVALID:330206},redfinger.KEY_TYPE={KEY_MENU:139,KEY_BACK:158,KEY_HOMEPAGE:172},redfinger.MSG_TYPE={MSG_SHAKE:0,MSG_CONTROL:1,MSG_INPUT:2,MSG_OUTPUT:3,MSG_AV:4,MSG_AUTH:5},redfinger.MSG_SHAKE_TYPE={MSG_SHAKE_ONLINE:0,MSG_SHAKE_ONLINE_R:1,MSG_SHAKE_OFFLINE:2,MSG_SHAKE_OFFLINE_R:3,MSG_SHAKE_KICK:4,MSG_SHAKE_AND_PLAY:5,MSG_SHAKE_AND_PLAY_R:6,MSG_SHAKE_SESSION:7,MSG_SHAKE_SESSION_R:8,MSG_SHAKE_OFFER:9,MSG_SHAKE_OFFER_R:10,MSG_SHAKE_ANSWER:11,MSG_SHAKE_ANSWER_R:12,MSG_SHAKE_CANDIDATE:13,MSG_SHAKE_CANDIDATE_R:14},redfinger.MSG_CONTROL_TYPE={MSG_CONTROL_MTU:0,MSG_CONTROL_MTU_R:1,MSG_CONTROL_DELAY:2,MSG_CONTROL_DELAY_R:3,MSG_CONTROL_APP:4,MSG_CONTROL_APP_R:5,MSG_CONTROL_AVFMT:6,MSG_CONTROL_AVFMT_R:7,MSG_CONTROL_AVTRANS:8,MSG_CONTROL_AVTRANS_R:9,MSG_CONTROL_IFRAME:10,MSG_CONTROL_AUDIO:11,MSG_CONTROL_AUDIO_R:12,MSG_CONTROL_VIDEO:13,MSG_CONTROL_VIDEO_R:14,MSG_CONTROL_TIME:15,MSG_CONTROL_SCREEN:16,MSG_CONTROL_KILL_APP:17,MSG_CONTROL_KILL_APP_R:18,MSG_CONTROL_RESOLUTIONLEVEL:19,MSG_CONTROL_QUERYAUTH:20,MSG_CONTROL_USERS_R:24,MSG_CONTROL_TRANSPARENT_MSG:25,MSG_CONTROL_TRANSPARENT_MSG_R:26,MSG_CONTROL_INPUT:27,MSG_CONTROL_STATS_REPORT:29,MSG_CONTROL_STATS_REPORT_R:30,MSG_CONTROL_KEYBOARD_SWITCH:38,MSG_CONTROL_NAVBAR_STATE:39,MSG_CONTROL_NAVBAR_STATE_R:40,MSG_CONTROL_QUERYAUTH_R:21,MSG_CONTROL_CHANGENOTIFY:22,MSG_CONTROL_SDK_INFORMATION:100,MSG_CONTROL_SDK_INFORMATION_R:101,MSG_CONTROL_APP_EVENT:102,MSG_CONTROL_ACTIVE_KEYBOARD:103,MSG_CONTROL_ACTIVE_KEYBOARD_R:104,MSG_CONTROL_TRANSMSGSHAKE:105,MSG_CONTROL_TRANSMSGSHAKE_R:106,MSG_CONTROL_TRANSMSGENCODED:107,MSG_CONTROL_TRANSMSGENCODED_R:108},redfinger.MSG_INPUT_TYPE={MSG_INPUT_STRING:0,MSG_INPUT_GAMECONTROLLER:1,MSG_INPUT_CLIPPER:10,MSG_INPUT_CLIPPER_R:11,MSG_INPUT_KEYBOARD:100,MSG_INPUT_MOUSE_KEY:101,MSG_INPUT_MOUSE_WHEEL:102,MSG_INPUT_MOUSE_MOVE:103,MSG_INPUT_CURSOR:104,MSG_INPUT_TOUCH:200,MSG_INPUT_LOCATION:201,MSG_INPUT_ACCELEROMETER:202,MSG_INPUT_ALTIMETER:203,MSG_INPUT_GYRO:204,MSG_INPUT_MAGNETOMETER:205,MSG_INPUT_PEDOMETER:206,MSG_INPUT_PROXIMITY:207,MSG_INPUT_AMBIENTLIGHT:208,MSG_INPUT_TEMPERATURE:209,MSG_INPUT_MOISTURE:210,MSG_INPUT_PICTURE:214,MSG_INPUT_VIDEO_FRONT:199,MSG_INPUT_VIDEO:212,MSG_INPUT_AUDIO:211,MSG_INPUT_SCREEN_TYPE:254},redfinger.MSG_OUTPUT_TYPE={MSG_OUTPUT_STRING:0,MSG_OUTPUT_SCREEN:1,MSG_OUTPUT_VIBRATION:2,MSG_OUTPUT_CURSOR:3,MSG_OUTPUT_CLIPPER:5,MSG_OUTPUT_FILE:6,MSG_OUTPUT_FILE_URL:7,MSG_OUTPUT_VIDEO_FILE_URL:8,MSG_OUTPUT_CLOUD_NOTIFY:9,MSG_OUTPUT_KEYBOARD_TYPE:10,MSG_OUTPUT_CLOUD_PHONE_EVENT:11},redfinger.MSG_AV_TYPE={MSG_AV_AUDIO:0,MSG_AV_VIDEO:1,MSG_AV_SUBTITLE:2,MSG_AV_CLIENT_AUDIO:3,MSG_AV_CLIENT_VIDEO:4,MSG_AV_CLIENT_SUBTITLE:5},redfinger.MSG_AUTH_TYPE={MSG_AUTH_LIST:0},redfinger.AUDIO_FMT_TYPE={AUDIO_FMT_AAC:0},redfinger.AAC_PROFILE_TYPE={AAC_PROFILE_LD:0,AAC_PROFILE_LC:1},redfinger.VIDEO_FMT_TYPE={VIDEO_FMT_H264:0,VIDEO_FMT_HEVC:1},redfinger.H264_PROFILE_TYPE={H264_PROFILE_BASELINE:0,H264_PROFILE_MAIN:1},redfinger.HEVC_PROFILE_TYPE={HEVC_PROFILE_BASELINE:0,HEVC_PROFILE_MAIN:1},redfinger.TOUCH_TYPE={TOUCH_DOWN:0,TOUCH_UP:1,TOUCH_MOVE:2,TOUCH_CANCEL:3},redfinger.VIDEO_BITRATE_HD=1,redfinger.VIDEO_BITRATE_NORMAL=2,redfinger.VIDEO_BITRATE_HIGH_SPEED=3,redfinger.VIDEO_BITRATE_ULTRA_SPEED=4,redfinger.VIDEO_X264_SPS=0,redfinger.VIDEO_X264_PPS=1,redfinger.VIDEO_X264_IDR=2,redfinger.VIDEO_X264_P=3,redfinger.SHAKETYPE={},redfinger.SHAKETYPE.PLAY_DEMO=0,redfinger.SHAKETYPE.PLAY_REDFINGER=1,redfinger.SHAKETYPE.PLAY_PC=0,redfinger.SHAKETYPE.PLAY_PHONE=256,redfinger.SHAKETYPE.PLAY_SHARING=1280,redfinger.SHAKETYPE.PLAY_WEB=0,redfinger.SHAKETYPE.PLAY_TCP=65536,redfinger.WARMUPCOUNTMAX=10,redfinger.CONST={VFMT_SOFT:1,VFMT_HARD:2,VFMT_IMAGE_SOFT:5,VFMT_IMAGE_HARD:6,ACTIVE_KEYBOARD:32767,DEACTIVE_KEYBOARD:32764},redfinger.ENCRRPTS={TEXT:0,BASE64:1},redfinger.checkParam=new CheckParam();let webSocketFunction=function(){let e,t,r=this,n="";function i(e){let t=e.data,r=new Uint8Array(t);postMessage(r);}function o(){clearTimeout(t),postMessage("onOpen"),e&&e.send(n.buffer);}function a(){postMessage("onError");}function s(){postMessage("doclose");}function d(r){return e=new WebSocket(r),clearTimeout(t),t=setTimeout(function(){e.readyState!==WebSocket.OPEN&&(e.close(),postMessage("onTimeout"));},6500),e.binaryType="arraybuffer",e.onopen=o,e.onclose=s,e.onerror=a,e.onmessage=i,!0;}r.sendMessage=function(t){e&&1===e.readyState&&e.send(t);},r.onmessage=function(t){let i=t.data;if("string"==typeof i&&i.indexOf("WebSocket")>0){d(i.substring(16));}else"string"==typeof i&&i.indexOf("close")>0?1===e.readyState&&(e.onmessage="",e.onerror="",e.close()):(""===n&&(n=i),r.sendMessage(i));};};try{redfinger.webSocketFunction=URL.createObjectURL(new Blob(["("+webSocketFunction.toString()+")()"],{type:"application/javascript"}));}catch(e){redfinger.isAvailable=!1;}redfinger.sendAudioFirstTouch=function(e,t){let r=getPhoneOffset(),n=transform(e-r.domOffSetLeft,t-r.domOffsetTop),i=[];i.push(n),redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,i),redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_CANCEL,i);},redfinger.m_setupVideoQuality=function(e,t,r){MLOG.debug(MLOG.d("setupVideoQuality:"+e+" "+t+" "+r));let n=new flatbuffers.Builder(0);CSProto.ControlAVFmt.startControlAVFmt(n),CSProto.ControlAVFmt.addVfps(n,r),CSProto.ControlAVFmt.addVbitrate(n,t),redfinger.videoinfo.isWebRtc?CSProto.ControlAVFmt.addVfmt(n,0):CSProto.ControlAVFmt.addVfmt(n,redfinger.config.vfmt),CSProto.ControlAVFmt.addMaxidr(n,0),CSProto.ControlAVFmt.addVheight(n,0),CSProto.ControlAVFmt.addVwidth(n,0),CSProto.ControlAVFmt.addVprofile(n,0),CSProto.ControlAVFmt.addAbitrate(n,32e3),redfinger.videoinfo.isWebRtc?CSProto.ControlAVFmt.addAsmprate(n,48e3):CSProto.ControlAVFmt.addAsmprate(n,44e3),CSProto.ControlAVFmt.addAchannel(n,2),CSProto.ControlAVFmt.addAprofile(n,0),redfinger.videoinfo.isWebRtc?CSProto.ControlAVFmt.addAfmt(n,2):CSProto.ControlAVFmt.addAfmt(n,1);let i=CSProto.ControlAVFmt.endControlAVFmt(n);n.finish(i);let o=redfinger.fill_redfinger_pack(n.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_AVFMT);redfinger.send(o);},redfinger._sendTransMsgShake=function(){const e=Object.keys(redfinger.ENCRRPTS).map(e=>redfinger.ENCRRPTS[e]).join(","),t=new flatbuffers.Builder(0),r=t.createString(e);CSProto.TransMsgShake.startTransMsgShake(t),CSProto.TransMsgShake.addSource(t,0),CSProto.TransMsgShake.addSupportedEncryts(t,r);const n=CSProto.TransMsgShake.endTransMsgShake(t);t.finish(n);const i=redfinger.fill_redfinger_pack(t.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_TRANSMSGSHAKE);redfinger.send(i);},redfinger._sendTransparentMsgReq=function(e,t,r,n){const i=new flatbuffers.Builder(0),o=i.createString(t),a=i.createString(r);CSProto.TransMsgEncoded.startTransMsgEncoded(i),CSProto.TransMsgEncoded.addType(i,e),CSProto.TransMsgEncoded.addData(i,o),CSProto.TransMsgEncoded.addBinderSvc(i,a),CSProto.TransMsgEncoded.addEncType(i,n);const s=CSProto.TransMsgEncoded.endTransMsgEncoded(i);i.finish(s);const d=redfinger.fill_redfinger_pack(i.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_TRANSMSGENCODED);redfinger.send(d);},redfinger._sendTransparentMsg=function(e,t,r){let n=new flatbuffers.Builder(0),i=n.createString(t),o=n.createString(r);CSProto.TransparentMsg.startTransparentMsg(n),CSProto.TransparentMsg.addType(n,e),CSProto.TransparentMsg.addData(n,i),CSProto.TransparentMsg.addService(n,o);let a=CSProto.TransparentMsg.endTransparentMsg(n);n.finish(a);let s=redfinger.fill_redfinger_pack(n.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_TRANSPARENT_MSG);redfinger.send(s);},redfinger._setupPicQuality=function(e){MLOG.debug(MLOG.d("setupVideoQuality:"+e));let t=new flatbuffers.Builder(0);CSProto.ControlVideo.startControlVideo(t),CSProto.ControlVideo.addMode(t,e),CSProto.ControlVideo.addBitrate(t,0),CSProto.ControlVideo.addFps(t,0);let r=CSProto.ControlVideo.endControlVideo(t);t.finish(r);let n=redfinger.fill_redfinger_pack(t.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_VIDEO);redfinger.send(n);},redfinger._setStreamConfig=function(e,t,r,n){e|=0,t|=0,r|=0,0!==(n|=0)&&(redfinger.config.fps=n);let i=new flatbuffers.Builder(0);CSProto.ControlAVFmt.startControlAVFmt(i),CSProto.ControlAVFmt.addVfps(i,n),CSProto.ControlAVFmt.addVbitrate(i,r),CSProto.ControlAVFmt.addVfmt(i,0),redfinger.config.isLiveVideo||CSProto.ControlAVFmt.addMaxidr(i,0),CSProto.ControlAVFmt.addVheight(i,t),CSProto.ControlAVFmt.addVwidth(i,e),CSProto.ControlAVFmt.addVprofile(i,0),CSProto.ControlAVFmt.addAbitrate(i,32e3),redfinger.videoinfo.isWebRtc?CSProto.ControlAVFmt.addAsmprate(i,48e3):CSProto.ControlAVFmt.addAsmprate(i,44e3),CSProto.ControlAVFmt.addAchannel(i,2),CSProto.ControlAVFmt.addAprofile(i,0),CSProto.ControlAVFmt.addAfmt(i,0);let o=CSProto.ControlAVFmt.endControlAVFmt(i);i.finish(o);let a=redfinger.fill_redfinger_pack(i.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_AVFMT);redfinger.videoinfo.reportType=2,redfinger.send(a),redfinger.devicesChange(a);},redfinger._changeResolution=function(e,t){let r=new flatbuffers.Builder(0);CSProto.ControlAVFmt.startControlAVFmt(r),CSProto.ControlAVFmt.addVfps(r,redfinger.config.fps),CSProto.ControlAVFmt.addVbitrate(r,0),CSProto.ControlAVFmt.addVfmt(r,0),redfinger.config.isLiveVideo||CSProto.ControlAVFmt.addMaxidr(r,0),CSProto.ControlAVFmt.addVheight(r,t),CSProto.ControlAVFmt.addVwidth(r,e),CSProto.ControlAVFmt.addVprofile(r,0),CSProto.ControlAVFmt.addAbitrate(r,32e3),redfinger.videoinfo.isWebRtc?CSProto.ControlAVFmt.addAsmprate(r,48e3):CSProto.ControlAVFmt.addAsmprate(r,44e3),CSProto.ControlAVFmt.addAchannel(r,2),CSProto.ControlAVFmt.addAprofile(r,0),CSProto.ControlAVFmt.addAfmt(r,0);let n=CSProto.ControlAVFmt.endControlAVFmt(r);r.finish(n);let i=redfinger.fill_redfinger_pack(r.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_AVFMT);redfinger.videoinfo.reportType=2,redfinger.send(i),redfinger.devicesChange(i);},redfinger.controlAVFmt=function(e,t){if("number"!=typeof e)return;if(redfinger.videoinfo.isWebRtc)return;let r=new flatbuffers.Builder(0);CSProto.ControlAVFmt.startControlAVFmt(r),CSProto.ControlAVFmt.addVfps(r,0),CSProto.ControlAVFmt.addVbitrate(r,0),CSProto.ControlAVFmt.addVfmt(r,e),redfinger.config.isLiveVideo||CSProto.ControlAVFmt.addMaxidr(r,t),CSProto.ControlAVFmt.addVheight(r,1028),CSProto.ControlAVFmt.addVwidth(r,720),CSProto.ControlAVFmt.addVprofile(r,0),CSProto.ControlAVFmt.addAbitrate(r,32e3),CSProto.ControlAVFmt.addAsmprate(r,0),CSProto.ControlAVFmt.addAchannel(r,2),CSProto.ControlAVFmt.addAprofile(r,0),CSProto.ControlAVFmt.addAfmt(r,1);let n=CSProto.ControlAVFmt.endControlAVFmt(r);r.finish(n);let i=redfinger.fill_redfinger_pack(r.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_AVFMT);redfinger.send(i);},redfinger.sayhello=function(e){redfinger.websock=e;let t=redfinger.fill_player_hello_package();redfinger.send(t),redfinger.net_work_status=redfinger.shake_stat_list.sayhello;},redfinger.sendSetScreenShot=function(e){let t=new flatbuffers.Builder(0);CSProto.SetScreenShot.startSetScreenShot(t),CSProto.SetScreenShot.addMode(t,e);let r=CSProto.SetScreenShot.endSetScreenShot(t);t.finish(r);let n=redfinger.fill_redfinger_pack(t.asUint8Array(),this.MSG_TYPE.MSG_INPUT,this.MSG_INPUT_TYPE.MSG_INPUT_SCREEN_TYPE);redfinger.send(n);},redfinger.sendIframe=function(){let e=new flatbuffers.Builder(0);CSProto.ControlIFrame.startControlIFrame(e),CSProto.ControlIFrame.addReserved(e,!0);let t=CSProto.ControlIFrame.endControlIFrame(e);e.finish(t);let r=redfinger.fill_redfinger_pack(e.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_IFRAME);redfinger.send(r),MLOG.debug(MLOG.d("sendIframe"));},redfinger._sendKey=function(e,t){if(0===redfinger.config.operateMode)return;let r=new flatbuffers.Builder(0);CSProto.InputKeyboard.startInputKeyboard(r),CSProto.InputKeyboard.addKey(r,e),CSProto.InputKeyboard.addPressed(r,t);let n=CSProto.InputKeyboard.endInputKeyboard(r);r.finish(n);let i=redfinger.fill_redfinger_pack(r.asUint8Array(),this.MSG_TYPE.MSG_INPUT,this.MSG_INPUT_TYPE.MSG_INPUT_KEYBOARD);redfinger.send(i),redfinger.onSendKey(e,t),redfinger.devicesSend(i),redfinger.onDeviceEvent({evType:"sendKey",data:{key:e,isDown:t},ts:new Date().getTime()});},redfinger._sendInputString=function(e){let t=new flatbuffers.Builder(0),r=t.createString(e);CSProto.InputString.startInputString(t),CSProto.InputString.addStr(t,r);let n=CSProto.InputString.endInputString(t);t.finish(n);let i=redfinger.fill_redfinger_pack(t.asUint8Array(),this.MSG_TYPE.MSG_INPUT,this.MSG_INPUT_TYPE.MSG_INPUT_STRING);redfinger.send(i),redfinger.onSendInputString(e),redfinger.devicesSend(i),redfinger.onDeviceEvent({evType:"inputString",data:{str:e},ts:new Date().getTime()});},redfinger._sendInputClipper=function(e,t){let r=new flatbuffers.Builder(0),n=r.createString(e);CSProto.InputClipper.startInputClipper(r),CSProto.InputClipper.addStr(r,n),CSProto.InputClipper.addAutoPaste(r,t);let i=CSProto.InputClipper.endInputClipper(r);r.finish(i);let o=redfinger.fill_redfinger_pack(r.asUint8Array(),redfinger.MSG_TYPE.MSG_INPUT,redfinger.MSG_INPUT_TYPE.MSG_INPUT_CLIPPER);redfinger.send(o),redfinger.onDeviceEvent({evType:"clipper",data:{str:e,autoPaste:t},ts:new Date().getTime()});},redfinger.sendTouch=function(e,t,r){if(0===redfinger.config.operateMode)return;let n=new flatbuffers.Builder(0),i=[];i.push(CSProto.TouchInfo.createTouchInfo(n,t,r,0)),CSProto.InputTouch.startTouchVector(n,i.length);let o=n.endVector();CSProto.InputTouch.startInputTouch(n),CSProto.InputTouch.addIndex(n,1),CSProto.InputTouch.addType(n,e),CSProto.InputTouch.addTouch(n,o);let a=CSProto.InputTouch.endInputTouch(n);n.finish(a);let s=redfinger.fill_redfinger_pack(n.asUint8Array(),this.MSG_TYPE.MSG_INPUT,this.MSG_INPUT_TYPE.MSG_INPUT_TOUCH);redfinger.config.isSendTouch&&redfinger.send(s);let d=new Date().getTime();redfinger.devicesSend(s),redfinger.onTouch(e,1,[t],[r],[0],redfinger.videoinfo.width,redfinger.videoinfo.height,d),redfinger.devicesSend(s),redfinger.onDeviceEvent({evType:"touch",data:{pwidth:redfinger.videoinfo.width,pheight:redfinger.videoinfo.height,rotation:redfinger.phone.remoteRotation,touchType:e,x:t,y:r},ts:new Date().getTime()}),MLOG.debug(MLOG.d("sendtouch type:"+e+" "+t+"-"+r));},redfinger.sendTouchMulti=function(e,t){let r=new flatbuffers.Builder(0);t.reverse(),t=t.map(function(e){return{x:Math.round(e.x),y:Math.round(e.y)};});let n=[];for(let e=0;e<t.length;e++)n.push(CSProto.TouchInfo.createTouchInfo(r,t[e].x,t[e].y,0));CSProto.InputTouch.startTouchVector(r,n.length);let i=r.endVector();CSProto.InputTouch.startInputTouch(r),CSProto.InputTouch.addIndex(r,t.length),CSProto.InputTouch.addType(r,e),CSProto.InputTouch.addTouch(r,i);let o=CSProto.InputTouch.endInputTouch(r);r.finish(o);let a=redfinger.fill_redfinger_pack(r.asUint8Array(),this.MSG_TYPE.MSG_INPUT,this.MSG_INPUT_TYPE.MSG_INPUT_TOUCH);redfinger.config.isSendTouch&&redfinger.send(a);let s=[],d=[],c=[];for(let e=0;e<t.length;e++)s.push(t[e].x),d.push(t[e].y),c.push(0);let f=new Date().getTime();redfinger.onTouch(e,t.length,s,d,c,redfinger.videoinfo.width,redfinger.videoinfo.height,f),redfinger.devicesSend(a),redfinger.onDeviceEvent({evType:"touchMulti",data:{pwidth:redfinger.videoinfo.width,pheight:redfinger.videoinfo.height,rotation:redfinger.phone.remoteRotation,touchType:e,xyArray:t},ts:new Date().getTime()});},redfinger.controlStartApp=function(e){let t=new flatbuffers.Builder(0),r=t.createString(e);CSProto.ControlApp.startControlApp(t),CSProto.ControlApp.addApp(t,r);let n=CSProto.ControlApp.endControlApp(t);t.finish(n);let i=redfinger.fill_redfinger_pack(t.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_APP);redfinger.videoinfo.isWebRtc?(MLOG.debug(MLOG.d("controlStartApp!! "+e+",sendBuff.buffer :"+i.buffer)),redfinger.gw.sendmsg(i.buffer)):redfinger.send(i);},redfinger.controlSdkInformation=function(e){let t=new flatbuffers.Builder(0),r=t.createString(e);CSProto.ControlSdkInformation.startControlSdkInformation(t),CSProto.ControlSdkInformation.addData(t,r);let n=CSProto.ControlSdkInformation.endControlSdkInformation(t);t.finish(n);let i=redfinger.fill_redfinger_pack(t.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_SDK_INFORMATION);redfinger.send(i);},redfinger.controlKillApp=function(e){let t=new flatbuffers.Builder(0),r=t.createString(e);CSProto.ControlKillApp.startControlKillApp(t),CSProto.ControlKillApp.addApp(t,r);let n=CSProto.ControlKillApp.endControlKillApp(t);t.finish(n);let i=redfinger.fill_redfinger_pack(t.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_KILL_APP);redfinger.send(i);},redfinger._switchKeyboard=function(e){let t=new flatbuffers.Builder(0);CSProto.KeyboardSwitch.startKeyboardSwitch(t),CSProto.KeyboardSwitch.addSw(t,e);let r=CSProto.KeyboardSwitch.endKeyboardSwitch(t);t.finish(r);let n=redfinger.fill_redfinger_pack(t.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_KEYBOARD_SWITCH);redfinger.send(n);},redfinger._controlNavBarState=function(e){const t="number"==typeof e,r=new flatbuffers.Builder(0);CSProto.NavBarState.startNavBarState(r),t?(CSProto.NavBarState.addInspect(r,redfinger.EVENT.CHECK_NAVBAR.DONOT),CSProto.NavBarState.addSetnavbar(r,e)):(CSProto.NavBarState.addInspect(r,redfinger.EVENT.CHECK_NAVBAR.CHECK),CSProto.NavBarState.addSetnavbar(r,redfinger.EVENT.SET_NAVBAR.DONOT));const n=CSProto.NavBarState.endNavBarState(r);r.finish(n);let i=redfinger.fill_redfinger_pack(r.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_NAVBAR_STATE);redfinger.send(i);},redfinger.fillShakeOnline=function(e,t,r,n){let i=new flatbuffers.Builder(0);e=i.createString(e),t=i.createString(t),r=i.createString(r),n=i.createString(n);let o=redfinger.SHAKETYPE.PLAY_WEB|redfinger.SHAKETYPE.PLAY_PC|redfinger.SHAKETYPE.PLAY_DEMO;redfinger.config.isLiveVideo&&(o=redfinger.SHAKETYPE.PLAY_WEB|redfinger.SHAKETYPE.PLAY_SHARING|redfinger.SHAKETYPE.PLAY_DEMO),CSProto.ShakeOnline.startShakeOnline(i),CSProto.ShakeOnline.addId(i,e),CSProto.ShakeOnline.addToken(i,t),CSProto.ShakeOnline.addServer(i,r),CSProto.ShakeOnline.addApp(i,n),CSProto.ShakeOnline.addType(i,o);let a=CSProto.ShakeOnline.endShakeOnline(i);return i.finish(a),redfinger.fill_redfinger_pack(i.asUint8Array(),this.MSG_TYPE.MSG_SHAKE,this.MSG_SHAKE_TYPE.MSG_SHAKE_ONLINE);},redfinger.sendShakeAndPlay=function(e,t,r,n){let i=new flatbuffers.Builder(0);e=i.createString(e),t=i.createString(t),r=i.createString(r),n=i.createString(n);let o=redfinger.SHAKETYPE.PLAY_WEB|redfinger.SHAKETYPE.PLAY_PC|redfinger.SHAKETYPE.PLAY_DEMO;redfinger.config.isLiveVideo&&(o=redfinger.SHAKETYPE.PLAY_WEB|redfinger.SHAKETYPE.PLAY_SHARING|redfinger.SHAKETYPE.PLAY_DEMO),CSProto.ShakeAndPlay.startShakeAndPlay(i),CSProto.ShakeAndPlay.addId(i,e),CSProto.ShakeAndPlay.addToken(i,t),CSProto.ShakeAndPlay.addServer(i,r),CSProto.ShakeAndPlay.addApp(i,n),CSProto.ShakeAndPlay.addType(i,o),CSProto.ShakeAndPlay.addVideofmt(i,1),CSProto.ShakeAndPlay.addMode(i,redfinger.config.videoQuality),CSProto.ShakeAndPlay.addBitrate(i,0),CSProto.ShakeAndPlay.addFps(i,redfinger.videoinfo.fps),CSProto.ShakeAndPlay.addLevel(i,redfinger.config.devLevel),CSProto.ShakeAndPlay.addWidth(i,0),CSProto.ShakeAndPlay.addHeight(i,0),CSProto.ShakeAndPlay.addAudio(i,redfinger.config.isAudio),CSProto.ShakeAndPlay.addVideo(i,!0),CSProto.ShakeAndPlay.addSubtitle(i,!1);let a=CSProto.ShakeAndPlay.endShakeAndPlay(i);i.finish(a);let s=redfinger.fill_redfinger_pack(i.asUint8Array(),this.MSG_TYPE.MSG_SHAKE,this.MSG_SHAKE_TYPE.MSG_SHAKE_AND_PLAY);return redfinger.websock.send(s.buffer),!0;},redfinger.onShakeOnlineR=function(e){let t=new Uint8Array(e.buffer,6,e.length-6),r=new flatbuffers.ByteBuffer(t),n=CSProto.ShakeOnlineR.getRootAsShakeOnlineR(r);return MLOG.debug(MLOG.d(n.code()+" "+n.msg()+" "+n.app()+" ")),0===n.code();},redfinger.onControlAppR=function(e){let t=new Uint8Array(e.buffer,6,e.length-6),r=new flatbuffers.ByteBuffer(t),n=CSProto.ControlAppR.getRootAsControlAppR(r);return MLOG.debug(MLOG.d(n.code()+" "+n.msg()+" "+n.app()+" ")),0===n.code();},redfinger.sendControlAVTrans=function(e){redfinger.config.isAudio=e,window.AudioContext||window.webkitAudioContext||(redfinger.config.isAudio=!1),redfinger._sendControlAVTrans(redfinger.config.isAudio,!0,!1);},redfinger._sendControlAVTrans=function(e,t,r){let n=new flatbuffers.Builder(0);CSProto.ControlAVTrans.startControlAVTrans(n),CSProto.ControlAVTrans.addAudio(n,e),CSProto.ControlAVTrans.addVideo(n,t),CSProto.ControlAVTrans.addSubtitle(n,r),redfinger.config.isLiveVideo&&CSProto.ControlAVTrans.addWechatshare(n,!0);let i=CSProto.ControlAVTrans.endControlAVTrans(n);n.finish(i),MLOG.debug(MLOG.d("send ControlAVTrans isAudio:"+e+" isVideo:"+t));let o=redfinger.fill_redfinger_pack(n.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_AVTRANS);redfinger.send(o);},redfinger.sendControlDelay=function(){if(!redfinger._canSendHeartbeat)return;if(redfinger.net_work_status<redfinger.shake_stat_list.sendshake)return void(redfinger.heartbeatTimer=window.setTimeout(function(){redfinger.sendControlDelay();},1e3));let e=new flatbuffers.Builder(0),t=e.createString(""+new Date().getTime()),r=CSProto.ControlDelay.createDataVector(e,new Uint8Array(1));CSProto.ControlDelay.startControlDelay(e),CSProto.ControlDelay.addTime(e,t),CSProto.ControlDelay.addData(e,r);let n=CSProto.ControlDelay.endControlDelay(e);e.finish(n);let i=redfinger.fill_redfinger_pack(e.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_DELAY);redfinger.send(i),redfinger.heartbeatTimer=window.setTimeout(function(){redfinger.sendControlDelay();},1e3);},redfinger.sendControlDelayR=function(e,t){redfinger.videoinfo.isWebRtc&&(redfinger.webrtcRunInfo.netDelay=e);let r=new flatbuffers.Builder(0),n=r.createString(e+"##"+t+"##"+drawTime+"##"+navigator.userAgent),i=CSProto.ControlDelayR.createDataVector(r,new Uint8Array(1));if(CSProto.ControlDelayR.startControlDelayR(r),CSProto.ControlDelayR.addTime(r,n),CSProto.ControlDelayR.addData(r,i),redfinger.videoinfo.netDelay=e,redfinger.videoinfo.isWebRtc&&redfinger.videoinfo.isP2p&&(redfinger.webrtcRunInfo.netDelay=e),redfinger.isOpen&&!redfinger.videoinfo.isWebRtc){redfinger.trigCallback(redfinger.onRunInfo,[vData.length,e,t,redfinger.videoinfo.width,redfinger.videoinfo.height,perSecondFPS]);let r={pCount:vData.length,netDelay:e,decodeTime:t,width:redfinger.videoinfo.width,height:redfinger.videoinfo.height,perSecondFPS:perSecondFPS,bitrate:redfinger.videoinfo.bitrate,fps:redfinger.videoinfo.fps,perDroppedFrameCount:"",runTimeCount:""};redfinger.tracking.setBaseInfo({resolution:redfinger.videoinfo.width+"x"+redfinger.videoinfo.height,surfaceResolution:redfinger.phone.width+"x"+redfinger.phone.height,bitrate:redfinger.videoinfo.bitrate,fps:redfinger.videoinfo.fps}),redfinger.tracking.updateNetDelayInfo(e),redfinger.trigCallback(redfinger.onRunInformation,["js",r]),INetDelay=parseInt(e/2+5*Math.random()),perSecondFPS=0;}let o=CSProto.ControlDelayR.endControlDelayR(r);r.finish(o);let a=redfinger.fill_redfinger_pack(r.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_DELAY_R);redfinger.send(a);},redfinger.onControlAVTransR=function(e){e=new Uint8Array(e,6,e.length-6);let t=new flatbuffers.ByteBuffer(e);return 0===CSProto.ControlAVTransR.getRootAsControlAVTransR(t).code();},redfinger.fillShakeOffer=function(e,t,r){let n=new flatbuffers.Builder(0),i=n.createString(r);CSProto.ShakeOffer.startShakeOffer(n),CSProto.ShakeOffer.addPlaytype(n,e),CSProto.ShakeOffer.addVfmt(n,t),CSProto.ShakeOffer.addIceServer(n,i);let o=CSProto.ShakeOffer.endShakeOffer(n);return n.finish(o),redfinger.fill_redfinger_pack(n.asUint8Array(),this.MSG_TYPE.MSG_SHAKE,this.MSG_SHAKE_TYPE.MSG_SHAKE_OFFER);},redfinger.fillShakeAnswer=function(e){let t=new flatbuffers.Builder(0),r=t.createString(e);CSProto.ShakeAnswer.startShakeAnswer(t),CSProto.ShakeAnswer.addAnswer(t,r);let n=CSProto.ShakeAnswer.endShakeAnswer(t);return t.finish(n),redfinger.fill_redfinger_pack(t.asUint8Array(),this.MSG_TYPE.MSG_SHAKE,this.MSG_SHAKE_TYPE.MSG_SHAKE_ANSWER);},redfinger.fillShakeCandidate=function(e){let t=new flatbuffers.Builder(0);if(void 0===e.completed||!1===e.completed){let r=t.createString(e.sdpMid),n=t.createString(e.candidate);CSProto.ShakeCandidate.startShakeCandidate(t),CSProto.ShakeCandidate.addCompleted(t,0),CSProto.ShakeCandidate.addMlineindex(t,e.sdpMLineIndex),CSProto.ShakeCandidate.addMid(t,r),CSProto.ShakeCandidate.addCandidate(t,n);}else CSProto.ShakeCandidate.startShakeCandidate(t),CSProto.ShakeCandidate.addCompleted(t,1);let r=CSProto.ShakeCandidate.endShakeCandidate(t);return t.finish(r),redfinger.fill_redfinger_pack(t.asUint8Array(),this.MSG_TYPE.MSG_SHAKE,this.MSG_SHAKE_TYPE.MSG_SHAKE_CANDIDATE);},redfinger.fillControllDelay=function(){let e=new flatbuffers.Builder(0),t=e.createString(""+new Date().getTime()),r=CSProto.ControlDelay.createDataVector(e,new Uint8Array(1));CSProto.ControlDelay.startControlDelay(e),CSProto.ControlDelay.addTime(e,t),CSProto.ControlDelay.addData(e,r);let n=CSProto.ControlDelay.endControlDelay(e);return e.finish(n),redfinger.fill_redfinger_pack(e.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_DELAY);},redfinger._setGPS=function(e,t){MLOG.debug(MLOG.d("longitude:"+e+", latitude: "+t));let r=new flatbuffers.Builder(0);CSProto.InputLocation.startInputLocation(r),CSProto.InputLocation.addLongitude(r,e),CSProto.InputLocation.addLatitude(r,t),CSProto.InputLocation.addAltitude(r,0),CSProto.InputLocation.addFloor(r,0),CSProto.InputLocation.addHorizontalaccuracy(r,0),CSProto.InputLocation.addVerticalaccuracy(r,0),CSProto.InputLocation.addSpeed(r,0),CSProto.InputLocation.addDirection(r,0),CSProto.InputLocation.addTimestamp(r,0);let n=CSProto.InputLocation.endInputLocation(r);r.finish(n);let i=redfinger.fill_redfinger_pack(r.asUint8Array(),this.MSG_TYPE.MSG_INPUT,this.MSG_INPUT_TYPE.MSG_INPUT_LOCATION);redfinger.send(i),redfinger.devicesSend(i),redfinger.onDeviceEvent({evType:"gps",data:{longitude:e,latitude:t},ts:new Date().getTime()});},redfinger._sendControlAuthChangeNotify=function(e){let t=new flatbuffers.Builder(0);CSProto.ControlAuthChangeNotify.startControlAuthChangeNotify(t),CSProto.ControlAuthChangeNotify.addControlChangeNotify(t,e);let r=CSProto.ControlAuthChangeNotify.endControlAuthChangeNotify(t);t.finish(r);let n=redfinger.fill_redfinger_pack(t.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_QUERYAUTH_R);redfinger.send(n);},redfinger.sendMousePressRelative=function(e,t){let r=new flatbuffers.Builder(0);CSProto.InputMouse.startInputMouse(r),CSProto.InputMouse.addType(r,e),CSProto.InputMouse.addPressed(r,t),CSProto.InputMouse.addRelX(r,0),CSProto.InputMouse.addRelY(r,0),CSProto.InputMouse.addWheel(r,0);let n=CSProto.InputMouse.endInputMouse(r);r.finish(n);let i=redfinger.fill_redfinger_pack(r.asUint8Array(),this.MSG_TYPE.MSG_INPUT,this.MSG_INPUT_TYPE.MSG_INPUT_MOUSE_KEY);redfinger.send(i);},redfinger.sendMouseWheelRelative=function(e){let t=new flatbuffers.Builder(0);CSProto.InputMouse.startInputMouse(t),CSProto.InputMouse.addType(t,3),CSProto.InputMouse.addPressed(t,0),CSProto.InputMouse.addRelX(t,0),CSProto.InputMouse.addRelY(t,0),CSProto.InputMouse.addWheel(t,e);let r=CSProto.InputMouse.endInputMouse(t);t.finish(r);let n=redfinger.fill_redfinger_pack(t.asUint8Array(),this.MSG_TYPE.MSG_INPUT,this.MSG_INPUT_TYPE.MSG_INPUT_MOUSE_MOVE);redfinger.send(n);},redfinger.sendMouseMoveRelative=function(e,t){let r=new flatbuffers.Builder(0);CSProto.InputMouse.startInputMouse(r),CSProto.InputMouse.addType(r,4),CSProto.InputMouse.addPressed(r,0),CSProto.InputMouse.addRelX(r,e),CSProto.InputMouse.addRelY(r,t),CSProto.InputMouse.addWheel(r,0);let n=CSProto.InputMouse.endInputMouse(r);r.finish(n);let i=redfinger.fill_redfinger_pack(r.asUint8Array(),this.MSG_TYPE.MSG_INPUT,this.MSG_INPUT_TYPE.MSG_INPUT_MOUSE_MOVE);redfinger.send(i);},redfinger.sendControlKeyboard=function(e,t){const r=new flatbuffers.Builder(0);CSProto.ActiveKeyBoard.startActiveKeyBoard(r),CSProto.ActiveKeyBoard.addPlatform(r,e),CSProto.ActiveKeyBoard.addActive(r,t);const n=CSProto.ActiveKeyBoard.endActiveKeyBoard(r);r.finish(n);const i=redfinger.fill_redfinger_pack(r.asUint8Array(),this.MSG_TYPE.MSG_CONTROL,this.MSG_CONTROL_TYPE.MSG_CONTROL_ACTIVE_KEYBOARD);redfinger.send(i);},redfinger.lookup=new Uint8Array(256);for(let e=0;e<redfinger.chars.length;e++)redfinger.lookup[redfinger.chars.charCodeAt(e)]=e;redfinger.encode=function(e){let t,r=new Uint8Array(e),n=r.length,i="";for(t=0;t<n;t+=3)i+=redfinger.chars[r[t]>>2],i+=redfinger.chars[(3&r[t])<<4|r[t+1]>>4],i+=redfinger.chars[(15&r[t+1])<<2|r[t+2]>>6],i+=redfinger.chars[63&r[t+2]];return n%3==2?i=i.substring(0,i.length-1)+"=":n%3==1&&(i=i.substring(0,i.length-2)+"=="),i;},redfinger.decode=function(e){let t,r,n,i,o,a=.75*e.length,s=e.length,d=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);let c=new ArrayBuffer(a),f=new Uint8Array(c);for(t=0;t<s;t+=4)r=redfinger.lookup[e.charCodeAt(t)],n=redfinger.lookup[e.charCodeAt(t+1)],i=redfinger.lookup[e.charCodeAt(t+2)],o=redfinger.lookup[e.charCodeAt(t+3)],f[d++]=r<<2|n>>4,f[d++]=(15&n)<<4|i>>2,f[d++]=(3&i)<<6|63&o;return c;},redfinger.onChangeBitrate=function(e){},redfinger.setKeyboardControlType=function(e){1===e||2===e?redfinger.config.keyboardControlType=e:MLOG.error(MLOG.e("keyboardControlType type error"));},redfinger.onReady=function(e,t,r){},redfinger.onRunInfo=function(e,t,r,n,i,o){},redfinger.onIdrInfo=function(e,t){},redfinger.onWebrtcRunInfo=function(){},redfinger.onRunInformation=function(e,t){},redfinger.onUnisibilityTime=function(e){},redfinger.audioReplay=function(){redfinger.videoinfo.isWebRtc?redfinger.webrtcOpenAudio():redfinger.initAudio();let e=document.querySelector("#redAudio");e.parentNode.removeChild(e);},redfinger.onPlaySuccess=function(){},redfinger.cleanAsmInstance=function(){redfinger.warmupCount=999,myplayer.avc.decoder?myplayer.avc.decoder.asmInstance=void 0:myplayer.avc.worker.postMessage({resetAsmInstance:!0});},redfinger.onWarmup=function(){return redfinger.warmupCount<redfinger.WARMUPCOUNTMAX&&(redfinger.warmupCount++,MLOG.debug(MLOG.d("redfinger.warmupCount"+redfinger.warmupCount)),redfinger.config.warmupTime=decodeTime,!0);},redfinger.onTimeOut=function(e){MLOG.debug(MLOG.d("闲置时间超过"+e+"分钟"));},redfinger.onLeaveUnusedTime=function(e){},redfinger.onOpen=function(e,t){MLOG.info(MLOG.i("onOpen code:"+e)),MLOG.info(MLOG.i("onOpen result:"+t));},redfinger.onReconnect=function(e){MLOG.info(MLOG.i("onReconnect count:"+e));},redfinger.onReconnectSuccess=function(){MLOG.info(MLOG.i("onReconnectSuccess"));},redfinger.onReconnectFail=function(){MLOG.info(MLOG.i("onReconnectFail"));},redfinger.onRotation=function(e,t){MLOG.debug(MLOG.d("onRotation code:"+e)),MLOG.debug(MLOG.d("onRotation result:"+t));},redfinger.onErrorMessage=function(e){MLOG.error(MLOG.e("onErrorMessage code:"+e));},redfinger.onPhoneRotation=function(e,t){MLOG.debug(MLOG.d("onPhoneRotation code:"+e)),MLOG.debug(MLOG.d("onPhoneRotation result:"+t));},redfinger.onVideoInfoChange=function(e){},redfinger.onGameScreenshots=function(e,t){},redfinger.onGameVideo=function(e,t,r){},redfinger.onCloudNotify=function(e,t){MLOG.info(MLOG.i("onCloudNotify type:"+e+", msg: "+t));},redfinger.checkDraw=function(){redfinger.isDraw;},redfinger.onCountDown=function(e){MLOG.debug(MLOG.d("onCountDown time:"+e));},redfinger.sendCommand=function(e){0===redfinger.checkParam.check("command","command",e).code?(e===redfinger.KEY_TYPE.KEY_MENU?MLOG.debug(MLOG.d("KEY_MENU")):e===redfinger.KEY_TYPE.KEY_BACK?MLOG.debug(MLOG.d("KEY_BACK")):e===redfinger.KEY_TYPE.KEY_HOMEPAGE&&MLOG.debug(MLOG.d("KEY_HOMEPAGE")),this.sendKey(e,!0),this.sendKey(e,!1)):MLOG.warn(MLOG.w("param invalid, so skip"));},redfinger.sendKeyDown=function(e){e===redfinger.KEY_TYPE.KEY_MENU?MLOG.debug(MLOG.d("KEY_MENU")):e===redfinger.KEY_TYPE.KEY_BACK?MLOG.debug(MLOG.d("KEY_BACK")):e===redfinger.KEY_TYPE.KEY_HOMEPAGE&&MLOG.debug(MLOG.d("KEY_HOMEPAGE")),this.sendKey(e,!0);},redfinger.sendKeyUp=function(e){e===redfinger.KEY_TYPE.KEY_MENU?MLOG.debug(MLOG.d("KEY_MENU")):e===redfinger.KEY_TYPE.KEY_BACK?MLOG.debug(MLOG.d("KEY_BACK")):e===redfinger.KEY_TYPE.KEY_HOMEPAGE&&MLOG.debug(MLOG.d("KEY_HOMEPAGE")),this.sendKey(e,!1);},redfinger.defaultPhoneRotation=function(){let e=document.querySelector("#"+redfinger.dom);0===redfinger.sdkInfo.playMode&&0===redfinger.phone.rotation?e.style.textAlign="center":e.style.textAlign="";},redfinger.play=function(e,t,r,n,i){if(redfinger.isConnecting)return;if(redfinger.isConnecting=!0,redfinger.isDestory=!1,redfinger.initVideoinfo(),redfinger.tracking.initData(),n.data&&(n=redfinger.encodePadInfo(n)),!redfinger.checkConfig())return void MLOG.error(MLOG.e("please check config param"));let o=redfinger.checkParam.check("viewId","viewId",e);if(-1!==o.code){if(o=redfinger.checkParam.check("packageName","packageName",r),-1!==o.code){if(o=redfinger.checkParam.check("deviceInfo","deviceInfo",n),-1!==o.code){if("boolean"!=typeof redfinger.config.keyboard&&(redfinger.config.keyboard=redfinger.isPc()),redfinger.config.keyboard&&redfinger.setRemoteKeyboardActive(!1),void 0===MLOG||null===MLOG?MLOG=new MyLog(redfinger.config.logLevel):MLOG.setLevel(redfinger.config.logLevel),redfinger.config.reconnecting||(redfinger.net_work_status=0),redfinger.dom=e,redfinger.config.appName=r,redfinger.defaultPhoneRotation(),redfinger.config.isReport&&!redfinger.report&&(redfinger.report=new MciReport(),redfinger.report.init()),redfinger.config.isReportET&&!redfinger.reportET&&(redfinger.reportET=new MciReportET()),redfinger.sdkInfo.clientInfo=navigator.userAgent.toLowerCase(),4!==redfinger.videoinfo.reportType&&(redfinger.videoinfo.reportType=1),void 0!==n.resultInfo.streamModeList&&n.resultInfo.streamModeList.length>0){let e=n.resultInfo.streamModeList.map(e=>e+"");e=e.filter(e=>"1"===e||"2"===e||"3"===e||"4"===e),e.length>0&&(redfinger.videoinfo.streamModeList=e);}redfinger.checkStreamMode(n),redfinger.local.deviceInfo=JSON.parse(JSON.stringify(n)),redfinger.tracking.setBaseInfo({sessionId:n.resultInfo.sessionId,packageName:r,padCode:n.padCode,startPlayTime:new Date().getTime()}),redfinger.reportET&&redfinger.reportET.sendStartPlay(),redfinger._startConnectDevice(),wsStateCheckTime=setTimeout(redfinger.checkWsStats,redfinger.config.reconnectCheckTime),redfinger.isPc()&&"paas"===redfinger.config.keyCtrlConfigType&&(void 0!==redfinger.inputConfigInfo.resultInfo.merchantInfo&&void 0!==redfinger.inputConfigInfo.resultInfo.domain&&""!==redfinger.inputConfigInfo.resultInfo.domain?keyboard.setKeyUiByPaas(redfinger.inputConfigInfo.resultInfo.domain,redfinger.inputConfigInfo.resultInfo.merchantInfo.appkey,redfinger.inputConfigInfo.resultInfo.merchantInfo.appSecret,redfinger.config.uuid,redfinger.inputConfigInfo.resultInfo.sessionId):MLOG.warn(MLOG.w("merchantInfo is not return by paas")));}else MLOG.error(MLOG.e("please check param deviceInfo"));}else MLOG.error(MLOG.e("please check param packageName"));}else MLOG.error(MLOG.e("please check param showdiv"));},redfinger.setPhoneRotation=function(e){0===redfinger.checkParam.check("type","rotation",e).code?0!==e&&1!==e||(redfinger.phone.defaultRotation=e):MLOG.warn(MLOG.w("setPhoneRotation param invalid, so skip"));},redfinger.initSetKey=function(){keyboard.initMouse();},redfinger.unSetKey=function(){keyboard.removeMouse();},redfinger.startControl=function(){redfinger.isPc()&&keyboard.joystick_init();},redfinger.keyCtrlUiDisplay=function(e){0===redfinger.checkParam.check("flag","flag",e).code?keyboard.keyCtrlUi&&keyboard.keyCtrlUi.isShow(e):MLOG.warn(MLOG.w("keyCtrlUiDisplay param invalid, so skip"));},redfinger.keyCtrlEdit=function(){"paas"!==redfinger.config.keyCtrlConfigType&&"saas"!==redfinger.config.keyCtrlConfigType||keyboard.keyCtrlUi&&keyboard.keyCtrlUi.customSet();},redfinger.getKeyCtrlIsEdit=function(){return keyboard.keyCtrlIsEdit;},redfinger.onKeyCtrlEditClose=function(e){},redfinger.onReturnXY=function(e,t){MLOG.info(MLOG.i(e+","+t));},redfinger.setKey=function(e,t,r,n){let i=redfinger.checkParam.check("keyArray","array",e);if(0===i.code){if(i=redfinger.checkParam.check("showJoystick","flag",t),0===i.code){if(i=redfinger.checkParam.check("opacity","opacity",r),0===i.code){if((void 0===n||0!==n&&1!==n)&&(MLOG.warn(MLOG.w("setKey param rotation invalid, use default value 1")),n=1),redfinger.config.keyCtrlRotation=n,redfinger.isPc()&&"custom"===redfinger.config.keyCtrlConfigType){void 0===t&&(t=!0),void 0===r&&(r=.8),e=e.map(function(e){return void 0===e.edit&&(e.edit=!0),e;}),null!==keyboard.keyCtrlUi&&(keyboard.keyCtrlUi.destroy(),keyboard.keyCtrlUi=null),keyboard.setKey(e,t),keyboard.joystick_init();let n={keys:JSON.parse(JSON.stringify(e)),opacity:r,showJoystick:t},i={keys:JSON.parse(JSON.stringify(e)),opacity:r,showJoystick:t};setTimeout(function(){keyboard.setKeyUi(n,i);},1e3);}}else MLOG.warn(MLOG.w("setKey param opacity invalid, so skip"));}else MLOG.warn(MLOG.w("setKey param showJoystick invalid, so skip"));}else MLOG.warn(MLOG.w("setKey param invalid, so skip"));},redfinger.initSetPcKey=function(){keyboard.pcKeybord_init();},redfinger.unSetPcKey=function(){keyboard.pcKeybord_remove();},redfinger.onPcKeyTrig=function(e,t){redfinger.sendKey(e,t),MLOG.debug(MLOG.d("sendKey "+e+" isDown:"+t));},redfinger.onWebrtcPaused=function(){let e=document.querySelector("#"+redfinger.dom);redfinger.touchPlayVideo=function(){redfinger.webrtcRePlay(),e.removeEventListener("touchstart",redfinger.touchPlayVideo);},e.addEventListener("touchstart",redfinger.touchPlayVideo,!1);},redfinger.onWebrtcMuted=function(){},redfinger.onWebrtcAudioStates=function(e){},redfinger.onImgDownloadError=function(e){},redfinger.webrtcRePlay=function(){let e=document.getElementById("phoneVideo");e&&e.paused&&(e.muted=!1,e.play());},redfinger.webrtcOpenAudio=function(){let e=document.getElementById("phoneVideo");redfinger.videoinfo.isP2p&&(e=document.getElementById("phoneAudio")),e&&e.muted&&(e.muted=!1,e.paused&&e.play());},redfinger.webrtcStopAudio=function(){let e=document.getElementById("phoneVideo");redfinger.videoinfo.isP2p&&(e=document.getElementById("phoneAudio")),e&&!e.paused&&(e.muted=!0);},redfinger.setupVideoQuality=function(e,t,r){let n=redfinger.checkParam.check("bitrate","bitrate",t);0===n.code?(n=redfinger.checkParam.check("fps","fps",r),0===n.code?(1!==redfinger.videoinfo.reportType&&(redfinger.videoinfo.reportType=2),redfinger.tracking.updateQualityChangeInfo({width:0,height:0,bitrate:t,fps:r}),redfinger.m_setupVideoQuality(e,t,r)):MLOG.warn(MLOG.w("setupVideoQuality param invalid, so skip"))):MLOG.warn(MLOG.w("setupVideoQuality param invalid, so skip"));},redfinger.sendTransparentMsg=function(e,t,r,n){let i=redfinger.checkParam.check("type","int",e);if(0===i.code){if(i=redfinger.checkParam.check("service","notNullStr",r),0===i.code)return"number"==typeof n||n?(i=redfinger.checkParam.check("encryptType","encryptType",n),0!==i.code?void MLOG.warn(MLOG.w("sendTransparentMsg param invalid, so skip")):redfinger._sendTransparentMsgReq(e,t,r,n)):void redfinger._sendTransparentMsg(e,t,r);MLOG.warn(MLOG.w("sendTransparentMsg param invalid, so skip"));}else MLOG.warn(MLOG.w("sendTransparentMsg param invalid, so skip"));},redfinger.onSupportMsgEncryptTypes=function(e){MLOG.debug(MLOG.d("onTransMsgEncypt supportedEncryts"+e));},redfinger.setupPicQuality=function(e){0===redfinger.checkParam.check("quality","int",e).code?redfinger._setupPicQuality(e):MLOG.warn(MLOG.w("setupPicQuality param invalid, so skip"));},redfinger.setStreamConfig=function(e,t,r,n){let i=redfinger.checkParam.check("width","width",e);0===i.code?(i=redfinger.checkParam.check("height","height",t),0===i.code?(i=redfinger.checkParam.check("bitrate","bitrate",r),0===i.code?(i=redfinger.checkParam.check("fps","fps",n),0===i.code?(redfinger.tracking.updateQualityChangeInfo({width:e,height:t,bitrate:r,fps:n}),redfinger._setStreamConfig(e,t,r,n)):MLOG.warn(MLOG.w("setStreamConfig param invalid, so skip"))):MLOG.warn(MLOG.w("setStreamConfig param invalid, so skip"))):MLOG.warn(MLOG.w("setStreamConfig param invalid, so skip"))):MLOG.warn(MLOG.w("setStreamConfig param invalid, so skip"));},redfinger.changeResolution=function(e,t){let r=redfinger.checkParam.check("width","width",e);0===r.code?(r=redfinger.checkParam.check("height","height",t),0===r.code?(redfinger.tracking.updateQualityChangeInfo({width:e,height:t,bitrate:0,fps:0}),redfinger._changeResolution(e,t)):MLOG.warn(MLOG.w("changeResolution param invalid, so skip"))):MLOG.warn(MLOG.w("changeResolution param invalid, so skip"));},redfinger.desdroy=_async(function(){return _awaitIgnored(redfinger.destory());}),redfinger.destroy=redfinger.destory,redfinger.unSetUpCamera=function(){redfinger.config.isCameraLive&&redfinger.camera&&(redfinger.camera.destroy(),redfinger.camera=void 0);},redfinger.onTransparentMsg=function(e,t,r){},redfinger.onTransparentMsgFailed=function(e,t,r){},redfinger.onCanUploadQRcode=function(){MLOG.info(MLOG.i("onCanUploadQRcode"));},redfinger.onCloudAppEvent=function(e,t){MLOG.info(MLOG.i("onCloudAppEvent type:"+e+" state: "+t));},redfinger.qrcode=void 0,redfinger.onWebrtcStateReport=function(e){},redfinger.resetVideoInfo=function(e,t,r){},redfinger.onChangeResolution=function(e,t){MLOG.info(MLOG.i("分辨率修改 width:"+e+" height:"+t));},redfinger.onPointerUnlock=function(e){MLOG.info(MLOG.i("退出鼠标锁定"));},redfinger.setResolutionLevel=function(e){0===redfinger.checkParam.check("level","devLevel",e).code?(1!==redfinger.videoinfo.reportType&&(redfinger.videoinfo.reportType=2),redfinger.config.devLevel=e,redfinger.m_resolutionLevel(redfinger.config.devLevel)):MLOG.warn(MLOG.w("setResolutionLevel param invalid, so skip"));},redfinger.sendKey=function(e,t){let r=redfinger.checkParam.check("key","int",e);0===r.code?(r=redfinger.checkParam.check("isDown","flag",t),0===r.code?redfinger._sendKey(e,t):MLOG.warn(MLOG.w("sendKey param isDown invalid, so skip"))):MLOG.warn(MLOG.w("sendKey param  key invalid, so skip"));},redfinger.sendInputString=function(e){"string"==typeof e||"number"==typeof e?0!==(e+="").length&&redfinger._sendInputString(e):MLOG.warn(MLOG.w("param  inputString invalid, so skip"));},redfinger.sendInputClipper=function(e,t=!0){"string"!=typeof e&&"number"!=typeof e||"boolean"!=typeof t?MLOG.warn(MLOG.w("param inputString invalid, so skip")):0!==(e+="").length&&redfinger._sendInputClipper(e,t);},redfinger.setDebug=function(e){0===redfinger.checkParam.check("isdebug","flag",e).code?e?(redfinger.config.isDebug=!0,redfinger.config.logLevel=1,MLOG.setLevel(redfinger.config.logLevel)):(redfinger.config.isDebug=!1,redfinger.config.logLevel=4,MLOG.setLevel(redfinger.config.logLevel)):MLOG.warn(MLOG.w("setDebug param  isdebug invalid, so skip"));},redfinger.setProtocol=function(e){0===redfinger.checkParam.check("protocol","protocol",e).code?redfinger.config.protocol=e:MLOG.warn(MLOG.w("setProtocol param  protocol invalid, so skip"));},redfinger.setBackgroundColor=function(e){redfinger.backgroundColor=e;},redfinger.setTimeout=function(e,t){redfinger.config.timeout=e,redfinger.config.timeoutInterval=t;},redfinger.setShakeAndPlay=function(e){redfinger.isShakeAndPlay=e;},redfinger.setGPS=function(e,t){let r=redfinger.checkParam.check("longitude","longitude",e);0===r.code?(r=redfinger.checkParam.check("latitude","latitude",t),0===r.code?redfinger._setGPS(e,t):MLOG.warn(MLOG.w("setGPS param  latitude invalid, so skip"))):MLOG.warn(MLOG.w("setGPS param  longitude invalid, so skip"));},redfinger.onTouch=function(e,t,r,n,i,o,a){},redfinger.onSendInputString=function(e){},redfinger.onSendKey=function(e,t){},redfinger.devicesSend=function(e){},redfinger.onDeviceEvent=function(e){},redfinger.devicesChange=function(e){},redfinger.sendControlAuthChangeNotify=function(e){redfinger._sendControlAuthChangeNotify(e);},redfinger.audioPauseOrResume=function(e){(e=!0===e)?(redfinger.config.isAudioPlay=!0,redfinger.playAudio()):(redfinger.config.isAudioPlay=!1,redfinger.stopAudio());},redfinger.onSensorInput=function(e,t,r){MLOG.debug(MLOG.d("onSensorInput inputType:"+e+" state:"+t+" jsonParam: "+JSON.stringify(r)));},redfinger.onDestroy=function(){MLOG.debug(MLOG.d("redfinger destoryed"));},redfinger.onOutputClipper=function(e){MLOG.debug(MLOG.d("onOutputClipper msg:"+e));},redfinger.onOpenCameraFail=function(){MLOG.debug(MLOG.d("open camera fail"));},redfinger.onTelephoneCall=function(e){MLOG.debug(MLOG.d("onTelephoneCall phoneNo:"+e));},redfinger.onRenderedFirstFrame=function(e,t){MLOG.debug(MLOG.d("onRenderedFirstFrame width:"+e+" height:"+t));},redfinger.onControlQueryAuthReq=function(e){MLOG.debug(MLOG.d("onControlQueryAuthReq controlMode:"+e));},redfinger.onControlAuthChangeNotify=function(e){MLOG.debug(MLOG.d("onControlQueryAuthReq controlMode:"+e));},redfinger.setTrackingDataThreshold=function(e,t,r){e>0&&(TrackingConfig.netWorkDelayThreshold=e),t>1e-4&&(TrackingConfig.packetLossRateThreshold=t),r>0&&(TrackingConfig.receiveFrameDelayThreshold=r);},redfinger.setCloudPhoneType=function(e){TrackingConfig.cloudPhoneType=e;},redfinger.setVideoStreamingType=function(e){TrackingConfig.videoStreamingType=e;},redfinger.getSdkTrackingData=function(){return redfinger.tracking.getTrackingData();},redfinger.getPadCode=function(){return redfinger.local.deviceInfo.padCode;},redfinger.switchKeyboard=function(e){0===redfinger.checkParam.check("type","keyboardType",e).code?redfinger._switchKeyboard(e):MLOG.warn(MLOG.w("switchKeyboard param  type invalid, so skip"));},redfinger.onKeyboardSwitch=function(e){MLOG.debug(MLOG.d("onKeyboardSwitch type"+e));},redfinger.setNavBarState=function(e){0===redfinger.checkParam.check("type","navbarstate",e).code?redfinger._controlNavBarState(e):MLOG.warn(MLOG.w("setNavBarState param type invalid, so skip"));},redfinger.onNavBarState=function(e){MLOG.debug(MLOG.d("onNavBarState type"+e));},redfinger.setRemoteKeyboardActive=function(e){keyboard&&redfinger.config.keyboard?(keyboard.typing_flag||e||(keyboard.softKeyboard=!0,redfinger.changeKeyboard=!0),!keyboard.typing_flag||keyboard.softKeyboard||e?e&&keyboard.softKeyboard&&(keyboard.softKeyboard=!1,redfinger.changeKeyboard=!0,keyboard.typing_destroy(),keyboard.joystick_init()):(keyboard.softKeyboard=!0,redfinger.changeKeyboard=!0,keyboard.typing_init(),keyboard.typing_focus())):MLOG.info(MLOG.i("please check whether the keyboard configuration is false"));},redfinger.onRemoteKeyboard=function(e){MLOG.debug(MLOG.d("onRemoteKeyboardActive type"+e));},redfinger.closeWebCodecs=function(){redfinger.config.useWCS=!1;},redfinger.setWheelState=function(e){0===redfinger.checkParam.check("type","toggleWheel",e).code?keyboard.toggleWheel=!!e:MLOG.warn(MLOG.w("setWheelState param type invalid, so skip"));},redfinger.getAudioState=function(){let e=0;if(redfinger.videoinfo.isWebRtc){let t=document.getElementById("phoneVideo");redfinger.videoinfo.isP2p&&(t=document.getElementById("phoneAudio")),e=t.muted?0:1;}else e=redfinger.audioPlayer&&redfinger.audioPlayer.playing?1:0;return e;};var liveTime=null;function rePlayVideo(e){const t=document.getElementById("phoneVideo");t&&t.paused&&(redfinger.videoinfo.isP2p&&(t.muted=!0),t.play().catch(function(t){e&&setTimeout(()=>{rePlayVideo(!1);},1);}));}function initPhoneSize(e){redfinger.phone.width=e.currentTarget.clientWidth,redfinger.phone.height=e.currentTarget.clientHeight,redfinger.videoinfo.isWebRtc&&0!==e.target.videoWidth&&0!==e.target.videoHeight&&(redfinger.videoinfo.width=e.target.videoWidth,redfinger.videoinfo.height=e.target.videoHeight);}redfinger.visableChange=function(){if(document.hidden)redfinger.isOpen&&redfinger.audioPauseOrResume(!1),newTouchArray.splice(0,newTouchArray.length),liveTime=new Date(),keyboard.pcKeyAllUp(),redfinger.muteTimer||(redfinger.muteTimer=setInterval(()=>{redfinger.getAudioState()&&redfinger.audioPauseOrResume(!1);},300));else{if(setTimeout(function(){redfinger.sendIframe(),redfinger.videoinfo.isWebRtc&&!redfinger.videoinfo.isP2p&&redfinger._startCheckIframe(),rePlayVideo(!0);},1e3),redfinger.isOpen){redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_CANCEL,[{x:-1,y:-1}]),keyboard.pcKeyAllUp(),newTouchArray.splice(0,newTouchArray.length);var e=new Date()-liveTime;redfinger.audioPauseOrResume(!0),redfinger.trigCallback(redfinger.onUnisibilityTime,[e]);}redfinger.muteTimer&&(clearInterval(redfinger.muteTimer),redfinger.muteTimer=null);}};var lastX=0,lastY=0,isDown=!1;function doMouseDown(e){initPhoneSize(e);var t=e.offsetX,r=e.offsetY;lastX=t,lastY=r;var n=transform(t,r);keyboard.pointerLock&&!keyboard.pointerLock.getIsLock()||redfinger.config.isHaiWai?redfinger.sendMouseDown(t,r):hdMouseDown(e),keyboard.longPressMouse=n;}function doMouseUp(e){initPhoneSize(e);var t=e.offsetX,r=e.offsetY;e.target;keyboard.pointerLock&&!keyboard.pointerLock.getIsLock()||redfinger.config.isHaiWai?redfinger.sendMouseUp(t,r):hdMouseUp(e),getClickCount();}function doMouseMove(e){initPhoneSize(e);var t=e.offsetX,r=e.offsetY;keyboard.lastMovePoint={x:t,y:r},(keyboard.pointerLock&&!keyboard.pointerLock.getIsLock()||redfinger.config.isHaiWai)&&redfinger.sendMouseMove(t,r);}function doOnEnded(e){}redfinger.sendMouseDown=function(e,t){var r=transform(e,t);isDown=!0;let n={key:"mouse",status:!0,x:r.x,y:r.y};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_DOWN,n);let i=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,i);},redfinger.sendMouseUp=function(e,t){transform(e,t);isDown=!1;updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_UP,{key:"mouse",status:!1,x:-1,y:-1});let r=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_UP,r),freshKeyDownArray();},redfinger.sendMouseMove=function(e,t){let r=transform(e,t);JSON.stringify(r);if(isDown){let e={key:"mouse",status:!0,x:r.x,y:r.y};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_MOVE,e);let t=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_MOVE,t),keyboard.longPressMouse=r;}};var touches,timer,myplayer,lastSendTime=new Date(),spots={},newTouchArray=[],touch_type=redfinger.TOUCH_TYPE.TOUCH_DOWN;function doTouchStart(e){var t=getPhoneOffset();redfinger.config.isPc&&(redfinger.config.isPcTouch=!0),e.preventDefault(),initPhoneSize(event);var r=[];if(e.targetTouches.length<=newTouchArray.length)for(var n in newTouchArray=[],spots)delete spots[n];[].forEach.call(e.targetTouches,function(e){spots[e.identifier]||(spots[e.identifier],spots[e.identifier]=transform(e.pageX-t.domOffSetLeft,e.pageY-t.domOffsetTop),newTouchArray.push(e.identifier));});for(var i=0;i<newTouchArray.length;i++)r.push(spots[newTouchArray[i]]);redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,r),redfinger.config.isPcTouch=!1,redfinger.localInput&&(redfinger.localInput=!1,keyboard.typing_focus());}function doTouchMove(e){e.preventDefault();var t=getPhoneOffset(),r=[];redfinger.config.isPc&&(redfinger.config.isPcTouch=!0),[].forEach.call(e.changedTouches,function(e){spots[e.identifier]&&(spots[e.identifier]=transform(e.pageX-t.domOffSetLeft,e.pageY-t.domOffsetTop));});for(var n=0;n<newTouchArray.length;n++)r.push(spots[newTouchArray[n]]);new Date()-lastSendTime>16&&(lastSendTime=new Date(),redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_MOVE,r)),redfinger.config.isPcTouch=!1;}function doTouchEnd(e){e.preventDefault();var t=[],r=newTouchArray.concat();[].forEach.call(e.changedTouches,function(e){if(spots[e.identifier]){spots[e.identifier]={x:-1,y:-1};for(var t=0;t<r.length;t++)r[t]==e.identifier&&r.splice(t,1);}});for(var n=0;n<newTouchArray.length;n++)t.push(spots[newTouchArray[n]]);newTouchArray=r.concat(),[].forEach.call(e.changedTouches,function(e){spots[e.identifier]&&delete spots[e.identifier];}),redfinger.config.isPass?1==t.length?redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_CANCEL,t):redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_UP,t):redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_CANCEL,t);}function doOnTouchStart(e){initPhoneSize(e),e.preventDefault();for(var t=[],r=0;r<e.targetTouches.length;r++){var n=transform(e.targetTouches[r].pageX-redfinger.phone.letfOff,e.targetTouches[r].pageY-redfinger.phone.topOff);t.push(n),redfinger.lasttouch=n;}redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,t);}function doOnTouchMove(e){initPhoneSize(e),e.preventDefault();var t=new Date();if(t-lastSendTime>10){for(var r=[],n=e.targetTouches.length,i=0;i<n;i++){var o=transform(e.targetTouches[i].pageX-redfinger.phone.letfOff,e.targetTouches[i].pageY-redfinger.phone.topOff);r.push(o),redfinger.lasttouch=o;}lastSendTime=t,redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_MOVE,r);}}function doOnTouchEnd(e){initPhoneSize(e);for(var t=[],r=0;r<e.targetTouches.length;r++){var n=transform(e.targetTouches[r].pageX-redfinger.phone.letfOff,e.targetTouches[r].pageY-redfinger.phone.topOff);t.push(n),redfinger.lasttouch=n;}0===t.length?(t.push(redfinger.lasttouch),redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_UP,t)):redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_CANCEL,t);}function doRightMouseDown(e){e.preventDefault(),e.stopPropagation();}function doWheel(e){if(keyboard.toggleWheel)null===keyboard.ctrlWheelUtilNew&&(keyboard.ctrlWheelUtilNew=new ctrlWheelUtilsNew()),keyboard.ctrlWheelUtilNew.change(e.deltaY);else if(keyboard.isCtrlDown)null===keyboard.ctrlWheelUtil&&(keyboard.ctrlWheelUtil=new ctrlWheelUtils()),keyboard.ctrlWheelUtil.change(e.deltaY);else if(1===redfinger.config.pcKeyMode){let t=e.deltaY>0?0:1;redfinger.sendMouseWheelRelative(t);}}function getPhoneOffset(){var e=document.getElementById(redfinger.phoneDom).getBoundingClientRect();return{domOffSetLeft:e.left,domOffsetTop:e.top};}function transform(e,t){if(1!==redfinger.sdkInfo.playMode){if(1==redfinger.phone.phoneRotation&&!redfinger.config.isPcTouch||1==redfinger.phone.rotation&&redfinger.config.isPcTouch)if(270==redfinger.config.transform){var r=redfinger.phone.width-t;t=e,e=r;}else{r=t;t=redfinger.phone.height-e,e=r;}return redfinger.outBeginTime=new Date(),redfinger.timeoutError=!0,redfinger.timeoutToast=!0,{x:e*redfinger.videoinfo.width/redfinger.phone.width,y:t*redfinger.videoinfo.height/redfinger.phone.height};}return redfinger.transformCloudGame(e,t);}function getPointOnCanvas(e,t,r){e.getBoundingClientRect();return{x:t,y:r};}function isQQ(){var e=navigator.userAgent;return!!(e.indexOf("QQ")>=0&&e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/));}function doclose(){socket.close();}redfinger.transformCloudGame=function(e,t){if(redfinger.isPc()){if(redfinger.config.isPcTouch)if(0===redfinger.phone.rotation);else if(1===redfinger.phone.rotation){var r=redfinger.phone.width-t;t=e,e=r;}else if(2===redfinger.phone.rotation)t=redfinger.phone.height-t,e=redfinger.phone.width-e;else if(3===redfinger.phone.rotation){r=t;t=redfinger.phone.height-e,e=r;}}else{if(0===redfinger.getorientation()){let r=t;t=redfinger.phone.height-e,e=r;}}return{x:e*redfinger.videoinfo.width/redfinger.phone.width,y:t*redfinger.videoinfo.height/redfinger.phone.height};};var MP4Player,pdata=[];function initPlay(){MP4Player=function(){function e(e,t,r,n){this.stream=e,this.useWorkers=t,this.webgl=r,this.render=n,this.statistics={videoStartTime:0,videoPictureCounter:0,windowStartTime:0,windowPictureCounter:0,fps:0,fpsMin:1e3,fpsMax:-1e3,webGLTextureUploadTime:0},this.avc=new Player({useWorker:t,reuseMemory:!0,useWorker:!0,workerFile:decodeUrl,webgl:r,size:{width:576,height:1024}}),this.webgl=this.avc.webgl;this.avc.onPictureDecoded=function(e,t,r,n){decodeTime=new Date()-startTime,subDecodeTime+=decodeTime,isIDR&&(IDecodeTime=decodeTime),redfinger.videoBufferCount--,!redfinger.isReturnAppStart&&redfinger.net_work_status!==redfinger.shake_stat_list.destory&&redfinger.warmupCount>=redfinger.WARMUPCOUNTMAX&&(redfinger.onReturn(redfinger.EVENT.START_APP,!0),redfinger.isReturnAppStart=!0);},redfinger.onDrawed=function(){if(!1===redfinger.isDraw){MLOG.debug(MLOG.d("js first frame  time:"+new Date().getTime()));let e=new Date().getTime(),t=redfinger.tracking.getTrackingData();redfinger.tracking.setBaseInfo({firstFrameTime:e-t.baseInfo.startPlayTime}),redfinger.resizePhone(),redfinger.trigCallback(redfinger.onRenderedFirstFrame,[redfinger.videoinfo.width,redfinger.videoinfo.height],!0);}redfinger.isDraw=!0,drawTime=new Date()-startTime,isIDR&&(IDrawTime=drawTime),perSecondFPS++;},this.canvas=this.avc.canvas;}return e.prototype={},e;}();}function initCanvas(){var e=document.createElement("canvas");e.id="redPhone",e.width=576,e.height=1024,e.style.backgroundColor=redfinger.backgroundColor,redfinger.onDrawed=function(){if(!1===redfinger.isDraw){MLOG.debug(MLOG.d("js first frame  time:"+new Date().getTime()));let e=new Date().getTime(),t=redfinger.tracking.getTrackingData();redfinger.tracking.setBaseInfo({firstFrameTime:e-t.baseInfo.startPlayTime}),redfinger.resizePhone(),redfinger.trigCallback(redfinger.onRenderedFirstFrame,[redfinger.videoinfo.width,redfinger.videoinfo.height],!0);}redfinger.isDraw=!0,drawTime=new Date()-startTime,isIDR&&(IDrawTime=drawTime),perSecondFPS++;},redfinger.canvas=e;}function rePlay(){redfinger.isStartApp=!1,redfinger.reconnectCount=1,redfinger.play("redFingerPhone",redfinger.VIDEO_BITRATE_NORMAL,"com.redfinger.ioslauncher",redfinger.inputConfigInfo,"redVideo");}function start(){if(redfinger.isStartApp=!0,!this.myplayer&&(1==redfinger.config.vfmt||2==redfinger.config.vfmt)){this.myplayer=new MP4Player("b","true","auto","true");}if(document.querySelector("#redPhone"));else{var e=document.querySelector("#"+redfinger.dom);e.style.textAlign="center",redfinger.phone.height=e.offsetHeight,redfinger.phone.pWidth=e.offsetWidth,redfinger.phone.width=parseInt(redfinger.phone.height*redfinger.videoinfo.width/redfinger.videoinfo.height),1==redfinger.config.vfmt||2==redfinger.config.vfmt?document.querySelector("#"+redfinger.dom).appendChild(this.myplayer.canvas):5!=redfinger.config.vfmt&&6!=redfinger.config.vfmt||document.querySelector("#"+redfinger.dom).appendChild(redfinger.canvas);}var t=document.getElementById("redPhone");if(t){if(redfinger.isPc()){t.addEventListener("mousedown",doMouseDown,!1),t.addEventListener("mousemove",doMouseMove,!1),t.addEventListener("mouseup",doMouseUp,!1),t.addEventListener("mouseout",doMouseUp,!1),t.addEventListener("ended",doOnEnded,!1),t.addEventListener("touchstart",doTouchStart,!1),t.addEventListener("touchmove",doTouchMove,!1),t.addEventListener("touchend",doTouchEnd,!1),t.addEventListener("contextmenu",doRightMouseDown,!1),t.addEventListener("wheel",doWheel,!1);let e={x:parseInt(redfinger.phone.width*redfinger.config.pointerLockPosition.x/100,10),y:parseInt(redfinger.phone.height*redfinger.config.pointerLockPosition.y/100,10)};1===redfinger.phone.rotation&&(e.x=parseInt(redfinger.phone.height*redfinger.config.pointerLockPosition.y/100,10),e.y=parseInt(redfinger.phone.width*redfinger.config.pointerLockPosition.x/100,10)),redfinger.config.isHaiWai||keyboard.initPointerLock("redPhone",e,redfinger.config.pointerLockKey,onPointerLockChange);}else t.addEventListener("touchstart",doTouchStart,!1),t.addEventListener("touchmove",doTouchMove,!1),t.addEventListener("touchend",doTouchEnd,!1),t.focus();}else start();var r=document.getElementById("redVideo");if(r)if(redfinger.isPc()){r.addEventListener("mousedown",doMouseDown,!1),r.addEventListener("mousemove",doMouseMove,!1),r.addEventListener("mouseup",doMouseUp,!1),r.addEventListener("mouseout",doMouseUp,!1),r.addEventListener("ended",doOnEnded,!1),r.addEventListener("touchstart",doTouchStart,!1),r.addEventListener("touchmove",doTouchMove,!1),r.addEventListener("touchend",doTouchEnd,!1),r.addEventListener("contextmenu",doRightMouseDown,!1),r.addEventListener("wheel",doWheel,!1);let e={x:parseInt(redfinger.phone.width*redfinger.config.pointerLockPosition.x/100,10),y:parseInt(redfinger.phone.height*redfinger.config.pointerLockPosition.y/100,10)};1===redfinger.phone.rotation&&(e.x=parseInt(redfinger.phone.height*redfinger.config.pointerLockPosition.y/100,10),e.y=parseInt(redfinger.phone.width*redfinger.config.pointerLockPosition.x/100,10)),redfinger.config.isHaiWai||keyboard.initPointerLock("redPhone",e,redfinger.config.pointerLockKey,onPointerLockChange);}else r.addEventListener("touchstart",doTouchStart,!1),r.addEventListener("touchmove",doTouchMove,!1),r.addEventListener("touchend",doTouchEnd,!1),redfinger.eventObj.addEventListener({mountName:"document",events:["WeixinJSBridgeReady","phone"]});}var startTime,decodeTime,drawTime,inDecode=!1;function DecoderFetchFrameData(e){if(e&&e.length){if(inDecode=!0,startTime=new Date(),e[6]>=2&&redfinger.videoBufferCount++,isIDR=e[6]===redfinger.VIDEO_X264_IDR,runIdrInfo(),redfinger.config.isBrodway){var t=new Uint8Array(e.length-7);t.set(e.subarray(7)),e=t;}myplayer.avc.decode(e);}}function sleep(e){for(var t=Date.now();Date.now()-t<=e;);}function s(e){if(!e||!e.length)return new Uint8Array(0);for(var t=0,r=0,n=e.length;n>r;++r)t+=e[r].byteLength;var i=new Uint8Array(t),o=0;for(r=0;n>r;++r)i.set(new Uint8Array(e[r]),o),o+=e[r].byteLength;return i;}function l(){var e=0;return function(t){return void 0===t?(MLOG.debug(MLOG.d("Not a valid buffered array")),!1):(0===e&&(r=e=new Date().valueOf()),t.length<=1024);};}function onIdrInfo(){if(null!=IDecodeTime&&null!=IDrawTime){var e={iNetDelay:INetDelay,decodeTime:IDecodeTime,drawTime:IDrawTime};redfinger.trigCallback(redfinger.onIdrInfo,["js",e]);}redfinger.IDRCheckTime=setTimeout(function(){onIdrInfo();},redfinger.IDRCheckDelay);}function runIdrInfo(){redfinger.isPlaying&&null==redfinger.IDRCheckTime&&onIdrInfo();}var IDecodeTime,IDrawTime,INetDelay,isIDR=!1,isDraw=2,subDecodeTime=0,perSecondFPS=0,CSProto=CSProto||{};CSProto.ShakeAndPlay=function(){this.bb=null,this.bb_pos=0;},CSProto.ShakeAndPlay.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ShakeAndPlay.getRootAsShakeAndPlay=function(e,t){return(t||new CSProto.ShakeAndPlay()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ShakeAndPlay.prototype.id=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeAndPlay.prototype.token=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeAndPlay.prototype.server=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeAndPlay.prototype.app=function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeAndPlay.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeAndPlay.prototype.encodetype=function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt32(this.bb_pos+e):1;},CSProto.ShakeAndPlay.prototype.mode=function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ShakeAndPlay.prototype.bitrate=function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readUint32(this.bb_pos+e):2048;},CSProto.ShakeAndPlay.prototype.fps=function(){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readUint32(this.bb_pos+e):30;},CSProto.ShakeAndPlay.prototype.maxiframe=function(){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readUint32(this.bb_pos+e):100;},CSProto.ShakeAndPlay.prototype.level=function(){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.readInt32(this.bb_pos+e):2;},CSProto.ShakeAndPlay.prototype.width=function(){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.readUint16(this.bb_pos+e):480;},CSProto.ShakeAndPlay.prototype.height=function(){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.readUint16(this.bb_pos+e):800;},CSProto.ShakeAndPlay.prototype.audio=function(){var e=this.bb.__offset(this.bb_pos,30);return!e||!!this.bb.readInt8(this.bb_pos+e);},CSProto.ShakeAndPlay.prototype.video=function(){var e=this.bb.__offset(this.bb_pos,32);return!e||!!this.bb.readInt8(this.bb_pos+e);},CSProto.ShakeAndPlay.prototype.subtitle=function(){var e=this.bb.__offset(this.bb_pos,34);return!!e&&!!this.bb.readInt8(this.bb_pos+e);},CSProto.ShakeAndPlay.prototype.extratype=function(){var e=this.bb.__offset(this.bb_pos,36);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeAndPlay.prototype.extradata=function(e){var t=this.bb.__offset(this.bb_pos,38);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeAndPlay.startShakeAndPlay=function(e){e.startObject(18);},CSProto.ShakeAndPlay.addId=function(e,t){e.addFieldOffset(0,t,0);},CSProto.ShakeAndPlay.addToken=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ShakeAndPlay.addServer=function(e,t){e.addFieldOffset(2,t,0);},CSProto.ShakeAndPlay.addApp=function(e,t){e.addFieldOffset(3,t,0);},CSProto.ShakeAndPlay.addType=function(e,t){e.addFieldInt32(4,t,0);},CSProto.ShakeAndPlay.addEncodetype=function(e,t){e.addFieldInt32(5,t,1);},CSProto.ShakeAndPlay.addMode=function(e,t){e.addFieldInt8(6,t,0);},CSProto.ShakeAndPlay.addBitrate=function(e,t){e.addFieldInt32(7,t,2048);},CSProto.ShakeAndPlay.addFps=function(e,t){e.addFieldInt32(8,t,30);},CSProto.ShakeAndPlay.addMaxiframe=function(e,t){e.addFieldInt32(9,t,100);},CSProto.ShakeAndPlay.addLevel=function(e,t){e.addFieldInt32(10,t,2);},CSProto.ShakeAndPlay.addWidth=function(e,t){e.addFieldInt16(11,t,480);},CSProto.ShakeAndPlay.addHeight=function(e,t){e.addFieldInt16(12,t,800);},CSProto.ShakeAndPlay.addAudio=function(e,t){e.addFieldInt8(13,+t,1);},CSProto.ShakeAndPlay.addVideo=function(e,t){e.addFieldInt8(14,+t,1);},CSProto.ShakeAndPlay.addSubtitle=function(e,t){e.addFieldInt8(15,+t,0);},CSProto.ShakeAndPlay.addExtratype=function(e,t){e.addFieldInt32(16,t,0);},CSProto.ShakeAndPlay.addExtradata=function(e,t){e.addFieldOffset(17,t,0);},CSProto.ShakeAndPlay.endShakeAndPlay=function(e){return e.endObject();},CSProto.ShakeAndPlayR=function(){this.bb=null,this.bb_pos=0;},CSProto.ShakeAndPlayR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ShakeAndPlayR.getRootAsShakeAndPlayR=function(e,t){return(t||new CSProto.ShakeAndPlayR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ShakeAndPlayR.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeAndPlayR.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeAndPlayR.prototype.currentcontrolauth=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ShakeAndPlayR.prototype.videoformat=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):1;},CSProto.ShakeAndPlayR.prototype.width=function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint16(this.bb_pos+e):480;},CSProto.ShakeAndPlayR.prototype.height=function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint16(this.bb_pos+e):800;},CSProto.ShakeAndPlayR.prototype.fps=function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint32(this.bb_pos+e):30;},CSProto.ShakeAndPlayR.prototype.audioformat=function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readInt32(this.bb_pos+e):1;},CSProto.ShakeAndPlayR.prototype.audiochannel=function(){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readInt32(this.bb_pos+e):2;},CSProto.ShakeAndPlayR.prototype.audiosamplerate=function(){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readInt32(this.bb_pos+e):44100;},CSProto.ShakeAndPlayR.startShakeAndPlayR=function(e){e.startObject(10);},CSProto.ShakeAndPlayR.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ShakeAndPlayR.addType=function(e,t){e.addFieldInt32(1,t,0);},CSProto.ShakeAndPlayR.addCurrentcontrolauth=function(e,t){e.addFieldInt8(2,t,0);},CSProto.ShakeAndPlayR.addVideoformat=function(e,t){e.addFieldInt32(3,t,1);},CSProto.ShakeAndPlayR.addWidth=function(e,t){e.addFieldInt16(4,t,480);},CSProto.ShakeAndPlayR.addHeight=function(e,t){e.addFieldInt16(5,t,800);},CSProto.ShakeAndPlayR.addFps=function(e,t){e.addFieldInt32(6,t,30);},CSProto.ShakeAndPlayR.addAudioformat=function(e,t){e.addFieldInt32(7,t,1);},CSProto.ShakeAndPlayR.addAudiochannel=function(e,t){e.addFieldInt32(8,t,2);},CSProto.ShakeAndPlayR.addAudiosamplerate=function(e,t){e.addFieldInt32(9,t,44100);},CSProto.ShakeAndPlayR.endShakeAndPlayR=function(e){return e.endObject();},CSProto.ShakeOnline=function(){this.bb=null,this.bb_pos=0;},CSProto.ShakeOnline.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ShakeOnline.getRootAsShakeOnline=function(e,t){return(t||new CSProto.ShakeOnline()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ShakeOnline.prototype.id=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeOnline.prototype.token=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeOnline.prototype.server=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeOnline.prototype.app=function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeOnline.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeOnline.prototype.linktype=function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeOnline.prototype.lid=function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint32(this.bb_pos+e):0;},CSProto.ShakeOnline.startShakeOnline=function(e){e.startObject(7);},CSProto.ShakeOnline.addId=function(e,t){e.addFieldOffset(0,t,0);},CSProto.ShakeOnline.addToken=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ShakeOnline.addServer=function(e,t){e.addFieldOffset(2,t,0);},CSProto.ShakeOnline.addApp=function(e,t){e.addFieldOffset(3,t,0);},CSProto.ShakeOnline.addType=function(e,t){e.addFieldInt32(4,t,0);},CSProto.ShakeOnline.addLinktype=function(e,t){e.addFieldInt32(5,t,0);},CSProto.ShakeOnline.addLid=function(e,t){e.addFieldInt32(6,t,0);},CSProto.ShakeOnline.endShakeOnline=function(e){return e.endObject();},CSProto.ShakeOnlineR=function(){this.bb=null,this.bb_pos=0;},CSProto.ShakeOnlineR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ShakeOnlineR.getRootAsShakeOnlineR=function(e,t){return(t||new CSProto.ShakeOnlineR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ShakeOnlineR.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeOnlineR.prototype.msg=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeOnlineR.prototype.id=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeOnlineR.prototype.token=function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeOnlineR.prototype.server=function(e){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeOnlineR.prototype.app=function(e){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeOnlineR.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeOnlineR.prototype.currentcontrolauth=function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ShakeOnlineR.prototype.linktype=function(){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeOnlineR.prototype.lid=function(){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readUint32(this.bb_pos+e):0;},CSProto.ShakeOnlineR.startShakeOnlineR=function(e){e.startObject(10);},CSProto.ShakeOnlineR.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ShakeOnlineR.addMsg=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ShakeOnlineR.addId=function(e,t){e.addFieldOffset(2,t,0);},CSProto.ShakeOnlineR.addToken=function(e,t){e.addFieldOffset(3,t,0);},CSProto.ShakeOnlineR.addServer=function(e,t){e.addFieldOffset(4,t,0);},CSProto.ShakeOnlineR.addApp=function(e,t){e.addFieldOffset(5,t,0);},CSProto.ShakeOnlineR.addType=function(e,t){e.addFieldInt32(6,t,0);},CSProto.ShakeOnlineR.addCurrentcontrolauth=function(e,t){e.addFieldInt8(7,t,0);},CSProto.ShakeOnlineR.addLinktype=function(e,t){e.addFieldInt32(8,t,0);},CSProto.ShakeOnlineR.addLid=function(e,t){e.addFieldInt32(9,t,0);},CSProto.ShakeOnlineR.endShakeOnlineR=function(e){return e.endObject();},CSProto.ShakeOffline=function(){this.bb=null,this.bb_pos=0;},CSProto.ShakeOffline.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ShakeOffline.getRootAsShakeOffline=function(e,t){return(t||new CSProto.ShakeOffline()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ShakeOffline.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeOffline.prototype.msg=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeOffline.startShakeOffline=function(e){e.startObject(2);},CSProto.ShakeOffline.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ShakeOffline.addMsg=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ShakeOffline.endShakeOffline=function(e){return e.endObject();},CSProto.ShakeOfflineR=function(){this.bb=null,this.bb_pos=0;},CSProto.ShakeOfflineR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ShakeOfflineR.getRootAsShakeOfflineR=function(e,t){return(t||new CSProto.ShakeOfflineR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ShakeOfflineR.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeOfflineR.prototype.msg=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeOfflineR.startShakeOfflineR=function(e){e.startObject(2);},CSProto.ShakeOfflineR.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ShakeOfflineR.addMsg=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ShakeOfflineR.endShakeOfflineR=function(e){return e.endObject();},CSProto.ShakeKick=function(){this.bb=null,this.bb_pos=0;},CSProto.ShakeKick.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ShakeKick.getRootAsShakeKick=function(e,t){return(t||new CSProto.ShakeKick()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ShakeKick.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeKick.prototype.msg=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeKick.startShakeKick=function(e){e.startObject(2);},CSProto.ShakeKick.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ShakeKick.addMsg=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ShakeKick.endShakeKick=function(e){return e.endObject();},CSProto.ShakeKickR=function(){this.bb=null,this.bb_pos=0;},CSProto.ShakeKickR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ShakeKickR.getRootAsShakeKickR=function(e,t){return(t||new CSProto.ShakeKickR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ShakeKickR.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeKickR.prototype.msg=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeKickR.startShakeKickR=function(e){e.startObject(2);},CSProto.ShakeKickR.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ShakeKickR.addMsg=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ShakeKickR.endShakeKickR=function(e){return e.endObject();},CSProto.ShakeSession=function(){this.bb=null,this.bb_pos=0;},CSProto.ShakeSession.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ShakeSession.getRootAsShakeSession=function(e,t){return(t||new CSProto.ShakeSession()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ShakeSession.prototype.id=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeSession.prototype.token=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeSession.prototype.server=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeSession.prototype.app=function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeSession.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeSession.startShakeSession=function(e){e.startObject(5);},CSProto.ShakeSession.addId=function(e,t){e.addFieldOffset(0,t,0);},CSProto.ShakeSession.addToken=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ShakeSession.addServer=function(e,t){e.addFieldOffset(2,t,0);},CSProto.ShakeSession.addApp=function(e,t){e.addFieldOffset(3,t,0);},CSProto.ShakeSession.addType=function(e,t){e.addFieldInt32(4,t,0);},CSProto.ShakeSession.endShakeSession=function(e){return e.endObject();},CSProto.ShakeSessionR=function(){this.bb=null,this.bb_pos=0;},CSProto.ShakeSessionR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ShakeSessionR.getRootAsShakeSessionR=function(e,t){return(t||new CSProto.ShakeSessionR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ShakeSessionR.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeSessionR.startShakeSessionR=function(e){e.startObject(1);},CSProto.ShakeSessionR.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ShakeSessionR.endShakeSessionR=function(e){return e.endObject();},CSProto.ShakeOffer=function(){this.bb=null,this.bb_pos=0;},CSProto.ShakeOffer.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ShakeOffer.getRootAsShakeOffer=function(e,t){return(t||new CSProto.ShakeOffer()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ShakeOffer.prototype.playtype=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeOffer.prototype.vfmt=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeOffer.prototype.iceServer=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeOffer.startShakeOffer=function(e){e.startObject(3);},CSProto.ShakeOffer.addPlaytype=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ShakeOffer.addVfmt=function(e,t){e.addFieldInt32(1,t,0);},CSProto.ShakeOffer.addIceServer=function(e,t){e.addFieldOffset(2,t,0);},CSProto.ShakeOffer.endShakeOffer=function(e){return e.endObject();},CSProto.ShakeOfferR=function(){this.bb=null,this.bb_pos=0;},CSProto.ShakeOfferR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ShakeOfferR.getRootAsShakeOfferR=function(e,t){return(t||new CSProto.ShakeOfferR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ShakeOfferR.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeOfferR.prototype.offer=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeOfferR.startShakeOfferR=function(e){e.startObject(2);},CSProto.ShakeOfferR.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ShakeOfferR.addOffer=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ShakeOfferR.endShakeOfferR=function(e){return e.endObject();},CSProto.ShakeAnswer=function(){this.bb=null,this.bb_pos=0;},CSProto.ShakeAnswer.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ShakeAnswer.getRootAsShakeAnswer=function(e,t){return(t||new CSProto.ShakeAnswer()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ShakeAnswer.prototype.answer=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeAnswer.startShakeAnswer=function(e){e.startObject(1);},CSProto.ShakeAnswer.addAnswer=function(e,t){e.addFieldOffset(0,t,0);},CSProto.ShakeAnswer.endShakeAnswer=function(e){return e.endObject();},CSProto.ShakeAnswerR=function(){this.bb=null,this.bb_pos=0;},CSProto.ShakeAnswerR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ShakeAnswerR.getRootAsShakeAnswerR=function(e,t){return(t||new CSProto.ShakeAnswerR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ShakeAnswerR.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeAnswerR.startShakeAnswerR=function(e){e.startObject(1);},CSProto.ShakeAnswerR.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ShakeAnswerR.endShakeAnswerR=function(e){return e.endObject();},CSProto.ShakeCandidate=function(){this.bb=null,this.bb_pos=0;},CSProto.ShakeCandidate.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ShakeCandidate.getRootAsShakeCandidate=function(e,t){return(t||new CSProto.ShakeCandidate()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ShakeCandidate.prototype.completed=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeCandidate.prototype.mlineindex=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeCandidate.prototype.mid=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeCandidate.prototype.candidate=function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ShakeCandidate.startShakeCandidate=function(e){e.startObject(4);},CSProto.ShakeCandidate.addCompleted=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ShakeCandidate.addMlineindex=function(e,t){e.addFieldInt32(1,t,0);},CSProto.ShakeCandidate.addMid=function(e,t){e.addFieldOffset(2,t,0);},CSProto.ShakeCandidate.addCandidate=function(e,t){e.addFieldOffset(3,t,0);},CSProto.ShakeCandidate.endShakeCandidate=function(e){return e.endObject();},CSProto.ShakeCandidateR=function(){this.bb=null,this.bb_pos=0;},CSProto.ShakeCandidateR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ShakeCandidateR.getRootAsShakeCandidateR=function(e,t){return(t||new CSProto.ShakeCandidateR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ShakeCandidateR.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ShakeCandidateR.startShakeCandidateR=function(e){e.startObject(1);},CSProto.ShakeCandidateR.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ShakeCandidateR.endShakeCandidateR=function(e){return e.endObject();},CSProto.ControlMtu=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlMtu.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlMtu.getRootAsControlMtu=function(e,t){return(t||new CSProto.ControlMtu()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlMtu.prototype.seg=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb.__vector(this.bb_pos+t)+e):0;},CSProto.ControlMtu.prototype.segLength=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0;},CSProto.ControlMtu.prototype.segArray=function(){var e=this.bb.__offset(this.bb_pos,4);return e?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null;},CSProto.ControlMtu.startControlMtu=function(e){e.startObject(1);},CSProto.ControlMtu.addSeg=function(e,t){e.addFieldOffset(0,t,0);},CSProto.ControlMtu.createSegVector=function(e,t){e.startVector(1,t.length,1);for(var r=t.length-1;r>=0;r--)e.addInt8(t[r]);return e.endVector();},CSProto.ControlMtu.startSegVector=function(e,t){e.startVector(1,t,1);},CSProto.ControlMtu.endControlMtu=function(e){return e.endObject();},CSProto.ControlMtuR=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlMtuR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlMtuR.getRootAsControlMtuR=function(e,t){return(t||new CSProto.ControlMtuR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlMtuR.prototype.seg=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb.__vector(this.bb_pos+t)+e):0;},CSProto.ControlMtuR.prototype.segLength=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0;},CSProto.ControlMtuR.prototype.segArray=function(){var e=this.bb.__offset(this.bb_pos,4);return e?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null;},CSProto.ControlMtuR.startControlMtuR=function(e){e.startObject(1);},CSProto.ControlMtuR.addSeg=function(e,t){e.addFieldOffset(0,t,0);},CSProto.ControlMtuR.createSegVector=function(e,t){e.startVector(1,t.length,1);for(var r=t.length-1;r>=0;r--)e.addInt8(t[r]);return e.endVector();},CSProto.ControlMtuR.startSegVector=function(e,t){e.startVector(1,t,1);},CSProto.ControlMtuR.endControlMtuR=function(e){return e.endObject();},CSProto.ControlDelay=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlDelay.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlDelay.getRootAsControlDelay=function(e,t){return(t||new CSProto.ControlDelay()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlDelay.prototype.time=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlDelay.prototype.data=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb.__vector(this.bb_pos+t)+e):0;},CSProto.ControlDelay.prototype.dataLength=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0;},CSProto.ControlDelay.prototype.dataArray=function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null;},CSProto.ControlDelay.startControlDelay=function(e){e.startObject(2);},CSProto.ControlDelay.addTime=function(e,t){e.addFieldOffset(0,t,0);},CSProto.ControlDelay.addData=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ControlDelay.createDataVector=function(e,t){e.startVector(1,t.length,1);for(var r=t.length-1;r>=0;r--)e.addInt8(t[r]);return e.endVector();},CSProto.ControlDelay.startDataVector=function(e,t){e.startVector(1,t,1);},CSProto.ControlDelay.endControlDelay=function(e){return e.endObject();},CSProto.ControlDelayR=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlDelayR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlDelayR.getRootAsControlDelayR=function(e,t){return(t||new CSProto.ControlDelayR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlDelayR.prototype.time=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlDelayR.prototype.data=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb.__vector(this.bb_pos+t)+e):0;},CSProto.ControlDelayR.prototype.dataLength=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0;},CSProto.ControlDelayR.prototype.dataArray=function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null;},CSProto.ControlDelayR.startControlDelayR=function(e){e.startObject(2);},CSProto.ControlDelayR.addTime=function(e,t){e.addFieldOffset(0,t,0);},CSProto.ControlDelayR.addData=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ControlDelayR.createDataVector=function(e,t){e.startVector(1,t.length,1);for(var r=t.length-1;r>=0;r--)e.addInt8(t[r]);return e.endVector();},CSProto.ControlDelayR.startDataVector=function(e,t){e.startVector(1,t,1);},CSProto.ControlDelayR.endControlDelayR=function(e){return e.endObject();},CSProto.ControlUserR=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlUserR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlUserR.getRootAsControlUserR=function(e,t){return(t||new CSProto.ControlUserR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlUserR.prototype.num=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlUserR.startControlUserR=function(e){e.startObject(1);},CSProto.ControlUserR.addNum=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ControlUserR.endControlUserR=function(e){return e.endObject();},CSProto.ControlApp=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlApp.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlApp.getRootAsControlApp=function(e,t){return(t||new CSProto.ControlApp()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlApp.prototype.app=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlApp.prototype.activity=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlApp.prototype.videoUrl=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlApp.prototype.playType=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlApp.prototype.paramsType=function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlApp.startControlApp=function(e){e.startObject(5);},CSProto.ControlApp.addApp=function(e,t){e.addFieldOffset(0,t,0);},CSProto.ControlApp.addActivity=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ControlApp.addVideoUrl=function(e,t){e.addFieldOffset(2,t,0);},CSProto.ControlApp.addPlayType=function(e,t){e.addFieldInt32(3,t,0);},CSProto.ControlApp.addParamsType=function(e,t){e.addFieldInt32(4,t,0);},CSProto.ControlApp.endControlApp=function(e){return e.endObject();},CSProto.ControlAppR=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlAppR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlAppR.getRootAsControlAppR=function(e,t){return(t||new CSProto.ControlAppR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlAppR.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlAppR.prototype.msg=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlAppR.prototype.app=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlAppR.startControlAppR=function(e){e.startObject(3);},CSProto.ControlAppR.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ControlAppR.addMsg=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ControlAppR.addApp=function(e,t){e.addFieldOffset(2,t,0);},CSProto.ControlAppR.endControlAppR=function(e){return e.endObject();},CSProto.ControlKillApp=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlKillApp.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlKillApp.getRootAsControlKillApp=function(e,t){return(t||new CSProto.ControlKillApp()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlKillApp.prototype.app=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlKillApp.startControlKillApp=function(e){e.startObject(1);},CSProto.ControlKillApp.addApp=function(e,t){e.addFieldOffset(0,t,0);},CSProto.ControlKillApp.endControlKillApp=function(e){return e.endObject();},CSProto.ControlKillAppR=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlKillAppR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlKillAppR.getRootAsControlKillAppR=function(e,t){return(t||new CSProto.ControlKillAppR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlKillAppR.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlKillAppR.prototype.msg=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlKillAppR.prototype.app=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlKillAppR.startControlKillAppR=function(e){e.startObject(3);},CSProto.ControlKillAppR.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ControlKillAppR.addMsg=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ControlKillAppR.addApp=function(e,t){e.addFieldOffset(2,t,0);},CSProto.ControlKillAppR.endControlKillAppR=function(e){return e.endObject();},CSProto.ControlQueryAuth=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlQueryAuth.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlQueryAuth.getRootAsControlQueryAuth=function(e,t){return(t||new CSProto.ControlQueryAuth()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlQueryAuth.prototype.queryauthority=function(){var e=this.bb.__offset(this.bb_pos,4);return!!e&&!!this.bb.readInt8(this.bb_pos+e);},CSProto.ControlQueryAuth.startControlQueryAuth=function(e){e.startObject(1);},CSProto.ControlQueryAuth.addQueryauthority=function(e,t){e.addFieldInt8(0,+t,0);},CSProto.ControlQueryAuth.endControlQueryAuth=function(e){return e.endObject();},CSProto.ControlQueryAuthR=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlQueryAuthR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlQueryAuthR.getRootAsControlQueryAuthR=function(e,t){return(t||new CSProto.ControlQueryAuthR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlQueryAuthR.prototype.hasauthority=function(){var e=this.bb.__offset(this.bb_pos,4);return!!e&&!!this.bb.readInt8(this.bb_pos+e);},CSProto.ControlQueryAuthR.startControlQueryAuthR=function(e){e.startObject(1);},CSProto.ControlQueryAuthR.addHasauthority=function(e,t){e.addFieldInt8(0,+t,0);},CSProto.ControlQueryAuthR.endControlQueryAuthR=function(e){return e.endObject();},CSProto.ControlAuthChangeNotify=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlAuthChangeNotify.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlAuthChangeNotify.getRootAsControlAuthChangeNotify=function(e,t){return(t||new CSProto.ControlAuthChangeNotify()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlAuthChangeNotify.prototype.ControlChangeNotify=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ControlAuthChangeNotify.startControlAuthChangeNotify=function(e){e.startObject(1);},CSProto.ControlAuthChangeNotify.addControlChangeNotify=function(e,t){e.addFieldInt8(0,t,0);},CSProto.ControlAuthChangeNotify.endControlAuthChangeNotify=function(e){return e.endObject();},CSProto.ControlAVFmt=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlAVFmt.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlAVFmt.getRootAsControlAVFmt=function(e,t){return(t||new CSProto.ControlAVFmt()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlAVFmt.prototype.afmt=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ControlAVFmt.prototype.aprofile=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ControlAVFmt.prototype.achannel=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):2;},CSProto.ControlAVFmt.prototype.asmprate=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint16(this.bb_pos+e):44100;},CSProto.ControlAVFmt.prototype.abitrate=function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint32(this.bb_pos+e):64e3;},CSProto.ControlAVFmt.prototype.vfmt=function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ControlAVFmt.prototype.vprofile=function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ControlAVFmt.prototype.vwidth=function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readUint16(this.bb_pos+e):1024;},CSProto.ControlAVFmt.prototype.vheight=function(){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readUint16(this.bb_pos+e):576;},CSProto.ControlAVFmt.prototype.vfps=function(){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readUint16(this.bb_pos+e):30;},CSProto.ControlAVFmt.prototype.vbitrate=function(){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.readUint32(this.bb_pos+e):1024;},CSProto.ControlAVFmt.prototype.maxidr=function(){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlAVFmt.prototype.minidr=function(){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlAVFmt.startControlAVFmt=function(e){e.startObject(13);},CSProto.ControlAVFmt.addAfmt=function(e,t){e.addFieldInt8(0,t,0);},CSProto.ControlAVFmt.addAprofile=function(e,t){e.addFieldInt8(1,t,0);},CSProto.ControlAVFmt.addAchannel=function(e,t){e.addFieldInt8(2,t,2);},CSProto.ControlAVFmt.addAsmprate=function(e,t){e.addFieldInt16(3,t,44100);},CSProto.ControlAVFmt.addAbitrate=function(e,t){e.addFieldInt32(4,t,64e3);},CSProto.ControlAVFmt.addVfmt=function(e,t){e.addFieldInt8(5,t,0);},CSProto.ControlAVFmt.addVprofile=function(e,t){e.addFieldInt8(6,t,0);},CSProto.ControlAVFmt.addVwidth=function(e,t){e.addFieldInt16(7,t,1024);},CSProto.ControlAVFmt.addVheight=function(e,t){e.addFieldInt16(8,t,576);},CSProto.ControlAVFmt.addVfps=function(e,t){e.addFieldInt16(9,t,30);},CSProto.ControlAVFmt.addVbitrate=function(e,t){e.addFieldInt32(10,t,1024);},CSProto.ControlAVFmt.addMaxidr=function(e,t){e.addFieldInt32(11,t,0);},CSProto.ControlAVFmt.addMinidr=function(e,t){e.addFieldInt32(12,t,0);},CSProto.ControlAVFmt.endControlAVFmt=function(e){return e.endObject();},CSProto.ControlAVFmtR=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlAVFmtR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlAVFmtR.getRootAsControlAVFmtR=function(e,t){return(t||new CSProto.ControlAVFmtR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlAVFmtR.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlAVFmtR.prototype.msg=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlAVFmtR.prototype.afmt=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ControlAVFmtR.prototype.aprofile=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ControlAVFmtR.prototype.achannel=function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint8(this.bb_pos+e):2;},CSProto.ControlAVFmtR.prototype.asmprate=function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint32(this.bb_pos+e):44100;},CSProto.ControlAVFmtR.prototype.abitrate=function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint32(this.bb_pos+e):64e3;},CSProto.ControlAVFmtR.prototype.vfmt=function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ControlAVFmtR.prototype.vprofile=function(){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ControlAVFmtR.prototype.vwidth=function(){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readUint16(this.bb_pos+e):1024;},CSProto.ControlAVFmtR.prototype.vheight=function(){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.readUint16(this.bb_pos+e):576;},CSProto.ControlAVFmtR.prototype.vfps=function(){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.readUint16(this.bb_pos+e):30;},CSProto.ControlAVFmtR.prototype.vbitrate=function(){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.readUint32(this.bb_pos+e):1024;},CSProto.ControlAVFmtR.startControlAVFmtR=function(e){e.startObject(13);},CSProto.ControlAVFmtR.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ControlAVFmtR.addMsg=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ControlAVFmtR.addAfmt=function(e,t){e.addFieldInt8(2,t,0);},CSProto.ControlAVFmtR.addAprofile=function(e,t){e.addFieldInt8(3,t,0);},CSProto.ControlAVFmtR.addAchannel=function(e,t){e.addFieldInt8(4,t,2);},CSProto.ControlAVFmtR.addAsmprate=function(e,t){e.addFieldInt32(5,t,44100);},CSProto.ControlAVFmtR.addAbitrate=function(e,t){e.addFieldInt32(6,t,64e3);},CSProto.ControlAVFmtR.addVfmt=function(e,t){e.addFieldInt8(7,t,0);},CSProto.ControlAVFmtR.addVprofile=function(e,t){e.addFieldInt8(8,t,0);},CSProto.ControlAVFmtR.addVwidth=function(e,t){e.addFieldInt16(9,t,1024);},CSProto.ControlAVFmtR.addVheight=function(e,t){e.addFieldInt16(10,t,576);},CSProto.ControlAVFmtR.addVfps=function(e,t){e.addFieldInt16(11,t,30);},CSProto.ControlAVFmtR.addVbitrate=function(e,t){e.addFieldInt32(12,t,1024);},CSProto.ControlAVFmtR.endControlAVFmtR=function(e){return e.endObject();},CSProto.ControlAVTrans=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlAVTrans.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlAVTrans.getRootAsControlAVTrans=function(e,t){return(t||new CSProto.ControlAVTrans()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlAVTrans.prototype.audio=function(){var e=this.bb.__offset(this.bb_pos,4);return!e||!!this.bb.readInt8(this.bb_pos+e);},CSProto.ControlAVTrans.prototype.video=function(){var e=this.bb.__offset(this.bb_pos,6);return!e||!!this.bb.readInt8(this.bb_pos+e);},CSProto.ControlAVTrans.prototype.subtitle=function(){var e=this.bb.__offset(this.bb_pos,8);return!!e&&!!this.bb.readInt8(this.bb_pos+e);},CSProto.ControlAVTrans.prototype.wechatshare=function(){var e=this.bb.__offset(this.bb_pos,10);return!!e&&!!this.bb.readInt8(this.bb_pos+e);},CSProto.ControlAVTrans.startControlAVTrans=function(e){e.startObject(4);},CSProto.ControlAVTrans.addAudio=function(e,t){e.addFieldInt8(0,+t,1);},CSProto.ControlAVTrans.addVideo=function(e,t){e.addFieldInt8(1,+t,1);},CSProto.ControlAVTrans.addSubtitle=function(e,t){e.addFieldInt8(2,+t,0);},CSProto.ControlAVTrans.addWechatshare=function(e,t){e.addFieldInt8(3,+t,0);},CSProto.ControlAVTrans.endControlAVTrans=function(e){return e.endObject();},CSProto.ControlAVTransR=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlAVTransR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlAVTransR.getRootAsControlAVTransR=function(e,t){return(t||new CSProto.ControlAVTransR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlAVTransR.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlAVTransR.prototype.msg=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlAVTransR.prototype.audio=function(){var e=this.bb.__offset(this.bb_pos,8);return!e||!!this.bb.readInt8(this.bb_pos+e);},CSProto.ControlAVTransR.prototype.video=function(){var e=this.bb.__offset(this.bb_pos,10);return!e||!!this.bb.readInt8(this.bb_pos+e);},CSProto.ControlAVTransR.prototype.wechatshare=function(){var e=this.bb.__offset(this.bb_pos,12);return!!e&&!!this.bb.readInt8(this.bb_pos+e);},CSProto.ControlAVTransR.prototype.subtitle=function(){var e=this.bb.__offset(this.bb_pos,14);return!!e&&!!this.bb.readInt8(this.bb_pos+e);},CSProto.ControlAVTransR.startControlAVTransR=function(e){e.startObject(6);},CSProto.ControlAVTransR.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ControlAVTransR.addMsg=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ControlAVTransR.addAudio=function(e,t){e.addFieldInt8(2,+t,1);},CSProto.ControlAVTransR.addVideo=function(e,t){e.addFieldInt8(3,+t,1);},CSProto.ControlAVTransR.addWechatshare=function(e,t){e.addFieldInt8(4,+t,0);},CSProto.ControlAVTransR.addSubtitle=function(e,t){e.addFieldInt8(5,+t,0);},CSProto.ControlAVTransR.endControlAVTransR=function(e){return e.endObject();},CSProto.ControlIFrame=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlIFrame.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlIFrame.getRootAsControlIFrame=function(e,t){return(t||new CSProto.ControlIFrame()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlIFrame.prototype.reserved=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):0;},CSProto.ControlIFrame.startControlIFrame=function(e){e.startObject(1);},CSProto.ControlIFrame.addReserved=function(e,t){e.addFieldInt8(0,t,0);},CSProto.ControlIFrame.endControlIFrame=function(e){return e.endObject();},CSProto.ControlAudio=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlAudio.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlAudio.getRootAsControlAudio=function(e,t){return(t||new CSProto.ControlAudio()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlAudio.prototype.mode=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ControlAudio.prototype.bitrate=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint32(this.bb_pos+e):131072;},CSProto.ControlAudio.prototype.smprate=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint32(this.bb_pos+e):44100;},CSProto.ControlAudio.prototype.channel=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint8(this.bb_pos+e):2;},CSProto.ControlAudio.prototype.mute=function(){var e=this.bb.__offset(this.bb_pos,12);return!!e&&!!this.bb.readInt8(this.bb_pos+e);},CSProto.ControlAudio.startControlAudio=function(e){e.startObject(5);},CSProto.ControlAudio.addMode=function(e,t){e.addFieldInt8(0,t,0);},CSProto.ControlAudio.addBitrate=function(e,t){e.addFieldInt32(1,t,131072);},CSProto.ControlAudio.addSmprate=function(e,t){e.addFieldInt32(2,t,44100);},CSProto.ControlAudio.addChannel=function(e,t){e.addFieldInt8(3,t,2);},CSProto.ControlAudio.addMute=function(e,t){e.addFieldInt8(4,+t,0);},CSProto.ControlAudio.endControlAudio=function(e){return e.endObject();},CSProto.ControlAudioR=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlAudioR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlAudioR.getRootAsControlAudioR=function(e,t){return(t||new CSProto.ControlAudioR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlAudioR.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlAudioR.prototype.msg=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlAudioR.prototype.profile=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ControlAudioR.prototype.channel=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint8(this.bb_pos+e):2;},CSProto.ControlAudioR.prototype.smprate=function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint32(this.bb_pos+e):44100;},CSProto.ControlAudioR.prototype.bitrate=function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint32(this.bb_pos+e):131072;},CSProto.ControlAudioR.prototype.mute=function(){var e=this.bb.__offset(this.bb_pos,16);return!!e&&!!this.bb.readInt8(this.bb_pos+e);},CSProto.ControlAudioR.startControlAudioR=function(e){e.startObject(7);},CSProto.ControlAudioR.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ControlAudioR.addMsg=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ControlAudioR.addProfile=function(e,t){e.addFieldInt8(2,t,0);},CSProto.ControlAudioR.addChannel=function(e,t){e.addFieldInt8(3,t,2);},CSProto.ControlAudioR.addSmprate=function(e,t){e.addFieldInt32(4,t,44100);},CSProto.ControlAudioR.addBitrate=function(e,t){e.addFieldInt32(5,t,131072);},CSProto.ControlAudioR.addMute=function(e,t){e.addFieldInt8(6,+t,0);},CSProto.ControlAudioR.endControlAudioR=function(e){return e.endObject();},CSProto.ControlVideo=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlVideo.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlVideo.getRootAsControlVideo=function(e,t){return(t||new CSProto.ControlVideo()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlVideo.prototype.mode=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ControlVideo.prototype.bitrate=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint32(this.bb_pos+e):5242880;},CSProto.ControlVideo.prototype.fps=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint32(this.bb_pos+e):30;},CSProto.ControlVideo.prototype.maxiframe=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint32(this.bb_pos+e):100;},CSProto.ControlVideo.startControlVideo=function(e){e.startObject(4);},CSProto.ControlVideo.addMode=function(e,t){e.addFieldInt8(0,t,0);},CSProto.ControlVideo.addBitrate=function(e,t){e.addFieldInt32(1,t,5242880);},CSProto.ControlVideo.addFps=function(e,t){e.addFieldInt32(2,t,30);},CSProto.ControlVideo.addMaxiframe=function(e,t){e.addFieldInt32(3,t,100);},CSProto.ControlVideo.endControlVideo=function(e){return e.endObject();},CSProto.ControlVideoR=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlVideoR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlVideoR.getRootAsControlVideoR=function(e,t){return(t||new CSProto.ControlVideoR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlVideoR.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlVideoR.prototype.msg=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlVideoR.prototype.profile=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ControlVideoR.prototype.width=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint16(this.bb_pos+e):1024;},CSProto.ControlVideoR.prototype.height=function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint16(this.bb_pos+e):576;},CSProto.ControlVideoR.prototype.fps=function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint16(this.bb_pos+e):30;},CSProto.ControlVideoR.prototype.bitrate=function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint32(this.bb_pos+e):5242880;},CSProto.ControlVideoR.prototype.bitmode=function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ControlVideoR.prototype.maxidr=function(){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlVideoR.prototype.minidr=function(){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlVideoR.startControlVideoR=function(e){e.startObject(10);},CSProto.ControlVideoR.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ControlVideoR.addMsg=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ControlVideoR.addProfile=function(e,t){e.addFieldInt8(2,t,0);},CSProto.ControlVideoR.addWidth=function(e,t){e.addFieldInt16(3,t,1024);},CSProto.ControlVideoR.addHeight=function(e,t){e.addFieldInt16(4,t,576);},CSProto.ControlVideoR.addFps=function(e,t){e.addFieldInt16(5,t,30);},CSProto.ControlVideoR.addBitrate=function(e,t){e.addFieldInt32(6,t,5242880);},CSProto.ControlVideoR.addBitmode=function(e,t){e.addFieldInt8(7,t,0);},CSProto.ControlVideoR.addMaxidr=function(e,t){e.addFieldInt32(8,t,0);},CSProto.ControlVideoR.addMinidr=function(e,t){e.addFieldInt32(9,t,0);},CSProto.ControlVideoR.endControlVideoR=function(e){return e.endObject();},CSProto.ControlScreen=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlScreen.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlScreen.getRootAsControlScreen=function(e,t){return(t||new CSProto.ControlScreen()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlScreen.prototype.zoom=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.ControlScreen.startControlScreen=function(e){e.startObject(1);},CSProto.ControlScreen.addZoom=function(e,t){e.addFieldFloat32(0,t,0);},CSProto.ControlScreen.endControlScreen=function(e){return e.endObject();},CSProto.ControlTime=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlTime.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlTime.getRootAsControlTime=function(e,t){return(t||new CSProto.ControlTime()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlTime.prototype.time=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlTime.startControlTime=function(e){e.startObject(1);},CSProto.ControlTime.addTime=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ControlTime.endControlTime=function(e){return e.endObject();},CSProto.ControlRunScript=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlRunScript.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlRunScript.getRootAsControlRunScript=function(e,t){return(t||new CSProto.ControlRunScript()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlRunScript.prototype.executeorder=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlRunScript.prototype.devcommond=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlRunScript.prototype.vmcommond=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlRunScript.startControlRunScript=function(e){e.startObject(3);},CSProto.ControlRunScript.addExecuteorder=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ControlRunScript.addDevcommond=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ControlRunScript.addVmcommond=function(e,t){e.addFieldOffset(2,t,0);},CSProto.ControlRunScript.endControlRunScript=function(e){return e.endObject();},CSProto.ControlRunScriptR=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlRunScriptR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlRunScriptR.getRootAsControlRunScriptR=function(e,t){return(t||new CSProto.ControlRunScriptR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlRunScriptR.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlRunScriptR.prototype.msg=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlRunScriptR.startControlRunScriptR=function(e){e.startObject(2);},CSProto.ControlRunScriptR.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ControlRunScriptR.addMsg=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ControlRunScriptR.endControlRunScriptR=function(e){return e.endObject();},CSProto.ControlStatsReport=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlStatsReport.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlStatsReport.getRootAsControlStatsReport=function(e,t){return(t||new CSProto.ControlStatsReport()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlStatsReport.prototype.req=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlStatsReport.startControlStatsReport=function(e){e.startObject(1);},CSProto.ControlStatsReport.addReq=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ControlStatsReport.endControlStatsReport=function(e){return e.endObject();},CSProto.ControlStatsReportR=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlStatsReportR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlStatsReportR.getRootAsControlStatsReportR=function(e,t){return(t||new CSProto.ControlStatsReportR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlStatsReportR.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlStatsReportR.prototype.str=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlStatsReportR.startControlStatsReportR=function(e){e.startObject(2);},CSProto.ControlStatsReportR.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ControlStatsReportR.addStr=function(e,t){e.addFieldOffset(1,t,0);},CSProto.ControlStatsReportR.endControlStatsReportR=function(e){return e.endObject();},CSProto.InputString=function(){this.bb=null,this.bb_pos=0;},CSProto.InputString.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputString.getRootAsInputString=function(e,t){return(t||new CSProto.InputString()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputString.prototype.str=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.InputString.startInputString=function(e){e.startObject(1);},CSProto.InputString.addStr=function(e,t){e.addFieldOffset(0,t,0);},CSProto.InputString.endInputString=function(e){return e.endObject();},CSProto.InputGameController=function(){this.bb=null,this.bb_pos=0;},CSProto.InputGameController.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputGameController.getRootAsInputGameController=function(e,t){return(t||new CSProto.InputGameController()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputGameController.prototype.index=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.InputGameController.prototype.buttons=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint16(this.bb_pos+e):0;},CSProto.InputGameController.prototype.lt=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.InputGameController.prototype.rt=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.InputGameController.prototype.lx=function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt16(this.bb_pos+e):0;},CSProto.InputGameController.prototype.ly=function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt16(this.bb_pos+e):0;},CSProto.InputGameController.prototype.rx=function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt16(this.bb_pos+e):0;},CSProto.InputGameController.prototype.ry=function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readInt16(this.bb_pos+e):0;},CSProto.InputGameController.startInputGameController=function(e){e.startObject(8);},CSProto.InputGameController.addIndex=function(e,t){e.addFieldInt8(0,t,0);},CSProto.InputGameController.addButtons=function(e,t){e.addFieldInt16(1,t,0);},CSProto.InputGameController.addLt=function(e,t){e.addFieldInt8(2,t,0);},CSProto.InputGameController.addRt=function(e,t){e.addFieldInt8(3,t,0);},CSProto.InputGameController.addLx=function(e,t){e.addFieldInt16(4,t,0);},CSProto.InputGameController.addLy=function(e,t){e.addFieldInt16(5,t,0);},CSProto.InputGameController.addRx=function(e,t){e.addFieldInt16(6,t,0);},CSProto.InputGameController.addRy=function(e,t){e.addFieldInt16(7,t,0);},CSProto.InputGameController.endInputGameController=function(e){return e.endObject();},CSProto.InputKeyboard=function(){this.bb=null,this.bb_pos=0;},CSProto.InputKeyboard.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputKeyboard.getRootAsInputKeyboard=function(e,t){return(t||new CSProto.InputKeyboard()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputKeyboard.prototype.key=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.InputKeyboard.prototype.pressed=function(){var e=this.bb.__offset(this.bb_pos,6);return!!e&&!!this.bb.readInt8(this.bb_pos+e);},CSProto.InputKeyboard.startInputKeyboard=function(e){e.startObject(2);},CSProto.InputKeyboard.addKey=function(e,t){e.addFieldInt8(0,t,0);},CSProto.InputKeyboard.addPressed=function(e,t){e.addFieldInt8(1,+t,0);},CSProto.InputKeyboard.endInputKeyboard=function(e){return e.endObject();},CSProto.InputMouseKey=function(){this.bb=null,this.bb_pos=0;},CSProto.InputMouseKey.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputMouseKey.getRootAsInputMouseKey=function(e,t){return(t||new CSProto.InputMouseKey()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputMouseKey.prototype.key=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.InputMouseKey.prototype.pressed=function(){var e=this.bb.__offset(this.bb_pos,6);return!!e&&!!this.bb.readInt8(this.bb_pos+e);},CSProto.InputMouseKey.startInputMouseKey=function(e){e.startObject(2);},CSProto.InputMouseKey.addKey=function(e,t){e.addFieldInt8(0,t,0);},CSProto.InputMouseKey.addPressed=function(e,t){e.addFieldInt8(1,+t,0);},CSProto.InputMouseKey.endInputMouseKey=function(e){return e.endObject();},CSProto.InputMouseWheel=function(){this.bb=null,this.bb_pos=0;},CSProto.InputMouseWheel.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputMouseWheel.getRootAsInputMouseWheel=function(e,t){return(t||new CSProto.InputMouseWheel()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputMouseWheel.prototype.x=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):0;},CSProto.InputMouseWheel.prototype.y=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt16(this.bb_pos+e):0;},CSProto.InputMouseWheel.startInputMouseWheel=function(e){e.startObject(2);},CSProto.InputMouseWheel.addX=function(e,t){e.addFieldInt16(0,t,0);},CSProto.InputMouseWheel.addY=function(e,t){e.addFieldInt16(1,t,0);},CSProto.InputMouseWheel.endInputMouseWheel=function(e){return e.endObject();},CSProto.InputMouseMove=function(){this.bb=null,this.bb_pos=0;},CSProto.InputMouseMove.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputMouseMove.getRootAsInputMouseMove=function(e,t){return(t||new CSProto.InputMouseMove()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputMouseMove.prototype.x=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):0;},CSProto.InputMouseMove.prototype.y=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt16(this.bb_pos+e):0;},CSProto.InputMouseMove.startInputMouseMove=function(e){e.startObject(2);},CSProto.InputMouseMove.addX=function(e,t){e.addFieldInt16(0,t,0);},CSProto.InputMouseMove.addY=function(e,t){e.addFieldInt16(1,t,0);},CSProto.InputMouseMove.endInputMouseMove=function(e){return e.endObject();},CSProto.InputCursor=function(){this.bb=null,this.bb_pos=0;},CSProto.InputCursor.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputCursor.getRootAsInputCursor=function(e,t){return(t||new CSProto.InputCursor()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputCursor.prototype.x=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputCursor.prototype.y=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputCursor.startInputCursor=function(e){e.startObject(2);},CSProto.InputCursor.addX=function(e,t){e.addFieldFloat32(0,t,0);},CSProto.InputCursor.addY=function(e,t){e.addFieldFloat32(1,t,0);},CSProto.InputCursor.endInputCursor=function(e){return e.endObject();},CSProto.TouchInfo=function(){this.bb=null,this.bb_pos=0;},CSProto.TouchInfo.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.TouchInfo.prototype.x=function(){return this.bb.readInt32(this.bb_pos);},CSProto.TouchInfo.prototype.y=function(){return this.bb.readInt32(this.bb_pos+4);},CSProto.TouchInfo.prototype.force=function(){return this.bb.readFloat32(this.bb_pos+8);},CSProto.TouchInfo.createTouchInfo=function(e,t,r,n){return e.prep(4,12),e.writeFloat32(n),e.writeInt32(r),e.writeInt32(t),e.offset();},CSProto.InputTouch=function(){this.bb=null,this.bb_pos=0;},CSProto.InputTouch.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputTouch.getRootAsInputTouch=function(e,t){return(t||new CSProto.InputTouch()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputTouch.prototype.index=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.InputTouch.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.InputTouch.prototype.touch=function(e,t){var r=this.bb.__offset(this.bb_pos,8);return r?(t||new CSProto.TouchInfo()).__init(this.bb.__vector(this.bb_pos+r)+12*e,this.bb):null;},CSProto.InputTouch.prototype.touchLength=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0;},CSProto.InputTouch.startInputTouch=function(e){e.startObject(3);},CSProto.InputTouch.addIndex=function(e,t){e.addFieldInt32(0,t,0);},CSProto.InputTouch.addType=function(e,t){e.addFieldInt8(1,t,0);},CSProto.InputTouch.addTouch=function(e,t){e.addFieldOffset(2,t,0);},CSProto.InputTouch.startTouchVector=function(e,t){e.startVector(12,t,4);},CSProto.InputTouch.endInputTouch=function(e){return e.endObject();},CSProto.InputLocation=function(){this.bb=null,this.bb_pos=0;},CSProto.InputLocation.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputLocation.getRootAsInputLocation=function(e,t){return(t||new CSProto.InputLocation()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputLocation.prototype.longitude=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputLocation.prototype.latitude=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputLocation.prototype.altitude=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputLocation.prototype.floor=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputLocation.prototype.horizontalaccuracy=function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputLocation.prototype.verticalaccuracy=function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputLocation.prototype.speed=function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputLocation.prototype.direction=function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputLocation.prototype.timestamp=function(e){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.InputLocation.startInputLocation=function(e){e.startObject(9);},CSProto.InputLocation.addLongitude=function(e,t){e.addFieldFloat32(0,t,0);},CSProto.InputLocation.addLatitude=function(e,t){e.addFieldFloat32(1,t,0);},CSProto.InputLocation.addAltitude=function(e,t){e.addFieldFloat32(2,t,0);},CSProto.InputLocation.addFloor=function(e,t){e.addFieldFloat32(3,t,0);},CSProto.InputLocation.addHorizontalaccuracy=function(e,t){e.addFieldFloat32(4,t,0);},CSProto.InputLocation.addVerticalaccuracy=function(e,t){e.addFieldFloat32(5,t,0);},CSProto.InputLocation.addSpeed=function(e,t){e.addFieldFloat32(6,t,0);},CSProto.InputLocation.addDirection=function(e,t){e.addFieldFloat32(7,t,0);},CSProto.InputLocation.addTimestamp=function(e,t){e.addFieldOffset(8,t,0);},CSProto.InputLocation.endInputLocation=function(e){return e.endObject();},CSProto.InputAccelerometer=function(){this.bb=null,this.bb_pos=0;},CSProto.InputAccelerometer.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputAccelerometer.getRootAsInputAccelerometer=function(e,t){return(t||new CSProto.InputAccelerometer()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputAccelerometer.prototype.x=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputAccelerometer.prototype.y=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputAccelerometer.prototype.z=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputAccelerometer.startInputAccelerometer=function(e){e.startObject(3);},CSProto.InputAccelerometer.addX=function(e,t){e.addFieldFloat32(0,t,0);},CSProto.InputAccelerometer.addY=function(e,t){e.addFieldFloat32(1,t,0);},CSProto.InputAccelerometer.addZ=function(e,t){e.addFieldFloat32(2,t,0);},CSProto.InputAccelerometer.endInputAccelerometer=function(e){return e.endObject();},CSProto.InputAltimeter=function(){this.bb=null,this.bb_pos=0;},CSProto.InputAltimeter.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputAltimeter.getRootAsInputAltimeter=function(e,t){return(t||new CSProto.InputAltimeter()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputAltimeter.prototype.altitude=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputAltimeter.prototype.pressure=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputAltimeter.startInputAltimeter=function(e){e.startObject(2);},CSProto.InputAltimeter.addAltitude=function(e,t){e.addFieldFloat32(0,t,0);},CSProto.InputAltimeter.addPressure=function(e,t){e.addFieldFloat32(1,t,0);},CSProto.InputAltimeter.endInputAltimeter=function(e){return e.endObject();},CSProto.InputGyro=function(){this.bb=null,this.bb_pos=0;},CSProto.InputGyro.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputGyro.getRootAsInputGyro=function(e,t){return(t||new CSProto.InputGyro()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputGyro.prototype.x=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputGyro.prototype.y=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputGyro.prototype.z=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputGyro.startInputGyro=function(e){e.startObject(3);},CSProto.InputGyro.addX=function(e,t){e.addFieldFloat32(0,t,0);},CSProto.InputGyro.addY=function(e,t){e.addFieldFloat32(1,t,0);},CSProto.InputGyro.addZ=function(e,t){e.addFieldFloat32(2,t,0);},CSProto.InputGyro.endInputGyro=function(e){return e.endObject();},CSProto.InputMagnetometer=function(){this.bb=null,this.bb_pos=0;},CSProto.InputMagnetometer.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputMagnetometer.getRootAsInputMagnetometer=function(e,t){return(t||new CSProto.InputMagnetometer()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputMagnetometer.prototype.x=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputMagnetometer.prototype.y=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputMagnetometer.prototype.z=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputMagnetometer.startInputMagnetometer=function(e){e.startObject(3);},CSProto.InputMagnetometer.addX=function(e,t){e.addFieldFloat32(0,t,0);},CSProto.InputMagnetometer.addY=function(e,t){e.addFieldFloat32(1,t,0);},CSProto.InputMagnetometer.addZ=function(e,t){e.addFieldFloat32(2,t,0);},CSProto.InputMagnetometer.endInputMagnetometer=function(e){return e.endObject();},CSProto.InputPedometer=function(){this.bb=null,this.bb_pos=0;},CSProto.InputPedometer.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputPedometer.getRootAsInputPedometer=function(e,t){return(t||new CSProto.InputPedometer()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputPedometer.prototype.startdate=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.InputPedometer.prototype.enddate=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.InputPedometer.prototype.steps=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputPedometer.prototype.distance=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputPedometer.prototype.averageactivepace=function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputPedometer.prototype.currentpace=function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputPedometer.prototype.currentcadence=function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputPedometer.prototype.floorsasc=function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputPedometer.prototype.floorsdes=function(){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputPedometer.startInputPedometer=function(e){e.startObject(9);},CSProto.InputPedometer.addStartdate=function(e,t){e.addFieldOffset(0,t,0);},CSProto.InputPedometer.addEnddate=function(e,t){e.addFieldOffset(1,t,0);},CSProto.InputPedometer.addSteps=function(e,t){e.addFieldFloat32(2,t,0);},CSProto.InputPedometer.addDistance=function(e,t){e.addFieldFloat32(3,t,0);},CSProto.InputPedometer.addAverageactivepace=function(e,t){e.addFieldFloat32(4,t,0);},CSProto.InputPedometer.addCurrentpace=function(e,t){e.addFieldFloat32(5,t,0);},CSProto.InputPedometer.addCurrentcadence=function(e,t){e.addFieldFloat32(6,t,0);},CSProto.InputPedometer.addFloorsasc=function(e,t){e.addFieldFloat32(7,t,0);},CSProto.InputPedometer.addFloorsdes=function(e,t){e.addFieldFloat32(8,t,0);},CSProto.InputPedometer.endInputPedometer=function(e){return e.endObject();},CSProto.InputProximity=function(){this.bb=null,this.bb_pos=0;},CSProto.InputProximity.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputProximity.getRootAsInputProximity=function(e,t){return(t||new CSProto.InputProximity()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputProximity.prototype.proximity=function(){var e=this.bb.__offset(this.bb_pos,4);return!!e&&!!this.bb.readInt8(this.bb_pos+e);},CSProto.InputProximity.startInputProximity=function(e){e.startObject(1);},CSProto.InputProximity.addProximity=function(e,t){e.addFieldInt8(0,+t,0);},CSProto.InputProximity.endInputProximity=function(e){return e.endObject();},CSProto.InputAmbientLight=function(){this.bb=null,this.bb_pos=0;},CSProto.InputAmbientLight.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputAmbientLight.getRootAsInputAmbientLight=function(e,t){return(t||new CSProto.InputAmbientLight()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputAmbientLight.prototype.reserved=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputAmbientLight.startInputAmbientLight=function(e){e.startObject(1);},CSProto.InputAmbientLight.addReserved=function(e,t){e.addFieldFloat32(0,t,0);},CSProto.InputAmbientLight.endInputAmbientLight=function(e){return e.endObject();},CSProto.InputTemperature=function(){this.bb=null,this.bb_pos=0;},CSProto.InputTemperature.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputTemperature.getRootAsInputTemperature=function(e,t){return(t||new CSProto.InputTemperature()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputTemperature.prototype.temperature=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputTemperature.startInputTemperature=function(e){e.startObject(1);},CSProto.InputTemperature.addTemperature=function(e,t){e.addFieldFloat32(0,t,0);},CSProto.InputTemperature.endInputTemperature=function(e){return e.endObject();},CSProto.InputMoisture=function(){this.bb=null,this.bb_pos=0;},CSProto.InputMoisture.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputMoisture.getRootAsInputMoisture=function(e,t){return(t||new CSProto.InputMoisture()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputMoisture.prototype.moisture=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputMoisture.startInputMoisture=function(e){e.startObject(1);},CSProto.InputMoisture.addMoisture=function(e,t){e.addFieldFloat32(0,t,0);},CSProto.InputMoisture.endInputMoisture=function(e){return e.endObject();},CSProto.ControlInput=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlInput.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlInput.getRootAsControlInput=function(e,t){return(t||new CSProto.ControlInput()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlInput.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlInput.prototype.state=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ControlInput.prototype.width=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint16(this.bb_pos+e):0;},CSProto.ControlInput.prototype.height=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint16(this.bb_pos+e):0;},CSProto.ControlInput.prototype.samples=function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlInput.startControlInput=function(e){e.startObject(5);},CSProto.ControlInput.addType=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ControlInput.addState=function(e,t){e.addFieldInt8(1,t,0);},CSProto.ControlInput.addWidth=function(e,t){e.addFieldInt16(2,t,0);},CSProto.ControlInput.addHeight=function(e,t){e.addFieldInt16(3,t,0);},CSProto.ControlInput.addSamples=function(e,t){e.addFieldInt32(4,t,0);},CSProto.ControlInput.endControlInput=function(e){return e.endObject();},CSProto.OutputString=function(){this.bb=null,this.bb_pos=0;},CSProto.OutputString.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.OutputString.getRootAsOutputString=function(e,t){return(t||new CSProto.OutputString()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.OutputString.prototype.msg=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.OutputString.startOutputString=function(e){e.startObject(1);},CSProto.OutputString.addMsg=function(e,t){e.addFieldOffset(0,t,0);},CSProto.OutputString.endOutputString=function(e){return e.endObject();},CSProto.OutputScreen=function(){this.bb=null,this.bb_pos=0;},CSProto.OutputScreen.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.OutputScreen.getRootAsOutputScreen=function(e,t){return(t||new CSProto.OutputScreen()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.OutputScreen.prototype.rotation=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):0;},CSProto.OutputScreen.prototype.width=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint16(this.bb_pos+e):1280;},CSProto.OutputScreen.prototype.height=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint16(this.bb_pos+e):720;},CSProto.OutputScreen.prototype.fps=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint16(this.bb_pos+e):60;};CSProto.OutputScreen.startOutputScreen=function(e){e.startObject(4);},CSProto.OutputScreen.addRotation=function(e,t){e.addFieldInt8(0,t,0);},CSProto.OutputScreen.addWidth=function(e,t){e.addFieldInt16(1,t,1280);},CSProto.OutputScreen.addHeight=function(e,t){e.addFieldInt16(2,t,720);},CSProto.OutputScreen.addFps=function(e,t){e.addFieldInt16(3,t,60);},CSProto.OutputScreen.endOutputScreen=function(e){return e.endObject();},CSProto.OutputVibration=function(){this.bb=null,this.bb_pos=0;},CSProto.OutputVibration.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.OutputVibration.getRootAsOutputVibration=function(e,t){return(t||new CSProto.OutputVibration()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.OutputVibration.prototype.l=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint16(this.bb_pos+e):0;},CSProto.OutputVibration.prototype.r=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint16(this.bb_pos+e):0;},CSProto.OutputVibration.startOutputVibration=function(e){e.startObject(2);},CSProto.OutputVibration.addL=function(e,t){e.addFieldInt16(0,t,0);},CSProto.OutputVibration.addR=function(e,t){e.addFieldInt16(1,t,0);},CSProto.OutputVibration.endOutputVibration=function(e){return e.endObject();},CSProto.OutputCursor=function(){this.bb=null,this.bb_pos=0;},CSProto.OutputCursor.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.OutputCursor.getRootAsOutputCursor=function(e,t){return(t||new CSProto.OutputCursor()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.OutputCursor.prototype.x=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.OutputCursor.prototype.y=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.OutputCursor.prototype.opt=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.OutputCursor.startOutputCursor=function(e){e.startObject(3);},CSProto.OutputCursor.addX=function(e,t){e.addFieldFloat32(0,t,0);},CSProto.OutputCursor.addY=function(e,t){e.addFieldFloat32(1,t,0);},CSProto.OutputCursor.addOpt=function(e,t){e.addFieldInt32(2,t,0);},CSProto.OutputCursor.endOutputCursor=function(e){return e.endObject();},CSProto.AVAudio=function(){this.bb=null,this.bb_pos=0;},CSProto.AVAudio.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.AVAudio.getRootAsAVAudio=function(e,t){return(t||new CSProto.AVAudio()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.AVAudio.prototype.data=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb.__vector(this.bb_pos+t)+e):0;},CSProto.AVAudio.prototype.dataLength=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0;},CSProto.AVAudio.prototype.dataArray=function(){var e=this.bb.__offset(this.bb_pos,4);return e?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null;},CSProto.AVAudio.startAVAudio=function(e){e.startObject(1);},CSProto.AVAudio.addData=function(e,t){e.addFieldOffset(0,t,0);},CSProto.AVAudio.createDataVector=function(e,t){e.startVector(1,t.length,1);for(var r=t.length-1;r>=0;r--)e.addInt8(t[r]);return e.endVector();},CSProto.AVAudio.startDataVector=function(e,t){e.startVector(1,t,1);},CSProto.AVAudio.endAVAudio=function(e){return e.endObject();},CSProto.AVVideo=function(){this.bb=null,this.bb_pos=0;},CSProto.AVVideo.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.AVVideo.getRootAsAVVideo=function(e,t){return(t||new CSProto.AVVideo()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.AVVideo.prototype.data=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb.__vector(this.bb_pos+t)+e):0;},CSProto.AVVideo.prototype.dataLength=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0;},CSProto.AVVideo.prototype.dataArray=function(){var e=this.bb.__offset(this.bb_pos,4);return e?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null;},CSProto.AVVideo.startAVVideo=function(e){e.startObject(1);},CSProto.AVVideo.addData=function(e,t){e.addFieldOffset(0,t,0);},CSProto.AVVideo.createDataVector=function(e,t){e.startVector(1,t.length,1);for(var r=t.length-1;r>=0;r--)e.addInt8(t[r]);return e.endVector();},CSProto.AVVideo.startDataVector=function(e,t){e.startVector(1,t,1);},CSProto.AVVideo.endAVVideo=function(e){return e.endObject();},CSProto.AVSubTitle=function(){this.bb=null,this.bb_pos=0;},CSProto.AVSubTitle.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.AVSubTitle.getRootAsAVSubTitle=function(e,t){return(t||new CSProto.AVSubTitle()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.AVSubTitle.prototype.data=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.AVSubTitle.startAVSubTitle=function(e){e.startObject(1);},CSProto.AVSubTitle.addData=function(e,t){e.addFieldOffset(0,t,0);},CSProto.AVSubTitle.endAVSubTitle=function(e){return e.endObject();},CSProto.AuthList=function(){this.bb=null,this.bb_pos=0;},CSProto.AuthList.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.AuthList.getRootAsAuthList=function(e,t){return(t||new CSProto.AuthList()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.AuthList.prototype.data=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.AuthList.prototype.errorcode=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.AuthList.startAuthList=function(e){e.startObject(2);},CSProto.AuthList.addData=function(e,t){e.addFieldOffset(0,t,0);},CSProto.AuthList.addErrorcode=function(e,t){e.addFieldInt32(1,t,0);},CSProto.AuthList.endAuthList=function(e){return e.endObject();},CSProto.ResolutionLevel=function(){this.bb=null,this.bb_pos=0;},CSProto.ResolutionLevel.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ResolutionLevel.getRootAsResolutionLevel=function(e,t){return(t||new CSProto.ResolutionLevel()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ResolutionLevel.prototype.level=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):2;},CSProto.ResolutionLevel.prototype.width=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint16(this.bb_pos+e):480;},CSProto.ResolutionLevel.prototype.height=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint16(this.bb_pos+e):800;},CSProto.ResolutionLevel.startResolutionLevel=function(e){e.startObject(3);},CSProto.ResolutionLevel.addLevel=function(e,t){e.addFieldInt32(0,t,2);},CSProto.ResolutionLevel.addWidth=function(e,t){e.addFieldInt16(1,t,480);},CSProto.ResolutionLevel.addHeight=function(e,t){e.addFieldInt16(2,t,800);},CSProto.ResolutionLevel.endResolutionLevel=function(e){return e.endObject();},CSProto.InputClipper=function(){this.bb=null,this.bb_pos=0;},CSProto.InputClipper.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputClipper.getRootAsInputClipper=function(e,t){return(t||new CSProto.InputClipper()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputClipper.prototype.str=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.InputClipper.prototype.autoPaste=function(){var e=this.bb.__offset(this.bb_pos,6);return!e||!!this.bb.readInt8(this.bb_pos+e);},CSProto.InputClipper.startInputClipper=function(e){e.startObject(2);},CSProto.InputClipper.addStr=function(e,t){e.addFieldOffset(0,t,0);},CSProto.InputClipper.addAutoPaste=function(e,t){e.addFieldInt8(1,+t,1);},CSProto.InputClipper.endInputClipper=function(e){return e.endObject();},CSProto.InputClipperR=function(){this.bb=null,this.bb_pos=0;},CSProto.InputClipperR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputClipperR.getRootAsInputClipperR=function(e,t){return(t||new CSProto.InputClipperR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputClipperR.prototype.code=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.InputClipperR.startInputClipperR=function(e){e.startObject(1);},CSProto.InputClipperR.addCode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.InputClipperR.endInputClipperR=function(e){return e.endObject();},CSProto.InputGravity=function(){this.bb=null,this.bb_pos=0;},CSProto.InputGravity.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputGravity.getRootAsInputGravity=function(e,t){return(t||new CSProto.InputGravity()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputGravity.prototype.x=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputGravity.prototype.y=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputGravity.prototype.z=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat32(this.bb_pos+e):0;},CSProto.InputGravity.startInputGravity=function(e){e.startObject(3);},CSProto.InputGravity.addX=function(e,t){e.addFieldFloat32(0,t,0);},CSProto.InputGravity.addY=function(e,t){e.addFieldFloat32(1,t,0);},CSProto.InputGravity.addZ=function(e,t){e.addFieldFloat32(2,t,0);},CSProto.InputGravity.endInputGravity=function(e){return e.endObject();},CSProto.TransparentMsg=function(){this.bb=null,this.bb_pos=0;},CSProto.TransparentMsg.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.TransparentMsg.getRootAsTransparentMsg=function(e,t){return(t||new CSProto.TransparentMsg()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.TransparentMsg.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.TransparentMsg.prototype.data=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.TransparentMsg.prototype.service=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.TransparentMsg.startTransparentMsg=function(e){e.startObject(3);},CSProto.TransparentMsg.addType=function(e,t){e.addFieldInt32(0,t,0);},CSProto.TransparentMsg.addData=function(e,t){e.addFieldOffset(1,t,0);},CSProto.TransparentMsg.addService=function(e,t){e.addFieldOffset(2,t,0);},CSProto.TransparentMsg.endTransparentMsg=function(e){return e.endObject();},CSProto.TransparentMsgR=function(){this.bb=null,this.bb_pos=0;},CSProto.TransparentMsgR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.TransparentMsgR.getRootAsTransparentMsgR=function(e,t){return(t||new CSProto.TransparentMsgR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.TransparentMsgR.prototype.result=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.TransparentMsgR.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.TransparentMsgR.prototype.service=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.TransparentMsgR.startTransparentMsgR=function(e){e.startObject(3);},CSProto.TransparentMsgR.addResult=function(e,t){e.addFieldInt32(0,t,0);},CSProto.TransparentMsgR.addType=function(e,t){e.addFieldInt32(1,t,0);},CSProto.TransparentMsgR.addService=function(e,t){e.addFieldOffset(2,t,0);},CSProto.TransparentMsgR.endTransparentMsgR=function(e){return e.endObject();},CSProto.OutputFileUrl=function(){this.bb=null,this.bb_pos=0;},CSProto.OutputFileUrl.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.OutputFileUrl.getRootAsOutputFileUrl=function(e,t){return(t||new CSProto.OutputFileUrl()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.OutputFileUrl.prototype.pictureFileURL=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.OutputFileUrl.prototype.pictureFileName=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.OutputFileUrl.prototype.pictureLen=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.OutputFileUrl.startOutputFileUrl=function(e){e.startObject(3);},CSProto.OutputFileUrl.addPictureFileURL=function(e,t){e.addFieldOffset(0,t,0);},CSProto.OutputFileUrl.addPictureFileName=function(e,t){e.addFieldOffset(1,t,0);},CSProto.OutputFileUrl.addPictureLen=function(e,t){e.addFieldInt32(2,t,0);},CSProto.OutputFileUrl.endOutputFileUrl=function(e){return e.endObject();},CSProto.SetScreenShot=function(){this.bb=null,this.bb_pos=0;},CSProto.SetScreenShot.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.SetScreenShot.getRootAsSetScreenShot=function(e,t){return(t||new CSProto.SetScreenShot()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.SetScreenShot.prototype.mode=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.SetScreenShot.startSetScreenShot=function(e){e.startObject(1);},CSProto.SetScreenShot.addMode=function(e,t){e.addFieldInt32(0,t,0);},CSProto.SetScreenShot.endSetScreenShot=function(e){return e.endObject();},CSProto.ControlSdkInformation=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlSdkInformation.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlSdkInformation.getRootAsControlSdkInformation=function(e,t){return(t||new CSProto.ControlSdkInformation()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlSdkInformation.prototype.data=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlSdkInformation.startControlSdkInformation=function(e){e.startObject(1);},CSProto.ControlSdkInformation.addData=function(e,t){e.addFieldOffset(0,t,0);},CSProto.ControlSdkInformation.endControlSdkInformation=function(e){return e.endObject();},CSProto.ControlSdkInformationR=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlSdkInformationR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlSdkInformationR.getRootAsControlSdkInformationR=function(e,t){return(t||new CSProto.ControlSdkInformationR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlSdkInformationR.prototype.data=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.ControlSdkInformationR.startControlSdkInformationR=function(e){e.startObject(1);},CSProto.ControlSdkInformationR.addData=function(e,t){e.addFieldOffset(0,t,0);},CSProto.ControlSdkInformationR.endControlSdkInformationR=function(e){return e.endObject();},CSProto.OutputBright=function(){this.bb=null,this.bb_pos=0;},CSProto.OutputBright.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.OutputBright.getRootAsOutputBright=function(e,t){return(t||new CSProto.OutputBright()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.OutputBright.prototype.bright=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb_pos+e):.5;},CSProto.OutputBright.startOutputBright=function(e){e.startObject(1);},CSProto.OutputBright.addBright=function(e,t){e.addFieldFloat32(0,t,.5);},CSProto.OutputBright.endOutputBright=function(e){return e.endObject();},CSProto.OutputVideoFileUrl=function(){this.bb=null,this.bb_pos=0;},CSProto.OutputVideoFileUrl.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.OutputVideoFileUrl.getRootAsOutputVideoFileUrl=function(e,t){return(t||new CSProto.OutputVideoFileUrl()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.OutputVideoFileUrl.prototype.fileURL=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.OutputVideoFileUrl.prototype.fileName=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.OutputVideoFileUrl.prototype.len=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.OutputVideoFileUrl.startOutputVideoFileUrl=function(e){e.startObject(3);},CSProto.OutputVideoFileUrl.addFileURL=function(e,t){e.addFieldOffset(0,t,0);},CSProto.OutputVideoFileUrl.addFileName=function(e,t){e.addFieldOffset(1,t,0);},CSProto.OutputVideoFileUrl.addLen=function(e,t){e.addFieldInt32(2,t,0);},CSProto.OutputVideoFileUrl.endOutputVideoFileUrl=function(e){return e.endObject();},CSProto.ControlAppEvent=function(){this.bb=null,this.bb_pos=0;},CSProto.ControlAppEvent.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ControlAppEvent.getRootAsControlAppEvent=function(e,t){return(t||new CSProto.ControlAppEvent()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ControlAppEvent.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ControlAppEvent.prototype.state=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):0;},CSProto.ControlAppEvent.startControlAppEvent=function(e){e.startObject(2);},CSProto.ControlAppEvent.addType=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ControlAppEvent.addState=function(e,t){e.addFieldInt8(1,t,0);},CSProto.ControlAppEvent.endControlAppEvent=function(e){return e.endObject();},CSProto.InputMouse=function(){this.bb=null,this.bb_pos=0;},CSProto.InputMouse.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.InputMouse.getRootAsInputMouse=function(e,t){return(t||new CSProto.InputMouse()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.InputMouse.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.InputMouse.prototype.pressed=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.InputMouse.prototype.relX=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.InputMouse.prototype.relY=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.InputMouse.prototype.wheel=function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.InputMouse.startInputMouse=function(e){e.startObject(5);},CSProto.InputMouse.addType=function(e,t){e.addFieldInt32(0,t,0);},CSProto.InputMouse.addPressed=function(e,t){e.addFieldInt32(1,t,0);},CSProto.InputMouse.addRelX=function(e,t){e.addFieldInt32(2,t,0);},CSProto.InputMouse.addRelY=function(e,t){e.addFieldInt32(3,t,0);},CSProto.InputMouse.addWheel=function(e,t){e.addFieldInt32(4,t,0);},CSProto.InputMouse.endInputMouse=function(e){return e.endObject();},CSProto.OutputCloudNotify=function(){this.bb=null,this.bb_pos=0;},CSProto.OutputCloudNotify.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.OutputCloudNotify.getRootAsOutputCloudNotify=function(e,t){return(t||new CSProto.OutputCloudNotify()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.OutputCloudNotify.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.OutputCloudNotify.prototype.msg=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.OutputCloudNotify.startOutputCloudNotify=function(e){e.startObject(2);},CSProto.OutputCloudNotify.addType=function(e,t){e.addFieldInt32(0,t,0);},CSProto.OutputCloudNotify.addMsg=function(e,t){e.addFieldOffset(1,t,0);},CSProto.OutputCloudNotify.endOutputCloudNotify=function(e){return e.endObject();},CSProto.OutputCloudPhoneEvent=function(){this.bb=null,this.bb_pos=0;},CSProto.OutputCloudPhoneEvent.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.OutputCloudPhoneEvent.getRootAsOutputCloudPhoneEvent=function(e,t){return(t||new CSProto.OutputCloudPhoneEvent()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.OutputCloudPhoneEvent.prototype.data=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.OutputCloudPhoneEvent.startOutputCloudPhoneEvent=function(e){e.startObject(1);},CSProto.OutputCloudPhoneEvent.addData=function(e,t){e.addFieldOffset(0,t,0);},CSProto.OutputCloudPhoneEvent.endOutputCloudPhoneEvent=function(e){return e.endObject();},CSProto.KeyboardSwitch=function(){this.bb=null,this.bb_pos=0;},CSProto.KeyboardSwitch.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.KeyboardSwitch.getRootAsKeyboardSwitch=function(e,t){return(t||new CSProto.KeyboardSwitch()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.KeyboardSwitch.prototype.sw=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.KeyboardSwitch.startKeyboardSwitch=function(e){e.startObject(1);},CSProto.KeyboardSwitch.addSw=function(e,t){e.addFieldInt32(0,t,0);},CSProto.KeyboardSwitch.endKeyboardSwitch=function(e){return e.endObject();},CSProto.NavBarState=function(){this.bb=null,this.bb_pos=0;},CSProto.NavBarState.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.NavBarState.getRootAsNavBarState=function(e,t){return(t||new CSProto.NavBarState()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.NavBarState.prototype.inspect=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.NavBarState.prototype.setnavbar=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.NavBarState.startNavBarState=function(e){e.startObject(2);},CSProto.NavBarState.addInspect=function(e,t){e.addFieldInt32(0,t,0);},CSProto.NavBarState.addSetnavbar=function(e,t){e.addFieldInt32(1,t,0);},CSProto.NavBarState.endNavBarState=function(e){return e.endObject();},CSProto.NavBarStateR=function(){this.bb=null,this.bb_pos=0;},CSProto.NavBarStateR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.NavBarStateR.getRootAsNavBarStateR=function(e,t){return(t||new CSProto.NavBarStateR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.NavBarStateR.prototype.navbarstate=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.NavBarStateR.startNavBarStateR=function(e){e.startObject(1);},CSProto.NavBarStateR.addNavbarstate=function(e,t){e.addFieldInt32(0,t,0);},CSProto.NavBarStateR.endNavBarStateR=function(e){return e.endObject();},CSProto.ActiveKeyBoard=function(){this.bb=null,this.bb_pos=0;},CSProto.ActiveKeyBoard.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ActiveKeyBoard.getRootAsActiveKeyBoard=function(e,t){return(t||new CSProto.ActiveKeyBoard()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ActiveKeyBoard.prototype.platform=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ActiveKeyBoard.prototype.active=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ActiveKeyBoard.startActiveKeyBoard=function(e){e.startObject(2);},CSProto.ActiveKeyBoard.addPlatform=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ActiveKeyBoard.addActive=function(e,t){e.addFieldInt32(1,t,0);},CSProto.ActiveKeyBoard.endActiveKeyBoard=function(e){return e.endObject();},CSProto.ActiveKeyBoardR=function(){this.bb=null,this.bb_pos=0;},CSProto.ActiveKeyBoardR.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.ActiveKeyBoardR.getRootAsActiveKeyBoardR=function(e,t){return(t||new CSProto.ActiveKeyBoardR()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.ActiveKeyBoardR.prototype.result=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.ActiveKeyBoardR.startActiveKeyBoardR=function(e){e.startObject(1);},CSProto.ActiveKeyBoardR.addResult=function(e,t){e.addFieldInt32(0,t,0);},CSProto.ActiveKeyBoardR.endActiveKeyBoardR=function(e){return e.endObject();},CSProto.TransMsgShake=function(){this.bb=null,this.bb_pos=0;},CSProto.TransMsgShake.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.TransMsgShake.getRootAsTransMsgShake=function(e,t){return(t||new CSProto.TransMsgShake()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.TransMsgShake.prototype.source=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.TransMsgShake.prototype.supportedEncryts=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.TransMsgShake.startTransMsgShake=function(e){e.startObject(2);},CSProto.TransMsgShake.addSource=function(e,t){e.addFieldInt32(0,t,0);},CSProto.TransMsgShake.addSupportedEncryts=function(e,t){e.addFieldOffset(1,t,0);},CSProto.TransMsgShake.endTransMsgShake=function(e){return e.endObject();},CSProto.TransMsgEncoded=function(){this.bb=null,this.bb_pos=0;},CSProto.TransMsgEncoded.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this;},CSProto.TransMsgEncoded.getRootAsTransMsgEncoded=function(e,t){return(t||new CSProto.TransMsgEncoded()).__init(e.readInt32(e.position())+e.position(),e);},CSProto.TransMsgEncoded.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.TransMsgEncoded.prototype.binderSvc=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.TransMsgEncoded.prototype.data=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null;},CSProto.TransMsgEncoded.prototype.encType=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):0;},CSProto.TransMsgEncoded.startTransMsgEncoded=function(e){e.startObject(4);},CSProto.TransMsgEncoded.addType=function(e,t){e.addFieldInt32(0,t,0);},CSProto.TransMsgEncoded.addBinderSvc=function(e,t){e.addFieldOffset(1,t,0);},CSProto.TransMsgEncoded.addData=function(e,t){e.addFieldOffset(2,t,0);},CSProto.TransMsgEncoded.addEncType=function(e,t){e.addFieldInt32(3,t,0);},CSProto.TransMsgEncoded.endTransMsgEncoded=function(e){return e.endObject();},this.CSProto=CSProto;var flatbuffers={};flatbuffers.Offset,flatbuffers.Table,flatbuffers.SIZEOF_SHORT=2,flatbuffers.SIZEOF_INT=4,flatbuffers.FILE_IDENTIFIER_LENGTH=4,flatbuffers.Encoding={UTF8_BYTES:1,UTF16_STRING:2},flatbuffers.int32=new Int32Array(2),flatbuffers.float32=new Float32Array(flatbuffers.int32.buffer),flatbuffers.float64=new Float64Array(flatbuffers.int32.buffer),flatbuffers.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],flatbuffers.Long=function(e,t){this.low=0|e,this.high=0|t;},flatbuffers.Long.create=function(e,t){return 0==e&&0==t?flatbuffers.Long.ZERO:new flatbuffers.Long(e,t);},flatbuffers.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high;},flatbuffers.Long.prototype.equals=function(e){return this.low==e.low&&this.high==e.high;},flatbuffers.Long.ZERO=new flatbuffers.Long(0,0),flatbuffers.Builder=function(e){if(e)t=e;else var t=1024;this.bb=flatbuffers.ByteBuffer.allocate(t),this.space=t,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1;},flatbuffers.Builder.prototype.forceDefaults=function(e){this.force_defaults=e;},flatbuffers.Builder.prototype.dataBuffer=function(){return this.bb;},flatbuffers.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset());},flatbuffers.Builder.prototype.prep=function(e,t){e>this.minalign&&(this.minalign=e);for(var r=1+~(this.bb.capacity()-this.space+t)&e-1;this.space<r+e+t;){var n=this.bb.capacity();this.bb=flatbuffers.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-n;}this.pad(r);},flatbuffers.Builder.prototype.pad=function(e){for(var t=0;t<e;t++)this.bb.writeInt8(--this.space,0);},flatbuffers.Builder.prototype.writeInt8=function(e){this.bb.writeInt8(this.space-=1,e);},flatbuffers.Builder.prototype.writeInt16=function(e){this.bb.writeInt16(this.space-=2,e);},flatbuffers.Builder.prototype.writeInt32=function(e){this.bb.writeInt32(this.space-=4,e);},flatbuffers.Builder.prototype.writeInt64=function(e){this.bb.writeInt64(this.space-=8,e);},flatbuffers.Builder.prototype.writeFloat32=function(e){this.bb.writeFloat32(this.space-=4,e);},flatbuffers.Builder.prototype.writeFloat64=function(e){this.bb.writeFloat64(this.space-=8,e);},flatbuffers.Builder.prototype.addInt8=function(e){this.prep(1,0),this.writeInt8(e);},flatbuffers.Builder.prototype.addInt16=function(e){this.prep(2,0),this.writeInt16(e);},flatbuffers.Builder.prototype.addInt32=function(e){this.prep(4,0),this.writeInt32(e);},flatbuffers.Builder.prototype.addInt64=function(e){this.prep(8,0),this.writeInt64(e);},flatbuffers.Builder.prototype.addFloat32=function(e){this.prep(4,0),this.writeFloat32(e);},flatbuffers.Builder.prototype.addFloat64=function(e){this.prep(8,0),this.writeFloat64(e);},flatbuffers.Builder.prototype.addFieldInt8=function(e,t,r){(this.force_defaults||t!=r)&&(this.addInt8(t),this.slot(e));},flatbuffers.Builder.prototype.addFieldInt16=function(e,t,r){(this.force_defaults||t!=r)&&(this.addInt16(t),this.slot(e));},flatbuffers.Builder.prototype.addFieldInt32=function(e,t,r){(this.force_defaults||t!=r)&&(this.addInt32(t),this.slot(e));},flatbuffers.Builder.prototype.addFieldInt64=function(e,t,r){!this.force_defaults&&t.equals(r)||(this.addInt64(t),this.slot(e));},flatbuffers.Builder.prototype.addFieldFloat32=function(e,t,r){(this.force_defaults||t!=r)&&(this.addFloat32(t),this.slot(e));},flatbuffers.Builder.prototype.addFieldFloat64=function(e,t,r){(this.force_defaults||t!=r)&&(this.addFloat64(t),this.slot(e));},flatbuffers.Builder.prototype.addFieldOffset=function(e,t,r){(this.force_defaults||t!=r)&&(this.addOffset(t),this.slot(e));},flatbuffers.Builder.prototype.addFieldStruct=function(e,t,r){t!=r&&(this.nested(t),this.slot(e));},flatbuffers.Builder.prototype.nested=function(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.");},flatbuffers.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.");},flatbuffers.Builder.prototype.slot=function(e){this.vtable[e]=this.offset();},flatbuffers.Builder.prototype.offset=function(){return this.bb.capacity()-this.space;},flatbuffers.Builder.growByteBuffer=function(e){var t=e.capacity();if(3221225472&t)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var r=t<<1,n=flatbuffers.ByteBuffer.allocate(r);return n.setPosition(r-t),n.bytes().set(e.bytes(),r-t),n;},flatbuffers.Builder.prototype.addOffset=function(e){this.prep(flatbuffers.SIZEOF_INT,0),this.writeInt32(this.offset()-e+flatbuffers.SIZEOF_INT);},flatbuffers.Builder.prototype.startObject=function(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(var t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset();},flatbuffers.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var e=this.offset(),t=this.vtable_in_use-1;t>=0;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start),this.addInt16((this.vtable_in_use+2)*flatbuffers.SIZEOF_SHORT);var r=0;e:for(t=0;t<this.vtables.length;t++){var n=this.bb.capacity()-this.vtables[t],i=this.space,o=this.bb.readInt16(n);if(o==this.bb.readInt16(i)){for(var a=flatbuffers.SIZEOF_SHORT;a<o;a+=flatbuffers.SIZEOF_SHORT)if(this.bb.readInt16(n+a)!=this.bb.readInt16(i+a))continue e;r=this.vtables[t];break;}}return r?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,r-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e;},flatbuffers.Builder.prototype.finish=function(e,t){if(t){var r=t;if(this.prep(this.minalign,flatbuffers.SIZEOF_INT+flatbuffers.FILE_IDENTIFIER_LENGTH),r.length!=flatbuffers.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+flatbuffers.FILE_IDENTIFIER_LENGTH);for(var n=flatbuffers.FILE_IDENTIFIER_LENGTH-1;n>=0;n--)this.writeInt8(r.charCodeAt(n));}this.prep(this.minalign,flatbuffers.SIZEOF_INT),this.addOffset(e),this.bb.setPosition(this.space);},flatbuffers.Builder.prototype.requiredField=function(e,t){var r=this.bb.capacity()-e,n=r-this.bb.readInt32(r);if(!(0!=this.bb.readInt16(n+t)))throw new Error("FlatBuffers: field "+t+" must be set");},flatbuffers.Builder.prototype.startVector=function(e,t,r){this.notNested(),this.vector_num_elems=t,this.prep(flatbuffers.SIZEOF_INT,e*t),this.prep(r,e*t);},flatbuffers.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset();},flatbuffers.Builder.prototype.createString=function(e){if(e instanceof Uint8Array)var t=e;else{t=[];for(var r=0;r<e.length;){var n,i=e.charCodeAt(r++);if(i<55296||i>=56320)n=i;else n=(i<<10)+e.charCodeAt(r++)+-56613888;n<128?t.push(n):(n<2048?t.push(n>>6&31|192):(n<65536?t.push(n>>12&15|224):t.push(n>>18&7|240,n>>12&63|128),t.push(n>>6&63|128)),t.push(63&n|128));}}this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);r=0;for(var o=this.space,a=this.bb.bytes();r<t.length;r++)a[o++]=t[r];return this.endVector();},flatbuffers.Builder.prototype.createLong=function(e,t){return flatbuffers.Long.create(e,t);},flatbuffers.ByteBuffer=function(e){this.bytes_=e,this.position_=0;},flatbuffers.ByteBuffer.allocate=function(e){return new flatbuffers.ByteBuffer(new Uint8Array(e));},flatbuffers.ByteBuffer.prototype.bytes=function(){return this.bytes_;},flatbuffers.ByteBuffer.prototype.position=function(){return this.position_;},flatbuffers.ByteBuffer.prototype.setPosition=function(e){this.position_=e;},flatbuffers.ByteBuffer.prototype.capacity=function(){return this.bytes_.length;},flatbuffers.ByteBuffer.prototype.readInt8=function(e){return this.readUint8(e)<<24>>24;},flatbuffers.ByteBuffer.prototype.readUint8=function(e){return this.bytes_[e];},flatbuffers.ByteBuffer.prototype.readInt16=function(e){return this.readUint16(e)<<16>>16;},flatbuffers.ByteBuffer.prototype.readUint16=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8;},flatbuffers.ByteBuffer.prototype.readInt32=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24;},flatbuffers.ByteBuffer.prototype.readUint32=function(e){return this.readInt32(e)>>>0;},flatbuffers.ByteBuffer.prototype.readInt64=function(e){return new flatbuffers.Long(this.readInt32(e),this.readInt32(e+4));},flatbuffers.ByteBuffer.prototype.readUint64=function(e){return new flatbuffers.Long(this.readUint32(e),this.readUint32(e+4));},flatbuffers.ByteBuffer.prototype.readFloat32=function(e){return flatbuffers.int32[0]=this.readInt32(e),flatbuffers.float32[0];},flatbuffers.ByteBuffer.prototype.readFloat64=function(e){return flatbuffers.int32[flatbuffers.isLittleEndian?0:1]=this.readInt32(e),flatbuffers.int32[flatbuffers.isLittleEndian?1:0]=this.readInt32(e+4),flatbuffers.float64[0];},flatbuffers.ByteBuffer.prototype.writeInt8=function(e,t){this.bytes_[e]=t;},flatbuffers.ByteBuffer.prototype.writeUint8=function(e,t){this.bytes_[e]=t;},flatbuffers.ByteBuffer.prototype.writeInt16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8;},flatbuffers.ByteBuffer.prototype.writeUint16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8;},flatbuffers.ByteBuffer.prototype.writeInt32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24;},flatbuffers.ByteBuffer.prototype.writeUint32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24;},flatbuffers.ByteBuffer.prototype.writeInt64=function(e,t){this.writeInt32(e,t.low),this.writeInt32(e+4,t.high);},flatbuffers.ByteBuffer.prototype.writeUint64=function(e,t){this.writeUint32(e,t.low),this.writeUint32(e+4,t.high);},flatbuffers.ByteBuffer.prototype.writeFloat32=function(e,t){flatbuffers.float32[0]=t,this.writeInt32(e,flatbuffers.int32[0]);},flatbuffers.ByteBuffer.prototype.writeFloat64=function(e,t){flatbuffers.float64[0]=t,this.writeInt32(e,flatbuffers.int32[flatbuffers.isLittleEndian?0:1]),this.writeInt32(e+4,flatbuffers.int32[flatbuffers.isLittleEndian?1:0]);},flatbuffers.ByteBuffer.prototype.__offset=function(e,t){var r=e-this.readInt32(e);return t<this.readInt16(r)?this.readInt16(r+t):0;},flatbuffers.ByteBuffer.prototype.__union=function(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e;},flatbuffers.ByteBuffer.prototype.__string=function(e,t){e+=this.readInt32(e);var r=this.readInt32(e),n="",i=0;if(e+=flatbuffers.SIZEOF_INT,t===flatbuffers.Encoding.UTF8_BYTES)return this.bytes_.subarray(e,e+r);for(;i<r;){var o,a=this.readUint8(e+i++);if(a<192)o=a;else{var s=this.readUint8(e+i++);if(a<224)o=(31&a)<<6|63&s;else{var d=this.readUint8(e+i++);if(a<240)o=(15&a)<<12|(63&s)<<6|63&d;else o=(7&a)<<18|(63&s)<<12|(63&d)<<6|63&this.readUint8(e+i++);}}o<65536?n+=String.fromCharCode(o):(o-=65536,n+=String.fromCharCode(55296+(o>>10),56320+(1023&o)));}return n;},flatbuffers.ByteBuffer.prototype.__indirect=function(e){return e+this.readInt32(e);},flatbuffers.ByteBuffer.prototype.__vector=function(e){return e+this.readInt32(e)+flatbuffers.SIZEOF_INT;},flatbuffers.ByteBuffer.prototype.__vector_len=function(e){return this.readInt32(e+this.readInt32(e));},flatbuffers.ByteBuffer.prototype.__has_identifier=function(e){if(e.length!=flatbuffers.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+flatbuffers.FILE_IDENTIFIER_LENGTH);for(var t=0;t<flatbuffers.FILE_IDENTIFIER_LENGTH;t++)if(e.charCodeAt(t)!=this.readInt8(this.position_+flatbuffers.SIZEOF_INT+t))return!1;return!0;},flatbuffers.ByteBuffer.prototype.createLong=function(e,t){return flatbuffers.Long.create(e,t);},this.flatbuffers=flatbuffers,function(e,t){"function"==typeof define&&define.amd?define(["exports"],t):t("object"==typeof exports&&"string"!=typeof exports.nodeName?module.exports:e);}(this,function(e){function t(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t));}function r(){return new t(null);}function n(e){return I.charAt(e);}function i(e,t){var r=E[e.charCodeAt(t)];return null==r?-1:r;}function o(e){var t=r();return t.fromInt(e),t;}function a(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r;}function s(e){this.m=e;}function d(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t;}function c(e,t){return e&t;}function f(e,t){return e|t;}function u(e,t){return e^t;}function l(e,t){return e&~t;}function p(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t;}function h(e){for(var t=0;0!=e;)e&=e-1,++t;return t;}function g(){}function y(e){return e;}function b(e){this.r2=r(),this.q3=r(),t.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e;}function m(){this.i=0,this.j=0,this.S=new Array();}function S(){if(null==A){for(A=new m();x>G;){var e=Math.floor(65536*Math.random());D[G++]=255&e;}for(A.init(D),G=0;G<D.length;++G)D[G]=0;G=0;}return A.next();}function k(){}function C(e,r){return new t(e,r);}function T(e,r){if(r<e.length+11)return console.error("Message too long for RSA"),null;for(var n=new Array(),i=e.length-1;i>=0&&r>0;){var o=e.charCodeAt(i--);128>o?n[--r]=o:o>127&&2048>o?(n[--r]=63&o|128,n[--r]=o>>6|192):(n[--r]=63&o|128,n[--r]=o>>6&63|128,n[--r]=o>>12|224);}n[--r]=0;for(var a=new k(),s=new Array();r>2;){for(s[0]=0;0==s[0];)a.nextBytes(s);n[--r]=s[0];}return n[--r]=2,n[--r]=0,new t(n);}function P(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null;}function _(e){var t,r,n="";for(t=0;t+3<=e.length;t+=3)r=parseInt(e.substring(t,t+3),16),n+=F.charAt(r>>6)+F.charAt(63&r);for(t+1==e.length?(r=parseInt(e.substring(t,t+1),16),n+=F.charAt(r<<2)):t+2==e.length&&(r=parseInt(e.substring(t,t+2),16),n+=F.charAt(r>>2)+F.charAt((3&r)<<4));(3&n.length)>0;)n+=V;return n;}var w;"Microsoft Internet Explorer"==navigator.appName?(t.prototype.am=function(e,t,r,n,i,o){for(var a=32767&t,s=t>>15;--o>=0;){var d=32767&this[e],c=this[e++]>>15,f=s*d+c*a;i=((d=a*d+((32767&f)<<15)+r[n]+(1073741823&i))>>>30)+(f>>>15)+s*c+(i>>>30),r[n++]=1073741823&d;}return i;},w=30):"Netscape"!=navigator.appName?(t.prototype.am=function(e,t,r,n,i,o){for(;--o>=0;){var a=t*this[e++]+r[n]+i;i=Math.floor(a/67108864),r[n++]=67108863&a;}return i;},w=26):(t.prototype.am=function(e,t,r,n,i,o){for(var a=16383&t,s=t>>14;--o>=0;){var d=16383&this[e],c=this[e++]>>14,f=s*d+c*a;i=((d=a*d+((16383&f)<<14)+r[n]+i)>>28)+(f>>14)+s*c,r[n++]=268435455&d;}return i;},w=28),t.prototype.DB=w,t.prototype.DM=(1<<w)-1,t.prototype.DV=1<<w;t.prototype.FV=Math.pow(2,52),t.prototype.F1=52-w,t.prototype.F2=2*w-52;var O,M,I="0123456789abcdefghijklmnopqrstuvwxyz",E=new Array();for(O="0".charCodeAt(0),M=0;9>=M;++M)E[O++]=M;for(O="a".charCodeAt(0),M=10;36>M;++M)E[O++]=M;for(O="A".charCodeAt(0),M=10;36>M;++M)E[O++]=M;s.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e;},s.prototype.revert=function(e){return e;},s.prototype.reduce=function(e){e.divRemTo(this.m,null,e);},s.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r);},s.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t);},d.prototype.convert=function(e){var n=r();return e.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),e.s<0&&n.compareTo(t.ZERO)>0&&this.m.subTo(n,n),n;},d.prototype.revert=function(e){var t=r();return e.copyTo(t),this.reduce(t),t;},d.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++;}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e);},d.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r);},d.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t);},t.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s;},t.prototype.fromInt=function(e){this.t=1,this.s=0>e?-1:0,e>0?this[0]=e:-1>e?this[0]=e+this.DV:this.t=0;},t.prototype.fromString=function(e,r){var n;if(16==r)n=4;else if(8==r)n=3;else if(256==r)n=8;else if(2==r)n=1;else if(32==r)n=5;else{if(4!=r)return void this.fromRadix(e,r);n=2;}this.t=0,this.s=0;for(var o=e.length,a=!1,s=0;--o>=0;){var d=8==n?255&e[o]:i(e,o);0>d?"-"==e.charAt(o)&&(a=!0):(a=!1,0==s?this[this.t++]=d:s+n>this.DB?(this[this.t-1]|=(d&(1<<this.DB-s)-1)<<s,this[this.t++]=d>>this.DB-s):this[this.t-1]|=d<<s,(s+=n)>=this.DB&&(s-=this.DB));}8==n&&0!=(128&e[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),a&&t.ZERO.subTo(this,this);},t.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t;},t.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s;},t.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s;},t.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,o=(1<<i)-1,a=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t[r+a+1]=this[r]>>i|s,s=(this[r]&o)<<n;for(r=a-1;r>=0;--r)t[r]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp();},t.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,o=(1<<n)-1;t[0]=this[r]>>n;for(var a=r+1;a<this.t;++a)t[a-r-1]|=(this[a]&o)<<i,t[a-r]=this[a]>>n;n>0&&(t[this.t-r-1]|=(this.s&o)<<i),t.t=this.t-r,t.clamp();}},t.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);i>r;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s;}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s;}t.s=0>n?-1:0,-1>n?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp();},t.prototype.multiplyTo=function(e,r){var n=this.abs(),i=e.abs(),o=n.t;for(r.t=o+i.t;--o>=0;)r[o]=0;for(o=0;o<i.t;++o)r[o+n.t]=n.am(0,i[o],r,o,0,n.t);r.s=0,r.clamp(),this.s!=e.s&&t.ZERO.subTo(r,r);},t.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1);}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp();},t.prototype.divRemTo=function(e,n,i){var o=e.abs();if(!(o.t<=0)){var s=this.abs();if(s.t<o.t)return null!=n&&n.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=r());var d=r(),c=this.s,f=e.s,u=this.DB-a(o[o.t-1]);u>0?(o.lShiftTo(u,d),s.lShiftTo(u,i)):(o.copyTo(d),s.copyTo(i));var l=d.t,p=d[l-1];if(0!=p){var h=p*(1<<this.F1)+(l>1?d[l-2]>>this.F2:0),g=this.FV/h,y=(1<<this.F1)/h,b=1<<this.F2,m=i.t,v=m-l,S=null==n?r():n;for(d.dlShiftTo(v,S),i.compareTo(S)>=0&&(i[i.t++]=1,i.subTo(S,i)),t.ONE.dlShiftTo(l,S),S.subTo(d,d);d.t<l;)d[d.t++]=0;for(;--v>=0;){var k=i[--m]==p?this.DM:Math.floor(i[m]*g+(i[m-1]+b)*y);if((i[m]+=d.am(0,k,i,v,0,l))<k)for(d.dlShiftTo(v,S),i.subTo(S,i);i[m]<--k;)i.subTo(S,i);}null!=n&&(i.drShiftTo(l,n),c!=f&&t.ZERO.subTo(n,n)),i.t=l,i.clamp(),u>0&&i.rShiftTo(u,i),0>c&&t.ZERO.subTo(i,i);}}},t.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t;},t.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s);},t.prototype.exp=function(e,n){if(e>4294967295||1>e)return t.ONE;var i=r(),o=r(),s=n.convert(this),d=a(e)-1;for(s.copyTo(i);--d>=0;)if(n.sqrTo(i,o),(e&1<<d)>0)n.mulTo(o,s,i);else{var c=i;i=o,o=c;}return n.revert(i);},t.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2;}var r,i=(1<<t)-1,o=!1,a="",s=this.t,d=this.DB-s*this.DB%t;if(s-->0)for(d<this.DB&&(r=this[s]>>d)>0&&(o=!0,a=n(r));s>=0;)t>d?(r=(this[s]&(1<<d)-1)<<t-d,r|=this[--s]>>(d+=this.DB-t)):(r=this[s]>>(d-=t)&i,0>=d&&(d+=this.DB,--s)),r>0&&(o=!0),o&&(a+=n(r));return o?a:"0";},t.prototype.negate=function(){var e=r();return t.ZERO.subTo(this,e),e;},t.prototype.abs=function(){return this.s<0?this.negate():this;},t.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0;},t.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+a(this[this.t-1]^this.s&this.DM);},t.prototype.mod=function(e){var n=r();return this.abs().divRemTo(e,null,n),this.s<0&&n.compareTo(t.ZERO)>0&&e.subTo(n,n),n;},t.prototype.modPowInt=function(e,t){var r;return r=256>e||t.isEven()?new s(t):new d(t),this.exp(e,r);},t.ZERO=o(0),t.ONE=o(1),g.prototype.convert=y,g.prototype.revert=y,g.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r);},g.prototype.sqrTo=function(e,t){e.squareTo(t);},b.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=r();return e.copyTo(t),this.reduce(t),t;},b.prototype.revert=function(e){return e;},b.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e);},b.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r);},b.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t);};var R=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],L=(1<<26)/R[R.length-1];t.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e));},t.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||2>e||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),i=o(n),a=r(),s=r(),d="";for(this.divRemTo(i,a,s);a.signum()>0;)d=(n+s.intValue()).toString(e).substr(1)+d,a.divRemTo(i,a,s);return s.intValue().toString(e)+d;},t.prototype.fromRadix=function(e,r){this.fromInt(0),null==r&&(r=10);for(var n=this.chunkSize(r),o=Math.pow(r,n),a=!1,s=0,d=0,c=0;c<e.length;++c){var f=i(e,c);0>f?"-"==e.charAt(c)&&0==this.signum()&&(a=!0):(d=r*d+f,++s>=n&&(this.dMultiply(o),this.dAddOffset(d,0),s=0,d=0));}s>0&&(this.dMultiply(Math.pow(r,s)),this.dAddOffset(d,0)),a&&t.ZERO.subTo(this,this);},t.prototype.fromNumber=function(e,r,n){if("number"==typeof r){if(2>e)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),f,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(r);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);}else{var i=new Array(),o=7&e;i.length=1+(e>>3),r.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256);}},t.prototype.bitwiseTo=function(e,t,r){var n,i,o=Math.min(e.t,this.t);for(n=0;o>n;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(i=e.s&this.DM,n=o;n<this.t;++n)r[n]=t(this[n],i);r.t=this.t;}else{for(i=this.s&this.DM,n=o;n<e.t;++n)r[n]=t(i,e[n]);r.t=e.t;}r.s=t(this.s,e.s),r.clamp();},t.prototype.changeBit=function(e,r){var n=t.ONE.shiftLeft(e);return this.bitwiseTo(n,r,n),n;},t.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);i>r;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s;}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s;}t.s=0>n?-1:0,n>0?t[r++]=n:-1>n&&(t[r++]=this.DV+n),t.t=r,t.clamp();},t.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp();},t.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t];}},t.prototype.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(n=r.t-this.t;n>i;++i)r[i+this.t]=this.am(0,e[i],r,i,0,this.t);for(n=Math.min(e.t,t);n>i;++i)this.am(0,e[i],r,i,0,t-i);r.clamp();},t.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r);},t.prototype.modInt=function(e){if(0>=e)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r;},t.prototype.millerRabin=function(e){var n=this.subtract(t.ONE),i=n.getLowestSetBit();if(0>=i)return!1;var o=n.shiftRight(i);(e=e+1>>1)>R.length&&(e=R.length);for(var a=r(),s=0;e>s;++s){a.fromInt(R[Math.floor(Math.random()*R.length)]);var d=a.modPow(o,this);if(0!=d.compareTo(t.ONE)&&0!=d.compareTo(n)){for(var c=1;c++<i&&0!=d.compareTo(n);)if(0==(d=d.modPowInt(2,this)).compareTo(t.ONE))return!1;if(0!=d.compareTo(n))return!1;}}return!0;},t.prototype.clone=function(){var e=r();return this.copyTo(e),e;},t.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1;}else{if(1==this.t)return this[0];if(0==this.t)return 0;}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0];},t.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24;},t.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16;},t.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1;},t.prototype.toByteArray=function(){var e=this.t,t=new Array();t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-->0)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)8>n?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,0>=n&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t;},t.prototype.equals=function(e){return 0==this.compareTo(e);},t.prototype.min=function(e){return this.compareTo(e)<0?this:e;},t.prototype.max=function(e){return this.compareTo(e)>0?this:e;},t.prototype.and=function(e){var t=r();return this.bitwiseTo(e,c,t),t;},t.prototype.or=function(e){var t=r();return this.bitwiseTo(e,f,t),t;},t.prototype.xor=function(e){var t=r();return this.bitwiseTo(e,u,t),t;},t.prototype.andNot=function(e){var t=r();return this.bitwiseTo(e,l,t),t;},t.prototype.not=function(){for(var e=r(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e;},t.prototype.shiftLeft=function(e){var t=r();return 0>e?this.rShiftTo(-e,t):this.lShiftTo(e,t),t;},t.prototype.shiftRight=function(e){var t=r();return 0>e?this.lShiftTo(-e,t):this.rShiftTo(e,t),t;},t.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+p(this[e]);return this.s<0?this.t*this.DB:-1;},t.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=h(this[r]^t);return e;},t.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB);},t.prototype.setBit=function(e){return this.changeBit(e,f);},t.prototype.clearBit=function(e){return this.changeBit(e,l);},t.prototype.flipBit=function(e){return this.changeBit(e,u);},t.prototype.add=function(e){var t=r();return this.addTo(e,t),t;},t.prototype.subtract=function(e){var t=r();return this.subTo(e,t),t;},t.prototype.multiply=function(e){var t=r();return this.multiplyTo(e,t),t;},t.prototype.divide=function(e){var t=r();return this.divRemTo(e,t,null),t;},t.prototype.remainder=function(e){var t=r();return this.divRemTo(e,null,t),t;},t.prototype.divideAndRemainder=function(e){var t=r(),n=r();return this.divRemTo(e,t,n),new Array(t,n);},t.prototype.modPow=function(e,t){var n,i,c=e.bitLength(),f=o(1);if(0>=c)return f;n=18>c?1:48>c?3:144>c?4:768>c?5:6,i=8>c?new s(t):t.isEven()?new b(t):new d(t);var u=new Array(),l=3,p=n-1,h=(1<<n)-1;if(u[1]=i.convert(this),n>1){var g=r();for(i.sqrTo(u[1],g);h>=l;)u[l]=r(),i.mulTo(g,u[l-2],u[l]),l+=2;}var y,m,v=e.t-1,S=!0,k=r();for(c=a(e[v])-1;v>=0;){for(c>=p?y=e[v]>>c-p&h:(y=(e[v]&(1<<c+1)-1)<<p-c,v>0&&(y|=e[v-1]>>this.DB+c-p)),l=n;0==(1&y);)y>>=1,--l;if((c-=l)<0&&(c+=this.DB,--v),S)u[y].copyTo(f),S=!1;else{for(;l>1;)i.sqrTo(f,k),i.sqrTo(k,f),l-=2;l>0?i.sqrTo(f,k):(m=f,f=k,k=m),i.mulTo(k,u[y],f);}for(;v>=0&&0==(e[v]&1<<c);)i.sqrTo(f,k),m=f,f=k,k=m,--c<0&&(c=this.DB-1,--v);}return i.revert(f);},t.prototype.modInverse=function(e){var r=e.isEven();if(this.isEven()&&r||0==e.signum())return t.ZERO;for(var n=e.clone(),i=this.clone(),a=o(1),s=o(0),d=o(0),c=o(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),r?(a.isEven()&&s.isEven()||(a.addTo(this,a),s.subTo(e,s)),a.rShiftTo(1,a)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),r?(d.isEven()&&c.isEven()||(d.addTo(this,d),c.subTo(e,c)),d.rShiftTo(1,d)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);n.compareTo(i)>=0?(n.subTo(i,n),r&&a.subTo(d,a),s.subTo(c,s)):(i.subTo(n,i),r&&d.subTo(a,d),c.subTo(s,c));}return 0!=i.compareTo(t.ONE)?t.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c;},t.prototype.pow=function(e){return this.exp(e,new g());},t.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n;}var i=t.getLowestSetBit(),o=r.getLowestSetBit();if(0>o)return t;for(o>i&&(o=i),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r;},t.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=R[R.length-1]){for(t=0;t<R.length;++t)if(r[0]==R[t])return!0;return!1;}if(r.isEven())return!1;for(t=1;t<R.length;){for(var n=R[t],i=t+1;i<R.length&&L>n;)n*=R[i++];for(n=r.modInt(n);i>t;)if(n%R[t++]==0)return!1;}return r.millerRabin(e);},t.prototype.square=function(){var e=r();return this.squareTo(e),e;},m.prototype.init=function(e){var t,r,n;for(t=0;256>t;++t)this.S[t]=t;for(r=0,t=0;256>t;++t)r=r+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[r],this.S[r]=n;this.i=0,this.j=0;},m.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255];};var A,D,G,x=256;if(null==D){var B;if(D=new Array(),G=0,window.crypto&&window.crypto.getRandomValues){var N=new Uint32Array(256);for(window.crypto.getRandomValues(N),B=0;B<N.length;++B)D[G++]=255&N[B];}var U=function(e){if(this.count=this.count||0,this.count>=256||G>=x)window.removeEventListener?window.removeEventListener("mousemove",U,!1):window.detachEvent&&window.detachEvent("onmousemove",U);else try{var t=e.x+e.y;D[G++]=255&t,this.count+=1;}catch(e){}};window.addEventListener?window.addEventListener("mousemove",U,!1):window.attachEvent&&window.attachEvent("onmousemove",U);}k.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=S();},P.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n);},P.prototype.setPublic=function(e,t){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=C(e,16),this.e=parseInt(t,16)):console.error("Invalid RSA public key");},P.prototype.encrypt=function(e){var t=T(e,this.n.bitLength()+7>>3);if(null==t)return null;var r=this.doPublic(t);if(null==r)return null;var n=r.toString(16);return 0==(1&n.length)?n:"0"+n;},P.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(r)<0;)t=t.add(this.p);return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r);},P.prototype.setPrivate=function(e,t,r){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=C(e,16),this.e=parseInt(t,16),this.d=C(r,16)):console.error("Invalid RSA private key");},P.prototype.setPrivateEx=function(e,t,r,n,i,o,a,s){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=C(e,16),this.e=parseInt(t,16),this.d=C(r,16),this.p=C(n,16),this.q=C(i,16),this.dmp1=C(o,16),this.dmq1=C(a,16),this.coeff=C(s,16)):console.error("Invalid RSA private key");},P.prototype.generate=function(e,r){var n=new k(),i=e>>1;this.e=parseInt(r,16);for(var o=new t(r,16);;){for(;this.p=new t(e-i,1,n),0!=this.p.subtract(t.ONE).gcd(o).compareTo(t.ONE)||!this.p.isProbablePrime(10););for(;this.q=new t(i,1,n),0!=this.q.subtract(t.ONE).gcd(o).compareTo(t.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var a=this.p;this.p=this.q,this.q=a;}var s=this.p.subtract(t.ONE),d=this.q.subtract(t.ONE),c=s.multiply(d);if(0==c.gcd(o).compareTo(t.ONE)){this.n=this.p.multiply(this.q),this.d=o.modInverse(c),this.dmp1=this.d.mod(s),this.dmq1=this.d.mod(d),this.coeff=this.q.modInverse(this.p);break;}}},P.prototype.decrypt=function(e){var t=C(e,16),r=this.doPrivate(t);return null==r?null:function(e,t){for(var r=e.toByteArray(),n=0;n<r.length&&0==r[n];)++n;if(r.length-n!=t-1||2!=r[n])return null;for(++n;0!=r[n];)if(++n>=r.length)return null;for(var i="";++n<r.length;){var o=255&r[n];128>o?i+=String.fromCharCode(o):o>191&&224>o?(i+=String.fromCharCode((31&o)<<6|63&r[n+1]),++n):(i+=String.fromCharCode((15&o)<<12|(63&r[n+1])<<6|63&r[n+2]),n+=2);}return i;}(r,this.n.bitLength()+7>>3);},function(){P.prototype.generateAsync=function(e,n,i){var o=new k(),a=e>>1;this.e=parseInt(n,16);var s=new t(n,16),d=this,c=function(){var n=function(){if(d.p.compareTo(d.q)<=0){var e=d.p;d.p=d.q,d.q=e;}var r=d.p.subtract(t.ONE),n=d.q.subtract(t.ONE),o=r.multiply(n);0==o.gcd(s).compareTo(t.ONE)?(d.n=d.p.multiply(d.q),d.d=s.modInverse(o),d.dmp1=d.d.mod(r),d.dmq1=d.d.mod(n),d.coeff=d.q.modInverse(d.p),setTimeout(function(){i();},0)):setTimeout(c,0);},f=function(){d.q=r(),d.q.fromNumberAsync(a,1,o,function(){d.q.subtract(t.ONE).gcda(s,function(e){0==e.compareTo(t.ONE)&&d.q.isProbablePrime(10)?setTimeout(n,0):setTimeout(f,0);});});},u=function(){d.p=r(),d.p.fromNumberAsync(e-a,1,o,function(){d.p.subtract(t.ONE).gcda(s,function(e){0==e.compareTo(t.ONE)&&d.p.isProbablePrime(10)?setTimeout(f,0):setTimeout(u,0);});});};setTimeout(u,0);};setTimeout(c,0);};t.prototype.gcda=function(e,t){var r=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(r.compareTo(n)<0){var i=r;r=n,n=i;}var o=r.getLowestSetBit(),a=n.getLowestSetBit();if(0>a)t(r);else{a>o&&(a=o),a>0&&(r.rShiftTo(a,r),n.rShiftTo(a,n));var s=function(){(o=r.getLowestSetBit())>0&&r.rShiftTo(o,r),(o=n.getLowestSetBit())>0&&n.rShiftTo(o,n),r.compareTo(n)>=0?(r.subTo(n,r),r.rShiftTo(1,r)):(n.subTo(r,n),n.rShiftTo(1,n)),r.signum()>0?setTimeout(s,0):(a>0&&n.lShiftTo(a,n),setTimeout(function(){t(n);},0));};setTimeout(s,10);}};t.prototype.fromNumberAsync=function(e,r,n,i){if("number"==typeof r){if(2>e)this.fromInt(1);else{this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),f,this),this.isEven()&&this.dAddOffset(1,0);var o=this,a=function(){o.dAddOffset(2,0),o.bitLength()>e&&o.subTo(t.ONE.shiftLeft(e-1),o),o.isProbablePrime(r)?setTimeout(function(){i();},0):setTimeout(a,0);};setTimeout(a,0);}}else{var s=new Array(),d=7&e;s.length=1+(e>>3),r.nextBytes(s),d>0?s[0]&=(1<<d)-1:s[0]=0,this.fromString(s,256);}};}();var F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",V="=",K=K||{};K.env=K.env||{};var j=K,Y=Object.prototype,H=["toString","valueOf"];K.env.parseUA=function(e){var t,r=function(e){var t=0;return parseFloat(e.replace(/\./g,function(){return 1==t++?"":".";}));},n=navigator,i={ie:0,opera:0,gecko:0,webkit:0,chrome:0,mobile:null,air:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,webos:0,caja:n&&n.cajaVersion,secure:!1,os:null},o=e||navigator&&navigator.userAgent,a=window&&window.location,s=a&&a.href;return i.secure=s&&0===s.toLowerCase().indexOf("https"),o&&(/windows|win32/i.test(o)?i.os="windows":/macintosh/i.test(o)?i.os="macintosh":/rhino/i.test(o)&&(i.os="rhino"),/KHTML/.test(o)&&(i.webkit=1),(t=o.match(/AppleWebKit\/([^\s]*)/))&&t[1]&&(i.webkit=r(t[1]),/ Mobile\//.test(o)?(i.mobile="Apple",(t=o.match(/OS ([^\s]*)/))&&t[1]&&(t=r(t[1].replace("_","."))),i.ios=t,i.ipad=i.ipod=i.iphone=0,(t=o.match(/iPad|iPod|iPhone/))&&t[0]&&(i[t[0].toLowerCase()]=i.ios)):((t=o.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))&&(i.mobile=t[0]),/webOS/.test(o)&&(i.mobile="WebOS",(t=o.match(/webOS\/([^\s]*);/))&&t[1]&&(i.webos=r(t[1]))),/ Android/.test(o)&&(i.mobile="Android",(t=o.match(/Android ([^\s]*);/))&&t[1]&&(i.android=r(t[1])))),(t=o.match(/Chrome\/([^\s]*)/))&&t[1]?i.chrome=r(t[1]):(t=o.match(/AdobeAIR\/([^\s]*)/))&&(i.air=t[0])),i.webkit||((t=o.match(/Opera[\s\/]([^\s]*)/))&&t[1]?(i.opera=r(t[1]),(t=o.match(/Version\/([^\s]*)/))&&t[1]&&(i.opera=r(t[1])),(t=o.match(/Opera Mini[^;]*/))&&(i.mobile=t[0])):(t=o.match(/MSIE\s([^;]*)/))&&t[1]?i.ie=r(t[1]):(t=o.match(/Gecko\/([^\s]*)/))&&(i.gecko=1,(t=o.match(/rv:([^\s\)]*)/))&&t[1]&&(i.gecko=r(t[1]))))),i;},K.env.ua=K.env.parseUA(),K.isFunction=function(e){return"function"==typeof e||"[object Function]"===Y.toString.apply(e);},K._IEEnumFix=K.env.ua.ie?function(e,t){var r,n,i;for(r=0;r<H.length;r+=1)i=t[n=H[r]],j.isFunction(i)&&i!=Y[n]&&(e[n]=i);}:function(){},K.extend=function(e,t,r){if(!t||!e)throw new Error("extend failed, please check that all dependencies are included.");var n,i=function(){};if(i.prototype=t.prototype,e.prototype=new i(),e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Y.constructor&&(t.prototype.constructor=t),r){for(n in r)j.hasOwnProperty(r,n)&&(e.prototype[n]=r[n]);j._IEEnumFix(e.prototype,r);}},/**
 * @fileOverview
 * @name asn1-1.0.js
 * @author Kenji Urushima kenji.urushima@gmail.com
 * @version 1.0.2 (2013-May-30)
 * @since 2.1
 * @license <a href="http://kjur.github.io/jsrsasign/license/">MIT License</a>
 */"undefined"!=typeof KJUR&&KJUR||(KJUR={}),void 0!==KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t;},this.bigIntToMinTwosComplementsHex=function(e){var r=e.toString(16);if("-"!=r.substr(0,1))r.length%2==1?r="0"+r:r.match(/^[0-7]/)||(r="00"+r);else{var n=r.substr(1).length;n%2==1?n+=1:r.match(/^[0-7]/)||(n+=2);for(var i="",o=0;n>o;o++)i+="f";r=new t(i,16).xor(e).add(t.ONE).toString(16).replace(/^-/,"");}return r;},this.getPEMStringFromHex=function(e,t){var r=CryptoJS.enc.Hex.parse(e),n=CryptoJS.enc.Base64.stringify(r).replace(/(.{64})/g,"$1\r\n");return"-----BEGIN "+t+"-----\r\n"+(n=n.replace(/\r\n$/,""))+"\r\n-----END "+t+"-----\r\n";};}(),KJUR.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),128>e)return t;var r=t.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+r).toString(16)+t;},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV;},this.getValueHex=function(){return this.getEncodedHex(),this.hV;},this.getFreshValueHex=function(){return"";};},KJUR.asn1.DERAbstractString=function(e){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s;},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(this.s);},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e;},this.getFreshValueHex=function(){return this.hV;},void 0!==e&&(void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex));},K.extend(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractTime=function(e){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){return utc=e.getTime()+6e4*e.getTimezoneOffset(),new Date(utc);},this.formatDate=function(e,t){var r=this.zeroPadding,n=this.localDateToUTC(e),i=String(n.getFullYear());return"utc"==t&&(i=i.substr(2,2)),i+r(String(n.getMonth()+1),2)+r(String(n.getDate()),2)+r(String(n.getHours()),2)+r(String(n.getMinutes()),2)+r(String(n.getSeconds()),2)+"Z";},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e;},this.getString=function(){return this.s;},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(this.s);},this.setByDateValue=function(e,t,r,n,i,o){var a=new Date(Date.UTC(e,t-1,r,n,i,o,0));this.setByDate(a);},this.getFreshValueHex=function(){return this.hV;};},K.extend(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractStructured=function(e){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e;},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e);},this.asn1Array=new Array(),void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array);},K.extend(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object),KJUR.asn1.DERBoolean=function(){KJUR.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff";},K.extend(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object),KJUR.asn1.DERInteger=function(e){KJUR.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e);},this.setByInteger=function(e){var r=new t(String(e),10);this.setByBigInteger(r);},this.setValueHex=function(e){this.hV=e;},this.getFreshValueHex=function(){return this.hV;},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):void 0!==e.hex&&this.setValueHex(e.hex));},K.extend(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object),KJUR.asn1.DERBitString=function(e){KJUR.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e;},this.setUnusedBitsAndHexValue=function(e,t){if(0>e||e>7)throw"unused bits shall be from 0 to 7: u = "+e;var r="0"+e;this.hTLV=null,this.isModified=!0,this.hV=r+t;},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var r=0;t>=r;r++)e+="0";var n="";for(r=0;r<e.length-1;r+=8){var i=e.substr(r,8),o=parseInt(i,2).toString(16);1==o.length&&(o="0"+o),n+=o;}this.hTLV=null,this.isModified=!0,this.hV="0"+t+n;},this.setByBooleanArray=function(e){for(var t="",r=0;r<e.length;r++)t+=1==e[r]?"1":"0";this.setByBinaryString(t);},this.newFalseArray=function(e){for(var t=new Array(e),r=0;e>r;r++)t[r]=!1;return t;},this.getFreshValueHex=function(){return this.hV;},void 0!==e&&(void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array));},K.extend(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object),KJUR.asn1.DEROctetString=function(e){KJUR.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04";},K.extend(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500";},K.extend(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object),KJUR.asn1.DERObjectIdentifier=function(e){var r=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t;},n=function(e){var n="",i=new t(e,10).toString(2),o=7-i.length%7;7==o&&(o=0);for(var a="",s=0;o>s;s++)a+="0";i=a+i;for(s=0;s<i.length-1;s+=7){var d=i.substr(s,7);s!=i.length-7&&(d="1"+d),n+=r(parseInt(d,2));}return n;};KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e;},this.setValueOidString=function(e){if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var t="",i=e.split("."),o=40*parseInt(i[0])+parseInt(i[1]);t+=r(o),i.splice(0,2);for(var a=0;a<i.length;a++)t+=n(i[a]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t;},this.setValueName=function(e){if(void 0===KJUR.asn1.x509.OID.name2oidList[e])throw"DERObjectIdentifier oidName undefined: "+e;var t=KJUR.asn1.x509.OID.name2oidList[e];this.setValueOidString(t);},this.getFreshValueHex=function(){return this.hV;},void 0!==e&&(void 0!==e.oid?this.setValueOidString(e.oid):void 0!==e.hex?this.setValueHex(e.hex):void 0!==e.name&&this.setValueName(e.name));},K.extend(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.DERUTF8String=function(e){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c";},K.extend(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNumericString=function(e){KJUR.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12";},K.extend(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERPrintableString=function(e){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13";},K.extend(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERTeletexString=function(e){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14";},K.extend(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERIA5String=function(e){KJUR.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16";},K.extend(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERUTCTime=function(e){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s);},void 0!==e&&(void 0!==e.str?this.setString(e.str):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date));},K.extend(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERGeneralizedTime=function(e){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen"),this.hV=stohex(this.s);},void 0!==e&&(void 0!==e.str?this.setString(e.str):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date));},K.extend(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERSequence=function(e){KJUR.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++){e+=this.asn1Array[t].getEncodedHex();}return this.hV=e,this.hV;};},K.extend(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERSet=function(e){KJUR.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.getFreshValueHex=function(){for(var e=new Array(),t=0;t<this.asn1Array.length;t++){var r=this.asn1Array[t];e.push(r.getEncodedHex());}return e.sort(),this.hV=e.join(""),this.hV;};},K.extend(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERTaggedObject=function(e){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,r){this.hT=t,this.isExplicit=e,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1);},this.getFreshValueHex=function(){return this.hV;},void 0!==e&&(void 0!==e.tag&&(this.hT=e.tag),void 0!==e.explicit&&(this.isExplicit=e.explicit),void 0!==e.obj&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)));},K.extend(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object),function(e){"use strict";var t,r={decode:function(r){var n;if(t===e){var i="0123456789ABCDEF",o=" \f\n\r\t \u2028\u2029";for(t=[],n=0;16>n;++n)t[i.charAt(n)]=n;for(i=i.toLowerCase(),n=10;16>n;++n)t[i.charAt(n)]=n;for(n=0;n<o.length;++n)t[o.charAt(n)]=-1;}var a=[],s=0,d=0;for(n=0;n<r.length;++n){var c=r.charAt(n);if("="==c)break;if(-1!=(c=t[c])){if(c===e)throw"Illegal character at offset "+n;s|=c,++d>=2?(a[a.length]=s,s=0,d=0):s<<=4;}}if(d)throw"Hex encoding incomplete: 4 bits missing";return a;}};window.Hex=r;}(),function(e){"use strict";var t,r={decode:function(r){var n;if(t===e){var i="= \f\n\r\t \u2028\u2029";for(t=[],n=0;64>n;++n)t["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n)]=n;for(n=0;n<i.length;++n)t[i.charAt(n)]=-1;}var o=[],a=0,s=0;for(n=0;n<r.length;++n){var d=r.charAt(n);if("="==d)break;if(-1!=(d=t[d])){if(d===e)throw"Illegal character at offset "+n;a|=d,++s>=4?(o[o.length]=a>>16,o[o.length]=a>>8&255,o[o.length]=255&a,a=0,s=0):a<<=6;}}switch(s){case 1:throw"Base64 encoding incomplete: at least 2 bits missing";case 2:o[o.length]=a>>10;break;case 3:o[o.length]=a>>16,o[o.length]=a>>8&255;}return o;},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(e){var t=r.re.exec(e);if(t)if(t[1])e=t[1];else{if(!t[2])throw"RegExp out of sync";e=t[2];}return r.decode(e);}};window.Base64=r;}(),function(e){"use strict";function t(e,r){e instanceof t?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=r);}function r(e,t,r,n,i){this.stream=e,this.header=t,this.length=r,this.tag=n,this.sub=i;}var n=100,i=function(e,t){var r=document.createElement(e);return r.className=t,r;},o=function(e){return document.createTextNode(e);};t.prototype.get=function(t){if(t===e&&(t=this.pos++),t>=this.enc.length)throw"Requesting byte offset "+t+" on a stream of length "+this.enc.length;return this.enc[t];},t.prototype.hexDigits="0123456789ABCDEF",t.prototype.hexByte=function(e){return this.hexDigits.charAt(e>>4&15)+this.hexDigits.charAt(15&e);},t.prototype.hexDump=function(e,t,r){for(var n="",i=e;t>i;++i)if(n+=this.hexByte(this.get(i)),!0!==r)switch(15&i){case 7:n+="  ";break;case 15:n+="\n";break;default:n+=" ";}return n;},t.prototype.parseStringISO=function(e,t){for(var r="",n=e;t>n;++n)r+=String.fromCharCode(this.get(n));return r;},t.prototype.parseStringUTF=function(e,t){for(var r="",n=e;t>n;){var i=this.get(n++);r+=128>i?String.fromCharCode(i):i>191&&224>i?String.fromCharCode((31&i)<<6|63&this.get(n++)):String.fromCharCode((15&i)<<12|(63&this.get(n++))<<6|63&this.get(n++));}return r;},t.prototype.parseStringBMP=function(e,t){for(var r="",n=e;t>n;n+=2){var i=this.get(n),o=this.get(n+1);r+=String.fromCharCode((i<<8)+o);}return r;},t.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,t.prototype.parseTime=function(e,t){var r=this.parseStringISO(e,t),n=this.reTime.exec(r);return n?(r=n[1]+"-"+n[2]+"-"+n[3]+" "+n[4],n[5]&&(r+=":"+n[5],n[6]&&(r+=":"+n[6],n[7]&&(r+="."+n[7]))),n[8]&&(r+=" UTC","Z"!=n[8]&&(r+=n[8],n[9]&&(r+=":"+n[9]))),r):"Unrecognized time: "+r;},t.prototype.parseInteger=function(e,t){var r=t-e;if(r>4){r<<=3;var n=this.get(e);if(0===n)r-=8;else for(;128>n;)n<<=1,--r;return"("+r+" bit)";}for(var i=0,o=e;t>o;++o)i=i<<8|this.get(o);return i;},t.prototype.parseBitString=function(e,t){var r=this.get(e),n=(t-e-1<<3)-r,i="("+n+" bit)";if(20>=n){var o=r;i+=" ";for(var a=t-1;a>e;--a){for(var s=this.get(a),d=o;8>d;++d)i+=s>>d&1?"1":"0";o=0;}}return i;},t.prototype.parseOctetString=function(e,t){var r=t-e,i="("+r+" byte) ";r>n&&(t=e+n);for(var o=e;t>o;++o)i+=this.hexByte(this.get(o));return r>n&&(i+="…"),i;},t.prototype.parseOID=function(e,t){for(var r="",n=0,i=0,o=e;t>o;++o){var a=this.get(o);if(n=n<<7|127&a,i+=7,!(128&a)){if(""===r){var s=80>n?40>n?0:1:2;r=s+"."+(n-40*s);}else r+="."+(i>=31?"bigint":n);n=i=0;}}return r;},r.prototype.typeName=function(){if(this.tag===e)return"unknown";var t=this.tag>>6,r=(this.tag,31&this.tag);switch(t){case 0:switch(r){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+r.toString(16);}case 1:return"Application_"+r.toString(16);case 2:return"["+r+"]";case 3:return"Private_"+r.toString(16);}},r.prototype.reSeemsASCII=/^[ -~]+$/,r.prototype.content=function(){if(this.tag===e)return null;var t=this.tag>>6,r=31&this.tag,i=this.posContent(),o=Math.abs(this.length);if(0!==t){if(null!==this.sub)return"("+this.sub.length+" elem)";var a=this.stream.parseStringISO(i,i+Math.min(o,n));return this.reSeemsASCII.test(a)?a.substring(0,200)+(a.length>200?"…":""):this.stream.parseOctetString(i,i+o);}switch(r){case 1:return 0===this.stream.get(i)?"false":"true";case 2:return this.stream.parseInteger(i,i+o);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(i,i+o);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(i,i+o);case 6:return this.stream.parseOID(i,i+o);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(i,i+o);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(i,i+o);case 30:return this.stream.parseStringBMP(i,i+o);case 23:case 24:return this.stream.parseTime(i,i+o);}return null;},r.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]";},r.prototype.print=function(t){if(t===e&&(t=""),document.writeln(t+this),null!==this.sub){t+="  ";for(var r=0,n=this.sub.length;n>r;++r)this.sub[r].print(t);}},r.prototype.toPrettyString=function(t){t===e&&(t="");var r=t+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(r+="+"),r+=this.length,32&this.tag?r+=" (constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(r+=" (encapsulates)"),r+="\n",null!==this.sub){t+="  ";for(var n=0,i=this.sub.length;i>n;++n)r+=this.sub[n].toPrettyString(t);}return r;},r.prototype.toDOM=function(){var e=i("div","node");e.asn1=this;var t=i("div","head"),r=this.typeName().replace(/_/g," ");t.innerHTML=r;var n=this.content();if(null!==n){n=String(n).replace(/</g,"&lt;");var a=i("span","preview");a.appendChild(o(n)),t.appendChild(a);}e.appendChild(t),this.node=e,this.head=t;var s=i("div","value");if(r="Offset: "+this.stream.pos+"<br/>",r+="Length: "+this.header+"+",r+=this.length>=0?this.length:-this.length+" (undefined)",32&this.tag?r+="<br/>(constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(r+="<br/>(encapsulates)"),null!==n&&(r+="<br/>Value:<br/><b>"+n+"</b>","object"==typeof oids&&6==this.tag)){var d=oids[n];d&&(d.d&&(r+="<br/>"+d.d),d.c&&(r+="<br/>"+d.c),d.w&&(r+="<br/>(warning!)"));}s.innerHTML=r,e.appendChild(s);var c=i("div","sub");if(null!==this.sub)for(var f=0,u=this.sub.length;u>f;++f)c.appendChild(this.sub[f].toDOM());return e.appendChild(c),t.onclick=function(){e.className="node collapsed"==e.className?"node":"node collapsed";},e;},r.prototype.posStart=function(){return this.stream.pos;},r.prototype.posContent=function(){return this.stream.pos+this.header;},r.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length);},r.prototype.fakeHover=function(e){this.node.className+=" hover",e&&(this.head.className+=" hover");},r.prototype.fakeOut=function(e){var t=/ ?hover/;this.node.className=this.node.className.replace(t,""),e&&(this.head.className=this.head.className.replace(t,""));},r.prototype.toHexDOM_sub=function(e,t,r,n,a){if(!(n>=a)){var s=i("span",t);s.appendChild(o(r.hexDump(n,a))),e.appendChild(s);}},r.prototype.toHexDOM=function(t){var r=i("span","hex");if(t===e&&(t=r),this.head.hexNode=r,this.head.onmouseover=function(){this.hexNode.className="hexCurrent";},this.head.onmouseout=function(){this.hexNode.className="hex";},r.asn1=this,r.onmouseover=function(){var e=!t.selected;e&&(t.selected=this.asn1,this.className="hexCurrent"),this.asn1.fakeHover(e);},r.onmouseout=function(){var e=t.selected==this.asn1;this.asn1.fakeOut(e),e&&(t.selected=null,this.className="hex");},this.toHexDOM_sub(r,"tag",this.stream,this.posStart(),this.posStart()+1),this.toHexDOM_sub(r,this.length>=0?"dlen":"ulen",this.stream,this.posStart()+1,this.posContent()),null===this.sub)r.appendChild(o(this.stream.hexDump(this.posContent(),this.posEnd())));else if(this.sub.length>0){var n=this.sub[0],a=this.sub[this.sub.length-1];this.toHexDOM_sub(r,"intro",this.stream,this.posContent(),n.posStart());for(var s=0,d=this.sub.length;d>s;++s)r.appendChild(this.sub[s].toHexDOM(t));this.toHexDOM_sub(r,"outro",this.stream,a.posEnd(),this.posEnd());}return r;},r.prototype.toHexString=function(e){return this.stream.hexDump(this.posStart(),this.posEnd(),!0);},r.decodeLength=function(e){var t=e.get(),r=127&t;if(r==t)return r;if(r>3)throw"Length over 24 bits not supported at position "+(e.pos-1);if(0===r)return-1;t=0;for(var n=0;r>n;++n)t=t<<8|e.get();return t;},r.hasContent=function(e,n,i){if(32&e)return!0;if(3>e||e>4)return!1;var o=new t(i);if(3==e&&o.get(),o.get()>>6&1)return!1;try{var a=r.decodeLength(o);return o.pos-i.pos+a==n;}catch(e){return!1;}},r.decode=function(e){e instanceof t||(e=new t(e,0));var n=new t(e),i=e.get(),o=r.decodeLength(e),a=e.pos-n.pos,s=null;if(r.hasContent(i,o,e)){var d=e.pos;if(3==i&&e.get(),s=[],o>=0){for(var c=d+o;e.pos<c;)s[s.length]=r.decode(e);if(e.pos!=c)throw"Content size is not correct for container starting at offset "+d;}else try{for(;;){var f=r.decode(e);if(0===f.tag)break;s[s.length]=f;}o=d-e.pos;}catch(e){throw"Exception while decoding undefined length content: "+e;}}else e.pos+=o;return new r(n,a,o,i,s);},r.test=function(){for(var e=[{value:[39],expected:39},{value:[129,201],expected:201},{value:[131,254,220,186],expected:16702650}],n=0,i=e.length;i>n;++n){var o=new t(e[n].value,0),a=r.decodeLength(o);a!=e[n].expected&&document.write("In test["+n+"] expected "+e[n].expected+" got "+a+"\n");}},window.ASN1=r;}(),ASN1.prototype.getHexStringValue=function(){var e=this.toHexString(),t=2*this.header,r=2*this.length;return e.substr(t,r);},P.prototype.parseKey=function(e){try{var t=0,r=0,n=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(e)?Hex.decode(e):Base64.unarmor(e),i=ASN1.decode(n);if(3===i.sub.length&&(i=i.sub[2].sub[0]),9===i.sub.length){t=i.sub[1].getHexStringValue(),this.n=C(t,16),r=i.sub[2].getHexStringValue(),this.e=parseInt(r,16);var o=i.sub[3].getHexStringValue();this.d=C(o,16);var a=i.sub[4].getHexStringValue();this.p=C(a,16);var s=i.sub[5].getHexStringValue();this.q=C(s,16);var d=i.sub[6].getHexStringValue();this.dmp1=C(d,16);var c=i.sub[7].getHexStringValue();this.dmq1=C(c,16);var f=i.sub[8].getHexStringValue();this.coeff=C(f,16);}else{if(2!==i.sub.length)return!1;var u=i.sub[1].sub[0];t=u.sub[0].getHexStringValue(),this.n=C(t,16),r=u.sub[1].getHexStringValue(),this.e=parseInt(r,16);}return!0;}catch(e){return!1;}},P.prototype.getPrivateBaseKey=function(){var e={array:[new KJUR.asn1.DERInteger({int:0}),new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({int:this.e}),new KJUR.asn1.DERInteger({bigint:this.d}),new KJUR.asn1.DERInteger({bigint:this.p}),new KJUR.asn1.DERInteger({bigint:this.q}),new KJUR.asn1.DERInteger({bigint:this.dmp1}),new KJUR.asn1.DERInteger({bigint:this.dmq1}),new KJUR.asn1.DERInteger({bigint:this.coeff})]};return new KJUR.asn1.DERSequence(e).getEncodedHex();},P.prototype.getPrivateBaseKeyB64=function(){return _(this.getPrivateBaseKey());},P.prototype.getPublicBaseKey=function(){var e={array:[new KJUR.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new KJUR.asn1.DERNull()]},t=new KJUR.asn1.DERSequence(e);return e={array:[new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({int:this.e})]},e={hex:"00"+new KJUR.asn1.DERSequence(e).getEncodedHex()},e={array:[t,new KJUR.asn1.DERBitString(e)]},new KJUR.asn1.DERSequence(e).getEncodedHex();},P.prototype.getPublicBaseKeyB64=function(){return _(this.getPublicBaseKey());},P.prototype.wordwrap=function(e,t){if(!e)return e;var r="(.{1,"+(t=t||64)+"})( +|$\n?)|(.{1,"+t+"})";return e.match(RegExp(r,"g")).join("\n");},P.prototype.getPrivateKey=function(){var e="-----BEGIN RSA PRIVATE KEY-----\n";return(e+=this.wordwrap(this.getPrivateBaseKeyB64())+"\n")+"-----END RSA PRIVATE KEY-----";},P.prototype.getPublicKey=function(){var e="-----BEGIN PUBLIC KEY-----\n";return(e+=this.wordwrap(this.getPublicBaseKeyB64())+"\n")+"-----END PUBLIC KEY-----";},P.prototype.hasPublicKeyProperty=function(e){return(e=e||{}).hasOwnProperty("n")&&e.hasOwnProperty("e");},P.prototype.hasPrivateKeyProperty=function(e){return(e=e||{}).hasOwnProperty("n")&&e.hasOwnProperty("e")&&e.hasOwnProperty("d")&&e.hasOwnProperty("p")&&e.hasOwnProperty("q")&&e.hasOwnProperty("dmp1")&&e.hasOwnProperty("dmq1")&&e.hasOwnProperty("coeff");},P.prototype.parsePropertiesFrom=function(e){this.n=e.n,this.e=e.e,e.hasOwnProperty("d")&&(this.d=e.d,this.p=e.p,this.q=e.q,this.dmp1=e.dmp1,this.dmq1=e.dmq1,this.coeff=e.coeff);};var W=function(e){P.call(this),e&&("string"==typeof e?this.parseKey(e):(this.hasPrivateKeyProperty(e)||this.hasPublicKeyProperty(e))&&this.parsePropertiesFrom(e));};(W.prototype=new P()).constructor=W;var z=function(e){e=e||{},this.default_key_size=parseInt(e.default_key_size)||1024,this.default_public_exponent=e.default_public_exponent||"010001",this.log=e.log||!1,this.key=null;};z.prototype.setKey=function(e){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new W(e);},z.prototype.setPrivateKey=function(e){this.setKey(e);},z.prototype.setPublicKey=function(e){this.setKey(e);},z.prototype.decrypt=function(e){try{return this.getKey().decrypt(function(e){var t,r,i="",o=0;for(t=0;t<e.length&&e.charAt(t)!=V;++t)v=F.indexOf(e.charAt(t)),v<0||(0==o?(i+=n(v>>2),r=3&v,o=1):1==o?(i+=n(r<<2|v>>4),r=15&v,o=2):2==o?(i+=n(r),i+=n(v>>2),r=3&v,o=3):(i+=n(r<<2|v>>4),i+=n(15&v),o=0));return 1==o&&(i+=n(r<<2)),i;}(e));}catch(e){return!1;}},z.prototype.encrypt=function(e){try{return _(this.getKey().encrypt(e));}catch(e){return!1;}},z.prototype.getKey=function(e){if(!this.key){if(this.key=new W(),e&&"[object Function]"==={}.toString.call(e))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,e);this.key.generate(this.default_key_size,this.default_public_exponent);}return this.key;},z.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey();},z.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64();},z.prototype.getPublicKey=function(){return this.getKey().getPublicKey();},z.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64();},z.version="2.3.1",e.JSEncrypt=z;}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.AV=e();}}(function(){return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var d="function"==typeof require&&require;if(!s&&d)return d(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'");}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return i(r||e);},c,c.exports,e,t,r,n);}return r[a].exports;}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i;}({1:[function(e,t,r){var n,i,o;for(n in o=e("./src/aurora"))i=o[n],r[n]=i;e("./src/devices/webaudio"),e("./src/devices/mozilla");},{"./src/aurora":37,"./src/devices/mozilla":56,"./src/devices/webaudio":58}],2:[function(e,t,r){!function(){var e=void 0!==r?r:this,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n(e){this.message=e;}n.prototype=new Error(),n.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var r,i,o=0,a=t,s="";e.charAt(0|o)||(a="=",o%1);s+=a.charAt(63&r>>8-o%1*8)){if((i=e.charCodeAt(o+=3/4))>255)throw new n("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|i;}return s;}),e.atob||(e.atob=function(e){if((e=e.replace(/=+$/,"")).length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,i,o=0,a=0,s="";i=e.charAt(a++);~i&&(r=o%4?64*r+i:i,o++%4)?s+=String.fromCharCode(255&r>>(-2*o&6)):0)i=t.indexOf(i);return s;});}();},{}],3:[function(e,t,r){!function(e){"use strict";var t="undefined"!=typeof Uint8Array?Uint8Array:Array,r="+".charCodeAt(0),n="/".charCodeAt(0),i="0".charCodeAt(0),o="a".charCodeAt(0),a="A".charCodeAt(0);function s(e){var t=e.charCodeAt(0);return t===r?62:t===n?63:t<i?-1:t<i+10?t-i+26+26:t<a+26?t-a:t<o+26?t-o+26:void 0;}e.toByteArray=function(e){var r,n,i,o,a,d;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=e.length;a="="===e.charAt(c-2)?2:"="===e.charAt(c-1)?1:0,d=new t(3*e.length/4-a),i=a>0?e.length-4:e.length;var f=0;function u(e){d[f++]=e;}for(r=0,n=0;r<i;r+=4,n+=3)u((16711680&(o=s(e.charAt(r))<<18|s(e.charAt(r+1))<<12|s(e.charAt(r+2))<<6|s(e.charAt(r+3))))>>16),u((65280&o)>>8),u(255&o);return 2===a?u(255&(o=s(e.charAt(r))<<2|s(e.charAt(r+1))>>4)):1===a&&(u((o=s(e.charAt(r))<<10|s(e.charAt(r+1))<<4|s(e.charAt(r+2))>>2)>>8&255),u(255&o)),d;},e.fromByteArray=function(e){var t,r,n,i,o=e.length%3,a="";function s(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e);}for(t=0,n=e.length-o;t<n;t+=3)r=(e[t]<<16)+(e[t+1]<<8)+e[t+2],a+=s((i=r)>>18&63)+s(i>>12&63)+s(i>>6&63)+s(63&i);switch(o){case 1:a+=s((r=e[e.length-1])>>2),a+=s(r<<4&63),a+="==";break;case 2:a+=s((r=(e[e.length-2]<<8)+e[e.length-1])>>10),a+=s(r>>4&63),a+=s(r<<2&63),a+="=";}return a;};}(void 0===r?this.base64js={}:r);},{}],4:[function(e,t,r){},{}],5:[function(e,t,r){/*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
     * @license  MIT
     */var n=e("base64-js"),i=e("ieee754"),o=e("is-array");r.Buffer=s,r.SlowBuffer=s,r.INSPECT_MAX_BYTES=50,s.poolSize=8192;var a=1073741823;function s(e,t,r){if(!(this instanceof s))return new s(e,t,r);var n,i,d,c=typeof e;if("number"===c)n=e>0?e>>>0:0;else if("string"===c)"base64"===t&&(e=function(e){e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"");}(e).replace(T,"");for(;e.length%4!=0;)e+="=";return e;}(e)),n=s.byteLength(e,t);else{if("object"!==c||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&o(e.data)&&(e=e.data),n=+e.length>0?Math.floor(+e.length):0;}if(this.length>a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");if(s.TYPED_ARRAY_SUPPORT?i=s._augment(new Uint8Array(n)):((i=this).length=n,i._isBuffer=!0),s.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)i._set(e);else if(function(e){return o(e)||s.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length;}(e)){if(s.isBuffer(e))for(d=0;d<n;d++)i[d]=e.readUInt8(d);else for(d=0;d<n;d++)i[d]=(e[d]%256+256)%256;}else if("string"===c)i.write(e,0,t);else if("number"===c&&!s.TYPED_ARRAY_SUPPORT&&!r)for(d=0;d<n;d++)i[d]=0;return i;}function d(e,t,r,n){return O(function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t;}(t),e,r,n);}function c(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r));}function f(e,t,r){var n="",i="";r=Math.min(e.length,r);for(var o=t;o<r;o++)e[o]<=127?(n+=M(i)+String.fromCharCode(e[o]),i=""):i+="%"+e[o].toString(16);return n+M(i);}function u(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;i++)n+=String.fromCharCode(e[i]);return n;}function l(e,t,r){return u(e,t,r);}function p(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;o++)i+=P(e[o]);return i;}function h(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i;}function g(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length");}function y(e,t,r,n,i,o){if(!s.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||t<o)throw new TypeError("value is out of bounds");if(r+n>e.length)throw new TypeError("index out of range");}function b(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;i++)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i);}function m(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;i++)e[r+i]=t>>>8*(n?i:3-i)&255;}function v(e,t,r,n,i,o){if(t>i||t<o)throw new TypeError("value is out of bounds");if(r+n>e.length)throw new TypeError("index out of range");}function S(e,t,r,n,o){return o||v(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4;}function k(e,t,r,n,o){return o||v(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8;}s.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42;},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength;}catch(e){return!1;}}(),s.isBuffer=function(e){return!(null==e||!e._isBuffer);},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o&&e[i]===t[i];i++);return i!==o&&(r=e[i],n=t[i]),r<n?-1:n<r?1:0;},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},s.concat=function(e,t){if(!o(e))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===e.length)return new s(0);if(1===e.length)return e[0];var r;if(void 0===t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var n=new s(t),i=0;for(r=0;r<e.length;r++){var a=e[r];a.copy(n,i),i+=a.length;}return n;},s.byteLength=function(e,t){var r;switch(e+="",t||"utf8"){case"ascii":case"binary":case"raw":default:r=e.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;case"hex":r=e.length>>>1;break;case"utf8":case"utf-8":r=_(e).length;break;case"base64":r=w(e).length;}return r;},s.prototype.length=void 0,s.prototype.parent=void 0,s.prototype.toString=function(e,t,r){var n=!1;if(e||(e="utf8"),(t>>>=0)<0&&(t=0),(r=void 0===r||r===1/0?this.length:r>>>0)>this.length&&(r=this.length),r<=t)return"";for(;;)switch(e){case"hex":return p(this,t,r);case"utf8":case"utf-8":return f(this,t,r);case"ascii":return u(this,t,r);case"binary":return l(this,t,r);case"base64":return c(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0;}},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return 0===s.compare(this,e);},s.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">";},s.prototype.compare=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return s.compare(this,e);},s.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e);},s.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t);},s.prototype.write=function(e,t,r,n){if(isFinite(t))isFinite(r)||(n=r,r=void 0);else{var i=n;n=t,t=r,r=i;}t=Number(t)||0;var o,a=this.length-t;switch(r?(r=Number(r))>a&&(r=a):r=a,n=String(n||"utf8").toLowerCase()){case"hex":o=function(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;a++){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[r+a]=s;}return a;}(this,e,t,r);break;case"utf8":case"utf-8":o=function(e,t,r,n){return O(_(t),e,r,n);}(this,e,t,r);break;case"ascii":o=d(this,e,t,r);break;case"binary":o=function(e,t,r,n){return d(e,t,r,n);}(this,e,t,r);break;case"base64":o=function(e,t,r,n){return O(w(t),e,r,n);}(this,e,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=function(e,t,r,n){return O(function(e){for(var t,r,n,i=[],o=0;o<e.length;o++)r=(t=e.charCodeAt(o))>>8,n=t%256,i.push(n),i.push(r);return i;}(t),e,r,n,2);}(this,e,t,r);break;default:throw new TypeError("Unknown encoding: "+n);}return o;},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)};},s.prototype.slice=function(e,t){var r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)return s._augment(this.subarray(e,t));for(var n=t-e,i=new s(n,void 0,!0),o=0;o<n;o++)i[o]=this[o+e];return i;},s.prototype.readUInt8=function(e,t){return t||g(e,1,this.length),this[e];},s.prototype.readUInt16LE=function(e,t){return t||g(e,2,this.length),this[e]|this[e+1]<<8;},s.prototype.readUInt16BE=function(e,t){return t||g(e,2,this.length),this[e]<<8|this[e+1];},s.prototype.readUInt32LE=function(e,t){return t||g(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3];},s.prototype.readUInt32BE=function(e,t){return t||g(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3]);},s.prototype.readInt8=function(e,t){return t||g(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e];},s.prototype.readInt16LE=function(e,t){t||g(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r;},s.prototype.readInt16BE=function(e,t){t||g(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r;},s.prototype.readInt32LE=function(e,t){return t||g(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24;},s.prototype.readInt32BE=function(e,t){return t||g(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3];},s.prototype.readFloatLE=function(e,t){return t||g(e,4,this.length),i.read(this,e,!0,23,4);},s.prototype.readFloatBE=function(e,t){return t||g(e,4,this.length),i.read(this,e,!1,23,4);},s.prototype.readDoubleLE=function(e,t){return t||g(e,8,this.length),i.read(this,e,!0,52,8);},s.prototype.readDoubleBE=function(e,t){return t||g(e,8,this.length),i.read(this,e,!1,52,8);},s.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1;},s.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):b(this,e,t,!0),t+2;},s.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):b(this,e,t,!1),t+2;},s.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):m(this,e,t,!0),t+4;},s.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):m(this,e,t,!1),t+4;},s.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e,t+1;},s.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):b(this,e,t,!0),t+2;},s.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):b(this,e,t,!1),t+2;},s.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):m(this,e,t,!0),t+4;},s.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):m(this,e,t,!1),t+4;},s.prototype.writeFloatLE=function(e,t,r){return S(this,e,t,!0,r);},s.prototype.writeFloatBE=function(e,t,r){return S(this,e,t,!1,r);},s.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r);},s.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r);},s.prototype.copy=function(e,t,r,n){var i=this;if(r||(r=0),n||0===n||(n=this.length),t||(t=0),n!==r&&0!==e.length&&0!==i.length){if(n<r)throw new TypeError("sourceEnd < sourceStart");if(t<0||t>=e.length)throw new TypeError("targetStart out of bounds");if(r<0||r>=i.length)throw new TypeError("sourceStart out of bounds");if(n<0||n>i.length)throw new TypeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o=n-r;if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(var a=0;a<o;a++)e[a+t]=this[a+r];else e._set(this.subarray(r,r+o),t);}},s.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),r<t)throw new TypeError("end < start");if(r!==t&&0!==this.length){if(t<0||t>=this.length)throw new TypeError("start out of bounds");if(r<0||r>this.length)throw new TypeError("end out of bounds");var n;if("number"==typeof e)for(n=t;n<r;n++)this[n]=e;else{var i=_(e.toString()),o=i.length;for(n=t;n<r;n++)this[n]=i[n%o];}return this;}},s.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(s.TYPED_ARRAY_SUPPORT)return new s(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;t<r;t+=1)e[t]=this[t];return e.buffer;}throw new TypeError("Buffer.toArrayBuffer not supported in this browser");};var C=s.prototype;s._augment=function(e){return e.constructor=s,e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=C.get,e.set=C.set,e.write=C.write,e.toString=C.toString,e.toLocaleString=C.toString,e.toJSON=C.toJSON,e.equals=C.equals,e.compare=C.compare,e.copy=C.copy,e.slice=C.slice,e.readUInt8=C.readUInt8,e.readUInt16LE=C.readUInt16LE,e.readUInt16BE=C.readUInt16BE,e.readUInt32LE=C.readUInt32LE,e.readUInt32BE=C.readUInt32BE,e.readInt8=C.readInt8,e.readInt16LE=C.readInt16LE,e.readInt16BE=C.readInt16BE,e.readInt32LE=C.readInt32LE,e.readInt32BE=C.readInt32BE,e.readFloatLE=C.readFloatLE,e.readFloatBE=C.readFloatBE,e.readDoubleLE=C.readDoubleLE,e.readDoubleBE=C.readDoubleBE,e.writeUInt8=C.writeUInt8,e.writeUInt16LE=C.writeUInt16LE,e.writeUInt16BE=C.writeUInt16BE,e.writeUInt32LE=C.writeUInt32LE,e.writeUInt32BE=C.writeUInt32BE,e.writeInt8=C.writeInt8,e.writeInt16LE=C.writeInt16LE,e.writeInt16BE=C.writeInt16BE,e.writeInt32LE=C.writeInt32LE,e.writeInt32BE=C.writeInt32BE,e.writeFloatLE=C.writeFloatLE,e.writeFloatBE=C.writeFloatBE,e.writeDoubleLE=C.writeDoubleLE,e.writeDoubleBE=C.writeDoubleBE,e.fill=C.fill,e.inspect=C.inspect,e.toArrayBuffer=C.toArrayBuffer,e;};var T=/[^+\/0-9A-z]/g;function P(e){return e<16?"0"+e.toString(16):e.toString(16);}function _(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);if(n<=127)t.push(n);else{var i=r;n>=55296&&n<=57343&&r++;for(var o=encodeURIComponent(e.slice(i,r+1)).substr(1).split("%"),a=0;a<o.length;a++)t.push(parseInt(o[a],16));}}return t;}function w(e){return n.toByteArray(e);}function O(e,t,r,n,i){i&&(n-=n%i);for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);o++)t[o+r]=e[o];return o;}function M(e){try{return decodeURIComponent(e);}catch(e){return String.fromCharCode(65533);}}},{"base64-js":3,ieee754:11,"is-array":13}],6:[function(e,t,r){(function(e){function t(e){return Object.prototype.toString.call(e);}r.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e);},r.isBoolean=function(e){return"boolean"==typeof e;},r.isNull=function(e){return null===e;},r.isNullOrUndefined=function(e){return null==e;},r.isNumber=function(e){return"number"==typeof e;},r.isString=function(e){return"string"==typeof e;},r.isSymbol=function(e){return"symbol"==typeof e;},r.isUndefined=function(e){return void 0===e;},r.isRegExp=function(e){return"[object RegExp]"===t(e);},r.isObject=function(e){return"object"==typeof e&&null!==e;},r.isDate=function(e){return"[object Date]"===t(e);},r.isError=function(e){return"[object Error]"===t(e)||e instanceof Error;},r.isFunction=function(e){return"function"==typeof e;},r.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e;},r.isBuffer=e.isBuffer;}).call(this,e("buffer").Buffer);},{buffer:5}],7:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0;}function i(e){return"function"==typeof e;}function o(e){return"object"==typeof e&&null!==e;}function a(e){return void 0===e;}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this;},n.prototype.emit=function(e){var t,r,n,s,d,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.');}if(a(r=this._events[e]))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,s=new Array(n-1),d=1;d<n;d++)s[d-1]=arguments[d];r.apply(this,s);}else if(o(r)){for(n=arguments.length,s=new Array(n-1),d=1;d<n;d++)s[d-1]=arguments[d];for(n=(c=r.slice()).length,d=0;d<n;d++)c[d].apply(this,s);}return!0;},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned)&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace());return this;},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments));}return n.listener=t,this.on(e,n),this;},n.prototype.removeListener=function(e,t){var r,n,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(r=this._events[e]).length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(s=a;s-->0;)if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break;}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t);}return this;},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this;}if(i(r=this._events[e]))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this;},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[];},n.listenerCount=function(e,t){return e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0;};},{}],8:[function(e,t,r){var n=t.exports,i=(e("events").EventEmitter,e("./lib/request")),o=e("url");n.request=function(e,t){"string"==typeof e&&(e=o.parse(e)),e||(e={}),e.host||e.port||(e.port=parseInt(window.location.port,10)),!e.host&&e.hostname&&(e.host=e.hostname),e.protocol||(e.scheme?e.protocol=e.scheme+":":e.protocol=window.location.protocol),e.host||(e.host=window.location.hostname||window.location.host),/:/.test(e.host)&&(e.port||(e.port=e.host.split(":")[1]),e.host=e.host.split(":")[0]),e.port||(e.port="https:"==e.protocol?443:80);var r=new i(new a(),e);return t&&r.on("response",t),r;},n.get=function(e,t){e.method="GET";var r=n.request(e,t);return r.end(),r;},n.Agent=function(){},n.Agent.defaultMaxSockets=4;var a=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],t=0;t<e.length;t++)try{var r=new window.ActiveXObject(e[t]);return function(){if(r){var n=r;return r=null,n;}return new window.ActiveXObject(e[t]);};}catch(e){}throw new Error("ajax not supported in this browser");}throw new Error("ajax not supported in this browser");}();n.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};},{"./lib/request":9,events:7,url:32}],9:[function(e,t,r){var n=e("stream"),i=e("./response"),o=e("Base64"),a=e("inherits"),s=t.exports=function(e,t){var r=this;r.writable=!0,r.xhr=e,r.body=[],r.uri=(t.protocol||"http:")+"//"+t.host+(t.port?":"+t.port:"")+(t.path||"/"),void 0===t.withCredentials&&(t.withCredentials=!0);try{e.withCredentials=t.withCredentials;}catch(e){}if(t.responseType)try{e.responseType=t.responseType;}catch(e){}if(e.open(t.method||"GET",r.uri,!0),e.onerror=function(e){r.emit("error",new Error("Network error"));},r._headers={},t.headers)for(var n=d(t.headers),a=0;a<n.length;a++){var s=n[a];if(r.isSafeRequestHeader(s)){var c=t.headers[s];r.setHeader(s,c);}}t.auth&&this.setHeader("Authorization","Basic "+o.btoa(t.auth));var f=new i();f.on("close",function(){r.emit("close");}),f.on("ready",function(){r.emit("response",f);}),f.on("error",function(e){r.emit("error",e);}),e.onreadystatechange=function(){e.__aborted||f.handle(e);};};a(s,n),s.prototype.setHeader=function(e,t){this._headers[e.toLowerCase()]=t;},s.prototype.getHeader=function(e){return this._headers[e.toLowerCase()];},s.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()];},s.prototype.write=function(e){this.body.push(e);},s.prototype.destroy=function(e){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close");},s.prototype.end=function(e){void 0!==e&&this.body.push(e);for(var t=d(this._headers),r=0;r<t.length;r++){var n=t[r],i=this._headers[n];if(c(i))for(var o=0;o<i.length;o++)this.xhr.setRequestHeader(n,i[o]);else this.xhr.setRequestHeader(n,i);}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(c(this.body[0])){var a=[];for(r=0;r<this.body.length;r++)a.push.apply(a,this.body[r]);this.xhr.send(a);}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){var s=0;for(r=0;r<this.body.length;r++)s+=this.body[r].length;a=new this.body[0].constructor(s);var f=0;for(r=0;r<this.body.length;r++){var l=this.body[r];for(o=0;o<l.length;o++)a[f++]=l[o];}this.xhr.send(a);}else if(u(this.body[0]))this.xhr.send(this.body[0]);else{for(a="",r=0;r<this.body.length;r++)a+=this.body[r].toString();this.xhr.send(a);}},s.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],s.prototype.isSafeRequestHeader=function(e){return!!e&&-1===f(s.unsafeHeaders,e.toLowerCase());};var d=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t;},c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e);},f=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1;},u=function(e){return"undefined"!=typeof Blob&&e instanceof Blob||"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof FormData&&e instanceof FormData||void 0;};},{"./response":10,Base64:2,inherits:12,stream:30}],10:[function(e,t,r){var n=e("stream"),i=e("util"),o=t.exports=function(e){this.offset=0,this.readable=!0;};i.inherits(o,n);var a={streaming:!0,status2:!0};function s(e){for(var t=e.getAllResponseHeaders().split(/\r?\n/),r={},n=0;n<t.length;n++){var i=t[n];if(""!==i){var o=i.match(/^([^:]+):\s*(.*)/);if(o){var a=o[1].toLowerCase(),s=o[2];void 0!==r[a]?d(r[a])?r[a].push(s):r[a]=[r[a],s]:r[a]=s;}else r[i]=!0;}}return r;}o.prototype.getResponse=function(e){var t=String(e.responseType).toLowerCase();return"blob"===t?e.responseBlob||e.response:"arraybuffer"===t?e.response:e.responseText;},o.prototype.getHeader=function(e){return this.headers[e.toLowerCase()];},o.prototype.handle=function(e){if(2===e.readyState&&a.status2){try{this.statusCode=e.status,this.headers=s(e);}catch(e){a.status2=!1;}a.status2&&this.emit("ready");}else if(a.streaming&&3===e.readyState){try{this.statusCode||(this.statusCode=e.status,this.headers=s(e),this.emit("ready"));}catch(e){}try{this._emitData(e);}catch(e){a.streaming=!1;}}else 4===e.readyState&&(this.statusCode||(this.statusCode=e.status,this.emit("ready")),this._emitData(e),e.error?this.emit("error",this.getResponse(e)):this.emit("end"),this.emit("close"));},o.prototype._emitData=function(e){var t=this.getResponse(e);if(t.toString().match(/ArrayBuffer/))return this.emit("data",new Uint8Array(t,this.offset)),void(this.offset=t.byteLength);t.length>this.offset&&(this.emit("data",t.slice(this.offset)),this.offset=t.length);};var d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e);};},{stream:30,util:35}],11:[function(e,t,r){r.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,d=(1<<s)-1,c=d>>1,f=-7,u=r?i-1:0,l=r?-1:1,p=e[t+u];for(u+=l,o=p&(1<<-f)-1,p>>=-f,f+=s;f>0;o=256*o+e[t+u],u+=l,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=n;f>0;a=256*a+e[t+u],u+=l,f-=8);if(0===o)o=1-c;else{if(o===d)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=c;}return(p?-1:1)*a*Math.pow(2,o-n);},r.write=function(e,t,r,n,i,o){var a,s,d,c=8*o-i-1,f=(1<<c)-1,u=f>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,h=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-a))<1&&(a--,d*=2),(t+=a+u>=1?l/d:l*Math.pow(2,1-u))*d>=2&&(a++,d/=2),a+u>=f?(s=0,a=f):a+u>=1?(s=(t*d-1)*Math.pow(2,i),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,i),a=0));i>=8;e[r+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[r+p]=255&a,p+=h,a/=256,c-=8);e[r+p-h]|=128*g;};},{}],12:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r(),e.prototype.constructor=e;};},{}],13:[function(e,t,r){var n=Array.isArray,i=Object.prototype.toString;t.exports=n||function(e){return!!e&&"[object Array]"==i.call(e);};},{}],14:[function(e,t,r){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e);};},{}],15:[function(e,t,r){var n=t.exports={};function i(){}n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e);};if(t){var r=[];return window.addEventListener("message",function(e){var t=e.source;t!==window&&null!==t||"process-tick"!==e.data||(e.stopPropagation(),r.length>0&&r.shift()());},!0),function(e){r.push(e),window.postMessage("process-tick","*");};}return function(e){setTimeout(e,0);};}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=i,n.addListener=i,n.once=i,n.off=i,n.removeListener=i,n.removeAllListeners=i,n.emit=i,n.binding=function(e){throw new Error("process.binding is not supported");},n.cwd=function(){return"/";},n.chdir=function(e){throw new Error("process.chdir is not supported");};},{}],16:[function(e,t,r){(function(e){!function(n){var i="object"==typeof r&&r,o="object"==typeof t&&t&&t.exports==i&&t,a="object"==typeof e&&e;a.global!==a&&a.window!==a||(n=a);var s,d,c=2147483647,f=36,u=/^xn--/,l=/[^ -~]/,p=/\x2E|\u3002|\uFF0E|\uFF61/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=Math.floor,y=String.fromCharCode;function b(e){throw RangeError(h[e]);}function m(e,t){for(var r=e.length;r--;)e[r]=t(e[r]);return e;}function v(e,t){return m(e.split(p),t).join(".");}function S(e){for(var t,r,n=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n;}function k(e){return m(e,function(e){var t="";return e>65535&&(t+=y((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=y(e);}).join("");}function C(e,t){return e+22+75*(e<26)-((0!=t)<<5);}function T(e,t,r){var n=0;for(e=r?g(e/700):e>>1,e+=g(e/t);e>455;n+=f)e=g(e/35);return g(n+36*e/(e+38));}function P(e){var t,r,n,i,o,a,s,d,u,l,p,h=[],y=e.length,m=0,v=128,S=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&b("not-basic"),h.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<y;){for(o=m,a=1,s=f;i>=y&&b("invalid-input"),((d=(p=e.charCodeAt(i++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:f)>=f||d>g((c-m)/a))&&b("overflow"),m+=d*a,!(d<(u=s<=S?1:s>=S+26?26:s-S));s+=f)a>g(c/(l=f-u))&&b("overflow"),a*=l;S=T(m-o,t=h.length+1,0==o),g(m/t)>c-v&&b("overflow"),v+=g(m/t),m%=t,h.splice(m++,0,v);}return k(h);}function _(e){var t,r,n,i,o,a,s,d,u,l,p,h,m,v,k,P=[];for(h=(e=S(e)).length,t=128,r=0,o=72,a=0;a<h;++a)(p=e[a])<128&&P.push(y(p));for(n=i=P.length,i&&P.push("-");n<h;){for(s=c,a=0;a<h;++a)(p=e[a])>=t&&p<s&&(s=p);for(s-t>g((c-r)/(m=n+1))&&b("overflow"),r+=(s-t)*m,t=s,a=0;a<h;++a)if((p=e[a])<t&&++r>c&&b("overflow"),p==t){for(d=r,u=f;!(d<(l=u<=o?1:u>=o+26?26:u-o));u+=f)k=d-l,v=f-l,P.push(y(C(l+k%v,0))),d=g(k/v);P.push(y(C(d,0))),o=T(r,m,n==i),r=0,++n;}++r,++t;}return P.join("");}if(s={version:"1.2.4",ucs2:{decode:S,encode:k},decode:P,encode:_,toASCII:function(e){return v(e,function(e){return l.test(e)?"xn--"+_(e):e;});},toUnicode:function(e){return v(e,function(e){return u.test(e)?P(e.slice(4).toLowerCase()):e;});}},i&&!i.nodeType){if(o)o.exports=s;else for(d in s)s.hasOwnProperty(d)&&(i[d]=s[d]);}else n.punycode=s;}(this);}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{}],17:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t);}t.exports=function(e,t,r,o){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var d=1e3;o&&"number"==typeof o.maxKeys&&(d=o.maxKeys);var c=e.length;d>0&&c>d&&(c=d);for(var f=0;f<c;++f){var u,l,p,h,g=e[f].replace(s,"%20"),y=g.indexOf(r);y>=0?(u=g.substr(0,y),l=g.substr(y+1)):(u=g,l=""),p=decodeURIComponent(u),h=decodeURIComponent(l),n(a,p)?i(a[p])?a[p].push(h):a[p]=[a[p],h]:a[p]=h;}return a;};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e);};},{}],18:[function(e,t,r){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return"";}};t.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),function(a){var s=encodeURIComponent(n(a))+r;return i(e[a])?o(e[a],function(e){return s+encodeURIComponent(n(e));}).join(t):s+encodeURIComponent(n(e[a]));}).join(t):s?encodeURIComponent(n(s))+r+encodeURIComponent(n(e)):"";};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e);};function o(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r;}var a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t;};},{}],19:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode");},{"./decode":17,"./encode":18}],20:[function(e,t,r){t.exports=e("./lib/_stream_duplex.js");},{"./lib/_stream_duplex.js":21}],21:[function(e,t,r){(function(r){t.exports=s;var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t;},i=e("core-util-is");i.inherits=e("inherits");var o=e("./_stream_readable"),a=e("./_stream_writable");function s(e){if(!(this instanceof s))return new s(e);o.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d);}function d(){this.allowHalfOpen||this._writableState.ended||r.nextTick(this.end.bind(this));}i.inherits(s,o),function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r);}(n(a.prototype),function(e){s.prototype[e]||(s.prototype[e]=a.prototype[e]);});}).call(this,e("v3go1D"));},{"./_stream_readable":23,"./_stream_writable":25,"core-util-is":6,inherits:12,v3go1D:15}],22:[function(e,t,r){t.exports=o;var n=e("./_stream_transform"),i=e("core-util-is");function o(e){if(!(this instanceof o))return new o(e);n.call(this,e);}i.inherits=e("inherits"),i.inherits(o,n),o.prototype._transform=function(e,t,r){r(null,e);};},{"./_stream_transform":24,"core-util-is":6,inherits:12}],23:[function(e,t,r){(function(r){t.exports=f;var n=e("isarray"),i=e("buffer").Buffer;f.ReadableState=c;var o=e("events").EventEmitter;o.listenerCount||(o.listenerCount=function(e,t){return e.listeners(t).length;});var a,s=e("stream"),d=e("core-util-is");function c(t,r){var n=(t=t||{}).highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(a||(a=e("string_decoder/").StringDecoder),this.decoder=new a(t.encoding),this.encoding=t.encoding);}function f(e){if(!(this instanceof f))return new f(e);this._readableState=new c(e,this),this.readable=!0,s.call(this);}function u(e,t,n,o,a){var s=function(e,t){var r=null;i.isBuffer(t)||"string"==typeof t||null==t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r;}(t,n);if(s)e.emit("error",s);else if(null==n)t.reading=!1,t.ended||function(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length);}t.ended=!0,t.length>0?h(e):S(e);}(e,t);else if(t.objectMode||n&&n.length>0){if(t.ended&&!a){var d=new Error("stream.push() after EOF");e.emit("error",d);}else if(t.endEmitted&&a){d=new Error("stream.unshift() after end event");e.emit("error",d);}else!t.decoder||a||o||(n=t.decoder.write(n)),t.length+=t.objectMode?1:n.length,a?t.buffer.unshift(n):(t.reading=!1,t.buffer.push(n)),t.needReadable&&h(e),function(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(function(){!function(e,t){var r=t.length;for(;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),r!==t.length);)r=t.length;t.readingMore=!1;}(e,t);}));}(e,t);}else a||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length);}(t);}d.inherits=e("inherits"),d.inherits(f,s),f.prototype.push=function(e,t){var r=this._readableState;return"string"!=typeof e||r.objectMode||(t=t||r.defaultEncoding)!==r.encoding&&(e=new i(e,t),t=""),u(this,r,e,t,!1);},f.prototype.unshift=function(e){return u(this,this._readableState,e,"",!0);},f.prototype.setEncoding=function(t){a||(a=e("string_decoder/").StringDecoder),this._readableState.decoder=new a(t),this._readableState.encoding=t;};var l=8388608;function p(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>=l)e=l;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++;}return e;}(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e);}function h(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?r.nextTick(function(){g(e);}):g(e));}function g(e){e.emit("readable");}function y(e){var t,r=e._readableState;function n(e,n,i){!1===e.write(t)&&r.awaitDrain++;}for(r.awaitDrain=0;r.pipesCount&&null!==(t=e.read());)if(1===r.pipesCount?n(r.pipes):k(r.pipes,n),e.emit("data",t),r.awaitDrain>0)return;if(0===r.pipesCount)return r.flowing=!1,void(o.listenerCount(e,"data")>0&&m(e));r.ranOut=!0;}function b(){this._readableState.ranOut&&(this._readableState.ranOut=!1,y(this));}function m(e,t){if(e._readableState.flowing)throw new Error("Cannot switch to old mode now.");var n=t||!1,i=!1;e.readable=!0,e.pipe=s.prototype.pipe,e.on=e.addListener=s.prototype.on,e.on("readable",function(){var t;for(i=!0;!n&&null!==(t=e.read());)e.emit("data",t);null===t&&(i=!1,e._readableState.needReadable=!0);}),e.pause=function(){n=!0,this.emit("pause");},e.resume=function(){n=!1,i?r.nextTick(function(){e.emit("readable");}):this.read(0),this.emit("resume");},e.emit("readable");}function v(e,t){var r,n=t.buffer,o=t.length,a=!!t.decoder,s=!!t.objectMode;if(0===n.length)return null;if(0===o)r=null;else if(s)r=n.shift();else if(!e||e>=o)r=a?n.join(""):i.concat(n,o),n.length=0;else{if(e<n[0].length)r=(u=n[0]).slice(0,e),n[0]=u.slice(e);else if(e===n[0].length)r=n.shift();else{r=a?"":new i(e);for(var d=0,c=0,f=n.length;c<f&&d<e;c++){var u=n[0],l=Math.min(e-d,u.length);a?r+=u.slice(0,l):u.copy(r,d,0,l),l<u.length?n[0]=u.slice(l):n.shift(),d+=l;}}}return r;}function S(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,r.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"));}));}function k(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r);}f.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var r,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h(this),null;if(0===(e=p(e,t))&&t.ended)return r=null,t.length>0&&t.decoder&&(r=v(e,t),t.length-=r.length),0===t.length&&S(this),r;var i=t.needReadable;return t.length-e<=t.highWaterMark&&(i=!0),(t.ended||t.reading)&&(i=!1),i&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=p(n,t)),null===(r=e>0?v(e,t):null)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&S(this),r;},f.prototype._read=function(e){this.emit("error",new Error("not implemented"));},f.prototype.pipe=function(e,t){var i=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e);}a.pipesCount+=1;var s=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?c:u;function d(e){e===i&&u();}function c(){e.end();}a.endEmitted?r.nextTick(s):i.once("end",s),e.on("unpipe",d);var f=function(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&y(e);};}(i);function u(){e.removeListener("close",p),e.removeListener("finish",h),e.removeListener("drain",f),e.removeListener("error",l),e.removeListener("unpipe",d),i.removeListener("end",c),i.removeListener("end",u),e._writableState&&!e._writableState.needDrain||f();}function l(t){g(),e.removeListener("error",l),0===o.listenerCount(e,"error")&&e.emit("error",t);}function p(){e.removeListener("finish",h),g();}function h(){e.removeListener("close",p),g();}function g(){i.unpipe(e);}return e.on("drain",f),e._events&&e._events.error?n(e._events.error)?e._events.error.unshift(l):e._events.error=[l,e._events.error]:e.on("error",l),e.once("close",p),e.once("finish",h),e.emit("pipe",i),a.flowing||(this.on("readable",b),a.flowing=!0,r.nextTick(function(){y(i);})),e;},f.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",b),t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",b),t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this;}i=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1;}(t.pipes,e);return-1===i||(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this;},f.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||m(this),"readable"===e&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&h(this):this.read(0));}return r;},f.prototype.addListener=f.prototype.on,f.prototype.resume=function(){m(this),this.read(0),this.emit("resume");},f.prototype.pause=function(){m(this,!0),this.emit("pause");},f.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;for(var i in e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e);}n.push(null);}),e.on("data",function(i){(t.decoder&&(i=t.decoder.write(i)),t.objectMode&&null==i)||(t.objectMode||i&&i.length)&&(n.push(i)||(r=!0,e.pause()));}),e)"function"==typeof e[i]&&void 0===this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments);};}(i));return k(["error","close","destroy","pause","resume"],function(t){e.on(t,n.emit.bind(n,t));}),n._read=function(t){r&&(r=!1,e.resume());},n;},f._fromList=v;}).call(this,e("v3go1D"));},{buffer:5,"core-util-is":6,events:7,inherits:12,isarray:14,stream:30,"string_decoder/":31,v3go1D:15}],24:[function(e,t,r){t.exports=a;var n=e("./_stream_duplex"),i=e("core-util-is");function o(e,t){this.afterTransform=function(e,r){return function(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!=r&&e.push(r);i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark);}(t,e,r);},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null;}function a(e){if(!(this instanceof a))return new a(e);n.call(this,e);this._transformState=new o(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){s(t,e);}):s(t);});}function s(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=(e._readableState,e._transformState);if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null);}i.inherits=e("inherits"),i.inherits(a,n),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t);},a.prototype._transform=function(e,t,r){throw new Error("not implemented");},a.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark);}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0;};},{"./_stream_duplex":21,"core-util-is":6,inherits:12}],25:[function(e,t,r){(function(r){t.exports=d;var n=e("buffer").Buffer;d.WritableState=s;var i=e("core-util-is");i.inherits=e("inherits");var o=e("stream");function a(e,t,r){this.chunk=e,this.encoding=t,this.callback=r;}function s(e,t){var n=(e=e||{}).highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0;}(n),t)!function(e,t,n,i,o){n?r.nextTick(function(){o(i);}):o(i);e._writableState.errorEmitted=!0,e.emit("error",i);}(e,0,i,t,o);else{var a=u(e,n);a||n.bufferProcessing||!n.buffer.length||function(e,t){t.bufferProcessing=!0;for(var r=0;r<t.buffer.length;r++){var n=t.buffer[r],i=n.chunk,o=n.encoding,a=n.callback;if(c(e,t,t.objectMode?1:i.length,i,o,a),t.writing){r++;break;}}t.bufferProcessing=!1,r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0;}(e,n),i?r.nextTick(function(){f(e,n,a,o);}):f(e,n,a,o);}}(t,e);},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1;}function d(t){var r=e("./_stream_duplex");if(!(this instanceof d||this instanceof r))return new d(t);this._writableState=new s(t,this),this.writable=!0,o.call(this);}function c(e,t,r,n,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,e._write(n,i,t.onwrite),t.sync=!1;}function f(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));}(e,t),n(),r&&l(e,t);}function u(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing;}function l(e,t){var r=u(0,t);return r&&(t.finished=!0,e.emit("finish")),r;}i.inherits(d,o),d.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."));},d.prototype.write=function(e,t,i){var o=this._writableState,s=!1;return"function"==typeof t&&(i=t,t=null),n.isBuffer(e)?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof i&&(i=function(){}),o.ended?function(e,t,n){var i=new Error("write after end");e.emit("error",i),r.nextTick(function(){n(i);});}(this,0,i):function(e,t,i,o){var a=!0;if(!n.isBuffer(i)&&"string"!=typeof i&&null!=i&&!t.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),r.nextTick(function(){o(s);}),a=!1;}return a;}(this,o,e,i)&&(s=function(e,t,r,i,o){r=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=new n(t,r));return t;}(t,r,i),n.isBuffer(r)&&(i="buffer");var s=t.objectMode?1:r.length;t.length+=s;var d=t.length<t.highWaterMark;d||(t.needDrain=!0);t.writing?t.buffer.push(new a(r,i,o)):c(e,t,s,r,i,o);return d;}(this,o,e,t,i)),s;},d.prototype._write=function(e,t,r){r(new Error("not implemented"));},d.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.ending||i.finished||function(e,t,n){t.ending=!0,l(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0;}(this,i,n);};}).call(this,e("v3go1D"));},{"./_stream_duplex":21,buffer:5,"core-util-is":6,inherits:12,stream:30,v3go1D:15}],26:[function(e,t,r){t.exports=e("./lib/_stream_passthrough.js");},{"./lib/_stream_passthrough.js":22}],27:[function(e,t,r){(function(n){var i=e("stream");(r=t.exports=e("./lib/_stream_readable.js")).Stream=i,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),n.browser||"disable"!==n.env.READABLE_STREAM||(t.exports=e("stream"));}).call(this,e("v3go1D"));},{"./lib/_stream_duplex.js":21,"./lib/_stream_passthrough.js":22,"./lib/_stream_readable.js":23,"./lib/_stream_transform.js":24,"./lib/_stream_writable.js":25,stream:30,v3go1D:15}],28:[function(e,t,r){t.exports=e("./lib/_stream_transform.js");},{"./lib/_stream_transform.js":24}],29:[function(e,t,r){t.exports=e("./lib/_stream_writable.js");},{"./lib/_stream_writable.js":25}],30:[function(e,t,r){t.exports=i;var n=e("events").EventEmitter;function i(){n.call(this);}e("inherits")(i,n),i.Readable=e("readable-stream/readable.js"),i.Writable=e("readable-stream/writable.js"),i.Duplex=e("readable-stream/duplex.js"),i.Transform=e("readable-stream/transform.js"),i.PassThrough=e("readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause();}function o(){r.readable&&r.resume&&r.resume();}r.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",d));var a=!1;function s(){a||(a=!0,e.end());}function d(){a||(a=!0,"function"==typeof e.destroy&&e.destroy());}function c(e){if(f(),0===n.listenerCount(this,"error"))throw e;}function f(){r.removeListener("data",i),e.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",d),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",f),r.removeListener("close",f),e.removeListener("close",f);}return r.on("error",c),e.on("error",c),r.on("end",f),r.on("close",f),e.on("close",f),e.emit("pipe",r),e;};},{events:7,inherits:12,"readable-stream/duplex.js":20,"readable-stream/passthrough.js":26,"readable-stream/readable.js":27,"readable-stream/transform.js":28,"readable-stream/writable.js":29}],31:[function(e,t,r){var n=e("buffer").Buffer,i=n.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1;}};var o=r.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!i(e))throw new Error("Unknown encoding: "+e);}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=s;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=d;break;default:return void(this.write=a);}this.charBuffer=new n(6),this.charReceived=0,this.charLength=0;};function a(e){return e.toString(this.encoding);}function s(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0;}function d(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0;}o.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(e=e.slice(r,e.length),!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break;}this.charLength+=this.surrogateSize,t="";}this.detectIncompleteChar(e);var n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived);var i;n=(t+=e.toString(this.encoding,0,n)).length-1;if((i=t.charCodeAt(n))>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,n);}return t;},o.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break;}if(t<=2&&r>>4==14){this.charLength=3;break;}if(t<=3&&r>>3==30){this.charLength=4;break;}}this.charReceived=t;},o.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i);}return t;};},{buffer:5}],32:[function(e,t,r){var n=e("punycode");function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null;}r.parse=b,r.resolve=function(e,t){return b(e,!1,!0).resolve(t);},r.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t;},r.format=function(e){m(e)&&(e=b(e));return e instanceof i?e.format():i.prototype.format.call(e);},r.Url=i;var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,s=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(s),c=["%","/","?",";","#"].concat(d),f=["/","?","#"],u=/^[a-z0-9A-Z_-]{0,63}$/,l=/^([a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},h={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=e("querystring");function b(e,t,r){if(e&&v(e)&&e instanceof i)return e;var n=new i();return n.parse(e,t,r),n;}function m(e){return"string"==typeof e;}function v(e){return"object"==typeof e&&null!==e;}function S(e){return null===e;}i.prototype.parse=function(e,t,r){if(!m(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e;i=i.trim();var a=o.exec(i);if(a){var s=(a=a[0]).toLowerCase();this.protocol=s,i=i.substr(a.length);}if(r||a||i.match(/^\/\/[^@\/]+@[^@\/]+/)){var b="//"===i.substr(0,2);!b||a&&h[a]||(i=i.substr(2),this.slashes=!0);}if(!h[a]&&(b||a&&!g[a])){for(var v,S,k=-1,C=0;C<f.length;C++){-1!==(T=i.indexOf(f[C]))&&(-1===k||T<k)&&(k=T);}-1!==(S=-1===k?i.lastIndexOf("@"):i.lastIndexOf("@",k))&&(v=i.slice(0,S),i=i.slice(S+1),this.auth=decodeURIComponent(v)),k=-1;for(C=0;C<c.length;C++){var T;-1!==(T=i.indexOf(c[C]))&&(-1===k||T<k)&&(k=T);}-1===k&&(k=i.length),this.host=i.slice(0,k),i=i.slice(k),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var _=this.hostname.split(/\./),w=(C=0,_.length);C<w;C++){var O=_[C];if(O&&!O.match(u)){for(var M="",I=0,E=O.length;I<E;I++)O.charCodeAt(I)>127?M+="x":M+=O[I];if(!M.match(u)){var R=_.slice(0,C),L=_.slice(C+1),A=O.match(l);A&&(R.push(A[1]),L.unshift(A[2])),L.length&&(i="/"+L.join(".")+i),this.hostname=R.join(".");break;}}}if(this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),!P){var D=this.hostname.split("."),G=[];for(C=0;C<D.length;++C){var x=D[C];G.push(x.match(/[^A-Za-z0-9_-]/)?"xn--"+n.encode(x):x);}this.hostname=G.join(".");}var B=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+B,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==i[0]&&(i="/"+i));}if(!p[s])for(C=0,w=d.length;C<w;C++){var U=d[C],F=encodeURIComponent(U);F===U&&(F=escape(U)),i=i.split(U).join(F);}var V=i.indexOf("#");-1!==V&&(this.hash=i.substr(V),i=i.slice(0,V));var K=i.indexOf("?");if(-1!==K?(this.search=i.substr(K),this.query=i.substr(K+1),t&&(this.query=y.parse(this.query)),i=i.slice(0,K)):t&&(this.search="",this.query={}),i&&(this.pathname=i),g[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"",x=this.search||"";this.path=B+x;}return this.href=this.format(),this;},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&v(this.query)&&Object.keys(this.query).length&&(o=y.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),t+i+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e);}))+(a=a.replace("#","%23"))+n;},i.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format();},i.prototype.resolveObject=function(e){if(m(e)){var t=new i();t.parse(e,!1,!0),e=t;}var r=new i();if(Object.keys(this).forEach(function(e){r[e]=this[e];},this),r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(r[t]=e[t]);}),g[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(e.protocol&&e.protocol!==r.protocol){if(!g[e.protocol])return Object.keys(e).forEach(function(t){r[t]=e[t];}),r.href=r.format(),r;if(r.protocol=e.protocol,e.host||h[e.protocol])r.pathname=e.pathname;else{for(var n=(e.pathname||"").split("/");n.length&&!(e.host=n.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==n[0]&&n.unshift(""),n.length<2&&n.unshift(""),r.pathname=n.join("/");}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var o=r.pathname||"",a=r.search||"";r.path=o+a;}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r;}var s=r.pathname&&"/"===r.pathname.charAt(0),d=e.host||e.pathname&&"/"===e.pathname.charAt(0),c=d||s||r.host&&e.pathname,f=c,u=r.pathname&&r.pathname.split("/")||[],l=(n=e.pathname&&e.pathname.split("/")||[],r.protocol&&!g[r.protocol]);if(l&&(r.hostname="",r.port=null,r.host&&(""===u[0]?u[0]=r.host:u.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===n[0]?n[0]=e.host:n.unshift(e.host)),e.host=null),c=c&&(""===n[0]||""===u[0])),d)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,u=n;else if(n.length)u||(u=[]),u.pop(),u=u.concat(n),r.search=e.search,r.query=e.query;else if(null!=e.search){if(l)r.hostname=r.host=u.shift(),(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift());return r.search=e.search,r.query=e.query,S(r.pathname)&&S(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;}if(!u.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var p=u.slice(-1)[0],y=(r.host||e.host)&&("."===p||".."===p)||""===p,b=0,v=u.length;v>=0;v--)"."==(p=u[v])?u.splice(v,1):".."===p?(u.splice(v,1),b++):b&&(u.splice(v,1),b--);if(!c&&!f)for(;b--;b)u.unshift("..");!c||""===u[0]||u[0]&&"/"===u[0].charAt(0)||u.unshift(""),y&&"/"!==u.join("/").substr(-1)&&u.push("");var k,C=""===u[0]||u[0]&&"/"===u[0].charAt(0);l&&(r.hostname=r.host=C?"":u.length?u.shift():"",(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift()));return(c=c||r.host&&u.length)&&!C&&u.unshift(""),u.length?r.pathname=u.join("/"):(r.pathname=null,r.path=null),S(r.pathname)&&S(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r;},i.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e);};},{punycode:16,querystring:19}],33:[function(e,t,r){t.exports=e(12);},{}],34:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8;};},{}],35:[function(e,t,r){(function(t,n){var i=/%[sdj%]/g;r.format=function(e){if(!b(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(s(arguments[r]));return t.join(" ");}r=1;for(var n=arguments,o=n.length,a=String(e).replace(i,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++]);}catch(e){return"[Circular]";}default:return e;}}),d=n[r];r<o;d=n[++r])g(d)||!S(d)?a+=" "+d:a+=" "+s(d);return a;},r.deprecate=function(e,i){if(m(n.process))return function(){return r.deprecate(e,i).apply(this,arguments);};if(!0===t.noDeprecation)return e;var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0;}return e.apply(this,arguments);};};var o,a={};function s(e,t){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),h(t)?n.showHidden=t:t&&r._extend(n,t),m(n.showHidden)&&(n.showHidden=!1),m(n.depth)&&(n.depth=2),m(n.colors)&&(n.colors=!1),m(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=d),f(n,e,n.depth);}function d(e,t){var r=s.styles[t];return r?"["+s.colors[r][0]+"m"+e+"["+s.colors[r][1]+"m":e;}function c(e,t){return e;}function f(e,t,n){if(e.customInspect&&t&&T(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return b(i)||(i=f(e,i,n)),i;}var o=function(e,t){if(m(t))return e.stylize("undefined","undefined");if(b(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string");}if(y(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null");}(e,t);if(o)return o;var a=Object.keys(t),s=function(e){var t={};return e.forEach(function(e,r){t[e]=!0;}),t;}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),C(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return u(t);if(0===a.length){if(T(t)){var d=t.name?": "+t.name:"";return e.stylize("[Function"+d+"]","special");}if(v(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(k(t))return e.stylize(Date.prototype.toString.call(t),"date");if(C(t))return u(t);}var c,S="",P=!1,_=["{","}"];(p(t)&&(P=!0,_=["[","]"]),T(t))&&(S=" [Function"+(t.name?": "+t.name:"")+"]");return v(t)&&(S=" "+RegExp.prototype.toString.call(t)),k(t)&&(S=" "+Date.prototype.toUTCString.call(t)),C(t)&&(S=" "+u(t)),0!==a.length||P&&0!=t.length?n<0?v(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=P?function(e,t,r,n,i){for(var o=[],a=0,s=t.length;a<s;++a)M(t,String(a))?o.push(l(e,t,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(l(e,t,r,n,i,!0));}),o;}(e,t,n,s,a):a.map(function(r){return l(e,t,n,s,r,P);}),e.seen.pop(),function(e,t,r){var n=e.reduce(function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1;},0);if(n>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1];}(c,S,_)):_[0]+S+_[1];}function u(e){return"["+Error.prototype.toString.call(e)+"]";}function l(e,t,r,n,i,o){var a,s,d;if((d=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=d.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):d.set&&(s=e.stylize("[Setter]","special")),M(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(d.value)<0?(s=g(r)?f(e,d.value,null):f(e,d.value,r-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e;}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e;}).join("\n")):s=e.stylize("[Circular]","special")),m(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"));}return a+": "+s;}function p(e){return Array.isArray(e);}function h(e){return"boolean"==typeof e;}function g(e){return null===e;}function y(e){return"number"==typeof e;}function b(e){return"string"==typeof e;}function m(e){return void 0===e;}function v(e){return S(e)&&"[object RegExp]"===P(e);}function S(e){return"object"==typeof e&&null!==e;}function k(e){return S(e)&&"[object Date]"===P(e);}function C(e){return S(e)&&("[object Error]"===P(e)||e instanceof Error);}function T(e){return"function"==typeof e;}function P(e){return Object.prototype.toString.call(e);}function _(e){return e<10?"0"+e.toString(10):e.toString(10);}r.debuglog=function(e){if(m(o)&&(o=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(o)){var n=t.pid;a[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t);};}else a[e]=function(){};return a[e];},r.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=p,r.isBoolean=h,r.isNull=g,r.isNullOrUndefined=function(e){return null==e;},r.isNumber=y,r.isString=b,r.isSymbol=function(e){return"symbol"==typeof e;},r.isUndefined=m,r.isRegExp=v,r.isObject=S,r.isDate=k,r.isError=C,r.isFunction=T,r.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e;},r.isBuffer=e("./support/isBuffer");var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var e=new Date(),t=[_(e.getHours()),_(e.getMinutes()),_(e.getSeconds())].join(":");return[e.getDate(),w[e.getMonth()],t].join(" ");}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t);}r.log=function(){console.log("%s - %s",O(),r.format.apply(r,arguments));},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!S(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e;};}).call(this,e("v3go1D"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{"./support/isBuffer":34,inherits:33,v3go1D:15}],36:[function(e,t,r){(function(){var r,n,i,o,a,s,d,c,f,u=function(e,t){return function(){return e.apply(t,arguments);};},l={}.hasOwnProperty;a=e("./core/events"),d=e("./sources/node/http"),s=e("./sources/node/file"),f=e("./sources/browser/websocket"),c=e("./sources/browser/wsWorker"),n=e("./sources/buffer"),o=e("./demuxer"),i=e("./decoder"),r=function(e){function t(e){var t;this.source=e,this._decode=u(this._decode,this),this.findDecoder=u(this.findDecoder,this),this.probe=u(this.probe,this),this.buffered=0,this.duration=null,this.format=null,this.metadata=null,this.active=!1,this.demuxer=null,this.decoder=null,this.source.once("data",this.probe),this.source.on("error",(t=this,function(e){return t.emit("error",e),t.stop();})),this.source.on("progress",function(e){return function(t){return e.buffered=t,e.emit("buffer",e.buffered);};}(this));}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e;}n.prototype=t.prototype,e.prototype=new n(),e.__super__=t.prototype;}(t,e),t.fromURL=function(e,r){return new t(new d(e,r));},t.fromFile=function(e){return new t(new s(e));},t.fromWebSocket=function(e,r){return new t(new f(e,r));},t.fromWSWorker=function(e,r){return new t(new c(e,r));},t.fromBuffer=function(e){return new t(new n(e));},t.prototype.start=function(e){if(!this.active)return null!=e&&(this.shouldDecode=e),null==this.shouldDecode&&(this.shouldDecode=!0),this.active=!0,this.source.start(),this.decoder&&this.shouldDecode?this._decode():void 0;},t.prototype.stop=function(){if(this.active)return this.active=!1,this.source.pause();},t.prototype.get=function(e,t){var r;if("format"===e||"duration"===e||"metadata"===e)return null!=this[e]?t(this[e]):(this.once(e,(r=this,function(e){return r.stop(),t(e);})),this.start());},t.prototype.decodePacket=function(){return this.decoder.decode();},t.prototype.decodeToBuffer=function(e){var t,r,n;return n=0,t=[],this.on("data",r=function(e){return n+=e.length,t.push(e);}),this.once("end",function(){var i,o,a,s,d;for(i=new Float32Array(n),d=0,a=0,s=t.length;a<s;a++)o=t[a],i.set(o,d),d+=o.length;return this.off("data",r),e(i);}),this.start();},t.prototype.probe=function(e){var t,r;if(this.active)return(t=o.find(e))?(this.demuxer=new t(this.source,e),this.demuxer.on("format",this.findDecoder),this.demuxer.on("duration",(r=this,function(e){return r.duration=e,r.emit("duration",r.duration);})),this.demuxer.on("metadata",function(e){return function(t){return e.metadata=t,e.emit("metadata",e.metadata);};}(this)),this.demuxer.on("error",function(e){return function(t){return e.emit("error",t),e.stop();};}(this))):this.emit("error","A demuxer for this container was not found.");},t.prototype.findDecoder=function(e){var t,r,n;if(this.format=e,this.active)return this.emit("format",this.format),(t=i.find(this.format.formatID))?(this.decoder=new t(this.demuxer,this.format),this.format.floatingPoint?this.decoder.on("data",(n=this,function(e){return n.emit("data",e);})):(r=Math.pow(2,this.format.bitsPerChannel-1),this.decoder.on("data",function(e){return function(t){var n,i,o,a,s;for(n=new Float32Array(t.length),i=o=0,a=t.length;o<a;i=++o)s=t[i],n[i]=s/r;return e.emit("data",n);};}(this))),this.decoder.on("error",function(e){return function(t){return e.emit("error",t),e.stop();};}(this)),this.decoder.on("end",function(e){return function(){return e.emit("end");};}(this)),this.emit("decodeStart"),this.shouldDecode?this._decode():void 0):this.emit("error","A decoder for "+this.format.formatID+" was not found.");},t.prototype._decode=function(){for(;this.decoder.decode()&&this.active;);if(this.active)return this.decoder.once("data",this._decode);},t;}(a),t.exports=r;}).call(this);},{"./core/events":43,"./decoder":46,"./demuxer":49,"./sources/browser/websocket":64,"./sources/browser/wsWorker":65,"./sources/buffer":66,"./sources/node/file":67,"./sources/node/http":68}],37:[function(e,t,r){(function(){var t,n,i;for(t in n=e("./aurora_base"))i=n[t],r[t]=i;e("./demuxers/caf"),e("./demuxers/m4a"),e("./demuxers/aiff"),e("./demuxers/wave"),e("./demuxers/au"),e("./decoders/lpcm"),e("./decoders/xlaw");}).call(this);},{"./aurora_base":38,"./decoders/lpcm":47,"./decoders/xlaw":48,"./demuxers/aiff":50,"./demuxers/au":51,"./demuxers/caf":52,"./demuxers/m4a":53,"./demuxers/wave":54}],38:[function(e,t,r){(function(){r.Base=e("./core/base"),r.Buffer=e("./core/buffer"),r.BufferList=e("./core/bufferlist"),r.Stream=e("./core/stream"),r.Bitstream=e("./core/bitstream"),r.EventEmitter=e("./core/events"),r.UnderflowError=e("./core/underflow"),r.HTTPSource=e("./sources/node/http"),r.FileSource=e("./sources/node/file"),r.WebSocketSource=e("./sources/browser/websocket"),r.WSWorkerSource=e("./sources/browser/wsWorker"),r.BufferSource=e("./sources/buffer"),r.Demuxer=e("./demuxer"),r.Decoder=e("./decoder"),r.AudioDevice=e("./device"),r.Asset=e("./asset"),r.Player=e("./player"),r.Filter=e("./filter"),r.VolumeFilter=e("./filters/volume"),r.BalanceFilter=e("./filters/balance");}).call(this);},{"./asset":36,"./core/base":39,"./core/bitstream":40,"./core/buffer":41,"./core/bufferlist":42,"./core/events":43,"./core/stream":44,"./core/underflow":45,"./decoder":46,"./demuxer":49,"./device":55,"./filter":59,"./filters/balance":60,"./filters/volume":61,"./player":62,"./sources/browser/websocket":64,"./sources/browser/wsWorker":65,"./sources/buffer":66,"./sources/node/file":67,"./sources/node/http":68}],39:[function(e,t,r){(function(){var e,r={}.hasOwnProperty,n=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1;};e=function(){var e;function t(){}return e=/\b_super\b/,t.extend=function(t){var i,o,a,s,d,c;if(i=function(e){function t(){return t.__super__.constructor.apply(this,arguments);}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e;}i.prototype=t.prototype,e.prototype=new i(),e.__super__=t.prototype;}(t,e),t;}(this),"function"==typeof t)for(s in d=Object.keys(i.prototype),t.call(i,i),t={},c=i.prototype)a=c[s],n.call(d,s)<0&&(t[s]=a);for(s in o=i.__super__,t)"function"==typeof(a=t[s])&&e.test(a)?function(e,t){i.prototype[e]=function(){var r,n;return n=this._super,this._super=o[e],r=t.apply(this,arguments),this._super=n,r;};}(s,a):i.prototype[s]=a;return i;},t;}(),t.exports=e;}).call(this);},{}],40:[function(e,t,r){(function(){var e;e=function(){function e(e){this.stream=e,this.bitPosition=0;}return e.prototype.copy=function(){var t;return(t=new e(this.stream.copy())).bitPosition=this.bitPosition,t;},e.prototype.offset=function(){return 8*this.stream.offset+this.bitPosition;},e.prototype.available=function(e){return this.stream.available((e+8-this.bitPosition)/8);},e.prototype.advance=function(e){var t;return t=this.bitPosition+e,this.stream.advance(t>>3),this.bitPosition=7&t;},e.prototype.rewind=function(e){var t;return t=this.bitPosition-e,this.stream.rewind(Math.abs(t>>3)),this.bitPosition=7&t;},e.prototype.seek=function(e){var t;return e>(t=this.offset())?this.advance(e-t):e<t?this.rewind(t-e):void 0;},e.prototype.align=function(){if(0!==this.bitPosition)return this.bitPosition=0,this.stream.advance(1);},e.prototype.read=function(e,t){var r,n;if(0===e)return 0;if((n=e+this.bitPosition)<=8)r=(this.stream.peekUInt8()<<this.bitPosition&255)>>>8-e;else if(n<=16)r=(this.stream.peekUInt16()<<this.bitPosition&65535)>>>16-e;else if(n<=24)r=(this.stream.peekUInt24()<<this.bitPosition&16777215)>>>24-e;else if(n<=32)r=this.stream.peekUInt32()<<this.bitPosition>>>32-e;else{if(!(n<=40))throw new Error("Too many bits!");r=4294967296*this.stream.peekUInt8(0)+(this.stream.peekUInt8(1)<<24>>>0)+(this.stream.peekUInt8(2)<<16)+(this.stream.peekUInt8(3)<<8)+this.stream.peekUInt8(4),r%=Math.pow(2,40-this.bitPosition),r=Math.floor(r/Math.pow(2,40-this.bitPosition-e));}return t&&(n<32?r>>>e-1&&(r=-1*((1<<e>>>0)-r)):r/Math.pow(2,e-1)|0&&(r=-1*(Math.pow(2,e)-r))),this.advance(e),r;},e.prototype.peek=function(e,t){var r,n;if(0===e)return 0;if((n=e+this.bitPosition)<=8)r=(this.stream.peekUInt8()<<this.bitPosition&255)>>>8-e;else if(n<=16)r=(this.stream.peekUInt16()<<this.bitPosition&65535)>>>16-e;else if(n<=24)r=(this.stream.peekUInt24()<<this.bitPosition&16777215)>>>24-e;else if(n<=32)r=this.stream.peekUInt32()<<this.bitPosition>>>32-e;else{if(!(n<=40))throw new Error("Too many bits!");r=4294967296*this.stream.peekUInt8(0)+(this.stream.peekUInt8(1)<<24>>>0)+(this.stream.peekUInt8(2)<<16)+(this.stream.peekUInt8(3)<<8)+this.stream.peekUInt8(4),r%=Math.pow(2,40-this.bitPosition),r=Math.floor(r/Math.pow(2,40-this.bitPosition-e));}return t&&(n<32?r>>>e-1&&(r=-1*((1<<e>>>0)-r)):r/Math.pow(2,e-1)|0&&(r=-1*(Math.pow(2,e)-r))),r;},e.prototype.readLSB=function(e,t){var r,n;if(0===e)return 0;if(e>40)throw new Error("Too many bits!");return n=e+this.bitPosition,r=this.stream.peekUInt8(0)>>>this.bitPosition,n>8&&(r|=this.stream.peekUInt8(1)<<8-this.bitPosition),n>16&&(r|=this.stream.peekUInt8(2)<<16-this.bitPosition),n>24&&(r+=this.stream.peekUInt8(3)<<24-this.bitPosition>>>0),n>32&&(r+=this.stream.peekUInt8(4)*Math.pow(2,32-this.bitPosition)),n>=32?r%=Math.pow(2,e):r&=(1<<e)-1,t&&(n<32?r>>>e-1&&(r=-1*((1<<e>>>0)-r)):r/Math.pow(2,e-1)|0&&(r=-1*(Math.pow(2,e)-r))),this.advance(e),r;},e.prototype.peekLSB=function(e,t){var r,n;if(0===e)return 0;if(e>40)throw new Error("Too many bits!");return n=e+this.bitPosition,r=this.stream.peekUInt8(0)>>>this.bitPosition,n>8&&(r|=this.stream.peekUInt8(1)<<8-this.bitPosition),n>16&&(r|=this.stream.peekUInt8(2)<<16-this.bitPosition),n>24&&(r+=this.stream.peekUInt8(3)<<24-this.bitPosition>>>0),n>32&&(r+=this.stream.peekUInt8(4)*Math.pow(2,32-this.bitPosition)),n>=32?r%=Math.pow(2,e):r&=(1<<e)-1,t&&(n<32?r>>>e-1&&(r=-1*((1<<e>>>0)-r)):r/Math.pow(2,e-1)|0&&(r=-1*(Math.pow(2,e)-r))),r;},e;}(),t.exports=e;}).call(this);},{}],41:[function(e,t,r){(function(e){(function(){var r;r=function(){var t,r;function n(e){this.data=n.sanitize(e),this.length=this.data.length,this.next=null,this.prev=null;}return n.allocate=function(e){return new n(e);},n.sanitize=function(t){var r;if(t instanceof Uint8Array)return t;if(t instanceof ArrayBuffer||Array.isArray(t)||"number"==typeof t||(null!=(r=e.Buffer)?r.isBuffer(t):void 0))return new Uint8Array(t);if(t.buffer instanceof ArrayBuffer)return new Uint8Array(t.buffer,t.byteOffset,t.length*t.BYTES_PER_ELEMENT);if(t instanceof n)return t.data;throw new Error("Constructing buffer with unknown type.");},n.prototype.append=function(e){var t,r;return t=n.sanitize(e),(r=new Uint8Array(this.length+t.length)).set(this.data),r.set(t,this.length),this.data=r,this.length=this.data.length;},n.prototype.copy=function(){return new n(new Uint8Array(this.data));},n.prototype.slice=function(e,t){return null==t&&(t=this.length),0===e&&t>=this.length?new n(this.data):new n(this.data.subarray(e,e+t));},t=e.BlobBuilder||e.MozBlobBuilder||e.WebKitBlobBuilder,r=e.URL||e.webkitURL||e.mozURL,n.makeBlob=function(e,r){var n;null==r&&(r="application/octet-stream");try{return new Blob([e],{type:r});}catch(e){}return null!=t?((n=new t()).append(e),n.getBlob(r)):null;},n.makeBlobURL=function(e,t){return null!=r?r.createObjectURL(this.makeBlob(e,t)):void 0;},n.revokeBlobURL=function(e){return null!=r?r.revokeObjectURL(e):void 0;},n.prototype.toBlob=function(){return n.makeBlob(this.data.buffer);},n.prototype.toBlobURL=function(){return n.makeBlobURL(this.data.buffer);},n;}(),t.exports=r;}).call(this);}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{}],42:[function(e,t,r){(function(){var e;e=function(){function e(){this.first=null,this.last=null,this.numBuffers=0,this.availableBytes=0,this.availableBuffers=0;}return e.prototype.copy=function(){var t;return(t=new e()).first=this.first,t.last=this.last,t.numBuffers=this.numBuffers,t.availableBytes=this.availableBytes,t.availableBuffers=this.availableBuffers,t;},e.prototype.append=function(e){return e?(e.prev=this.last,null!=(t=this.last)&&(t.next=e),this.last=e,null==this.first&&(this.first=e),this.availableBytes+=e.length,this.availableBuffers++,this.numBuffers++):this.numBuffers;var t;},e.prototype.advance=function(){return!!this.first&&(this.availableBytes-=this.first.length,this.availableBuffers--,this.first=this.first.next,null!=this.first);},e.prototype.rewind=function(){var e;return!(this.first&&!this.first.prev)&&(this.first=(null!=(e=this.first)?e.prev:void 0)||this.last,this.first&&(this.availableBytes+=this.first.length,this.availableBuffers++),null!=this.first);},e.prototype.reset=function(){var e;for(e=[];this.rewind(););return e;},e;}(),t.exports=e;}).call(this);},{}],43:[function(e,t,r){(function(){var r,n={}.hasOwnProperty,i=[].slice;r=function(e){function t(){return t.__super__.constructor.apply(this,arguments);}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e;}i.prototype=t.prototype,e.prototype=new i(),e.__super__=t.prototype;}(t,e),t.prototype.on=function(e,t){var r;return null==this.events&&(this.events={}),null==(r=this.events)[e]&&(r[e]=[]),this.events[e].push(t);},t.prototype.off=function(e,t){var r,n;if(null!=(n=this.events)?n[e]:void 0)return~(r=this.events[e].indexOf(t))?this.events[e].splice(r,1):void 0;},t.prototype.once=function(e,t){var r;return this.on(e,r=function(){return this.off(e,r),t.apply(this,arguments);});},t.prototype.emit=function(){var e,t,r,n,o,a;if(t=arguments[0],e=2<=arguments.length?i.call(arguments,1):[],null!=(o=this.events)?o[t]:void 0)for(r=0,n=(a=this.events[t].slice()).length;r<n;r++)a[r].apply(this,e);},t;}(e("./base")),t.exports=r;}).call(this);},{"./base":39}],44:[function(e,t,r){(function(){var r,n,i,o;n=e("./bufferlist"),r=e("./buffer"),o=e("./underflow"),i=function(){var e,t,i,a,s,d,c,f,u,l,p,h,g;function y(e){this.list=e,this.localOffset=0,this.offset=0;}return e=new ArrayBuffer(16),g=new Uint8Array(e),u=new Int8Array(e),p=new Uint16Array(e),c=new Int16Array(e),h=new Uint32Array(e),f=new Int32Array(e),i=new Float32Array(e),"undefined"!=typeof Float64Array&&null!==Float64Array&&(a=new Float64Array(e)),l=13330===new Uint16Array(new Uint8Array([18,52]).buffer)[0],y.fromBuffer=function(e){var t;return(t=new n()).append(e),new y(t);},y.prototype.copy=function(){var e;return(e=new y(this.list.copy())).localOffset=this.localOffset,e.offset=this.offset,e;},y.prototype.available=function(e){return e<=this.list.availableBytes-this.localOffset;},y.prototype.remainingBytes=function(){return this.list.availableBytes-this.localOffset;},y.prototype.advance=function(e){if(!this.available(e))throw new o();for(this.localOffset+=e,this.offset+=e;this.list.first&&this.localOffset>=this.list.first.length;)this.localOffset-=this.list.first.length,this.list.advance();return this;},y.prototype.rewind=function(e){if(e>this.offset)throw new o();for(this.list.first||(this.list.rewind(),this.localOffset=this.list.first.length),this.localOffset-=e,this.offset-=e;this.list.first.prev&&this.localOffset<0;)this.list.rewind(),this.localOffset+=this.list.first.length;return this;},y.prototype.seek=function(e){return e>this.offset?this.advance(e-this.offset):e<this.offset?this.rewind(this.offset-e):void 0;},y.prototype.readUInt8=function(){var e;if(!this.available(1))throw new o();return e=this.list.first.data[this.localOffset],this.localOffset+=1,this.offset+=1,this.localOffset===this.list.first.length&&(this.localOffset=0,this.list.advance()),e;},y.prototype.peekUInt8=function(e){var t;if(null==e&&(e=0),!this.available(e+1))throw new o();for(e=this.localOffset+e,t=this.list.first;t;){if(t.length>e)return t.data[e];e-=t.length,t=t.next;}return 0;},y.prototype.read=function(e,t){var r,n,i,o;if(null==t&&(t=!1),t===l)for(r=n=0,o=e;n<o;r=n+=1)g[r]=this.readUInt8();else for(r=i=e-1;i>=0;r=i+=-1)g[r]=this.readUInt8();},y.prototype.peek=function(e,t,r){var n,i,o,a,s;if(null==r&&(r=!1),r===l)for(n=i=0,a=e;i<a;n=i+=1)g[n]=this.peekUInt8(t+n);else for(n=o=0,s=e;o<s;n=o+=1)g[e-n-1]=this.peekUInt8(t+n);},y.prototype.readInt8=function(){return this.read(1),u[0];},y.prototype.peekInt8=function(e){return null==e&&(e=0),this.peek(1,e),u[0];},y.prototype.readUInt16=function(e){return this.read(2,e),p[0];},y.prototype.peekUInt16=function(e,t){return null==e&&(e=0),this.peek(2,e,t),p[0];},y.prototype.readInt16=function(e){return this.read(2,e),c[0];},y.prototype.peekInt16=function(e,t){return null==e&&(e=0),this.peek(2,e,t),c[0];},y.prototype.readUInt24=function(e){return e?this.readUInt16(!0)+(this.readUInt8()<<16):(this.readUInt16()<<8)+this.readUInt8();},y.prototype.peekUInt24=function(e,t){return null==e&&(e=0),t?this.peekUInt16(e,!0)+(this.peekUInt8(e+2)<<16):(this.peekUInt16(e)<<8)+this.peekUInt8(e+2);},y.prototype.readInt24=function(e){return e?this.readUInt16(!0)+(this.readInt8()<<16):(this.readInt16()<<8)+this.readUInt8();},y.prototype.peekInt24=function(e,t){return null==e&&(e=0),t?this.peekUInt16(e,!0)+(this.peekInt8(e+2)<<16):(this.peekInt16(e)<<8)+this.peekUInt8(e+2);},y.prototype.readUInt32=function(e){return this.read(4,e),h[0];},y.prototype.peekUInt32=function(e,t){return null==e&&(e=0),this.peek(4,e,t),h[0];},y.prototype.readInt32=function(e){return this.read(4,e),f[0];},y.prototype.peekInt32=function(e,t){return null==e&&(e=0),this.peek(4,e,t),f[0];},y.prototype.readFloat32=function(e){return this.read(4,e),i[0];},y.prototype.peekFloat32=function(e,t){return null==e&&(e=0),this.peek(4,e,t),i[0];},y.prototype.readFloat64=function(e){return this.read(8,e),a?a[0]:s();},s=function(){var e,t,r,n,i,o;return n=h[0],(r=h[1])&&2147483648!==r?(o=1-2*(r>>>31),t=1048575&r,2047===(e=r>>>20&2047)?t?NaN:Infinity*o:(e-=1023,i=(1048576|t)*Math.pow(2,e-20),o*(i+=n*Math.pow(2,e-52)))):0;},y.prototype.peekFloat64=function(e,t){return null==e&&(e=0),this.peek(8,e,t),a?a[0]:s();},y.prototype.readFloat80=function(e){return this.read(10,e),d();},d=function(){var e,t,r,n,i,o;return r=h[0],n=h[1],o=1-2*((e=g[9])>>>7),0===(t=(127&e)<<8|g[8])&&0===n&&0===r?0:32767===t?0===n&&0===r?Infinity*o:NaN:(t-=16383,i=n*Math.pow(2,t-31),o*(i+=r*Math.pow(2,t-63)));},y.prototype.peekFloat80=function(e,t){return null==e&&(e=0),this.peek(10,e,t),d();},y.prototype.readBuffer=function(e){var t,n,i,o,a;for(a=(o=r.allocate(e)).data,t=n=0,i=e;n<i;t=n+=1)a[t]=this.readUInt8();return o;},y.prototype.peekBuffer=function(e,t){var n,i,o,a,s;for(null==e&&(e=0),s=(a=r.allocate(t)).data,n=i=0,o=t;i<o;n=i+=1)s[n]=this.peekUInt8(e+n);return a;},y.prototype.readSingleBuffer=function(e){var t;return t=this.list.first.slice(this.localOffset,e),this.advance(t.length),t;},y.prototype.peekSingleBuffer=function(e,t){return this.list.first.slice(this.localOffset+e,t);},y.prototype.readString=function(e,r){return null==r&&(r="ascii"),t.call(this,0,e,r,!0);},y.prototype.peekString=function(e,r,n){return null==e&&(e=0),null==n&&(n="ascii"),t.call(this,e,r,n,!1);},t=function(e,t,r,n){var i,o,a,s,d,c,f,u,l,p,h,g;switch(u=null===t?0:-1,null==t&&(t=Infinity),c=e+t,p="",r=r.toLowerCase()){case"ascii":case"latin1":for(;e<c&&(d=this.peekUInt8(e++))!==u;)p+=String.fromCharCode(d);break;case"utf8":case"utf-8":for(;e<c&&(i=this.peekUInt8(e++))!==u;)0==(128&i)?p+=String.fromCharCode(i):192==(224&i)?(o=63&this.peekUInt8(e++),p+=String.fromCharCode((31&i)<<6|o)):224==(240&i)?(o=63&this.peekUInt8(e++),a=63&this.peekUInt8(e++),p+=String.fromCharCode((15&i)<<12|o<<6|a)):240==(248&i)&&(l=((15&i)<<18|(o=63&this.peekUInt8(e++))<<12|(a=63&this.peekUInt8(e++))<<6|63&this.peekUInt8(e++))-65536,p+=String.fromCharCode(55296+(l>>10),56320+(1023&l)));break;case"utf16-be":case"utf16be":case"utf16le":case"utf16-le":case"utf16bom":case"utf16-bom":switch(r){case"utf16be":case"utf16-be":f=!1;break;case"utf16le":case"utf16-le":f=!0;break;case"utf16bom":case"utf16-bom":if(t<2||(s=this.peekUInt16(e))===u)return n&&this.advance(e+=2),p;f=65534===s,e+=2;}for(;e<c&&(h=this.peekUInt16(e,f))!==u;)if(e+=2,h<55296||h>57343)p+=String.fromCharCode(h);else{if(h>56319)throw new Error("Invalid utf16 sequence.");if((g=this.peekUInt16(e,f))<56320||g>57343)throw new Error("Invalid utf16 sequence.");p+=String.fromCharCode(h,g),e+=2;}h===u&&(e+=2);break;default:throw new Error("Unknown encoding: "+r);}return n&&this.advance(e),p;},y;}(),t.exports=i;}).call(this);},{"./buffer":41,"./bufferlist":42,"./underflow":45}],45:[function(e,t,r){(function(){var e,r={}.hasOwnProperty;e=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.name="UnderflowError",this.stack=new Error().stack;}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e;}i.prototype=t.prototype,e.prototype=new i(),e.__super__=t.prototype;}(t,Error),t;}(),t.exports=e;}).call(this);},{}],46:[function(e,t,r){(function(){var r,n,i,o,a,s,d={}.hasOwnProperty;o=e("./core/events"),n=e("./core/bufferlist"),a=e("./core/stream"),r=e("./core/bitstream"),s=e("./core/underflow"),i=function(e){var t;function i(e,t){var i,o;this.demuxer=e,this.format=t,i=new n(),this.stream=new a(i),this.bitstream=new r(this.stream),this.receivedFinalBuffer=!1,this.waiting=!1,this.demuxer.on("cookie",(o=this,function(e){var t;try{return o.setCookie(e);}catch(e){return t=e,o.emit("error",t);}})),this.demuxer.on("data",function(e){return function(t){if(i.append(t),e.waiting)return e.decode();};}(this)),this.demuxer.on("end",function(e){return function(){if(e.receivedFinalBuffer=!0,e.waiting)return e.decode();};}(this)),this.init();}return function(e,t){for(var r in t)d.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e;}n.prototype=t.prototype,e.prototype=new n(),e.__super__=t.prototype;}(i,e),i.prototype.init=function(){},i.prototype.setCookie=function(e){},i.prototype.readChunk=function(){},i.prototype.decode=function(){var e,t,r;this.waiting=!this.receivedFinalBuffer,t=this.bitstream.offset();try{r=this.readChunk();}catch(t){if(!((e=t)instanceof s))return this.emit("error",e),!1;}return r?(this.emit("data",r),this.receivedFinalBuffer&&this.emit("end"),!0):(this.receivedFinalBuffer?this.emit("end"):(this.bitstream.seek(t),this.waiting=!0),!1);},i.prototype.seek=function(e){var t;return t=this.demuxer.seek(e),this.stream.seek(t.offset),t.timestamp;},t={},i.register=function(e,r){return t[e]=r;},i.find=function(e){return t[e]||null;},i;}(o),t.exports=i;}).call(this);},{"./core/bitstream":40,"./core/bufferlist":42,"./core/events":43,"./core/stream":44,"./core/underflow":45}],47:[function(e,t,r){(function(){var t,r=function(e,t){return function(){return e.apply(t,arguments);};},n={}.hasOwnProperty;(function(e){function i(){return this.readChunk=r(this.readChunk,this),i.__super__.constructor.apply(this,arguments);}(function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e;}i.prototype=t.prototype,e.prototype=new i(),e.__super__=t.prototype;})(i,e),t.register("lpcm",i),i.prototype.readChunk=function(){var e,t,r,n,i,o,a,s,d,c,f,u,l,p,h,g,y,b;if(b=this.stream,o=this.format.littleEndian,y=(e=Math.min(4096,b.remainingBytes()))/(this.format.bitsPerChannel/8)|0,e<this.format.bitsPerChannel/8)return null;if(this.format.floatingPoint)switch(this.format.bitsPerChannel){case 32:for(c=new Float32Array(y),t=r=0,f=y;r<f;t=r+=1)c[t]=b.readFloat32(o);break;case 64:for(c=new Float64Array(y),t=n=0,u=y;n<u;t=n+=1)c[t]=b.readFloat64(o);break;default:throw new Error("Unsupported bit depth.");}else switch(this.format.bitsPerChannel){case 8:for(c=new Int8Array(y),t=i=0,l=y;i<l;t=i+=1)c[t]=b.readInt8();break;case 16:for(c=new Int16Array(y),t=a=0,p=y;a<p;t=a+=1)c[t]=b.readInt16(o);break;case 24:for(c=new Int32Array(y),t=s=0,h=y;s<h;t=s+=1)c[t]=b.readInt24(o);break;case 32:for(c=new Int32Array(y),t=d=0,g=y;d<g;t=d+=1)c[t]=b.readInt32(o);break;default:throw new Error("Unsupported bit depth.");}return c;};})(t=e("../decoder"));}).call(this);},{"../decoder":46}],48:[function(e,t,r){(function(){var t,r=function(e,t){return function(){return e.apply(t,arguments);};},n={}.hasOwnProperty;(function(e){function i(){return this.readChunk=r(this.readChunk,this),i.__super__.constructor.apply(this,arguments);}(function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e;}i.prototype=t.prototype,e.prototype=new i(),e.__super__=t.prototype;})(i,e),t.register("ulaw",i),t.register("alaw",i),128,15,4,112,132,i.prototype.init=function(){var e,t,r,n,i,o,a;if(this.format.bitsPerChannel=16,this.table=o=new Int16Array(256),"ulaw"===this.format.formatID)for(e=t=0;t<256;e=++t)i=132+((15&(a=~e))<<3),i<<=(112&a)>>>4,o[e]=128&a?132-i:i-132;else for(e=r=0;r<256;e=++r)i=15&(a=85^e),i=(n=(112&a)>>>4)?i+i+1+32<<n+2:i+i+1<<3,o[e]=128&a?i:-i;},i.prototype.readChunk=function(){var e,t,r,n,i,o,a;if(this,o=this.stream,a=this.table,0!==(i=Math.min(4096,this.stream.remainingBytes()))){for(r=new Int16Array(i),e=t=0,n=i;t<n;e=t+=1)r[e]=a[o.readUInt8()];return r;}};})(t=e("../decoder"));}).call(this);},{"../decoder":46}],49:[function(e,t,r){(function(){var r,n,i,o,a={}.hasOwnProperty;i=e("./core/events"),r=e("./core/bufferlist"),o=e("./core/stream"),n=function(e){var t;function n(e,t){var n,i,a;(n=new r()).append(t),this.stream=new o(n),i=!1,e.on("data",(a=this,function(e){return i=!0,n.append(e),a.readChunk(e);})),e.on("error",function(e){return function(t){return e.emit("error",t);};}(this)),e.on("end",function(e){return function(){return i||e.readChunk(t),e.emit("end");};}(this)),this.seekPoints=[],this.init();}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e;}n.prototype=t.prototype,e.prototype=new n(),e.__super__=t.prototype;}(n,e),n.probe=function(e){return!1;},n.prototype.init=function(){},n.prototype.readChunk=function(e){},n.prototype.addSeekPoint=function(e,t){var r;return r=this.searchTimestamp(t),this.seekPoints.splice(r,0,{offset:e,timestamp:t});},n.prototype.searchTimestamp=function(e,t){var r,n,i,o;if(n=0,(r=this.seekPoints.length)>0&&this.seekPoints[r-1].timestamp<e)return r;for(;n<r;)i=n+r>>1,(o=this.seekPoints[i].timestamp)<e?n=i+1:o>=e&&(r=i);return r>this.seekPoints.length&&(r=this.seekPoints.length),r;},n.prototype.seek=function(e){var t;return this.format&&this.format.framesPerPacket>0&&this.format.bytesPerPacket>0?{timestamp:e,offset:this.format.bytesPerPacket*e/this.format.framesPerPacket}:(t=this.searchTimestamp(e),this.seekPoints[t]);},t=[],n.register=function(e){return t.push(e);},n.find=function(e){var r,n,i,a,s;for(s=o.fromBuffer(e),n=0,i=t.length;n<i;n++){r=t[n],a=s.offset;try{if(r.probe(s))return r;}catch(e){e;}s.seek(a);}return null;},n;}(i),t.exports=n;}).call(this);},{"./core/bufferlist":42,"./core/events":43,"./core/stream":44}],50:[function(e,t,r){(function(){var t,r={}.hasOwnProperty;(function(e){function n(){return n.__super__.constructor.apply(this,arguments);}(function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e;}i.prototype=t.prototype,e.prototype=new i(),e.__super__=t.prototype;})(n,e),t.register(n),n.probe=function(e){var t;return"FORM"===e.peekString(0,4)&&("AIFF"===(t=e.peekString(8,4))||"AIFC"===t);},n.prototype.readChunk=function(){var e,t,r,n;if(!this.readStart&&this.stream.available(12)){if("FORM"!==this.stream.readString(4))return this.emit("error","Invalid AIFF.");if(this.fileSize=this.stream.readUInt32(),this.fileType=this.stream.readString(4),this.readStart=!0,"AIFF"!==(n=this.fileType)&&"AIFC"!==n)return this.emit("error","Invalid AIFF.");}for(;this.stream.available(1);){switch(!this.readHeaders&&this.stream.available(8)&&(this.type=this.stream.readString(4),this.len=this.stream.readUInt32()),this.type){case"COMM":if(!this.stream.available(this.len))return;this.format={formatID:"lpcm",channelsPerFrame:this.stream.readUInt16(),sampleCount:this.stream.readUInt32(),bitsPerChannel:this.stream.readUInt16(),sampleRate:this.stream.readFloat80(),framesPerPacket:1,littleEndian:!1,floatingPoint:!1},this.format.bytesPerPacket=this.format.bitsPerChannel/8*this.format.channelsPerFrame,"AIFC"===this.fileType&&(t=this.stream.readString(4),this.format.littleEndian="sowt"===t&&this.format.bitsPerChannel>8,this.format.floatingPoint="fl32"===t||"fl64"===t,"twos"!==t&&"sowt"!==t&&"fl32"!==t&&"fl64"!==t&&"NONE"!==t||(t="lpcm"),this.format.formatID=t,this.len-=4),this.stream.advance(this.len-18),this.emit("format",this.format),this.emit("duration",this.format.sampleCount/this.format.sampleRate*1e3|0);break;case"SSND":this.readSSNDHeader&&this.stream.available(4)||(r=this.stream.readUInt32(),this.stream.advance(4),this.stream.advance(r),this.readSSNDHeader=!0),e=this.stream.readSingleBuffer(this.len),this.len-=e.length,this.readHeaders=this.len>0,this.emit("data",e);break;default:if(!this.stream.available(this.len))return;this.stream.advance(this.len);}"SSND"!==this.type&&(this.readHeaders=!1);}};})(t=e("../demuxer"));}).call(this);},{"../demuxer":49}],51:[function(e,t,r){(function(){var t,r={}.hasOwnProperty;(function(e){var n,i;function o(){return o.__super__.constructor.apply(this,arguments);}(function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e;}i.prototype=t.prototype,e.prototype=new i(),e.__super__=t.prototype;})(o,e),t.register(o),o.probe=function(e){return".snd"===e.peekString(0,4);},(n=[8,8,16,24,32,32,64])[26]=8,i={1:"ulaw",27:"alaw"},o.prototype.readChunk=function(){var e,t,r;if(!this.readHeader&&this.stream.available(24)){if(".snd"!==this.stream.readString(4))return this.emit("error","Invalid AU file.");if(this.stream.readUInt32(),t=this.stream.readUInt32(),r=this.stream.readUInt32(),this.format={formatID:i[r]||"lpcm",littleEndian:!1,floatingPoint:6===r||7===r,bitsPerChannel:n[r-1],sampleRate:this.stream.readUInt32(),channelsPerFrame:this.stream.readUInt32(),framesPerPacket:1},null==this.format.bitsPerChannel)return this.emit("error","Unsupported encoding in AU file.");this.format.bytesPerPacket=this.format.bitsPerChannel/8*this.format.channelsPerFrame,4294967295!==t&&(e=this.format.bitsPerChannel/8,this.emit("duration",t/e/this.format.channelsPerFrame/this.format.sampleRate*1e3|0)),this.emit("format",this.format),this.readHeader=!0;}if(this.readHeader)for(;this.stream.available(1);)this.emit("data",this.stream.readSingleBuffer(this.stream.remainingBytes()));};})(t=e("../demuxer"));}).call(this);},{"../demuxer":49}],52:[function(e,t,r){(function(){var t,r,n={}.hasOwnProperty;t=e("../demuxer"),r=e("./m4a"),function(e){function i(){return i.__super__.constructor.apply(this,arguments);}(function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e;}i.prototype=t.prototype,e.prototype=new i(),e.__super__=t.prototype;})(i,e),t.register(i),i.probe=function(e){return"caff"===e.peekString(0,4);},i.prototype.readChunk=function(){var e,t,n,i,o,a,s,d,c,f,u,l,p;if(!this.format&&this.stream.available(64)){if("caff"!==this.stream.readString(4))return this.emit("error","Invalid CAF, does not begin with 'caff'");if(this.stream.advance(4),"desc"!==this.stream.readString(4))return this.emit("error","Invalid CAF, 'caff' is not followed by 'desc'");if(0!==this.stream.readUInt32()||32!==this.stream.readUInt32())return this.emit("error","Invalid 'desc' size, should be 32");this.format={},this.format.sampleRate=this.stream.readFloat64(),this.format.formatID=this.stream.readString(4),i=this.stream.readUInt32(),"lpcm"===this.format.formatID&&(this.format.floatingPoint=Boolean(1&i),this.format.littleEndian=Boolean(2&i)),this.format.bytesPerPacket=this.stream.readUInt32(),this.format.framesPerPacket=this.stream.readUInt32(),this.format.channelsPerFrame=this.stream.readUInt32(),this.format.bitsPerChannel=this.stream.readUInt32(),this.emit("format",this.format);}for(;this.stream.available(1);){if(!this.headerCache&&(this.headerCache={type:this.stream.readString(4),oversize:0!==this.stream.readUInt32(),size:this.stream.readUInt32()},this.headerCache.oversize))return this.emit("error","Holy Shit, an oversized file, not supported in JS");switch(this.headerCache.type){case"kuki":this.stream.available(this.headerCache.size)&&("aac "===this.format.formatID?(c=this.stream.offset+this.headerCache.size,(n=r.readEsds(this.stream))&&this.emit("cookie",n),this.stream.seek(c)):(e=this.stream.readBuffer(this.headerCache.size),this.emit("cookie",e)),this.headerCache=null);break;case"pakt":if(this.stream.available(this.headerCache.size)){if(0!==this.stream.readUInt32())return this.emit("error","Sizes greater than 32 bits are not supported.");if(this.numPackets=this.stream.readUInt32(),0!==this.stream.readUInt32())return this.emit("error","Sizes greater than 32 bits are not supported.");for(this.numFrames=this.stream.readUInt32(),this.primingFrames=this.stream.readUInt32(),this.remainderFrames=this.stream.readUInt32(),this.emit("duration",this.numFrames/this.format.sampleRate*1e3|0),this.sentDuration=!0,t=0,l=0,o=0,f=this.numPackets;o<f;o+=1)this.addSeekPoint(t,l),t+=this.format.bytesPerPacket||r.readDescrLen(this.stream),l+=this.format.framesPerPacket||r.readDescrLen(this.stream);this.headerCache=null;}break;case"info":for(d={},a=0,u=this.stream.readUInt32();0<=u?a<u:a>u;0<=u?++a:--a)s=this.stream.readString(null),p=this.stream.readString(null),d[s]=p;this.emit("metadata",d),this.headerCache=null;break;case"data":this.sentFirstDataChunk||(this.stream.advance(4),this.headerCache.size-=4,0===this.format.bytesPerPacket||this.sentDuration||(this.numFrames=this.headerCache.size/this.format.bytesPerPacket,this.emit("duration",this.numFrames/this.format.sampleRate*1e3|0)),this.sentFirstDataChunk=!0),e=this.stream.readSingleBuffer(this.headerCache.size),this.headerCache.size-=e.length,this.emit("data",e),this.headerCache.size<=0&&(this.headerCache=null);break;default:this.stream.available(this.headerCache.size)&&(this.stream.advance(this.headerCache.size),this.headerCache=null);}}};}(t);}).call(this);},{"../demuxer":49,"./m4a":53}],53:[function(e,t,r){(function(){var r,n,i={}.hasOwnProperty,o=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1;};n=function(e){var t,n,a,s,d,c,f,u,l,p,h;function g(){return g.__super__.constructor.apply(this,arguments);}return function(e,t){for(var r in t)i.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e;}n.prototype=t.prototype,e.prototype=new n(),e.__super__=t.prototype;}(g,e),r.register(g),n=["M4A ","M4P ","M4B ","M4V ","isom","mp42","qt  "],g.probe=function(e){var t;return"ftyp"===e.peekString(4,4)&&(t=e.peekString(8,4),o.call(n,t)>=0);},g.prototype.init=function(){return this.atoms=[],this.offsets=[],this.track=null,this.tracks=[];},d={},f={},s=function(e,t){var r,n,i,o,a;for(r=[],i=0,o=(a=e.split(".").slice(0,-1)).length;i<o;i++)n=a[i],r.push(n),f[r.join(".")]=!0;return null==d[e]&&(d[e]={}),d[e].fn=t;},a=function(e,t){return null==d[e]&&(d[e]={}),d[e].after=t;},g.prototype.readChunk=function(){var e,t;for(this.break=!1;this.stream.available(1)&&!this.break;){if(!this.readHeaders){if(!this.stream.available(8))return;if(this.len=this.stream.readUInt32()-8,this.type=this.stream.readString(4),0===this.len)continue;this.atoms.push(this.type),this.offsets.push(this.stream.offset+this.len),this.readHeaders=!0;}if(t=this.atoms.join("."),null!=(e=d[t])?e.fn:void 0){if(!this.stream.available(this.len)&&"mdat"!==t)return;e.fn.call(this),t in f&&(this.readHeaders=!1);}else if(t in f)this.readHeaders=!1;else{if(!this.stream.available(this.len))return;this.stream.advance(this.len);}for(;this.stream.offset>=this.offsets[this.offsets.length-1];)(null!=(e=d[this.atoms.join(".")])?e.after:void 0)&&e.after.call(this),this.atoms.pop(),this.offsets.pop(),this.readHeaders=!1;}},s("ftyp",function(){var e;return e=this.stream.readString(4),o.call(n,e)<0?this.emit("error","Not a valid M4A file."):this.stream.advance(this.len-4);}),s("moov.trak",function(){return this.track={},this.tracks.push(this.track);}),s("moov.trak.tkhd",function(){return this.stream.advance(4),this.stream.advance(8),this.track.id=this.stream.readUInt32(),this.stream.advance(this.len-16);}),s("moov.trak.mdia.hdlr",function(){return this.stream.advance(4),this.stream.advance(4),this.track.type=this.stream.readString(4),this.stream.advance(12),this.stream.advance(this.len-24);}),s("moov.trak.mdia.mdhd",function(){return this.stream.advance(4),this.stream.advance(8),this.track.timeScale=this.stream.readUInt32(),this.track.duration=this.stream.readUInt32(),this.stream.advance(4);}),t={ulaw:8,alaw:8,in24:24,in32:32,fl32:32,fl64:64},s("moov.trak.mdia.minf.stbl.stsd",function(){var e,r,n,i,o;return this.stream.advance(4),r=this.stream.readUInt32(),"soun"!==this.track.type?this.stream.advance(this.len-8):1!==r?this.emit("error","Only expecting one entry in sample description atom!"):(this.stream.advance(4),(e=this.track.format={}).formatID=this.stream.readString(4),this.stream.advance(6),this.stream.advance(2),o=this.stream.readUInt16(),this.stream.advance(6),e.channelsPerFrame=this.stream.readUInt16(),e.bitsPerChannel=this.stream.readUInt16(),this.stream.advance(4),e.sampleRate=this.stream.readUInt16(),this.stream.advance(2),1===o?(e.framesPerPacket=this.stream.readUInt32(),this.stream.advance(4),e.bytesPerFrame=this.stream.readUInt32(),this.stream.advance(4)):0!==o&&this.emit("error","Unknown version in stsd atom"),null!=t[e.formatID]&&(e.bitsPerChannel=t[e.formatID]),e.floatingPoint="fl32"===(n=e.formatID)||"fl64"===n,e.littleEndian="sowt"===e.formatID&&e.bitsPerChannel>8,"twos"===(i=e.formatID)||"sowt"===i||"in24"===i||"in32"===i||"fl32"===i||"fl64"===i||"raw "===i||"NONE"===i?e.formatID="lpcm":void 0);}),s("moov.trak.mdia.minf.stbl.stsd.alac",function(){return this.stream.advance(4),this.track.cookie=this.stream.readBuffer(this.len-4);}),s("moov.trak.mdia.minf.stbl.stsd.esds",function(){var e;return e=this.stream.offset+this.len,this.track.cookie=g.readEsds(this.stream),this.stream.seek(e);}),s("moov.trak.mdia.minf.stbl.stsd.wave.enda",function(){return this.track.format.littleEndian=!!this.stream.readUInt16();}),g.readDescrLen=function(e){var t,r,n;for(n=0,r=4;r--&&(n=n<<7|127&(t=e.readUInt8()),128&t););return n;},g.readEsds=function(e){var t,r,n;return e.advance(4),n=e.readUInt8(),r=g.readDescrLen(e),3===n?(e.advance(2),128&(t=e.readUInt8())&&e.advance(2),64&t&&e.advance(e.readUInt8()),32&t&&e.advance(2)):e.advance(2),n=e.readUInt8(),r=g.readDescrLen(e),4===n&&(e.readUInt8(),e.advance(1),e.advance(3),e.advance(4),e.advance(4),n=e.readUInt8(),r=g.readDescrLen(e),5===n)?e.readBuffer(r):null;},s("moov.trak.mdia.minf.stbl.stts",function(){var e,t,r,n;for(this.stream.advance(4),e=this.stream.readUInt32(),this.track.stts=[],t=r=0,n=e;r<n;t=r+=1)this.track.stts[t]={count:this.stream.readUInt32(),duration:this.stream.readUInt32()};return this.setupSeekPoints();}),s("moov.trak.mdia.minf.stbl.stsc",function(){var e,t,r,n;for(this.stream.advance(4),e=this.stream.readUInt32(),this.track.stsc=[],t=r=0,n=e;r<n;t=r+=1)this.track.stsc[t]={first:this.stream.readUInt32(),count:this.stream.readUInt32(),id:this.stream.readUInt32()};return this.setupSeekPoints();}),s("moov.trak.mdia.minf.stbl.stsz",function(){var e,t,r,n;if(this.stream.advance(4),this.track.sampleSize=this.stream.readUInt32(),e=this.stream.readUInt32(),0===this.track.sampleSize&&e>0)for(this.track.sampleSizes=[],t=r=0,n=e;r<n;t=r+=1)this.track.sampleSizes[t]=this.stream.readUInt32();return this.setupSeekPoints();}),s("moov.trak.mdia.minf.stbl.stco",function(){var e,t,r,n;for(this.stream.advance(4),e=this.stream.readUInt32(),this.track.chunkOffsets=[],t=r=0,n=e;r<n;t=r+=1)this.track.chunkOffsets[t]=this.stream.readUInt32();return this.setupSeekPoints();}),s("moov.trak.tref.chap",function(){var e,t,r,n;for(e=this.len>>2,this.track.chapterTracks=[],t=r=0,n=e;r<n;t=r+=1)this.track.chapterTracks[t]=this.stream.readUInt32();}),g.prototype.setupSeekPoints=function(){var e,t,r,n,i,o,a,s,d,c,f,u,l,p,h;if(null!=this.track.chunkOffsets&&null!=this.track.stsc&&null!=this.track.sampleSize&&null!=this.track.stts){for(u=0,l=0,l=0,p=0,c=0,i=0,h=0,this.track.seekPoints=[],d=[],e=t=0,n=(a=this.track.chunkOffsets).length;t<n;e=++t){for(o=a[e],r=0,s=this.track.stsc[u].count;r<s;r+=1)this.track.seekPoints.push({offset:i,position:o,timestamp:h}),i+=f=this.track.sampleSize||this.track.sampleSizes[c++],o+=f,h+=this.track.stts[l].duration,l+1<this.track.stts.length&&++p===this.track.stts[l].count&&(p=0,l++);u+1<this.track.stsc.length&&e+1===this.track.stsc[u+1].first?d.push(u++):d.push(void 0);}return d;}},a("moov",function(){var e,t,r,n;for(null!=this.mdatOffset&&this.stream.seek(this.mdatOffset-8),e=0,t=(r=this.tracks).length;e<t;e++)if("soun"===(n=r[e]).type){this.track=n;break;}return"soun"!==this.track.type?(this.track=null,this.emit("error","No audio tracks in m4a file.")):(this.emit("format",this.track.format),this.emit("duration",this.track.duration/this.track.timeScale*1e3|0),this.track.cookie&&this.emit("cookie",this.track.cookie),this.seekPoints=this.track.seekPoints);}),s("mdat",function(){var e,t,r,n,i,o,a,s,d;if(!this.startedData){if(null==this.mdatOffset&&(this.mdatOffset=this.stream.offset),0===this.tracks.length)return e=Math.min(this.stream.remainingBytes(),this.len),this.stream.advance(e),void(this.len-=e);this.chunkIndex=0,this.stscIndex=0,this.sampleIndex=0,this.tailOffset=0,this.tailSamples=0,this.startedData=!0;}if(!this.readChapters){if(this.readChapters=this.parseChapters(),this.break=!this.readChapters)return;this.stream.seek(this.mdatOffset);}if(o=this.track.chunkOffsets[this.chunkIndex]+this.tailOffset,n=0,this.stream.available(o-this.stream.offset)){for(this.stream.seek(o);this.chunkIndex<this.track.chunkOffsets.length;){for(t=0,s=r=0,a=i=this.track.stsc[this.stscIndex].count-this.tailSamples;r<a&&(d=this.track.sampleSize||this.track.sampleSizes[this.sampleIndex],this.stream.available(n+d));s=r+=1)n+=d,t+=d,this.sampleIndex++;if(s<i){this.tailOffset+=t,this.tailSamples+=s;break;}if(this.chunkIndex++,this.tailOffset=0,this.tailSamples=0,this.stscIndex+1<this.track.stsc.length&&this.chunkIndex+1===this.track.stsc[this.stscIndex+1].first&&this.stscIndex++,o+n!==this.track.chunkOffsets[this.chunkIndex])break;}return n>0?(this.emit("data",this.stream.readBuffer(n)),this.break=this.chunkIndex===this.track.chunkOffsets.length):this.break=!0;}this.break=!0;}),g.prototype.parseChapters=function(){var e,t,r,n,i,o,a,s,d,c,f,u,l;if(!((null!=(s=this.track.chapterTracks)?s.length:void 0)>0))return!0;for(t=this.track.chapterTracks[0],r=0,i=(d=this.tracks).length;r<i&&(l=d[r]).id!==t;r++);for(l.id!==t&&this.emit("error","Chapter track does not exist."),null==this.chapters&&(this.chapters=[]);this.chapters.length<l.seekPoints.length;){if(a=l.seekPoints[this.chapters.length],!this.stream.available(a.position-this.stream.offset+32))return!1;if(this.stream.seek(a.position),n=this.stream.readUInt16(),u=null,!this.stream.available(n))return!1;n>2&&(65279!==(e=this.stream.peekUInt16())&&65534!==e||(u=this.stream.readString(n,"utf16-bom"))),null==u&&(u=this.stream.readString(n,"utf8")),o=null!=(c=null!=(f=l.seekPoints[this.chapters.length+1])?f.timestamp:void 0)?c:l.duration,this.chapters.push({title:u,timestamp:a.timestamp/l.timeScale*1e3|0,duration:(o-a.timestamp)/l.timeScale*1e3|0});}return this.emit("chapters",this.chapters),!0;},s("moov.udta.meta",function(){return this.metadata={},this.stream.advance(4);}),a("moov.udta.meta",function(){return this.emit("metadata",this.metadata);}),(p=function(e,t,r){return s("moov.udta.meta.ilst."+e+".data",function(){return this.stream.advance(8),this.len-=8,r.call(this,t);});})("©alb","album",h=function(e){return this.metadata[e]=this.stream.readString(this.len,"utf8");}),p("©arg","arranger",h),p("©art","artist",h),p("©ART","artist",h),p("aART","albumArtist",h),p("catg","category",h),p("©com","composer",h),p("©cpy","copyright",h),p("cprt","copyright",h),p("©cmt","comments",h),p("©day","releaseDate",h),p("desc","description",h),p("©gen","genre",h),p("©grp","grouping",h),p("©isr","ISRC",h),p("keyw","keywords",h),p("©lab","recordLabel",h),p("ldes","longDescription",h),p("©lyr","lyrics",h),p("©nam","title",h),p("©phg","recordingCopyright",h),p("©prd","producer",h),p("©prf","performers",h),p("purd","purchaseDate",h),p("purl","podcastURL",h),p("©swf","songwriter",h),p("©too","encoder",h),p("©wrt","composer",h),p("covr","coverArt",function(e){return this.metadata[e]=this.stream.readBuffer(this.len);}),l=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychadelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Capella","Euro-House","Dance Hall"],p("gnre","genre",function(e){return this.metadata[e]=l[this.stream.readUInt16()-1];}),p("tmpo","tempo",function(e){return this.metadata[e]=this.stream.readUInt16();}),p("rtng","rating",function(e){var t;return t=this.stream.readUInt8(),this.metadata[e]=2===t?"Clean":0!==t?"Explicit":"None";}),p("disk","diskNumber",u=function(e){return this.stream.advance(2),this.metadata[e]=this.stream.readUInt16()+" of "+this.stream.readUInt16(),this.stream.advance(this.len-6);}),p("trkn","trackNumber",u),p("cpil","compilation",c=function(e){return this.metadata[e]=1===this.stream.readUInt8();}),p("pcst","podcast",c),p("pgap","gapless",c),g;}(r=e("../demuxer")),t.exports=n;}).call(this);},{"../demuxer":49}],54:[function(e,t,r){(function(){var t,r={}.hasOwnProperty;(function(e){var n;function i(){return i.__super__.constructor.apply(this,arguments);}(function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e;}i.prototype=t.prototype,e.prototype=new i(),e.__super__=t.prototype;})(i,e),t.register(i),i.probe=function(e){return"RIFF"===e.peekString(0,4)&&"WAVE"===e.peekString(8,4);},n={1:"lpcm",3:"lpcm",6:"alaw",7:"ulaw"},i.prototype.readChunk=function(){var e,t,r;if(!this.readStart&&this.stream.available(12)){if("RIFF"!==this.stream.readString(4))return this.emit("error","Invalid WAV file.");if(this.fileSize=this.stream.readUInt32(!0),this.readStart=!0,"WAVE"!==this.stream.readString(4))return this.emit("error","Invalid WAV file.");}for(;this.stream.available(1);){switch(!this.readHeaders&&this.stream.available(8)&&(this.type=this.stream.readString(4),this.len=this.stream.readUInt32(!0)),this.type){case"fmt ":if(!((r=this.stream.readUInt16(!0))in n))return this.emit("error","Unsupported format in WAV file.");this.format={formatID:n[r],floatingPoint:3===r,littleEndian:"lpcm"===n[r],channelsPerFrame:this.stream.readUInt16(!0),sampleRate:this.stream.readUInt32(!0),framesPerPacket:1},this.stream.advance(4),this.stream.advance(2),this.format.bitsPerChannel=this.stream.readUInt16(!0),this.format.bytesPerPacket=this.format.bitsPerChannel/8*this.format.channelsPerFrame,this.emit("format",this.format),this.stream.advance(this.len-16);break;case"data":this.sentDuration||(t=this.format.bitsPerChannel/8,this.emit("duration",this.len/t/this.format.channelsPerFrame/this.format.sampleRate*1e3|0),this.sentDuration=!0),e=this.stream.readSingleBuffer(this.len),this.len-=e.length,this.readHeaders=this.len>0,this.emit("data",e);break;default:if(!this.stream.available(this.len))return;this.stream.advance(this.len);}"data"!==this.type&&(this.readHeaders=!1);}};})(t=e("../demuxer"));}).call(this);},{"../demuxer":49}],55:[function(e,t,r){(function(){var r,n={}.hasOwnProperty;r=function(e){var t;function r(e,t){var r,n;this.sampleRate=e,this.channels=t,this.updateTime=(r=this.updateTime,n=this,function(){return r.apply(n,arguments);}),this.playing=!1,this.currentTime=0,this._lastTime=0;}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e;}i.prototype=t.prototype,e.prototype=new i(),e.__super__=t.prototype;}(r,e),r.prototype.start=function(){if(!this.playing){if(this.playing=!0,null==this.device&&(this.device=r.create(this.sampleRate,this.channels)),!this.device)throw new Error("No supported audio device found.");return this._lastTime=this.device.getDeviceTime(),this._timer=setInterval(this.updateTime,20),this.device.on("refill",this.refill=(e=this,function(t){return e.emit("refill",t);}));var e;}},r.prototype.stop=function(){if(this.playing)return this.playing=!1,this.device.off("refill",this.refill),clearInterval(this._timer);},r.prototype.destroy=function(){return this.stop(),this.device.destroy();},r.prototype.seek=function(e){return this.currentTime=e,this.playing&&(this._lastTime=this.device.getDeviceTime()),this.emit("timeUpdate",this.currentTime);},r.prototype.updateTime=function(){var e;return e=this.device.getDeviceTime(),this.currentTime+=(e-this._lastTime)/this.device.sampleRate*1e3|0,this._lastTime=e,this.emit("timeUpdate",this.currentTime);},t=[],r.register=function(e){return t.push(e);},r.create=function(e,r){var n,i;for(i=t.length-1,t.length;i>=0;i--)if((n=t[i]).supported)return new n(e,r);return null;},r.prototype.initDevice=function(){this.device=r.create(this.sampleRate,this.channels);},r;}(e("./core/events")),t.exports=r;}).call(this);},{"./core/events":43}],56:[function(e,t,r){(function(){var t,r,n,i={}.hasOwnProperty;n=e("../core/events"),r=e("../device"),t=e("../core/buffer"),function(e){var n,o;function a(e,t){var r,i;this.sampleRate=e,this.channels=t,this.refill=(r=this.refill,i=this,function(){return r.apply(i,arguments);}),this.audio=new Audio(),this.audio.mozSetup(this.channels,this.sampleRate),this.writePosition=0,this.prebufferSize=this.sampleRate/2,this.tail=null,this.timer=n(this.refill,100);}(function(e,t){for(var r in t)i.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e;}n.prototype=t.prototype,e.prototype=new n(),e.__super__=t.prototype;})(a,e),r.register(a),a.supported="undefined"!=typeof Audio&&null!==Audio&&"mozWriteAudio"in new Audio(),a.prototype.refill=function(){var e,t,r;this.tail&&(r=this.audio.mozWriteAudio(this.tail),this.writePosition+=r,this.writePosition<this.tail.length?this.tail=this.tail.subarray(r):this.tail=null),(e=this.audio.mozCurrentSampleOffset()+this.prebufferSize-this.writePosition)>0&&(t=new Float32Array(e),this.emit("refill",t),(r=this.audio.mozWriteAudio(t))<t.length&&(this.tail=t.subarray(r)),this.writePosition+=r);},a.prototype.destroy=function(){return o(this.timer);},a.prototype.getDeviceTime=function(){return this.audio.mozCurrentSampleOffset()/this.channels;},n=function(e,r){var n,i;return null==(n=t.makeBlobURL("setInterval(function() { postMessage('ping'); }, "+r+");"))?setInterval(e,r):((i=new Worker(n)).onmessage=e,i.url=n,i);},o=function(e){return e.terminate?(e.terminate(),URL.revokeObjectURL(e.url)):clearInterval(e);};}(n);}).call(this);},{"../core/buffer":41,"../core/events":43,"../device":55}],57:[function(e,t,r){function n(e,t,r,n){this.fromSampleRate=+e,this.toSampleRate=+t,this.channels=0|r,this.inputBufferLength=n,this.initialize();}n.prototype.initialize=function(){if(!(this.fromSampleRate>0&&this.toSampleRate>0&&this.channels>0))throw new Error("Invalid settings specified for the resampler.");if(this.fromSampleRate==this.toSampleRate)this.resampler=this.bypassResampler,this.ratioWeight=1;else{this.ratioWeight=this.fromSampleRate/this.toSampleRate,this.fromSampleRate<this.toSampleRate?(this.compileLinearInterpolationFunction(),this.lastWeight=1):(this.compileMultiTapFunction(),this.tailExists=!1,this.lastWeight=0);var e=Math.ceil(this.inputBufferLength*this.toSampleRate/this.fromSampleRate/this.channels*1.01)*this.channels+this.channels;this.outputBuffer=new Float32Array(e),this.lastOutput=new Float32Array(this.channels);}},n.prototype.compileLinearInterpolationFunction=function(){for(var e="var outputOffset = 0;        var bufferLength = buffer.length;        if (bufferLength > 0) {          var weight = this.lastWeight;          var firstWeight = 0;          var secondWeight = 0;          var sourceOffset = 0;          var outputOffset = 0;          var outputBuffer = this.outputBuffer;          for (; weight < 1; weight += "+this.ratioWeight+") {            secondWeight = weight % 1;            firstWeight = 1 - secondWeight;",t=0;t<this.channels;++t)e+="outputBuffer[outputOffset++] = (this.lastOutput["+t+"] * firstWeight) + (buffer["+t+"] * secondWeight);";e+="}          weight -= 1;          for (bufferLength -= "+this.channels+", sourceOffset = Math.floor(weight) * "+this.channels+"; sourceOffset < bufferLength;) {            secondWeight = weight % 1;            firstWeight = 1 - secondWeight;";for(t=0;t<this.channels;++t)e+="outputBuffer[outputOffset++] = (buffer[sourceOffset"+(t>0?" + "+t:"")+"] * firstWeight) + (buffer[sourceOffset + "+(this.channels+t)+"] * secondWeight);";e+="weight += "+this.ratioWeight+";            sourceOffset = Math.floor(weight) * "+this.channels+";          }";for(t=0;t<this.channels;++t)e+="this.lastOutput["+t+"] = buffer[sourceOffset++];";e+="this.lastWeight = weight % 1;        }        return this.outputBuffer;",this.resampler=Function("buffer",e);},n.prototype.compileMultiTapFunction=function(){for(var e="var outputOffset = 0;        var bufferLength = buffer.length;        if (bufferLength > 0) {          var weight = 0;",t=0;t<this.channels;++t)e+="var output"+t+" = 0;";for(e+="var actualPosition = 0;          var amountToNext = 0;          var alreadyProcessedTail = !this.tailExists;          this.tailExists = false;          var outputBuffer = this.outputBuffer;          var currentPosition = 0;          do {            if (alreadyProcessedTail) {              weight = "+this.ratioWeight+";",t=0;t<this.channels;++t)e+="output"+t+" = 0;";for(e+="}            else {              weight = this.lastWeight;",t=0;t<this.channels;++t)e+="output"+t+" = this.lastOutput["+t+"];";for(e+="alreadyProcessedTail = true;            }            while (weight > 0 && actualPosition < bufferLength) {              amountToNext = 1 + actualPosition - currentPosition;              if (weight >= amountToNext) {",t=0;t<this.channels;++t)e+="output"+t+" += buffer[actualPosition++] * amountToNext;";for(e+="currentPosition = actualPosition;                weight -= amountToNext;              }              else {",t=0;t<this.channels;++t)e+="output"+t+" += buffer[actualPosition"+(t>0?" + "+t:"")+"] * weight;";for(e+="currentPosition += weight;                weight = 0;                break;              }            }            if (weight <= 0) {",t=0;t<this.channels;++t)e+="outputBuffer[outputOffset++] = output"+t+" / "+this.ratioWeight+";";for(e+="}            else {              this.lastWeight = weight;",t=0;t<this.channels;++t)e+="this.lastOutput["+t+"] = output"+t+";";e+="this.tailExists = true;              break;            }          } while (actualPosition < bufferLength);        }        return this.outputBuffer;",this.resampler=Function("buffer",e);},n.prototype.bypassResampler=function(e){return e;},t.exports=n;},{}],58:[function(e,t,r){(function(t){(function(){var r,n,i,o={}.hasOwnProperty;n=e("../core/events"),r=e("../device"),i=e("./resampler"),function(e){var n,a,s;function d(e,t){var r,o,d;this.sampleRate=e,this.channels=t,this.refill=(o=this.refill,d=this,function(){return o.apply(d,arguments);}),this.context=null!=s?s:s=new n(),this.deviceSampleRate=this.context.sampleRate,r=4096,this.node=this.context[a](r,this.channels,this.channels),this.bufferSize=Math.ceil(this.node.bufferSize/(this.deviceSampleRate/this.sampleRate)*this.channels),this.bufferSize+=this.bufferSize%this.channels,this.deviceSampleRate!==this.sampleRate&&(this.resampler=new i(this.sampleRate,this.deviceSampleRate,this.channels,this.bufferSize)),this.node.onaudioprocess=this.refill,this.node.connect(this.context.destination);}(function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e;}n.prototype=t.prototype,e.prototype=new n(),e.__super__=t.prototype;})(d,e),r.register(d),n=t.AudioContext||t.webkitAudioContext,d.supported=n&&("function"==typeof n.prototype[a="createScriptProcessor"]||"function"==typeof n.prototype[a="createJavaScriptNode"]),s=null,d.prototype.refill=function(e){var t,r,n,i,o,a,s,d,c,f,u,l;for(t=(c=e.outputBuffer).numberOfChannels,r=new Array(t),i=o=0,f=t;o<f;i=o+=1)r[i]=c.getChannelData(i);for(n=new Float32Array(this.bufferSize),this.emit("refill",n),this.resampler&&(n=this.resampler.resampler(n)),i=a=0,u=c.length;a<u;i=a+=1)for(d=s=0,l=t;s<l;d=s+=1)r[d][i]=n[i*t+d];},d.prototype.destroy=function(){return this.node.disconnect(0);},d.prototype.getDeviceTime=function(){return this.context.currentTime*this.sampleRate;};}(n);}).call(this);}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{"../core/events":43,"../device":55,"./resampler":57}],59:[function(e,t,r){(function(){var e;e=function(){function e(e,t){e&&t&&Object.defineProperty(this,"value",{get:function(){return e[t];}});}return e.prototype.process=function(e){},e;}(),t.exports=e;}).call(this);},{}],60:[function(e,t,r){(function(){var r,n={}.hasOwnProperty;r=function(e){function t(){return t.__super__.constructor.apply(this,arguments);}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e;}i.prototype=t.prototype,e.prototype=new i(),e.__super__=t.prototype;}(t,e),t.prototype.process=function(e){var t,r,n,i;if(0!==this.value)for(n=Math.max(-50,Math.min(50,this.value)),t=r=0,i=e.length;r<i;t=r+=2)e[t]*=Math.min(1,(50-n)/50),e[t+1]*=Math.min(1,(50+n)/50);},t;}(e("../filter")),t.exports=r;}).call(this);},{"../filter":59}],61:[function(e,t,r){(function(){var r,n={}.hasOwnProperty;r=function(e){function t(){return t.__super__.constructor.apply(this,arguments);}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e;}i.prototype=t.prototype,e.prototype=new i(),e.__super__=t.prototype;}(t,e),t.prototype.process=function(e){var t,r,n,i;if(!(this.value>=100))for(i=Math.max(0,Math.min(100,this.value))/100,t=r=0,n=e.length;r<n;t=r+=1)e[t]*=i;},t;}(e("../filter")),t.exports=r;}).call(this);},{"../filter":59}],62:[function(e,t,r){(function(){var r,n,i,o,a,s,d,c={}.hasOwnProperty;o=e("./core/events"),r=e("./asset"),d=e("./filters/volume"),i=e("./filters/balance"),s=e("./queue"),n=e("./device"),a=function(e){function t(e){var t,r,n;this.asset=e,this.startPlaying=(t=this.startPlaying,r=this,function(){return t.apply(r,arguments);}),this.playing=!1,this.buffered=0,this.currentTime=0,this.duration=0,this.volume=100,this.pan=0,this.checkQueueInterval=0,this.metadata={},this.filters=[new d(this,"volume"),new i(this,"pan")],this.asset.on("buffer",(n=this,function(e){return n.buffered=e,n.emit("buffer",n.buffered);})),this.asset.on("decodeStart",function(e){return function(){return e.queue=new s(e.asset),e.queue.once("ready",e.startPlaying),e.queue.on("buffering",function(){return e.device.stop(),e.queue.once("ready",function(){return e.device.start();});});};}(this)),this.asset.on("format",function(e){return function(t){return e.format=t,e.emit("format",e.format);};}(this)),this.asset.on("metadata",function(e){return function(t){return e.metadata=t,e.emit("metadata",e.metadata);};}(this)),this.asset.on("duration",function(e){return function(t){return e.duration=t,e.emit("duration",e.duration);};}(this)),this.asset.on("progress",function(e){return function(t){return e.progress=t,e.emit("progress",e.progress);};}(this)),this.asset.on("error",function(e){return function(t){return e.emit("error",t);};}(this));}return function(e,t){for(var r in t)c.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e;}n.prototype=t.prototype,e.prototype=new n(),e.__super__=t.prototype;}(t,e),t.fromURL=function(e,n){return new t(r.fromURL(e,n));},t.fromFile=function(e){return new t(r.fromFile(e));},t.fromWebSocket=function(e,n){return new t(r.fromWebSocket(e,n));},t.fromWSWorker=function(e,n){return new t(r.fromWSWorker(e,n));},t.fromBuffer=function(e){return new t(r.fromBuffer(e));},t.prototype.preload=function(){if(!this.startedPreloading&&this.asset)return this.startedPreloading=!0,this.asset.start(!1);},t.prototype.replay=function(){this.device&&this.device.device&&this.device.device.context&&("interrupted"===this.device.device.context.state||"suspended"===this.device.device.context.state)&&this.device.device.context.resume();},t.prototype.play=function(){var e;if(!this.playing)return this.playing=!0,this.device||(this.device=new n(44100,2),this.device.initDevice()),this.device&&this.device.device&&this.device.device.node.connect(this.device.device.context.destination),null!=(e=this.device)?e.start():void 0;},t.prototype.pause=function(){var e;if(this.playing)return this.playing=!1,null!=(e=this.device)&&e.destroy(),null!=(e=this.device)?e.stop():void 0;},t.prototype.togglePlayback=function(){return this.playing?this.pause():this.play();},t.prototype.stop=function(){var e;return this.pause(),this.asset.stop(),null!=(e=this.device)?e.destroy():void 0;},t.prototype.seek=function(e){var t,r;return null!=(t=this.device)&&t.stop(),this.queue.once("ready",(r=this,function(){var e,t;if(null!=(e=r.device)&&e.seek(r.currentTime),r.playing)return null!=(t=r.device)?t.start():void 0;})),e=e/1e3*this.format.sampleRate,e=this.asset.decoder.seek(e),this.currentTime=e/this.format.sampleRate*1e3|0,this.queue.reset(),this.currentTime;},t.prototype.startPlaying=function(){var e,t,r;return e=this.queue.read(),t=0,this.device||(this.device=new n(this.format.sampleRate,this.format.channelsPerFrame)),this.device.on("timeUpdate",(r=this,function(e){return r.currentTime=e,r.emit("progress",r.currentTime);})),this.refill=function(r){return function(n){var i,o,a,s,d,c;if(r.playing){for(e||(e=r.queue.read(),t=0),i=0;e&&i<n.length;){for(o=0,d=Math.min(e.length-t,n.length-i);o<d;o+=1)n[i++]=e[t++];t===e.length&&(e=r.queue.read(),t=0);}for(a=0,s=(c=r.filters).length;a<s;a++)c[a].process(n);}};}(this),this.device.on("refill",this.refill),this.playing&&this.device.start(),this.emit("ready");},t;}(o),t.exports=a;}).call(this);},{"./asset":36,"./core/events":43,"./device":55,"./filters/balance":60,"./filters/volume":61,"./queue":63}],63:[function(e,t,r){(function(){var r,n={}.hasOwnProperty;r=function(e){function t(e){var t,r,n;this.asset=e,this.write=(t=this.write,r=this,function(){return t.apply(r,arguments);}),this.bufferSize=0,this.readyMark=2,this.finished=!1,this.buffering=!0,this.ended=!1,this.buffers=[],this.asset.on("data",this.write),this.asset.on("end",(n=this,function(){return n.ended=!0;})),this.asset.decodePacket();}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e;}i.prototype=t.prototype,e.prototype=new i(),e.__super__=t.prototype;}(t,e),t.prototype.write=function(e){if(this.buffers.length>this.readyMark+3){var t=this.buffers.length-this.readyMark;this.buffers.splice(0,t),redfinger.debug("audio splice:"+t);}if(e&&this.buffers.push(e),this.bufferSize+=e.length,this.buffering&&(this.asset.decodePacket(),this.buffers.length>=this.readyMark||this.ended))return this.buffering=!1,this.emit("ready");},t.prototype.read=function(){return 0===this.buffers.length?null:(this.buffering||this.asset.decodePacket(),this.bufferSize-=this.buffers[0].length,this.bufferSize<=0&&(this.buffering=!0,this.emit("buffering")),this.buffers.shift());},t.prototype.reset=function(){return this.buffers.length=0,this.buffering=!0,this.asset.decodePacket();},t;}(e("./core/events")),t.exports=r;}).call(this);},{"./core/events":43}],64:[function(e,t,r){(function(){var r,n,i,o={}.hasOwnProperty;n=e("../../core/events"),r=e("../../core/buffer"),i=function(e){function t(e,t){return this.url=e,this.file=t,"undefined"==typeof WebSocket||null===WebSocket?this.emit("error","This browser does not have WebSocket support."):(this.socket=new WebSocket(this.url),null==this.socket.binaryType?(this.socket.close(),this.emit("error","This browser does not have binary WebSocket support.")):(this.bytesLoaded=0,this._bufferMessage=[],this.wsBuffer=new r(new Uint8Array()),this.bufCount=0,this.ack=!1,this.paused=!1,void this._setupSocket()));}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e;}n.prototype=t.prototype,e.prototype=new n(),e.__super__=t.prototype;}(t,e),t.prototype.start=function(){return this.paused?(this._send({resume:!0}),this.paused=!1):this._send({play:!0});},t.prototype.resume=function(){this.stream.resume();},t.prototype.pause=function(){return this._send({pause:!0}),this.pause=!0;},t.prototype.reset=function(){return this._send({reset:!0});},t.prototype._send=function(e){return this.open?this.socket.send(JSON.stringify(e)):this._bufferMessage.push(e);},t.prototype._syn=function(){if(!this.ack)return this._send({syn:!0}),setTimeout((e=this,function(){return e._syn();}),100);var e;},t.prototype._setupSocket=function(){var e;return this.socket.binaryType="arraybuffer",this.socket.onopen=(e=this,function(){return e.open=!0,setTimeout(function(){return e._syn();},100);}),this.socket.onmessage=function(e){return function(t){var n,i;if("string"!=typeof(i=t.data))return e.bytesLoaded+=i.byteLength,e.bufCount<5?(e.wsBuffer.append(i),4===e.bufCount&&(e.length&&e.emit("progress",e.bytesLoaded/e.length*100),e.emit("data",e.wsBuffer),e.wsBuffer=new r(new Uint8Array())),e.bufCount++):(n=new r(new Uint8Array(i)),e.length&&e.emit("progress",e.bytesLoaded/e.length*100),e.emit("data",n));if(null!=(i=JSON.parse(i)).ack)for(e.ack=!0,e.file&&e._send({file:e.file});e._bufferMessage.length>0;)e._send(e._bufferMessage.shift());return null!=i.fileSize&&(e.length=i.fileSize),null!=i.error&&e.emit("error",i.error),i.end?e.socket.close():void 0;};}(this),this.socket.onclose=function(e){return function(t){return e.open=!1,t.wasClean?e.emit("end"):e.emit("error","WebSocket closed uncleanly with code "+t.code+".");};}(this),this.socket.onerror=function(e){return function(t){return e.emit("error",t);};}(this);},t;}(n),t.exports=i;}).call(this);},{"../../core/buffer":41,"../../core/events":43}],65:[function(e,t,r){(function(){var r,n,i,o={}.hasOwnProperty;n=e("../../core/events"),r=e("../../core/buffer"),i=function(e){function t(e,t){var n;this.url=e,this.file=t,this.wsBuffer=new r(new Uint8Array()),this.bufCount=0,this.wsWorker=new Worker("/public/js/websocketWorker.js"),this.wsWorker.onmessage=(n=this,function(e){var t,i;switch(e.data.cmd){case"data":return i=e.data.data,n.bytesLoaded+=i.byteLength,n.bufCount<5?(n.wsBuffer.append(i),4===n.bufCount&&(n.length&&n.emit("progress",n.bytesLoaded/n.length*100),n.emit("data",n.wsBuffer),n.wsBuffer=new r(new Uint8Array())),n.bufCount++):(t=new r(new Uint8Array(i)),n.length&&n.emit("progress",n.bytesLoaded/n.length*100),n.emit("data",t));case"fileSize":return n.length=e.data.value;case"error":return n.emit("error",e.data.error);case"end":return n.emit("end");}}),this.wsWorker.onerror=function(e){return function(t){return e.emit("error",t);};}(this),this.wsWorker.postMessage({cmd:"init",config:{host:this.url,path:this.file}});}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e;}n.prototype=t.prototype,e.prototype=new n(),e.__super__=t.prototype;}(t,e),t.prototype.start=function(){return this.paused?(this.wsWorker.postMessage({cmd:"resume"}),this.paused=!1):this.wsWorker.postMessage({cmd:"play"});},t.prototype.pause=function(){return this.wsWorker.postMessage({cmd:"pause"}),this.pause=!0;},t.prototype.reset=function(){return this.wsWorker.postMessage({cmd:"reset"});},t;}(n),t.exports=i;}).call(this);},{"../../core/buffer":41,"../../core/events":43}],66:[function(e,t,r){(function(r){(function(){var n,i,o,a,s={}.hasOwnProperty;a=e("../core/events"),i=e("../core/bufferlist"),n=e("../core/buffer"),o=function(e){var t,o;function a(e){var t,r;this.loop=(t=this.loop,r=this,function(){return t.apply(r,arguments);}),e instanceof i?this.list=e:(this.list=new i(),this.list.append(new n(e))),this.paused=!0;}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e;}n.prototype=t.prototype,e.prototype=new n(),e.__super__=t.prototype;}(a,e),o=r.setImmediate||function(e){return r.setTimeout(e,0);},t=r.clearImmediate||function(e){return r.clearTimeout(e);},a.prototype.start=function(){return this.paused=!1,this._timer=o(this.loop);},a.prototype.loop=function(){return this.emit("progress",(this.list.numBuffers-this.list.availableBuffers+1)/this.list.numBuffers*100|0),this.emit("data",this.list.first),this.list.advance()?o(this.loop):this.emit("end");},a.prototype.pause=function(){return t(this._timer),this.paused=!0;},a.prototype.reset=function(){return this.pause(),this.list.rewind();},a;}(a),t.exports=o;}).call(this);}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{"../core/buffer":41,"../core/bufferlist":42,"../core/events":43}],67:[function(e,t,r){(function(r){(function(){var n,i,o,a,s={}.hasOwnProperty;i=e("../../core/events"),n=e("../../core/buffer"),a=e("fs"),o=function(e){function t(e){this.filename=e,this.stream=null,this.loaded=0,this.size=null;}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e;}n.prototype=t.prototype,e.prototype=new n(),e.__super__=t.prototype;}(t,e),t.prototype.getSize=function(){return a.stat(this.filename,(e=this,function(t,r){return t?e.emit("error",t):(e.size=r.size,e.start());}));var e;},t.prototype.start=function(){var e,t,i;return null==this.size?this.getSize():this.stream?this.stream.resume():(this.stream=a.createReadStream(this.filename),e=new r(1<<20),t=0,this.stream.on("data",(i=this,function(r){if(i.loaded+=r.length,r.copy(e,t),t+=r.length,i.emit("progress",i.loaded/i.size*100),t>=e.length||i.loaded>=i.size)return t<e.length&&(e=e.slice(0,t)),i.emit("data",new n(new Uint8Array(e))),t-=e.length,r.copy(e,0,t);})),this.stream.on("end",function(e){return function(){return e.emit("end");};}(this)),this.stream.on("error",function(e){return function(t){return e.pause(),e.emit("error",t);};}(this)));},t.prototype.pause=function(){return this.stream.pause();},t;}(i),t.exports=o;}).call(this);}).call(this,e("buffer").Buffer);},{"../../core/buffer":41,"../../core/events":43,buffer:5,fs:4}],68:[function(e,t,r){(function(){var r,n,i,o,a={}.hasOwnProperty;n=e("../../core/events"),r=e("../../core/buffer"),o=e("http"),i=function(e){function t(e){var t,r;this.url=e,this.errorHandler=(t=this.errorHandler,r=this,function(){return t.apply(r,arguments);}),this.request=null,this.response=null,this.loaded=0,this.size=0;}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e;}n.prototype=t.prototype,e.prototype=new n(),e.__super__=t.prototype;}(t,e),t.prototype.start=function(){return null!=this.response?this.response.resume():(this.request=o.get(this.url),this.request.on("response",(e=this,function(t){return e.response=t,200!==e.response.statusCode?e.errorHandler("Error loading file. HTTP status code "+e.response.statusCode):(e.size=parseInt(e.response.headers["content-length"]),e.loaded=0,e.response.on("data",function(t){return e.loaded+=t.length,e.emit("progress",e.loaded/e.size*100),e.emit("data",new r(new Uint8Array(t)));}),e.response.on("end",function(){return e.emit("end");}),e.response.on("error",e.errorHandler));})),this.request.on("error",this.errorHandler));var e;},t.prototype.pause=function(){var e;return null!=(e=this.response)?e.pause():void 0;},t.prototype.reset=function(){return this.pause(),this.request.abort(),this.request=null,this.response=null;},t.prototype.errorHandler=function(e){return this.reset(),this.emit("error",e);},t;}(n),t.exports=i;}).call(this);},{"../../core/buffer":41,"../../core/events":43,http:8}]},{},[1])(1);}),function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var d="function"==typeof require&&require;if(!s&&d)return d(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'");}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return i(r||e);},c,c.exports,e,t,r,n);}return r[a].exports;}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i;}({1:[function(e,t,r){(function(r){var n="undefined"!=typeof window?window.AV:void 0!==r?r.AV:null,i=e("./tables"),o=n.Demuxer.extend(function(){n.Demuxer.register(this),this.probe=function(e){for(var t=e.offset;e.available(2);)if(65520==(65526&e.readUInt16()))return e.seek(t),!0;return e.seek(t),!1;},this.prototype.init=function(){this.bitstream=new n.Bitstream(this.stream);},this.readHeader=function(e){if(4095!==e.read(12))throw new Error("Invalid ADTS header.");var t={};e.advance(3);var r=!!e.read(1);return t.profile=e.read(2)+1,t.samplingIndex=e.read(4),e.advance(1),t.chanConfig=e.read(3),e.advance(4),t.frameLength=e.read(13),e.advance(11),t.numFrames=e.read(2)+1,r||e.advance(16),t;},this.prototype.readChunk=function(){if(!this.sentHeader){var e=this.stream.offset,t=o.readHeader(this.bitstream);this.emit("format",{formatID:"aac ",sampleRate:i.SAMPLE_RATES[t.samplingIndex],channelsPerFrame:t.chanConfig,bitsPerChannel:16});var r=new Uint8Array(2);r[0]=t.profile<<3|t.samplingIndex>>1&7,r[1]=(1&t.samplingIndex)<<7|t.chanConfig<<3,this.emit("cookie",new n.Buffer(r)),this.stream.seek(e),this.sentHeader=!0;}for(;this.stream.available(1);){var a=this.stream.readSingleBuffer(this.stream.remainingBytes());this.emit("data",a);}};});t.exports=o;}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{"./tables":11}],2:[function(e,t,r){var n=e("./ics"),i=e("./huffman");function o(e){this.ics=new n(e),this.channelPair=new Array(8),this.idSelect=new Int32Array(8),this.chSelect=new Int32Array(8),this.gain=new Array(16);}o.BEFORE_TNS=0,o.AFTER_TNS=1,o.AFTER_IMDCT=2;var a=new Float32Array([1.0905077326652577,1.189207115002721,1.4142135623730951,2]);o.prototype={decode:function(e,t){var r=this.channelPair,s=this.idSelect,d=this.chSelect;this.couplingPoint=2*e.read(1),this.coupledCount=e.read(3);for(var c=0,f=0;f<=this.coupledCount;f++)c++,r[f]=e.read(1),s[f]=e.read(4),r[f]?(d[f]=e.read(2),3===d[f]&&c++):d[f]=2;this.couplingPoint+=e.read(1),this.couplingPoint|=this.couplingPoint>>>1;var u=e.read(1),l=a[e.read(2)];this.ics.decode(e,t,!1);var p=this.ics.info.groupCount,h=this.ics.info.maxSFB,g=this.ics.bandTypes;for(f=0;f<c;f++){var y=0,b=1,m=0,v=1;f>0&&(m=(b=this.couplingPoint===o.AFTER_IMDCT?1:e.read(1))?i.decodeScaleFactor(e)-60:0,v=Math.pow(l,-m));var S=this.gain[f]=new Float32Array(120);if(this.couplingPoint===o.AFTER_IMDCT)S[0]=v;else for(var k=0;k<p;k++)for(var C=0;C<h;C++)if(g[y]!==n.ZERO_BT){if(0===b){var T=i.decodeScaleFactor(e)-60;if(0!==T){var P=1;T=m+=T,u||(P-=2*(1&T),T>>>=1),v=Math.pow(l,-T)*P;}}S[y++]=v;}}},applyIndependentCoupling:function(e,t){for(var r=this.gain[e][0],n=this.ics.data,i=0;i<t.length;i++)t[i]+=r*n[i];},applyDependentCoupling:function(e,t){for(var r=this.ics.info,i=r.swbOffsets,o=r.groupCount,a=r.maxSFB,s=this.ics.bandTypes,d=this.ics.data,c=0,f=0,u=this.gain[e],l=0;l<o;l++){for(var p=r.groupLength[l],h=0;h<a;h++,c++)if(s[c]!==n.ZERO_BT)for(var g=u[c],y=0;y<p;y++)for(var b=i[h];b<i[swb+1];b++)t[f+128*y+b]+=g*d[f+128*y+b];f+=128*p;}}},t.exports=o;},{"./huffman":7,"./ics":8}],3:[function(e,t,r){var n=e("./ics");function i(e){this.ms_used=[],this.left=new n(e),this.right=new n(e);}i.prototype.decode=function(e,t){var r=this.left,n=this.right,i=this.ms_used;if(this.commonWindow=!!e.read(1)){r.info.decode(e,t,!0),n.info=r.info;var o=e.read(2);switch(this.maskPresent=!!o,o){case 1:for(var a=r.info.groupCount*r.info.maxSFB,s=0;s<a;s++)i[s]=!!e.read(1);break;case 0:case 2:var d=!!o;for(s=0;s<128;s++)i[s]=d;break;default:throw new Error("Reserved ms mask type: "+o);}}else for(s=0;s<128;s++)i[s]=!1;r.decode(e,t,this.commonWindow),n.decode(e,t,this.commonWindow);},t.exports=i;},{"./ics":8}],4:[function(e,t,r){(function(r){var n="undefined"!=typeof window?window.AV:void 0!==r?r.AV:null,i=e("./adts_demuxer"),o=e("./ics"),a=e("./cpe"),s=e("./cce"),d=e("./filter_bank"),c=e("./tables"),f=n.Decoder.extend(function(){n.Decoder.register("mp4a",this),n.Decoder.register("aac ",this);this.prototype.init=function(){this.format.floatingPoint=!0;},this.prototype.setCookie=function(e){var t=n.Stream.fromBuffer(e),r=new n.Bitstream(t);if(this.config={},this.config.profile=r.read(5),31===this.config.profile&&(this.config.profile=32+r.read(6)),this.config.sampleIndex=r.read(4),15===this.config.sampleIndex){this.config.sampleRate=r.read(24);for(var i=0;i<c.SAMPLE_RATES.length;i++)if(c.SAMPLE_RATES[i]===this.config.sampleRate){this.config.sampleIndex=i;break;}}else this.config.sampleRate=c.SAMPLE_RATES[this.config.sampleIndex];switch(this.config.chanConfig=r.read(4),this.format.channelsPerFrame=this.config.chanConfig,this.config.profile){case 1:case 2:case 4:if(r.read(1))throw new Error("frameLengthFlag not supported");if(this.config.frameLength=1024,r.read(1)&&r.advance(14),r.read(1)&&(this.config.profile>16&&(this.config.sectionDataResilience=r.read(1),this.config.scalefactorResilience=r.read(1),this.config.spectralDataResilience=r.read(1)),r.advance(1)),0===this.config.chanConfig)throw r.advance(4),new Error("PCE unimplemented");break;default:throw new Error("AAC profile "+this.config.profile+" not supported.");}this.filter_bank=new d(!1,this.config.chanConfig);};this.prototype.readChunk=function(){var e=this.bitstream;4095===e.peek(12)&&i.readHeader(e),this.cces=[];for(var t=[],r=this.config,n=r.frameLength,d=null;7!==(d=e.read(3));){var c=e.read(4);switch(d){case 0:case 3:var f=new o(this.config);f.id=c,t.push(f),f.decode(e,r,!1);break;case 1:var u=new a(this.config);u.id=c,t.push(u),u.decode(e,r);break;case 2:var l=new s(this.config);this.cces.push(l),l.decode(e,r);break;case 4:var p=e.read(1),h=e.read(8);255===h&&(h+=e.read(8)),p&&e.align(),e.advance(8*h);break;case 5:throw new Error("TODO: PCE_ELEMENT");case 6:15===c&&(c+=e.read(8)-1),e.advance(8*c);break;default:throw new Error("Unknown element");}}e.align(),this.process(t);for(var g=this.data,y=g.length,b=new Float32Array(n*y),m=0,v=0;v<n;v++)for(var S=0;S<y;S++)b[m++]=g[S][v]/32768;return b;},this.prototype.process=function(e){for(var t=this.config.chanConfig,r=1*this.config.frameLength,n=this.data=[],i=0;i<t;i++)n[i]=new Float32Array(r);var d=0;for(i=0;i<e.length&&d<t;i++){var c=e[i];if(c instanceof o)d+=this.processSingle(c,d);else if(c instanceof a)this.processPair(c,d),d+=2;else{if(!(c instanceof s))throw new Error("Unknown element found.");d++;}}},this.prototype.processSingle=function(e,t){var r=this.config.profile,n=e.info,i=e.data;if(1===r)throw new Error("Main prediction unimplemented");if(4===r)throw new Error("LTP prediction unimplemented");if(this.applyChannelCoupling(e,s.BEFORE_TNS,i,null),e.tnsPresent&&e.tns.process(e,i,!1),this.applyChannelCoupling(e,s.AFTER_TNS,i,null),this.filter_bank.process(n,i,this.data[t],t),4===r)throw new Error("LTP prediction unimplemented");if(this.applyChannelCoupling(e,s.AFTER_IMDCT,this.data[t],null),e.gainPresent)throw new Error("Gain control not implemented");if(this.sbrPresent)throw new Error("SBR not implemented");return 1;},this.prototype.processPair=function(e,t){var r=this.config.profile,n=e.left,i=e.right,o=n.info,a=i.info,d=n.data,c=i.data;if(e.commonWindow&&e.maskPresent&&this.processMS(e,d,c),1===r)throw new Error("Main prediction unimplemented");if(this.processIS(e,d,c),4===r)throw new Error("LTP prediction unimplemented");if(this.applyChannelCoupling(e,s.BEFORE_TNS,d,c),n.tnsPresent&&n.tns.process(n,d,!1),i.tnsPresent&&i.tns.process(i,c,!1),this.applyChannelCoupling(e,s.AFTER_TNS,d,c),this.filter_bank.process(o,d,this.data[t],t),this.filter_bank.process(a,c,this.data[t+1],t+1),4===r)throw new Error("LTP prediction unimplemented");if(this.applyChannelCoupling(e,s.AFTER_IMDCT,this.data[t],this.data[t+1]),n.gainPresent)throw new Error("Gain control not implemented");if(i.gainPresent)throw new Error("Gain control not implemented");if(this.sbrPresent)throw new Error("SBR not implemented");},this.prototype.processIS=function(e,t,r){for(var n=e.right,i=n.info,a=i.swbOffsets,s=i.groupCount,d=i.maxSFB,c=n.bandTypes,f=n.sectEnd,u=n.scaleFactors,l=0,p=0,h=0;h<s;h++){for(var g=0;g<d;){var y=f[l];if(c[l]===o.INTENSITY_BT||c[l]===o.INTENSITY_BT2)for(;g<y;g++,l++){var b=c[l]===o.INTENSITY_BT?1:-1;e.maskPresent&&(b*=e.ms_used[l]?-1:1);for(var m=b*u[l],v=0;v<i.groupLength[h];v++)for(var S=p+128*v+a[g],k=a[g+1]-a[g],C=0;C<k;C++)r[S+C]=t[S+C]*m;}else l+=y-g,g=y;}p+=128*i.groupLength[h];}},this.prototype.processMS=function(e,t,r){for(var n=e.left,i=n.info,a=i.swbOffsets,s=i.groupCount,d=i.maxSFB,c=n.bandTypes,f=e.right.bandTypes,u=0,l=0,p=0;p<s;p++){for(var h=0;h<d;h++,l++)if(e.ms_used[l]&&c[l]<o.NOISE_BT&&f[l]<o.NOISE_BT)for(var g=0;g<i.groupLength[p];g++)for(var y=u+128*g+a[h],b=0;b<a[h+1]-a[h];b++){var m=t[y+b]-r[y+b];t[y+b]+=r[y+b],r[y+b]=m;}u+=128*i.groupLength[p];}},this.prototype.applyChannelCoupling=function(e,t,r,n){for(var i=this.cces,o=e instanceof a,d=t===s.AFTER_IMDCT?"applyIndependentCoupling":"applyDependentCoupling",c=0;c<i.length;c++){var f=i[c],u=0;if(f.couplingPoint===t)for(var l=0;l<f.coupledCount;l++){var p=f.chSelect[l];f.channelPair[l]===o&&f.idSelect[l]===e.id?(1!==p&&(f[d](u,r),p&&u++),2!==p&&f[d](u++,n)):u+=1+(3===p?1:0);}}};});t.exports=f;}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{"./adts_demuxer":1,"./cce":2,"./cpe":3,"./filter_bank":6,"./ics":8,"./tables":11}],5:[function(e,t,r){function n(e){switch(this.length=e,e){case 64:this.roots=i(64);break;case 512:this.roots=o(512);break;case 60:this.roots=i(60);break;case 480:this.roots=o(480);break;default:throw new Error("unexpected FFT length: "+e);}this.rev=new Array(e);for(var t=0;t<e;t++)this.rev[t]=new Float32Array(2);this.a=new Float32Array(2),this.b=new Float32Array(2),this.c=new Float32Array(2),this.d=new Float32Array(2),this.e1=new Float32Array(2),this.e2=new Float32Array(2);}function i(e){for(var t=2*Math.PI/e,r=Math.cos(t),n=Math.sin(t),i=new Array(e),o=0;o<e;o++)i[o]=new Float32Array(2);i[0][0]=1,i[0][1]=0;var a=0;for(o=1;o<e;o++)i[o][0]=i[o-1][0]*r+a*n,a=a*r-i[o-1][0]*n,i[o][1]=-a;return i;}function o(e){for(var t=2*Math.PI/e,r=Math.cos(t),n=Math.sin(t),i=new Array(e),o=0;o<e;o++)i[o]=new Float32Array(3);i[0][0]=1,i[0][1]=0,i[0][2]=0;for(o=1;o<e;o++)i[o][0]=i[o-1][0]*r+i[o-1][2]*n,i[o][2]=i[o-1][2]*r-i[o-1][0]*n,i[o][1]=-i[o][2];return i;}n.prototype.process=function(e,t){for(var r=this.length,n=t?2:1,i=t?r:1,o=this.rev,a=this.roots,s=0,d=0;d<r;d++){o[d][0]=e[s][0],o[d][1]=e[s][1];for(var c=r>>>1;s>=c&&c>0;)s-=c,c>>=1;s+=c;}var f=this.a,u=this.b,l=this.c,p=this.d,h=this.e1,g=this.e2;for(d=0;d<r;d++)e[d][0]=o[d][0],e[d][1]=o[d][1];for(d=0;d<r;d+=4)f[0]=e[d][0]+e[d+1][0],f[1]=e[d][1]+e[d+1][1],u[0]=e[d+2][0]+e[d+3][0],u[1]=e[d+2][1]+e[d+3][1],l[0]=e[d][0]-e[d+1][0],l[1]=e[d][1]-e[d+1][1],p[0]=e[d+2][0]-e[d+3][0],p[1]=e[d+2][1]-e[d+3][1],e[d][0]=f[0]+u[0],e[d][1]=f[1]+u[1],e[d+2][0]=f[0]-u[0],e[d+2][1]=f[1]-u[1],h[0]=l[0]-p[1],h[1]=l[1]+p[0],g[0]=l[0]+p[1],g[1]=l[1]-p[0],t?(e[d+1][0]=g[0],e[d+1][1]=g[1],e[d+3][0]=h[0],e[d+3][1]=h[1]):(e[d+1][0]=h[0],e[d+1][1]=h[1],e[d+3][0]=g[0],e[d+3][1]=g[1]);for(d=4;d<r;d<<=1)for(var y=d<<1,b=r/y,m=0;m<r;m+=y)for(c=0;c<d;c++){var v=c*b,S=a[v][0],k=a[v][n],C=e[d+m+c][0]*S-e[d+m+c][1]*k,T=e[d+m+c][0]*k+e[d+m+c][1]*S;e[d+m+c][0]=(e[m+c][0]-C)*i,e[d+m+c][1]=(e[m+c][1]-T)*i,e[m+c][0]=(e[m+c][0]+C)*i,e[m+c][1]=(e[m+c][1]+T)*i;}},t.exports=n;},{}],6:[function(e,t,r){var n=e("./ics"),i=e("./mdct");function o(e,t){if(e)throw new Error("WHA?? No small frames allowed.");this.length=1024,this.shortLength=128,this.mid=(this.length-this.shortLength)/2,this.trans=this.shortLength/2,this.mdctShort=new i(2*this.shortLength),this.mdctLong=new i(2*this.length),this.overlaps=new Array(t);for(var r=0;r<t;r++)this.overlaps[r]=new Float32Array(this.length);this.buf=new Float32Array(2*this.length);}function a(e){for(var t=new Float32Array(e),r=0;r<e;r++)t[r]=Math.sin((r+.5)*(Math.PI/(2*e)));return t;}function s(e,t){for(var r=Math.PI/t,n=new Float32Array(t),i=0,o=new Float32Array(t),a=e*r*(e*r),s=0;s<t;s++){for(var d=s*(t-s)*a,c=1,f=50;f>0;f--)c=c*d/(f*f)+1;i+=c,o[s]=i;}i++;for(s=0;s<t;s++)n[s]=Math.sqrt(o[s]/i);return n;}var d=a(1024),c=a(128),f=s(4,1024),u=s(6,128),l=[d,f],p=[c,u];o.prototype.process=function(e,t,r,i){var o=this.overlaps[i],a=e.windowShape[1],s=e.windowShape[0],d=l[a],c=p[a],f=l[s],u=p[s],h=this.length,g=this.shortLength,y=this.mid,b=this.trans,m=this.buf,v=this.mdctLong,S=this.mdctShort;switch(e.windowSequence){case n.ONLY_LONG_SEQUENCE:v.process(t,0,m,0);for(var k=0;k<h;k++)r[k]=o[k]+m[k]*f[k];for(k=0;k<h;k++)o[k]=m[h+k]*d[h-1-k];break;case n.LONG_START_SEQUENCE:v.process(t,0,m,0);for(k=0;k<h;k++)r[k]=o[k]+m[k]*f[k];for(k=0;k<y;k++)o[k]=m[h+k];for(k=0;k<g;k++)o[y+k]=m[h+y+k]*c[g-k-1];for(k=0;k<y;k++)o[y+g+k]=0;break;case n.EIGHT_SHORT_SEQUENCE:for(k=0;k<8;k++)S.process(t,k*g,m,2*k*g);for(k=0;k<y;k++)r[k]=o[k];for(k=0;k<g;k++)r[y+k]=o[y+k]+m[k]*u[k],r[y+1*g+k]=o[y+1*g+k]+m[1*g+k]*c[g-1-k]+m[2*g+k]*c[k],r[y+2*g+k]=o[y+2*g+k]+m[3*g+k]*c[g-1-k]+m[4*g+k]*c[k],r[y+3*g+k]=o[y+3*g+k]+m[5*g+k]*c[g-1-k]+m[6*g+k]*c[k],k<b&&(r[y+4*g+k]=o[y+4*g+k]+m[7*g+k]*c[g-1-k]+m[8*g+k]*c[k]);for(k=0;k<g;k++)k>=b&&(o[y+4*g+k-h]=m[7*g+k]*c[g-1-k]+m[8*g+k]*c[k]),o[y+5*g+k-h]=m[9*g+k]*c[g-1-k]+m[10*g+k]*c[k],o[y+6*g+k-h]=m[11*g+k]*c[g-1-k]+m[12*g+k]*c[k],o[y+7*g+k-h]=m[13*g+k]*c[g-1-k]+m[14*g+k]*c[k],o[y+8*g+k-h]=m[15*g+k]*c[g-1-k];for(k=0;k<y;k++)o[y+g+k]=0;break;case n.LONG_STOP_SEQUENCE:v.process(t,0,m,0);for(k=0;k<y;k++)r[k]=o[k];for(k=0;k<g;k++)r[y+k]=o[y+k]+m[y+k]*u[k];for(k=0;k<y;k++)r[y+g+k]=o[y+g+k]+m[y+g+k];for(k=0;k<h;k++)o[k]=m[h+k]*d[h-1-k];}},t.exports=o;},{"./ics":8,"./mdct":9}],7:[function(e,t,r){var n=[[1,0,60],[3,4,59],[4,10,61],[4,11,58],[4,12,62],[5,26,57],[5,27,63],[6,56,56],[6,57,64],[6,58,55],[6,59,65],[7,120,66],[7,121,54],[7,122,67],[8,246,53],[8,247,68],[8,248,52],[8,249,69],[8,250,51],[9,502,70],[9,503,50],[9,504,49],[9,505,71],[10,1012,72],[10,1013,48],[10,1014,73],[10,1015,47],[10,1016,74],[10,1017,46],[11,2036,76],[11,2037,75],[11,2038,77],[11,2039,78],[11,2040,45],[11,2041,43],[12,4084,44],[12,4085,79],[12,4086,42],[12,4087,41],[12,4088,80],[12,4089,40],[13,8180,81],[13,8181,39],[13,8182,82],[13,8183,38],[13,8184,83],[14,16370,37],[14,16371,35],[14,16372,85],[14,16373,33],[14,16374,36],[14,16375,34],[14,16376,84],[14,16377,32],[15,32756,87],[15,32757,89],[15,32758,30],[15,32759,31],[16,65520,86],[16,65521,29],[16,65522,26],[16,65523,27],[16,65524,28],[16,65525,24],[16,65526,88],[17,131054,25],[17,131055,22],[17,131056,23],[18,262114,90],[18,262115,21],[18,262116,19],[18,262117,3],[18,262118,1],[18,262119,2],[18,262120,0],[19,524242,98],[19,524243,99],[19,524244,100],[19,524245,101],[19,524246,102],[19,524247,117],[19,524248,97],[19,524249,91],[19,524250,92],[19,524251,93],[19,524252,94],[19,524253,95],[19,524254,96],[19,524255,104],[19,524256,111],[19,524257,112],[19,524258,113],[19,524259,114],[19,524260,115],[19,524261,116],[19,524262,110],[19,524263,105],[19,524264,106],[19,524265,107],[19,524266,108],[19,524267,109],[19,524268,118],[19,524269,6],[19,524270,8],[19,524271,9],[19,524272,10],[19,524273,5],[19,524274,103],[19,524275,120],[19,524276,119],[19,524277,4],[19,524278,7],[19,524279,15],[19,524280,16],[19,524281,18],[19,524282,20],[19,524283,17],[19,524284,11],[19,524285,12],[19,524286,14],[19,524287,13]],i=[[[1,0,0,0,0,0],[5,16,1,0,0,0],[5,17,-1,0,0,0],[5,18,0,0,0,-1],[5,19,0,1,0,0],[5,20,0,0,0,1],[5,21,0,0,-1,0],[5,22,0,0,1,0],[5,23,0,-1,0,0],[7,96,1,-1,0,0],[7,97,-1,1,0,0],[7,98,0,0,-1,1],[7,99,0,1,-1,0],[7,100,0,-1,1,0],[7,101,0,0,1,-1],[7,102,1,1,0,0],[7,103,0,0,-1,-1],[7,104,-1,-1,0,0],[7,105,0,-1,-1,0],[7,106,1,0,-1,0],[7,107,0,1,0,-1],[7,108,-1,0,1,0],[7,109,0,0,1,1],[7,110,1,0,1,0],[7,111,0,-1,0,1],[7,112,0,1,1,0],[7,113,0,1,0,1],[7,114,-1,0,-1,0],[7,115,1,0,0,1],[7,116,-1,0,0,-1],[7,117,1,0,0,-1],[7,118,-1,0,0,1],[7,119,0,-1,0,-1],[9,480,1,1,-1,0],[9,481,-1,1,-1,0],[9,482,1,-1,1,0],[9,483,0,1,1,-1],[9,484,0,1,-1,1],[9,485,0,-1,1,1],[9,486,0,-1,1,-1],[9,487,1,-1,-1,0],[9,488,1,0,-1,1],[9,489,0,1,-1,-1],[9,490,-1,1,1,0],[9,491,-1,0,1,-1],[9,492,-1,-1,1,0],[9,493,0,-1,-1,1],[9,494,1,-1,0,1],[9,495,1,-1,0,-1],[9,496,-1,1,0,-1],[9,497,-1,-1,-1,0],[9,498,0,-1,-1,-1],[9,499,0,1,1,1],[9,500,1,0,1,-1],[9,501,1,1,0,1],[9,502,-1,1,0,1],[9,503,1,1,1,0],[10,1008,-1,-1,0,1],[10,1009,-1,0,-1,-1],[10,1010,1,1,0,-1],[10,1011,1,0,-1,-1],[10,1012,-1,0,-1,1],[10,1013,-1,-1,0,-1],[10,1014,-1,0,1,1],[10,1015,1,0,1,1],[11,2032,1,-1,1,-1],[11,2033,-1,1,-1,1],[11,2034,-1,1,1,-1],[11,2035,1,-1,-1,1],[11,2036,1,1,1,1],[11,2037,-1,-1,1,1],[11,2038,1,1,-1,-1],[11,2039,-1,-1,1,-1],[11,2040,-1,-1,-1,-1],[11,2041,1,1,-1,1],[11,2042,1,-1,1,1],[11,2043,-1,1,1,1],[11,2044,-1,1,-1,-1],[11,2045,-1,-1,-1,1],[11,2046,1,-1,-1,-1],[11,2047,1,1,1,-1]],[[3,0,0,0,0,0],[4,2,1,0,0,0],[5,6,-1,0,0,0],[5,7,0,0,0,1],[5,8,0,0,-1,0],[5,9,0,0,0,-1],[5,10,0,-1,0,0],[5,11,0,0,1,0],[5,12,0,1,0,0],[6,26,0,-1,1,0],[6,27,-1,1,0,0],[6,28,0,1,-1,0],[6,29,0,0,1,-1],[6,30,0,1,0,-1],[6,31,0,0,-1,1],[6,32,-1,0,0,-1],[6,33,1,-1,0,0],[6,34,1,0,-1,0],[6,35,-1,-1,0,0],[6,36,0,0,-1,-1],[6,37,1,0,1,0],[6,38,1,0,0,1],[6,39,0,-1,0,1],[6,40,-1,0,1,0],[6,41,0,1,0,1],[6,42,0,-1,-1,0],[6,43,-1,0,0,1],[6,44,0,-1,0,-1],[6,45,-1,0,-1,0],[6,46,1,1,0,0],[6,47,0,1,1,0],[6,48,0,0,1,1],[6,49,1,0,0,-1],[7,100,0,1,-1,1],[7,101,1,0,-1,1],[7,102,-1,1,-1,0],[7,103,0,-1,1,-1],[7,104,1,-1,1,0],[7,105,1,1,0,-1],[7,106,1,0,1,1],[7,107,-1,1,1,0],[7,108,0,-1,-1,1],[7,109,1,1,1,0],[7,110,-1,0,1,-1],[7,111,-1,-1,-1,0],[7,112,-1,0,-1,1],[7,113,1,-1,-1,0],[7,114,1,1,-1,0],[8,230,1,-1,0,1],[8,231,-1,1,0,-1],[8,232,-1,-1,1,0],[8,233,-1,0,1,1],[8,234,-1,-1,0,1],[8,235,-1,-1,0,-1],[8,236,0,-1,-1,-1],[8,237,1,0,1,-1],[8,238,1,0,-1,-1],[8,239,0,1,-1,-1],[8,240,0,1,1,1],[8,241,-1,1,0,1],[8,242,-1,0,-1,-1],[8,243,0,1,1,-1],[8,244,1,-1,0,-1],[8,245,0,-1,1,1],[8,246,1,1,0,1],[8,247,1,-1,1,-1],[8,248,-1,1,-1,1],[9,498,1,-1,-1,1],[9,499,-1,-1,-1,-1],[9,500,-1,1,1,-1],[9,501,-1,1,1,1],[9,502,1,1,1,1],[9,503,-1,-1,1,-1],[9,504,1,-1,1,1],[9,505,-1,1,-1,-1],[9,506,-1,-1,1,1],[9,507,1,1,-1,-1],[9,508,1,-1,-1,-1],[9,509,-1,-1,-1,1],[9,510,1,1,-1,1],[9,511,1,1,1,-1]],[[1,0,0,0,0,0],[4,8,1,0,0,0],[4,9,0,0,0,1],[4,10,0,1,0,0],[4,11,0,0,1,0],[5,24,1,1,0,0],[5,25,0,0,1,1],[6,52,0,1,1,0],[6,53,0,1,0,1],[6,54,1,0,1,0],[6,55,0,1,1,1],[6,56,1,0,0,1],[6,57,1,1,1,0],[7,116,1,1,1,1],[7,117,1,0,1,1],[7,118,1,1,0,1],[8,238,2,0,0,0],[8,239,0,0,0,2],[8,240,0,0,1,2],[8,241,2,1,0,0],[8,242,1,2,1,0],[9,486,0,0,2,1],[9,487,0,1,2,1],[9,488,1,2,0,0],[9,489,0,1,1,2],[9,490,2,1,1,0],[9,491,0,0,2,0],[9,492,0,2,1,0],[9,493,0,1,2,0],[9,494,0,2,0,0],[9,495,0,1,0,2],[9,496,2,0,1,0],[9,497,1,2,1,1],[9,498,0,2,1,1],[9,499,1,1,2,0],[9,500,1,1,2,1],[10,1002,1,2,0,1],[10,1003,1,0,2,0],[10,1004,1,0,2,1],[10,1005,0,2,0,1],[10,1006,2,1,1,1],[10,1007,1,1,1,2],[10,1008,2,1,0,1],[10,1009,1,0,1,2],[10,1010,0,0,2,2],[10,1011,0,1,2,2],[10,1012,2,2,1,0],[10,1013,1,2,2,0],[10,1014,1,0,0,2],[10,1015,2,0,0,1],[10,1016,0,2,2,1],[11,2034,2,2,0,0],[11,2035,1,2,2,1],[11,2036,1,1,0,2],[11,2037,2,0,1,1],[11,2038,1,1,2,2],[11,2039,2,2,1,1],[11,2040,0,2,2,0],[11,2041,0,2,1,2],[12,4084,1,0,2,2],[12,4085,2,2,0,1],[12,4086,2,1,2,0],[12,4087,2,2,2,0],[12,4088,0,2,2,2],[12,4089,2,2,2,1],[12,4090,2,1,2,1],[12,4091,1,2,1,2],[12,4092,1,2,2,2],[13,8186,0,2,0,2],[13,8187,2,0,2,0],[13,8188,1,2,0,2],[14,16378,2,0,2,1],[14,16379,2,1,1,2],[14,16380,2,1,0,2],[15,32762,2,2,2,2],[15,32763,2,2,1,2],[15,32764,2,1,2,2],[15,32765,2,0,1,2],[15,32766,2,0,0,2],[16,65534,2,2,0,2],[16,65535,2,0,2,2]],[[4,0,1,1,1,1],[4,1,0,1,1,1],[4,2,1,1,0,1],[4,3,1,1,1,0],[4,4,1,0,1,1],[4,5,1,0,0,0],[4,6,1,1,0,0],[4,7,0,0,0,0],[4,8,0,0,1,1],[4,9,1,0,1,0],[5,20,1,0,0,1],[5,21,0,1,1,0],[5,22,0,0,0,1],[5,23,0,1,0,1],[5,24,0,0,1,0],[5,25,0,1,0,0],[7,104,2,1,1,1],[7,105,1,1,2,1],[7,106,1,2,1,1],[7,107,1,1,1,2],[7,108,2,1,1,0],[7,109,2,1,0,1],[7,110,1,2,1,0],[7,111,2,0,1,1],[7,112,0,1,2,1],[8,226,0,1,1,2],[8,227,1,1,2,0],[8,228,0,2,1,1],[8,229,1,0,1,2],[8,230,1,2,0,1],[8,231,1,1,0,2],[8,232,1,0,2,1],[8,233,2,1,0,0],[8,234,2,0,1,0],[8,235,1,2,0,0],[8,236,2,0,0,1],[8,237,0,1,0,2],[8,238,0,2,1,0],[8,239,0,0,1,2],[8,240,0,1,2,0],[8,241,0,2,0,1],[8,242,1,0,0,2],[8,243,0,0,2,1],[8,244,1,0,2,0],[8,245,2,0,0,0],[8,246,0,0,0,2],[9,494,0,2,0,0],[9,495,0,0,2,0],[9,496,1,2,2,1],[9,497,2,2,1,1],[9,498,2,1,2,1],[9,499,1,1,2,2],[9,500,1,2,1,2],[9,501,2,1,1,2],[10,1004,1,2,2,0],[10,1005,2,2,1,0],[10,1006,2,1,2,0],[10,1007,0,2,2,1],[10,1008,0,1,2,2],[10,1009,2,2,0,1],[10,1010,0,2,1,2],[10,1011,2,0,2,1],[10,1012,1,0,2,2],[10,1013,2,2,2,1],[10,1014,1,2,0,2],[10,1015,2,0,1,2],[10,1016,2,1,0,2],[10,1017,1,2,2,2],[11,2036,2,1,2,2],[11,2037,2,2,1,2],[11,2038,0,2,2,0],[11,2039,2,2,0,0],[11,2040,0,0,2,2],[11,2041,2,0,2,0],[11,2042,0,2,0,2],[11,2043,2,0,0,2],[11,2044,2,2,2,2],[11,2045,0,2,2,2],[11,2046,2,2,2,0],[12,4094,2,2,0,2],[12,4095,2,0,2,2]],[[1,0,0,0],[4,8,-1,0],[4,9,1,0],[4,10,0,1],[4,11,0,-1],[5,24,1,-1],[5,25,-1,1],[5,26,-1,-1],[5,27,1,1],[7,112,-2,0],[7,113,0,2],[7,114,2,0],[7,115,0,-2],[8,232,-2,-1],[8,233,2,1],[8,234,-1,-2],[8,235,1,2],[8,236,-2,1],[8,237,2,-1],[8,238,-1,2],[8,239,1,-2],[8,240,-3,0],[8,241,3,0],[8,242,0,-3],[8,243,0,3],[9,488,-3,-1],[9,489,1,3],[9,490,3,1],[9,491,-1,-3],[9,492,-3,1],[9,493,3,-1],[9,494,1,-3],[9,495,-1,3],[9,496,-2,2],[9,497,2,2],[9,498,-2,-2],[9,499,2,-2],[10,1e3,-3,-2],[10,1001,3,-2],[10,1002,-2,3],[10,1003,2,-3],[10,1004,3,2],[10,1005,2,3],[10,1006,-3,2],[10,1007,-2,-3],[10,1008,0,-4],[10,1009,-4,0],[10,1010,4,1],[10,1011,4,0],[11,2024,-4,-1],[11,2025,0,4],[11,2026,4,-1],[11,2027,-1,-4],[11,2028,1,4],[11,2029,-1,4],[11,2030,-4,1],[11,2031,1,-4],[11,2032,3,-3],[11,2033,-3,-3],[11,2034,-3,3],[11,2035,-2,4],[11,2036,-4,-2],[11,2037,4,2],[11,2038,2,-4],[11,2039,2,4],[11,2040,3,3],[11,2041,-4,2],[12,4084,-2,-4],[12,4085,4,-2],[12,4086,3,-4],[12,4087,-4,-3],[12,4088,-4,3],[12,4089,3,4],[12,4090,-3,4],[12,4091,4,3],[12,4092,4,-3],[12,4093,-3,-4],[13,8188,4,-4],[13,8189,-4,4],[13,8190,4,4],[13,8191,-4,-4]],[[4,0,0,0],[4,1,1,0],[4,2,0,-1],[4,3,0,1],[4,4,-1,0],[4,5,1,1],[4,6,-1,1],[4,7,1,-1],[4,8,-1,-1],[6,36,2,-1],[6,37,2,1],[6,38,-2,1],[6,39,-2,-1],[6,40,-2,0],[6,41,-1,2],[6,42,2,0],[6,43,1,-2],[6,44,1,2],[6,45,0,-2],[6,46,-1,-2],[6,47,0,2],[6,48,2,-2],[6,49,-2,2],[6,50,-2,-2],[6,51,2,2],[7,104,-3,1],[7,105,3,1],[7,106,3,-1],[7,107,-1,3],[7,108,-3,-1],[7,109,1,3],[7,110,1,-3],[7,111,-1,-3],[7,112,3,0],[7,113,-3,0],[7,114,0,-3],[7,115,0,3],[7,116,3,2],[8,234,-3,-2],[8,235,-2,3],[8,236,2,3],[8,237,3,-2],[8,238,2,-3],[8,239,-2,-3],[8,240,-3,2],[8,241,3,3],[9,484,3,-3],[9,485,-3,-3],[9,486,-3,3],[9,487,1,-4],[9,488,-1,-4],[9,489,4,1],[9,490,-4,1],[9,491,-4,-1],[9,492,1,4],[9,493,4,-1],[9,494,-1,4],[9,495,0,-4],[9,496,-4,2],[9,497,-4,-2],[9,498,2,4],[9,499,-2,-4],[9,500,-4,0],[9,501,4,2],[9,502,4,-2],[9,503,-2,4],[9,504,4,0],[9,505,2,-4],[9,506,0,4],[10,1014,-3,-4],[10,1015,-3,4],[10,1016,3,-4],[10,1017,4,-3],[10,1018,3,4],[10,1019,4,3],[10,1020,-4,3],[10,1021,-4,-3],[11,2044,4,4],[11,2045,-4,4],[11,2046,-4,-4],[11,2047,4,-4]],[[1,0,0,0],[3,4,1,0],[3,5,0,1],[4,12,1,1],[6,52,2,1],[6,53,1,2],[6,54,2,0],[6,55,0,2],[7,112,3,1],[7,113,1,3],[7,114,2,2],[7,115,3,0],[7,116,0,3],[8,234,2,3],[8,235,3,2],[8,236,1,4],[8,237,4,1],[8,238,1,5],[8,239,5,1],[8,240,3,3],[8,241,2,4],[8,242,0,4],[8,243,4,0],[9,488,4,2],[9,489,2,5],[9,490,5,2],[9,491,0,5],[9,492,6,1],[9,493,5,0],[9,494,1,6],[9,495,4,3],[9,496,3,5],[9,497,3,4],[9,498,5,3],[9,499,2,6],[9,500,6,2],[9,501,1,7],[10,1004,3,6],[10,1005,0,6],[10,1006,6,0],[10,1007,4,4],[10,1008,7,1],[10,1009,4,5],[10,1010,7,2],[10,1011,5,4],[10,1012,6,3],[10,1013,2,7],[10,1014,7,3],[10,1015,6,4],[10,1016,5,5],[10,1017,4,6],[10,1018,3,7],[11,2038,7,0],[11,2039,0,7],[11,2040,6,5],[11,2041,5,6],[11,2042,7,4],[11,2043,4,7],[11,2044,5,7],[11,2045,7,5],[12,4092,7,6],[12,4093,6,6],[12,4094,6,7],[12,4095,7,7]],[[3,0,1,1],[4,2,2,1],[4,3,1,0],[4,4,1,2],[4,5,0,1],[4,6,2,2],[5,14,0,0],[5,15,2,0],[5,16,0,2],[5,17,3,1],[5,18,1,3],[5,19,3,2],[5,20,2,3],[6,42,3,3],[6,43,4,1],[6,44,1,4],[6,45,4,2],[6,46,2,4],[6,47,3,0],[6,48,0,3],[6,49,4,3],[6,50,3,4],[6,51,5,2],[7,104,5,1],[7,105,2,5],[7,106,1,5],[7,107,5,3],[7,108,3,5],[7,109,4,4],[7,110,5,4],[7,111,0,4],[7,112,4,5],[7,113,4,0],[7,114,2,6],[7,115,6,2],[7,116,6,1],[7,117,1,6],[8,236,3,6],[8,237,6,3],[8,238,5,5],[8,239,5,0],[8,240,6,4],[8,241,0,5],[8,242,4,6],[8,243,7,1],[8,244,7,2],[8,245,2,7],[8,246,6,5],[8,247,7,3],[8,248,1,7],[8,249,5,6],[8,250,3,7],[9,502,6,6],[9,503,7,4],[9,504,6,0],[9,505,4,7],[9,506,0,6],[9,507,7,5],[9,508,7,6],[9,509,6,7],[10,1020,5,7],[10,1021,7,0],[10,1022,0,7],[10,1023,7,7]],[[1,0,0,0],[3,4,1,0],[3,5,0,1],[4,12,1,1],[6,52,2,1],[6,53,1,2],[6,54,2,0],[6,55,0,2],[7,112,3,1],[7,113,2,2],[7,114,1,3],[8,230,3,0],[8,231,0,3],[8,232,2,3],[8,233,3,2],[8,234,1,4],[8,235,4,1],[8,236,2,4],[8,237,1,5],[9,476,4,2],[9,477,3,3],[9,478,0,4],[9,479,4,0],[9,480,5,1],[9,481,2,5],[9,482,1,6],[9,483,3,4],[9,484,5,2],[9,485,6,1],[9,486,4,3],[10,974,0,5],[10,975,2,6],[10,976,5,0],[10,977,1,7],[10,978,3,5],[10,979,1,8],[10,980,8,1],[10,981,4,4],[10,982,5,3],[10,983,6,2],[10,984,7,1],[10,985,0,6],[10,986,8,2],[10,987,2,8],[10,988,3,6],[10,989,2,7],[10,990,4,5],[10,991,9,1],[10,992,1,9],[10,993,7,2],[11,1988,6,0],[11,1989,5,4],[11,1990,6,3],[11,1991,8,3],[11,1992,0,7],[11,1993,9,2],[11,1994,3,8],[11,1995,4,6],[11,1996,3,7],[11,1997,0,8],[11,1998,10,1],[11,1999,6,4],[11,2e3,2,9],[11,2001,5,5],[11,2002,8,0],[11,2003,7,0],[11,2004,7,3],[11,2005,10,2],[11,2006,9,3],[11,2007,8,4],[11,2008,1,10],[11,2009,7,4],[11,2010,6,5],[11,2011,5,6],[11,2012,4,8],[11,2013,4,7],[11,2014,3,9],[11,2015,11,1],[11,2016,5,8],[11,2017,9,0],[11,2018,8,5],[12,4038,10,3],[12,4039,2,10],[12,4040,0,9],[12,4041,11,2],[12,4042,9,4],[12,4043,6,6],[12,4044,12,1],[12,4045,4,9],[12,4046,8,6],[12,4047,1,11],[12,4048,9,5],[12,4049,10,4],[12,4050,5,7],[12,4051,7,5],[12,4052,2,11],[12,4053,1,12],[12,4054,12,2],[12,4055,11,3],[12,4056,3,10],[12,4057,5,9],[12,4058,6,7],[12,4059,8,7],[12,4060,11,4],[12,4061,0,10],[12,4062,7,6],[12,4063,12,3],[12,4064,10,0],[12,4065,10,5],[12,4066,4,10],[12,4067,6,8],[12,4068,2,12],[12,4069,9,6],[12,4070,9,7],[12,4071,4,11],[12,4072,11,0],[12,4073,6,9],[12,4074,3,11],[12,4075,5,10],[13,8152,8,8],[13,8153,7,8],[13,8154,12,5],[13,8155,3,12],[13,8156,11,5],[13,8157,7,7],[13,8158,12,4],[13,8159,11,6],[13,8160,10,6],[13,8161,4,12],[13,8162,7,9],[13,8163,5,11],[13,8164,0,11],[13,8165,12,6],[13,8166,6,10],[13,8167,12,0],[13,8168,10,7],[13,8169,5,12],[13,8170,7,10],[13,8171,9,8],[13,8172,0,12],[13,8173,11,7],[13,8174,8,9],[13,8175,9,9],[13,8176,10,8],[13,8177,7,11],[13,8178,12,7],[13,8179,6,11],[13,8180,8,11],[13,8181,11,8],[13,8182,7,12],[13,8183,6,12],[14,16368,8,10],[14,16369,10,9],[14,16370,8,12],[14,16371,9,10],[14,16372,9,11],[14,16373,9,12],[14,16374,10,11],[14,16375,12,9],[14,16376,10,10],[14,16377,11,9],[14,16378,12,8],[14,16379,11,10],[14,16380,12,10],[14,16381,12,11],[15,32764,10,12],[15,32765,11,11],[15,32766,11,12],[15,32767,12,12]],[[4,0,1,1],[4,1,1,2],[4,2,2,1],[5,6,2,2],[5,7,1,0],[5,8,0,1],[5,9,1,3],[5,10,3,2],[5,11,3,1],[5,12,2,3],[5,13,3,3],[6,28,2,0],[6,29,0,2],[6,30,2,4],[6,31,4,2],[6,32,1,4],[6,33,4,1],[6,34,0,0],[6,35,4,3],[6,36,3,4],[6,37,3,0],[6,38,0,3],[6,39,4,4],[6,40,2,5],[6,41,5,2],[7,84,1,5],[7,85,5,1],[7,86,5,3],[7,87,3,5],[7,88,5,4],[7,89,4,5],[7,90,6,2],[7,91,2,6],[7,92,6,3],[7,93,4,0],[7,94,6,1],[7,95,0,4],[7,96,1,6],[7,97,3,6],[7,98,5,5],[7,99,6,4],[7,100,4,6],[8,202,6,5],[8,203,7,2],[8,204,3,7],[8,205,2,7],[8,206,5,6],[8,207,8,2],[8,208,7,3],[8,209,5,0],[8,210,7,1],[8,211,0,5],[8,212,8,1],[8,213,1,7],[8,214,8,3],[8,215,7,4],[8,216,4,7],[8,217,2,8],[8,218,6,6],[8,219,7,5],[8,220,1,8],[8,221,3,8],[8,222,8,4],[8,223,4,8],[8,224,5,7],[8,225,8,5],[8,226,5,8],[9,454,7,6],[9,455,6,7],[9,456,9,2],[9,457,6,0],[9,458,6,8],[9,459,9,3],[9,460,3,9],[9,461,9,1],[9,462,2,9],[9,463,0,6],[9,464,8,6],[9,465,9,4],[9,466,4,9],[9,467,10,2],[9,468,1,9],[9,469,7,7],[9,470,8,7],[9,471,9,5],[9,472,7,8],[9,473,10,3],[9,474,5,9],[9,475,10,4],[9,476,2,10],[9,477,10,1],[9,478,3,10],[9,479,9,6],[9,480,6,9],[9,481,8,0],[9,482,4,10],[9,483,7,0],[9,484,11,2],[10,970,7,9],[10,971,11,3],[10,972,10,6],[10,973,1,10],[10,974,11,1],[10,975,9,7],[10,976,0,7],[10,977,8,8],[10,978,10,5],[10,979,3,11],[10,980,5,10],[10,981,8,9],[10,982,11,5],[10,983,0,8],[10,984,11,4],[10,985,2,11],[10,986,7,10],[10,987,6,10],[10,988,10,7],[10,989,4,11],[10,990,1,11],[10,991,12,2],[10,992,9,8],[10,993,12,3],[10,994,11,6],[10,995,5,11],[10,996,12,4],[10,997,11,7],[10,998,12,5],[10,999,3,12],[10,1e3,6,11],[10,1001,9,0],[10,1002,10,8],[10,1003,10,0],[10,1004,12,1],[10,1005,0,9],[10,1006,4,12],[10,1007,9,9],[10,1008,12,6],[10,1009,2,12],[10,1010,8,10],[11,2022,9,10],[11,2023,1,12],[11,2024,11,8],[11,2025,12,7],[11,2026,7,11],[11,2027,5,12],[11,2028,6,12],[11,2029,10,9],[11,2030,8,11],[11,2031,12,8],[11,2032,0,10],[11,2033,7,12],[11,2034,11,0],[11,2035,10,10],[11,2036,11,9],[11,2037,11,10],[11,2038,0,11],[11,2039,11,11],[11,2040,9,11],[11,2041,10,11],[11,2042,12,0],[11,2043,8,12],[12,4088,12,9],[12,4089,10,12],[12,4090,9,12],[12,4091,11,12],[12,4092,12,11],[12,4093,0,12],[12,4094,12,10],[12,4095,12,12]],[[4,0,0,0],[4,1,1,1],[5,4,16,16],[5,5,1,0],[5,6,0,1],[5,7,2,1],[5,8,1,2],[5,9,2,2],[6,20,1,3],[6,21,3,1],[6,22,3,2],[6,23,2,0],[6,24,2,3],[6,25,0,2],[6,26,3,3],[7,54,4,1],[7,55,1,4],[7,56,4,2],[7,57,2,4],[7,58,4,3],[7,59,3,4],[7,60,3,0],[7,61,0,3],[7,62,5,1],[7,63,5,2],[7,64,2,5],[7,65,4,4],[7,66,1,5],[7,67,5,3],[7,68,3,5],[7,69,5,4],[8,140,4,5],[8,141,6,2],[8,142,2,6],[8,143,6,1],[8,144,6,3],[8,145,3,6],[8,146,1,6],[8,147,4,16],[8,148,3,16],[8,149,16,5],[8,150,16,3],[8,151,16,4],[8,152,6,4],[8,153,16,6],[8,154,4,0],[8,155,4,6],[8,156,0,4],[8,157,2,16],[8,158,5,5],[8,159,5,16],[8,160,16,7],[8,161,16,2],[8,162,16,8],[8,163,2,7],[8,164,7,2],[8,165,3,7],[8,166,6,5],[8,167,5,6],[8,168,6,16],[8,169,16,10],[8,170,7,3],[8,171,7,1],[8,172,16,9],[8,173,7,16],[8,174,1,16],[8,175,1,7],[8,176,4,7],[8,177,16,11],[8,178,7,4],[8,179,16,12],[8,180,8,16],[8,181,16,1],[8,182,6,6],[8,183,9,16],[8,184,2,8],[8,185,5,7],[8,186,10,16],[8,187,16,13],[8,188,8,3],[8,189,8,2],[8,190,3,8],[8,191,5,0],[8,192,16,14],[8,193,11,16],[8,194,7,5],[8,195,4,8],[8,196,6,7],[8,197,7,6],[8,198,0,5],[9,398,8,4],[9,399,16,15],[9,400,12,16],[9,401,1,8],[9,402,8,1],[9,403,14,16],[9,404,5,8],[9,405,13,16],[9,406,3,9],[9,407,8,5],[9,408,7,7],[9,409,2,9],[9,410,8,6],[9,411,9,2],[9,412,9,3],[9,413,15,16],[9,414,4,9],[9,415,6,8],[9,416,6,0],[9,417,9,4],[9,418,5,9],[9,419,8,7],[9,420,7,8],[9,421,1,9],[9,422,10,3],[9,423,0,6],[9,424,10,2],[9,425,9,1],[9,426,9,5],[9,427,4,10],[9,428,2,10],[9,429,9,6],[9,430,3,10],[9,431,6,9],[9,432,10,4],[9,433,8,8],[9,434,10,5],[9,435,9,7],[9,436,11,3],[9,437,1,10],[9,438,7,0],[9,439,10,6],[9,440,7,9],[9,441,3,11],[9,442,5,10],[9,443,10,1],[9,444,4,11],[9,445,11,2],[9,446,13,2],[9,447,6,10],[9,448,13,3],[9,449,2,11],[9,450,16,0],[9,451,5,11],[9,452,11,5],[10,906,11,4],[10,907,9,8],[10,908,7,10],[10,909,8,9],[10,910,0,16],[10,911,4,13],[10,912,0,7],[10,913,3,13],[10,914,11,6],[10,915,13,1],[10,916,13,4],[10,917,12,3],[10,918,2,13],[10,919,13,5],[10,920,8,10],[10,921,6,11],[10,922,10,8],[10,923,10,7],[10,924,14,2],[10,925,12,4],[10,926,1,11],[10,927,4,12],[10,928,11,1],[10,929,3,12],[10,930,1,13],[10,931,12,2],[10,932,7,11],[10,933,3,14],[10,934,5,12],[10,935,5,13],[10,936,14,4],[10,937,4,14],[10,938,11,7],[10,939,14,3],[10,940,12,5],[10,941,13,6],[10,942,12,6],[10,943,8,0],[10,944,11,8],[10,945,2,12],[10,946,9,9],[10,947,14,5],[10,948,6,13],[10,949,10,10],[10,950,15,2],[10,951,8,11],[10,952,9,10],[10,953,14,6],[10,954,10,9],[10,955,5,14],[10,956,11,9],[10,957,14,1],[10,958,2,14],[10,959,6,12],[10,960,1,12],[10,961,13,8],[10,962,0,8],[10,963,13,7],[10,964,7,12],[10,965,12,7],[10,966,7,13],[10,967,15,3],[10,968,12,1],[10,969,6,14],[10,970,2,15],[10,971,15,5],[10,972,15,4],[10,973,1,14],[10,974,9,11],[10,975,4,15],[10,976,14,7],[10,977,8,13],[10,978,13,9],[10,979,8,12],[10,980,5,15],[10,981,3,15],[10,982,10,11],[10,983,11,10],[10,984,12,8],[10,985,15,6],[10,986,15,7],[10,987,8,14],[10,988,15,1],[10,989,7,14],[10,990,9,0],[10,991,0,9],[10,992,9,13],[10,993,9,12],[10,994,12,9],[10,995,14,8],[10,996,10,13],[10,997,14,9],[10,998,12,10],[10,999,6,15],[10,1e3,7,15],[11,2002,9,14],[11,2003,15,8],[11,2004,11,11],[11,2005,11,14],[11,2006,1,15],[11,2007,10,12],[11,2008,10,14],[11,2009,13,11],[11,2010,13,10],[11,2011,11,13],[11,2012,11,12],[11,2013,8,15],[11,2014,14,11],[11,2015,13,12],[11,2016,12,13],[11,2017,15,9],[11,2018,14,10],[11,2019,10,0],[11,2020,12,11],[11,2021,9,15],[11,2022,0,10],[11,2023,12,12],[11,2024,11,0],[11,2025,12,14],[11,2026,10,15],[11,2027,13,13],[11,2028,0,13],[11,2029,14,12],[11,2030,15,10],[11,2031,15,11],[11,2032,11,15],[11,2033,14,13],[11,2034,13,0],[11,2035,0,11],[11,2036,13,14],[11,2037,15,12],[11,2038,15,13],[11,2039,12,15],[11,2040,14,0],[11,2041,14,14],[11,2042,13,15],[11,2043,12,0],[11,2044,14,15],[12,4090,0,14],[12,4091,0,12],[12,4092,15,14],[12,4093,15,0],[12,4094,0,15],[12,4095,15,15]]],o=[!1,!1,!0,!0,!1,!1,!0,!0,!0,!0,!0],a={findOffset:function(e,t){for(var r=0,n=t[r][0],i=e.read(n);i!==t[r][1];){var o=t[++r][0]-n;n=t[r][0],i<<=o,i|=e.read(o);}return r;},signValues:function(e,t,r,n){for(var i=r;i<r+n;i++)t[i]&&e.read(1)&&(t[i]=-t[i]);},getEscape:function(e,t){for(var r=4;e.read(1);)r++;var n=e.read(r)|1<<r;return t<0?-n:n;},decodeScaleFactor:function(e){var t=this.findOffset(e,n);return n[t][2];},decodeSpectralData:function(e,t,r,n){var a=i[t-1],s=this.findOffset(e,a);if(r[n]=a[s][2],r[n+1]=a[s][3],t<5&&(r[n+2]=a[s][4],r[n+3]=a[s][5]),t<11)o[t-1]&&this.signValues(e,r,n,t<5?4:2);else{if(!(11===t||t>15))throw new Error("Huffman: unknown spectral codebook: "+t);this.signValues(e,r,n,t<5?4:2),16===Math.abs(r[n])&&(r[n]=this.getEscape(e,r[n])),16===Math.abs(r[n+1])&&(r[n+1]=this.getEscape(e,r[n+1]));}}};t.exports=a;},{}],8:[function(e,t,r){var n=e("./tables"),i=e("./huffman"),o=e("./tns");function a(e){this.info=new d(),this.bandTypes=new Int32Array(s),this.sectEnd=new Int32Array(s),this.data=new Float32Array(e.frameLength),this.scaleFactors=new Float32Array(s),this.randomState=523124044,this.tns=new o(e),this.specBuf=new Int32Array(4);}a.ZERO_BT=0,a.FIRST_PAIR_BT=5,a.ESC_BT=11,a.NOISE_BT=13,a.INTENSITY_BT2=14,a.INTENSITY_BT=15,a.ONLY_LONG_SEQUENCE=0,a.LONG_START_SEQUENCE=1,a.EIGHT_SHORT_SEQUENCE=2,a.LONG_STOP_SEQUENCE=3;var s=120;function d(){this.windowShape=new Int32Array(2),this.windowSequence=a.ONLY_LONG_SEQUENCE,this.groupLength=new Int32Array(8),this.ltpData1Present=!1,this.ltpData2Present=!1;}a.prototype={decode:function(e,t,r){if(this.globalGain=e.read(8),r||this.info.decode(e,t,r),this.decodeBandTypes(e,t),this.decodeScaleFactors(e),this.pulsePresent=e.read(1)){if(this.info.windowSequence===a.EIGHT_SHORT_SEQUENCE)throw new Error("Pulse tool not allowed in eight short sequence.");this.decodePulseData(e);}if((this.tnsPresent=e.read(1))&&this.tns.decode(e,this.info),this.gainPresent=e.read(1))throw new Error("TODO: decode gain control/SSR");this.decodeSpectralData(e);},decodeBandTypes:function(e,t){for(var r=this.info.windowSequence===a.EIGHT_SHORT_SEQUENCE?3:5,n=this.info.groupCount,i=this.info.maxSFB,o=this.bandTypes,s=this.sectEnd,d=0,c=(1<<r)-1,f=0;f<n;f++)for(var u=0;u<i;){var l,p=u,h=e.read(4);if(12===h)throw new Error("Invalid band type: 12");for(;(l=e.read(r))===c;)p+=l;if((p+=l)>i)throw new Error("Too many bands ("+p+" > "+i+")");for(;u<p;u++)o[d]=h,s[d++]=p;}},decodeScaleFactors:function(e){for(var t=this.info.groupCount,r=this.info.maxSFB,o=[this.globalGain,this.globalGain-90,0],s=0,d=!0,c=this.scaleFactors,f=this.sectEnd,u=this.bandTypes,l=0;l<t;l++)for(var p=0;p<r;){var h=f[s];switch(u[s]){case a.ZERO_BT:for(;p<h;p++,s++)c[s]=0;break;case a.INTENSITY_BT:case a.INTENSITY_BT2:for(;p<h;p++,s++){o[2]+=i.decodeScaleFactor(e)-60;var g=Math.min(Math.max(o[2],-155),100);c[s]=n.SCALEFACTOR_TABLE[200-g];}break;case a.NOISE_BT:for(;p<h;p++,s++){d?(o[1]+=e.read(9)-256,d=!1):o[1]+=i.decodeScaleFactor(e)-60;g=Math.min(Math.max(o[1],-100),155);c[s]=-n.SCALEFACTOR_TABLE[g+200];}break;default:for(;p<h;p++,s++){if(o[0]+=i.decodeScaleFactor(e)-60,o[0]>255)throw new Error("Scalefactor out of range: "+o[0]);c[s]=n.SCALEFACTOR_TABLE[o[0]-100+200];}}}},decodePulseData:function(e){var t=e.read(2)+1,r=e.read(6);if(r>=this.info.swbCount)throw new Error("Pulse SWB out of range: "+r);if(this.pulseOffset&&this.pulseOffset.length===t||(this.pulseOffset=new Int32Array(t),this.pulseAmp=new Int32Array(t)),this.pulseOffset[0]=this.info.swbOffsets[r]+e.read(5),this.pulseAmp[0]=e.read(4),this.pulseOffset[0]>1023)throw new Error("Pulse offset out of range: "+this.pulseOffset[0]);for(var n=1;n<t;n++){if(this.pulseOffset[n]=e.read(5)+this.pulseOffset[n-1],this.pulseOffset[n]>1023)throw new Error("Pulse offset out of range: "+this.pulseOffset[n]);this.pulseAmp[n]=e.read(4);}},decodeSpectralData:function(e){for(var t=this.data,r=this.info,o=r.maxSFB,s=r.groupCount,d=r.swbOffsets,c=this.bandTypes,f=this.scaleFactors,u=this.specBuf,l=0,p=0,h=0;h<s;h++){for(var g=r.groupLength[h],y=0;y<o;y++,p++){var b=c[p],m=l+d[y],v=d[y+1]-d[y];if(b===a.ZERO_BT||b===a.INTENSITY_BT||b===a.INTENSITY_BT2)for(var S=0;S<g;S++,m+=128)for(var k=m;k<m+v;k++)t[k]=0;else if(b===a.NOISE_BT)for(S=0;S<g;S++,m+=128){for(var C=0,T=0;T<v;T++)this.randomState=1015568748*this.randomState|0,t[m+T]=this.randomState,C+=t[m+T]*t[m+T];var P=f[p]/Math.sqrt(C);for(T=0;T<v;T++)t[m+T]*=P;}else for(S=0;S<g;S++,m+=128){var _=b>=a.FIRST_PAIR_BT?2:4;for(T=0;T<v;T+=_){i.decodeSpectralData(e,b,u,0);for(var w=0;w<_;w++)t[m+T+w]=u[w]>0?n.IQ_TABLE[u[w]]:-n.IQ_TABLE[-u[w]],t[m+T+w]*=f[p];}}}l+=g<<7;}if(this.pulsePresent)throw new Error("TODO: add pulse data");}},d.prototype={decode:function(e,t,r){if(e.advance(1),this.windowSequence=e.read(2),this.windowShape[0]=this.windowShape[1],this.windowShape[1]=e.read(1),this.groupCount=1,this.groupLength[0]=1,this.windowSequence===a.EIGHT_SHORT_SEQUENCE){this.maxSFB=e.read(4);for(var i=0;i<7;i++)e.read(1)?this.groupLength[this.groupCount-1]++:(this.groupCount++,this.groupLength[this.groupCount-1]=1);this.windowCount=8,this.swbOffsets=n.SWB_OFFSET_128[t.sampleIndex],this.swbCount=n.SWB_SHORT_WINDOW_COUNT[t.sampleIndex],this.predictorPresent=!1;}else this.maxSFB=e.read(6),this.windowCount=1,this.swbOffsets=n.SWB_OFFSET_1024[t.sampleIndex],this.swbCount=n.SWB_LONG_WINDOW_COUNT[t.sampleIndex],this.predictorPresent=!!e.read(1),this.predictorPresent&&this.decodePrediction(e,t,r);},decodePrediction:function(e,t,r){throw new Error("Prediction not implemented.");}},t.exports=a;},{"./huffman":7,"./tables":11,"./tns":12}],9:[function(e,t,r){var n=e("./mdct_tables"),i=e("./fft");function o(e){switch(this.N=e,this.N2=e>>>1,this.N4=e>>>2,this.N8=e>>>3,e){case 2048:this.sincos=n.MDCT_TABLE_2048;break;case 256:this.sincos=n.MDCT_TABLE_256;break;case 1920:this.sincos=n.MDCT_TABLE_1920;break;case 240:this.sincos=n.MDCT_TABLE_240;break;default:throw new Error("unsupported MDCT length: "+e);}this.fft=new i(this.N4),this.buf=new Array(this.N4);for(var t=0;t<this.N4;t++)this.buf[t]=new Float32Array(2);this.tmp=new Float32Array(2);}o.prototype.process=function(e,t,r,n){for(var i=this.N2,o=this.N4,a=this.N8,s=this.buf,d=this.tmp,c=this.sincos,f=this.fft,u=0;u<o;u++)s[u][1]=e[t+2*u]*c[u][0]+e[t+i-1-2*u]*c[u][1],s[u][0]=e[t+i-1-2*u]*c[u][0]-e[t+2*u]*c[u][1];f.process(s,!1);for(u=0;u<o;u++)d[0]=s[u][0],d[1]=s[u][1],s[u][1]=d[1]*c[u][0]+d[0]*c[u][1],s[u][0]=d[0]*c[u][0]-d[1]*c[u][1];for(u=0;u<a;u+=2)r[n+2*u]=s[a+u][1],r[n+2+2*u]=s[a+1+u][1],r[n+1+2*u]=-s[a-1-u][0],r[n+3+2*u]=-s[a-2-u][0],r[n+o+2*u]=s[u][0],r[n+o+2+2*u]=s[1+u][0],r[n+o+1+2*u]=-s[o-1-u][1],r[n+o+3+2*u]=-s[o-2-u][1],r[n+i+2*u]=s[a+u][0],r[n+i+2+2*u]=s[a+1+u][0],r[n+i+1+2*u]=-s[a-1-u][1],r[n+i+3+2*u]=-s[a-2-u][1],r[n+i+o+2*u]=-s[u][1],r[n+i+o+2+2*u]=-s[1+u][1],r[n+i+o+1+2*u]=s[o-1-u][0],r[n+i+o+3+2*u]=s[o-2-u][0];},t.exports=o;},{"./fft":5,"./mdct_tables":10}],10:[function(e,t,r){r.MDCT_TABLE_2048=[[.031249997702054,11984224612e-15],[.031249813866531,.000107857810004],[.031249335895858,.000203730380198],[.031248563794535,.000299601032804],[.031247497569829,.000395468865451],[.031246137231775,.000491332975794],[.031244482793177,.000587192461525],[.031242534269608,.000683046420376],[.031240291679407,.000778893950134],[.031237755043684,.000874734148645],[.031234924386313,.000970566113826],[.031231799733938,.001066388943669],[.03122838111597,.001162201736253],[.031224668564585,.001258003589751],[.031220662114728,.001353793602441],[.031216361804108,.00144957087271],[.031211767673203,.001545334499065],[.031206879765253,.001641083580144],[.031201698126266,.001736817214719],[.031196222805014,.001832534501709],[.031190453853031,.001928234540186],[.031184391324617,.002023916429386],[.031178035276836,.002119579268713],[.031171385769513,.002215222157753],[.031164442865236,.002310844196278],[.031157206629353,.002406444484258],[.031149677129975,.002502022121865],[.031141854437973,.002597576209488],[.031133738626977,.002693105847734],[.031125329773375,.002788610137442],[.031116627956316,.002884088179689],[.031107633257703,.002979539075801],[.0310983457622,.003074961927355],[.031088765557222,.003170355836197],[.031078892732942,.003265719904442],[.031068727382288,.003361053234488],[.031058269600939,.003456354929021],[.031047519487329,.003551624091024],[.03103647714264,.00364685982379],[.031025142670809,.003742061230921],[.031013516178519,.003837227416347],[.031001597775203,.003932357484328],[.030989387573042,.004027450539462],[.030976885686963,.004122505686697],[.030964092234638,.00421752203134],[.030951007336485,.004312498679058],[.030937631115663,.004407434735897],[.030923963698074,.004502329308281],[.030910005212362,.004597181503027],[.030895755789908,.00469199042735],[.030881215564835,.004786755188872],[.030866384674,.004881474895632],[.030851263256996,.00497614865609],[.030835851456154,.005070775579142],[.030820149416533,.005165354774124],[.030804157285929,.005259885350819],[.030787875214864,.005354366419469],[.030771303356593,.005448797090784],[.030754441867095,.005543176475946],[.030737290905077,.005637503686619],[.030719850631972,.005731777834961],[.030702121211932,.005825998033626],[.030684102811835,.00592016339578],[.030665795601276,.006014273035101],[.03064719975257,.006108326065793],[.030628315440748,.006202321602594],[.030609142843557,.006296258760782],[.030589682141455,.006390136656185],[.030569933517616,.006483954405188],[.030549897157919,.006577711124743],[.030529573250956,.006671405932375],[.030508961988022,.006765037946194],[.030488063563118,.0068586062849],[.030466878172949,.006952110067791],[.030445406016919,.007045548414774],[.030423647297133,.007138920446372],[.030401602218392,.007232225283733],[.030379270988192,.007325462048634],[.030356653816724,.007418629863497],[.030333750916869,.00751172785139],[.030310562504198,.00760475513604],[.030287088796968,.007697710841838],[.030263330016124,.007790594093851],[.030239286385293,.007883404017824],[.030214958130781,.007976139740197],[.030190345481576,.008068800388104],[.030165448669342,.00816138508939],[.030140267928416,.00825389297261],[.030114803495809,.008346323167047],[.030089055611203,.008438674802711],[.030063024516947,.008530947010354],[.030036710458054,.008623138921475],[.030010113682202,.008715249668328],[.029983234439732,.008807278383932],[.02995607298364,.008899224202078],[.02992862956958,.008991086257336],[.02990090445586,.009082863685067],[.029872897903441,.009174555621425],[.029844610175929,.009266161203371],[.029816041539579,.009357679568679],[.029787192263292,.009449109855944],[.029758062618606,.009540451204587],[.029728652879702,.009631702754871],[.029698963323395,.0097228636479],[.029668994229134,.009813933025633],[.029638745879,.009904910030891],[.029608218557702,.009995793807363],[.029577412552575,.010086583499618],[.029546328153577,.010177278253107],[.029514965653285,.010267877214177],[.029483325346896,.010358379530076],[.02945140753222,.010448784348962],[.029419212509679,.010539090819911],[.029386740582307,.010629298092923],[.02935399205574,.010719405318933],[.02932096723822,.010809411649818],[.02928766644059,.010899316238403],[.02925408997629,.010989118238474],[.029220238161353,.011078816804778],[.029186111314406,.011168411093039],[.029151709756664,.011257900259961],[.029117033811927,.011347283463239],[.029082083806579,.011436559861563],[.029046860069582,.01152572861463],[.029011362932476,.01161478888315],[.028975592729373,.011703739828853],[.028939549796957,.0117925806145],[.028903234474475,.011881310403886],[.028866647103744,.011969928361855],[.028829788029135,.012058433654299],[.028792657597583,.012146825448172],[.028755256158571,.012235102911499],[.028717584064137,.012323265213377],[.028679641668864,.01241131152399],[.028641429329882,.012499241014612],[.028602947406859,.012587052857618],[.028564196262001,.012674746226488],[.02852517626005,.012762320295819],[.028485887768276,.012849774241331],[.028446331156478,.012937107239875],[.028406506796976,.013024318469437],[.028366415064615,.013111407109155],[.028326056336751,.013198372339315],[.028285430993258,.013285213341368],[.028244539416515,.013371929297933],[.028203381991411,.013458519392807],[.028161959105334,.013544982810971],[.028120271148172,.013631318738598],[.028078318512309,.013717526363062],[.028036101592619,.013803604872943],[.027993620786463,.013889553458039],[.027950876493687,.013975371309367],[.027907869116616,.014061057619178],[.027864599060052,.014146611580959],[.02782106673127,.014232032389445],[.027777272540012,.014317319240622],[.027733216898487,.014402471331737],[.027688900221361,.014487487861307],[.027644322925762,.014572368029123],[.027599485431266,.014657111036262],[.027554388159903,.01474171608509],[.027509031536144,.014826182379271],[.027463415986904,.014910509123778],[.027417541941533,.014994695524894],[.027371409831816,.015078740790225],[.027325020091965,.015162644128704],[.027278373158618,.015246404750603],[.027231469470833,.015330021867534],[.027184309470088,.01541349469246],[.027136893600268,.015496822439704],[.027089222307671,.015580004324954],[.027041296040997,.015663039565269],[.026993115251345,.015745927379091],[.026944680392213,.015828666986247],[.026895991919487,.015911257607961],[.026847050291442,.015993698466859],[.026797855968734,.016075988786976],[.026748409414401,.016158127793763],[.026698711093851,.016240114714099],[.026648761474864,.016321948776289],[.026598561027585,.016403629210082],[.026548110224519,.016485155246669],[.02649740954053,.016566526118696],[.02644645945283,.016647741060271],[.026395260440982,.016728799306966],[.02634381298689,.016809700095831],[.026292117574797,.016890442665397],[.02624017469128,.016971026255683],[.026187984825246,.017051450108208],[.026135548467924,.01713171346599],[.026082866112867,.01721181557356],[.026029938255941,.017291755676967],[.025976765395322,.017371533023784],[.025923348031494,.017451146863116],[.025869686667242,.017530596445607],[.025815781807646,.017609881023449],[.02576163396008,.017688999850383],[.025707243634204,.017767952181715],[.02565261134196,.017846737274313],[.025597737597568,.017925354386623],[.025542622917522,.018003802778671],[.025487267820581,.018082081712071],[.025431672827768,.018160190450031],[.025375838462365,.018238128257362],[.025319765249906,.018315894400484],[.025263453718173,.018393488147432],[.025206904397193,.018470908767865],[.025150117819228,.01854815553307],[.025093094518776,.018625227715971],[.025035835032562,.018702124591135],[.024978339899534,.01877884543478],[.024920609660858,.01885538952478],[.024862644859912,.018931756140672],[.024804446042284,.019007944563666],[.024746013755764,.019083954076646],[.024687348550337,.019159783964183],[.024628450978184,.019235433512536],[.02456932159367,.019310902009663],[.024509960953345,.019386188745225],[.024450369615932,.019461293010596],[.024390548142329,.019536214098866],[.024330497095598,.019610951304848],[.024270217040961,.019685503925087],[.024209708545799,.019759871257867],[.024148972179639,.019834052603212],[.024088008514157,.019908047262901],[.024026818123164,.019981854540467],[.023965401582609,.020055473741208],[.023903759470567,.020128904172192],[.023841892367236,.020202145142264],[.023779800854935,.020275195962052],[.023717485518092,.020348055943974],[.023654946943242,.020420724402244],[.023592185719023,.020493200652878],[.023529202436167,.020565484013703],[.023465997687496,.020637573804361],[.023402572067918,.020709469346314],[.023338926174419,.020781169962854],[.023275060606058,.020852674979108],[.023210975963963,.020923983722044],[.023146672851322,.020995095520475],[.02308215187338,.021066009705072],[.023017413637435,.021136725608363],[.022952458752826,.021207242564742],[.022887287830934,.021277559910478],[.022821901485173,.021347676983716],[.022756300330983,.021417593124488],[.022690484985827,.021487307674717],[.022624456069185,.021556819978223],[.022558214202547,.021626129380729],[.022491760009405,.021695235229869],[.022425094115252,.021764136875192],[.022358217147572,.021832833668171],[.022291129735838,.021901324962204],[.022223832511501,.021969610112625],[.022156326107988,.022037688476709],[.022088611160696,.022105559413676],[.022020688306983,.022173222284699],[.021952558186166,.022240676452909],[.02188422143951,.022307921283403],[.021815678710228,.022374956143245],[.021746930643469,.022441780401478],[.021677977886316,.022508393429127],[.02160882108778,.022574794599206],[.02153946089879,.022640983286719],[.02146989797219,.022706958868676],[.021400132962735,.022772720724087],[.021330166527077,.022838268233979],[.021259999323769,.022903600781391],[.02118963201325,.022968717751391],[.021119065257845,.023033618531071],[.021048299721754,.023098302509561],[.02097733607105,.023162769078031],[.02090617497367,.023227017629698],[.020834817099409,.023291047559828],[.020763263119915,.023354858265748],[.02069151370868,.023418449146848],[.020619569541038,.023481819604585],[.020547431294155,.023544969042494],[.020475099647023,.023607896866186],[.020402575280455,.023670602483363],[.020329858877078,.023733085303813],[.020256951121327,.023795344739427],[.020183852699437,.023857380204193],[.020110564299439,.023919191114211],[.02003708661115,.023980776887692],[.019963420326171,.024042136944968],[.019889566137877,.024103270708495],[.019815524741412,.024164177602859],[.019741296833681,.024224857054779],[.019666883113346,.02428530849312],[.019592284280817,.024345531348888],[.019517501038246,.024405525055242],[.019442534089523,.0244652890475],[.019367384140264,.024524822763141],[.019292051897809,.024584125641809],[.019216538071215,.024643197125323],[.019140843371246,.024702036657681],[.019064968510369,.024760643685063],[.018988914202748,.024819017655836],[.018912681164234,.024877158020562],[.018836270112363,.024935064232003],[.018759681766343,.024992735745123],[.018682916847054,.025050172017095],[.018605976077037,.025107372507308],[.018528860180486,.025164336677369],[.018451569883247,.02522106399111],[.018374105912805,.025277553914591],[.01829646899828,.025333805916107],[.018218659870421,.025389819466194],[.018140679261596,.02544559403763],[.01806252790579,.025501129105445],[.017984206538592,.02555642414692],[.017905715897192,.025611478641598],[.017827056720375,.025666292071285],[.017748229748511,.025720863920056],[.01766923572355,.02577519367426],[.017590075389012,.025829280822525],[.017510749489986,.025883124855762],[.017431258773116,.02593672526717],[.0173516039866,.025990081552242],[.01727178588018,.026043193208768],[.017191805205132,.026096059736841],[.017111662714267,.026148680638861],[.017031359161915,.026201055419541],[.016950895303924,.026253183585908],[.016870271897651,.026305064647313],[.016789489701954,.026356698115431],[.016708549477186,.026408083504269],[.016627451985187,.026459220330167],[.016546197989277,.026510108111806],[.01646478825425,.026560746370212],[.016383223546365,.026611134628757],[.016301504633341,.026661272413168],[.016219632284346,.02671115925153],[.016137607269996,.026760794674288],[.01605543036234,.026810178214254],[.015973102334858,.026859309406613],[.015890623962454,.026908187788922],[.015807996021446,.026956812901119],[.015725219289558,.027005184285527],[.015642294545918,.027053301486856],[.015559222571044,.027101164052208],[.015476004146842,.027148771531083],[.015392640056594,.02719612347538],[.015309131084956,.027243219439406],[.015225478017946,.027290058979875],[.015141681642938,.027336641655915],[.015057742748656,.027382967029073],[.014973662125164,.027429034663317],[.014889440563862,.02747484412504],[.014805078857474,.027520394983066],[.014720577800046,.027565686808654],[.014635938186934,.027610719175499],[.014551160814797,.02765549165974],[.014466246481592,.02770000383996],[.014381195986567,.027744255297195],[.014296010130247,.027788245614933],[.014210689714436,.02783197437912],[.014125235542201,.027875441178165],[.01403964841787,.027918645602941],[.01395392914702,.027961587246792],[.013868078536476,.028004265705534],[.013782097394294,.028046680577462],[.013695986529763,.028088831463351],[.01360974675339,.028130717966461],[.013523378876898,.02817233969254],[.013436883713214,.028213696249828],[.013350262076462,.028254787249062],[.01326351478196,.028295612303478],[.013176642646205,.028336171028814],[.013089646486871,.028376463043317],[.013002527122799,.028416487967743],[.01291528537399,.028456245425361],[.012827922061597,.02849573504196],[.012740438007915,.028534956445849],[.012652834036379,.028573909267859],[.01256511097155,.028612593141354],[.012477269639111,.028651007702224],[.012389310865858,.028689152588899],[.012301235479693,.028727027442343],[.012213044309615,.028764631906065],[.012124738185712,.028801965626115],[.012036317939156,.028839028251097],[.011947784402191,.028875819432161],[.01185913840813,.028912338823015],[.011770380791341,.028948586079925],[.011681512387245,.028984560861718],[.011592534032306,.029020262829785],[.011503446564022,.029055691648087],[.011414250820918,.029090846983152],[.011324947642537,.029125728504087],[.011235537869437,.029160335882573],[.011146022343175,.029194668792871],[.011056401906305,.029228726911828],[.010966677402371,.029262509918876],[.010876849675891,.029296017496036],[.010786919572361,.029329249327922],[.010696887938235,.029362205101743],[.010606755620926,.029394884507308],[.010516523468793,.029427287237024],[.010426192331137,.029459412985906],[.010335763058187,.029491261451573],[.010245236501099,.029522832334255],[.010154613511943,.029554125336796],[.010063894943698,.029585140164654],[.00997308165024,.029615876525905],[.00988217448634,.029646334131247],[.00979117430765,.029676512694001],[.009700081970699,.029706411930116],[.009608898332881,.029736031558168],[.009517624252453,.029765371299366],[.009426260588521,.029794430877553],[.009334808201034,.02982321001921],[.009243267950778,.029851708453456],[.009151640699363,.029879925912053],[.00905992730922,.029907862129408],[.008968128643591,.029935516842573],[.00887624556652,.029962889791254],[.008784278942845,.029989980717805],[.008692229638191,.030016789367235],[.008600098518961,.030043315487212],[.008507886452329,.030069558828062],[.00841559430623,.030095519142772],[.008323222949351,.030121196186994],[.008230773251129,.030146589719046],[.008138246081733,.030171699499915],[.008045642312067,.030196525293257],[.00795296281375,.030221066865402],[.007860208459119,.030245323985357],[.007767380121212,.030269296424803],[.007674478673766,.030292983958103],[.007581504991203,.030316386362302],[.007488459948628,.030339503417126],[.007395344421816,.030362334904989],[.007302159287206,.030384880610993],[.007208905421891,.030407140322928],[.007115583703613,.030429113831278],[.007022195010752,.03045080092922],[.006928740222316,.030472201412626],[.006835220217939,.030493315080068],[.006741635877866,.030514141732814],[.006647988082948,.030534681174838],[.006554277714635,.030554933212813],[.006460505654964,.030574897656119],[.006366672786553,.030594574316845],[.006272779992593,.030613963009786],[.006178828156839,.030633063552447],[.006084818163601,.030651875765048],[.005990750897737,.03067039947052],[.005896627244644,.030688634494512],[.00580244809025,.030706580665388],[.005708214321004,.030724237814232],[.005613926823871,.030741605774849],[.005519586486321,.030758684383764],[.005425194196321,.030775473480228],[.005330750842327,.030791972906214],[.005236257313276,.030808182506425],[.005141714498576,.030824102128288],[.005047123288102,.030839731621963],[.004952484572181,.030855070840339],[.004857799241589,.030870119639036],[.004763068187541,.030884877876411],[.004668292301681,.030899345413553],[.004573472476075,.030913522114288],[.004478609603205,.03092740784518],[.004383704575956,.03094100247553],[.00428875828761,.030954305877381],[.004193771631837,.030967317925516],[.004098745502689,.030980038497461],[.004003680794587,.030992467473486],[.003908578402316,.031004604736602],[.003813439221017,.031016450172571],[.003718264146176,.031028003669899],[.003623054073616,.031039265119839],[.003527809899492,.031050234416394],[.003432532520278,.031060911456318],[.00333722283276,.031071296139114],[.003241881734029,.031081388367037],[.003146510121474,.031091188045095],[.003051108892766,.031100695081051],[.00295567894586,.031109909385419],[.002860221178978,.031118830871473],[.002764736490604,.031127459455239],[.002669225779478,.031135795055501],[.002573689944583,.031143837593803],[.002478129885137,.031151586994444],[.002382546500589,.031159043184484],[.002286940690606,.031166206093743],[.002191313355067,.0311730756548],[.002095665394051,.031179651802998],[.001999997707835,.031185934476438],[.001904311196878,.031191923615985],[.00180860676182,.031197619165268],[.001712885303465,.031203021070678],[.001617147722782,.03120812928137],[.001521394920889,.031212943749264],[.001425627799047,.031217464429043],[.001329847258653,.031221691278159],[.001234054201231,.031225624256825],[.00113824952842,.031229263328024],[.001042434141971,.031232608457502],[.000946608943736,.031235659613775],[.000850774835656,.031238416768124],[.000754932719759,.031240879894597],[.000659083498149,.03124304897001],[.000563228072993,.031244923973948],[.00046736734652,.031246504888762],[.000371502221008,.031247791699571],[.000275633598775,.031248784394264],[.000179762382174,.031249482963498],[83889473581e-15,.031249887400697]],r.MDCT_TABLE_256=[[.088387931675923,.000271171628935],[.088354655998507,.002440238387037],[.08826815878011,.00460783523678],[.088128492123423,.006772656498875],[.087935740158418,.008933398165942],[.08769001899167,.011088758687994],[.087391476636423,.013237439756448],[.087040292923427,.015378147086172],[.086636679392621,.017509591195118],[.086180879165703,.019630488181053],[.085673166799686,.02173956049494],[.085113848121515,.023835537710479],[.084503260043847,.025917157289369],[.08384177036211,.027983165341813],[.083129777532952,.030032317381813],[.08236771043423,.032063379076803],[.081556028106671,.034075126991164],[.080695219477356,.036066349323177],[.079785803065216,.038035846634965],[.078828326668693,.039982432574992],[.077823367035766,.041904934592675],[.07677152951654,.043802194644686],[.075673447698606,.045673069892513],[.07452978302539,.047516433390863],[.073341224397728,.049331174766491],[.072108487758894,.051116200887052],[.070832315663343,.052870436519557],[.069513476829429,.054592824978055],[.068152765676348,.056282328760143],[.06675100184562,.057937930171918],[.065309029707361,.059558631940996],[.063827717851668,.061143457817234],[.062307958565413,.062691453160784],[.060750667294763,.064201685517134],[.059156782093749,.065673245178784],[.057527263059216,.06710524573322],[.055863091752499,.068496824596852],[.054165270608165,.069847143534609],[.052434822330188,.071155389164853],[.050672789275903,.072420773449336],[.048880232828135,.073642534167879],[.047058232755862,.074819935377512],[.045207886563797,.075952267855771],[.043330308831298,.077038849527912],[.041426630540984,.078079025877766],[.039497998397473,.079072170341994],[.037545574136653,.080017684687506],[.035570533825892,.080914999371817],[.033574067155622,.081763573886112],[.031557376722714,.082562897080836],[.029521677306074,.083312487473584],[.027468195134911,.084011893539132],[.025398167150101,.084660693981419],[.023312840259098,.08525849798732],[.021213470584847,.085804945462053],[.019101322709138,.086299707246093],[.016977668910873,.086742485313442],[.014843788399692,.087133012951149],[.012700966545425,.087471054919968],[.01055049410383,.087756407596056],[.008393666439096,.087988899093631],[.006231782743558,.08816838936851],[.004066145255116,.088294770302461],[.001898058472816,.088367965768336]],r.MDCT_TABLE_1920=[[.032274858518097,13202404176e-15],[.032274642494505,.000118821372483],[.032274080835421,.000224439068308],[.03227317354686,.000330054360572],[.032271920638538,.000435666118218],[.032270322123873,.000541273210231],[.032268378019984,.000646874505642],[.032266088347691,.000752468873546],[.032263453131514,.000858055183114],[.032260472399674,.0009636323036],[.032257146184092,.001069199104358],[.03225347452039,.001174754454853],[.032249457447888,.001280297224671],[.032245095009606,.001385826283535],[.032240387252262,.001491340501313],[.032235334226272,.001596838748031],[.03222993598575,.00170231989389],[.032224192588507,.001807782809271],[.03221810409605,.001913226364749],[.032211670573582,.002018649431111],[.03220489209,.002124050879359],[.032197768717898,.002229429580728],[.03219030053356,.002334784406698],[.032182487616965,.002440114229003],[.032174330051782,.002545417919644],[.032165827925374,.002650694350905],[.03215698132879,.002755942395358],[.032147790356771,.002861160925883],[.032138255107744,.002966348815672],[.032128375683825,.00307150493825],[.032118152190814,.003176628167476],[.032107584738196,.003281717377568],[.032096673439141,.003386771443102],[.0320854184105,.003491789239036],[.032073819772804,.003596769640711],[.032061877650267,.003701711523874],[.032049592170778,.00380661376468],[.032036963465906,.003911475239711],[.032023991670893,.004016294825985],[.032010676924657,.004121071400967],[.031997019369789,.004225803842586],[.031983019152549,.004330491029241],[.031968676422869,.004435131839816],[.031953991334348,.004539725153692],[.031938964044252,.004644269850758],[.03192359471351,.004748764811426],[.031907883506716,.004853208916638],[.031891830592124,.004957601047881],[.031875436141648,.0050619400872],[.031858700330859,.005166224917208],[.031841623338985,.005270454421097],[.031824205348907,.005374627482653],[.031806446547156,.005478742986267],[.031788347123916,.005582799816945],[.031769907273017,.005686796860323],[.031751127191935,.005790733002674],[.031732007081789,.005894607130928],[.03171254714734,.005998418132675],[.031692747596989,.006102164896182],[.031672608642773,.006205846310406],[.031652130500364,.006309461265002],[.031631313389067,.006413008650337],[.031610157531816,.006516487357501],[.031588663155172,.006619896278321],[.031566830489325,.00672323430537],[.031544659768083,.006826500331981],[.031522151228878,.006929693252258],[.031499305112758,.007032811961088],[.031476121664387,.007135855354151],[.03145260113204,.007238822327937],[.031428743767604,.007341711779751],[.031404549826572,.00744452260773],[.031380019568042,.007547253710853],[.031355153254712,.007649903988952],[.031329951152882,.007752472342725],[.031304413532445,.007854957673748],[.031278540666888,.007957358884484],[.03125233283329,.0080596748783],[.031225790312316,.008161904559473],[.031198913388214,.008264046833205],[.031171702348814,.008366100605636],[.031144157485525,.008468064783849],[.031116279093331,.008569938275893],[.031088067470786,.008671719990782],[.031059522920014,.008773408838517],[.031030645746705,.008875003730092],[.03100143626011,.008976503577507],[.030971894773039,.00907790729378],[.030942021601857,.009179213792959],[.030911817066483,.009280421990133],[.030881281490382,.009381530801444],[.030850415200566,.009482539144097],[.030819218527589,.009583445936373],[.030787691805541,.009684250097643],[.030755835372048,.009784950548375],[.030723649568268,.009885546210147],[.030691134738883,.009986036005661],[.030658291232103,.010086418858753],[.030625119399655,.010186693694402],[.030591619596781,.010286859438745],[.030557792182239,.010386915019088],[.030523637518292,.010486859363916],[.03048915597071,.010586691402906],[.030454347908763,.010686410066936],[.030419213705216,.010786014288099],[.030383753736329,.010885502999714],[.030347968381849,.010984875136338],[.03031185802501,.011084129633775],[.030275423052523,.011183265429088],[.030238663854579,.011282281460612],[.030201580824838,.011381176667967],[.03016417436043,.011479949992062],[.030126444861948,.011578600375117],[.030088392733446,.011677126760663],[.03005001838243,.011775528093563],[.030011322219859,.011873803320018],[.029972304660138,.011971951387578],[.029932966121114,.012069971245157],[.02989330702407,.012167861843041],[.029853327793724,.012265622132901],[.029813028858222,.012363251067801],[.029772410649132,.012460747602215],[.029731473601443,.012558110692033],[.029690218153558,.012655339294575],[.029648644747289,.0127524323686],[.029606753827855,.01284938887432],[.029564545843872,.012946207773407],[.029522021247356,.013042888029011],[.02947918049371,.013139428605762],[.029436024041725,.013235828469789],[.02939255235357,.013332086588727],[.029348765894794,.013428201931728],[.029304665134313,.013524173469475],[.029260250544412,.013620000174189],[.029215522600735,.013715681019643],[.029170481782283,.013811214981173],[.029125128571406,.013906601035686],[.029079463453801,.014001838161674],[.029033486918505,.014096925339225],[.028987199457889,.014191861550031],[.028940601567655,.014286645777401],[.028893693746829,.014381277006273],[.028846476497755,.014475754223221],[.028798950326094,.014570076416472],[.028751115740811,.01466424257591],[.028702973254178,.014758251693091],[.02865452338176,.014852102761253],[.028605766642418,.014945794775326],[.028556703558297,.015039326731945],[.028507334654823,.015132697629457],[.028457660460698,.015225906467935],[.028407681507891,.015318952249187],[.028357398331639,.015411833976768],[.028306811470432,.015504550655988],[.028255921466016,.015597101293927],[.028204728863381,.015689484899442],[.02815323421076,.015781700483179],[.028101438059619,.015873747057582],[.028049340964652,.015965623636907],[.027996943483779,.016057329237229],[.027944246178133,.016148862876456],[.027891249612061,.016240223574335],[.027837954353113,.016331410352467],[.027784360972039,.016422422234315],[.02773047004278,.016513258245214],[.027676282142466,.016603917412384],[.027621797851405,.016694398764938],[.02756701775308,.016784701333894],[.027511942434143,.016874824152183],[.027456572484404,.016964766254662],[.027400908496833,.017054526678124],[.027344951067546,.017144104461307],[.027288700795801,.017233498644904],[.027232158283994,.017322708271577],[.027175324137651,.01741173238596],[.027118198965418,.017500570034678],[.02706078337906,.017589220266351],[.027003077993454,.017677682131607],[.026945083426576,.017765954683088],[.026886800299502,.017854036975468],[.026828229236397,.017941928065456],[.026769370864511,.018029627011808],[.02671022581417,.01811713287534],[.026650794718768,.018204444718934],[.026591078214767,.018291561607551],[.02653107694168,.018378482608238],[.026470791542075,.018465206790142],[.026410222661558,.018551733224515],[.026349370948775,.01863806098473],[.026288237055398,.018724189146286],[.026226821636121,.018810116786819],[.026165125348656,.018895842986112],[.026103148853718,.018981366826109],[.026040892815028,.019066687390916],[.025978357899296,.019151803766819],[.025915544776223,.01923671504229],[.025852454118485,.019321420307998],[.025789086601733,.019405918656817],[.025725442904582,.019490209183837],[.025661523708606,.019574290986376],[.025597329698327,.019658163163984],[.025532861561211,.019741824818458],[.025468119987662,.019825275053848],[.025403105671008,.01990851297647],[.025337819307501,.019991537694913],[.025272261596305,.020074348320047],[.025206433239491,.020156943965039],[.025140334942028,.020239323745355],[.025073967411776,.020321486778774],[.025007331359476,.020403432185395],[.024940427498748,.02048515908765],[.024873256546079,.020566666610309],[.024805819220816,.020647953880491],[.024738116245157,.020729020027676],[.024670148344147,.020809864183709],[.024601916245669,.020890485482816],[.024533420680433,.020970883061607],[.024464662381971,.021051056059087],[.02439564208663,.02113100361667],[.024326360533561,.021210724878181],[.024256818464715,.021290218989868],[.02418701662483,.021369485100415],[.02411695576143,.021448522360944],[.024046636624808,.02152732992503],[.023976059968027,.021605906948708],[.023905226546906,.02168425259048],[.023834137120014,.021762366011328],[.023762792448662,.02184024637472],[.023691193296893,.02191789284662],[.023619340431478,.021995304595495],[.023547234621902,.02207248079233],[.023474876640361,.022149420610628],[.023402267261751,.022226123226426],[.023329407263659,.0223025878183],[.023256297426359,.022378813567377],[.023182938532797,.022454799657339],[.023109331368588,.022530545274437],[.023035476722006,.022606049607496],[.022961375383975,.022681311847926],[.022887028148061,.022756331189727],[.022812435810462,.022831106829504],[.022737599170003,.022905637966469],[.022662519028125,.022979923802453],[.022587196188874,.023053963541915],[.022511631458899,.02312775639195],[.022435825647437,.023201301562294],[.022359779566306,.023274598265338],[.0222834940299,.023347645716133],[.022206969855176,.0234204431324],[.022130207861645,.023492989734537],[.022053208871367,.023565284745628],[.02197597370894,.023637327391451],[.021898503201489,.023709116900488],[.021820798178663,.023780652503931],[.021742859472618,.023851933435691],[.021664687918017,.023922958932406],[.021586284352013,.023993728233451],[.021507649614247,.024064240580942],[.021428784546832,.02413449521975],[.02134968999435,.024204491397504],[.02127036680384,.0242742283646],[.021190815824791,.024343705374213],[.021111037909128,.024412921682298],[.02103103391121,.024481876547605],[.020950804687815,.024550569231683],[.020870351098134,.024618998998889],[.020789674003759,.024687165116394],[.020708774268678,.024755066854194],[.020627652759262,.024822703485116],[.020546310344257,.024890074284826],[.020464747894775,.024957178531837],[.020382966284284,.025024015507516],[.0203009663886,.025090584496093],[.020218749085876,.025156884784668],[.020136315256592,.025222915663218],[.020053665783549,.025288676424605],[.019970801551857,.025354166364584],[.019887723448925,.025419384781811],[.019804432364452,.025484330977848],[.019720929190419,.025549004257175],[.019637214821078,.025613403927192],[.019553290152943,.02567752929823],[.019469156084779,.025741379683559],[.019384813517595,.025804954399392],[.019300263354632,.025868252764895],[.019215506501354,.025931274102193],[.019130543865439,.025994017736379],[.019045376356769,.026056482995518],[.018960004887419,.026118669210657],[.018874430371648,.026180575715833],[.018788653725892,.026242201848076],[.01870267586875,.026303546947421],[.018616497720974,.026364610356909],[.018530120205464,.026425391422602],[.018443544247254,.026485889493583],[.018356770773502,.026546103921965],[.018269800713483,.026606034062902],[.018182634998576,.026665679274589],[.018095274562256,.026725038918274],[.018007720340083,.026784112358263],[.017919973269692,.026842898961926],[.017832034290785,.026901398099707],[.017743904345116,.026959609145127],[.017655584376488,.027017531474792],[.017567075330734,.027075164468401],[.017478378155718,.02713250750875],[.017389493801313,.027189559981742],[.017300423219401,.027246321276391],[.017211167363854,.027302790784828],[.017121727190533,.02735896790231],[.017032103657269,.027414852027226],[.016942297723858,.027470442561102],[.01685231035205,.027525738908608],[.016762142505537,.027580740477564],[.016671795149944,.027635446678948],[.016581269252819,.0276898569269],[.016490565783622,.02774397063873],[.016399685713714,.027797787234924],[.016308630016347,.027851306139149],[.016217399666655,.02790452677826],[.016125995641641,.027957448582309],[.01603441892017,.028010070984544],[.015942670482954,.028062393421421],[.015850751312545,.02811441533261],[.015758662393324,.028166136160998],[.015666404711489,.028217555352697],[.015573979255046,.028268672357047],[.015481387013797,.028319486626627],[.015388628979331,.028369997617257],[.015295706145012,.028420204788004],[.015202619505968,.028470107601191],[.015109370059084,.028519705522399],[.015015958802984,.028568998020472],[.01492238673803,.028617984567529],[.014828654866302,.028666664638963],[.014734764191593,.028715037713449],[.014640715719398,.028763103272951],[.0145465104569,.028810860802724],[.014452149412962,.028858309791325],[.014357633598114,.028905449730613],[.014262964024545,.028952280115756],[.01416814170609,.02899880044524],[.01407316765822,.029045010220868],[.01397804289803,.029090908947771],[.013882768444231,.029136496134411],[.013787345317136,.029181771292585],[.013691774538648,.029226733937433],[.013596057132255,.029271383587441],[.013500194123014,.029315719764447],[.013404186537539,.029359741993647],[.013308035403995,.029403449803598],[.013211741752084,.029446842726223],[.013115306613032,.02948992029682],[.013018731019584,.029532682054063],[.012922016005985,.029575127540008],[.012825162607977,.029617256300097],[.012728171862781,.029659067883165],[.012631044809089,.029700561841444],[.012533782487056,.029741737730567],[.012436385938281,.029782595109573],[.012338856205805,.029823133540913],[.012241194334091,.029863352590452],[.012143401369021,.029903251827477],[.012045478357878,.029942830824699],[.011947426349339,.029982089158259],[.011849246393462,.030021026407731],[.011750939541676,.030059642156129],[.011652506846768,.030097935989909],[.011553949362874,.030135907498976],[.011455268145464,.030173556276684],[.011356464251335,.030210881919845],[.011257538738598,.030247884028732],[.011158492666665,.030284562207083],[.01105932709624,.030320916062102],[.010960043089307,.03035694520447],[.010860641709118,.030392649248343],[.010761124020182,.030428027811361],[.010661491088253,.030463080514646],[.010561743980319,.030497806982812],[.010461883764593,.030532206843968],[.010361911510496,.030566279729717],[.010261828288652,.030600025275167],[.010161635170872,.030633443118931],[.010061333230142,.030666532903129],[.009960923540617,.030699294273397],[.009860407177603,.030731726878888],[.00975978521755,.030763830372273],[.009659058738038,.03079560440975],[.009558228817767,.030827048651045],[.009457296536545,.030858162759415],[.009356262975275,.030888946401653],[.009255129215945,.030919399248091],[.009153896341616,.030949520972603],[.009052565436412,.030979311252611],[.008951137585505,.031008769769084],[.008849613875105,.031037896206544],[.008747995392451,.031066690253072],[.008646283225794,.031095151600306],[.00854447846439,.031123279943448],[.008442582198486,.031151074981266],[.00834059551931,.031178536416098],[.008238519519057,.031205663953853],[.008136355290878,.031232457304017],[.008034103928871,.031258916179656],[.007931766528065,.031285040297416],[.007829344184412,.031310829377528],[.007726837994772,.031336283143813],[.007624249056906,.03136140132368],[.007521578469457,.031386183648135],[.007418827331946,.031410629851778],[.007315996744755,.031434739672811],[.007213087809115,.031458512853036],[.007110101627101,.031481949137863],[.00700703930161,.031505048276306],[.006903901936357,.031527810020993],[.006800690635862,.031550234128164],[.006697406505433,.031572320357675],[.006594050651161,.031594068473],[.006490624179905,.031615478241233],[.006387128199278,.031636549433095],[.006283563817639,.031657281822929],[.00617993214408,.031677675188707],[.006076234288412,.031697729312034],[.005972471361157,.031717443978146],[.005868644473532,.031736818975914],[.00576475473744,.031755854097848],[.005660803265456,.031774549140098],[.005556791170816,.031792903902453],[.005452719567407,.03181091818835],[.005348589569753,.031828591804869],[.005244402293001,.031845924562742],[.005140158852914,.031862916276347],[.005035860365855,.031879566763717],[.004931507948778,.031895875846539],[.004827102719212,.031911843350155],[.004722645795254,.031927469103567],[.004618138295554,.031942752939435],[.004513581339303,.031957694694082],[.004408976046222,.031972294207493],[.004304323536549,.03198655132332],[.00419962493103,.032000465888879],[.004094881350902,.032014037755158],[.003990093917884,.032027266776813],[.003885263754166,.03204015281217],[.003780391982394,.032052695723232],[.003675479725661,.032064895375674],[.003570528107494,.032076751638847],[.003465538251839,.03208826438578],[.003360511283053,.032099433493181],[.003255448325892,.032110258841438],[.003150350505494,.032120740314619],[.003045218947373,.032130877800478],[.002940054777404,.032140671190449],[.00283485912181,.032150120379653],[.002729633107153,.032159225266897],[.002624377860318,.032167985754674],[.002519094508504,.032176401749168],[.002413784179212,.03218447316025],[.002308448000231,.032192199901481],[.002203087099626,.032199581890114],[.002097702605728,.032206619047093],[.001992295647121,.032213311297057],[.001886867352628,.032219658568338],[.001781418851302,.03222566079296],[.00167595127241,.032231317906644],[.001570465745428,.032236629848809],[.001464963400018,.032241596562566],[.001359445366028,.032246217994727],[.00125391277347,.032250494095799],[.001148366752513,.03225442481999],[.001042808433471,.032258010125204],[.000937238946789,.032261249973045],[.00083165942303,.032264144328817],[.000726070992868,.032266693161525],[.000620474787068,.032268896443871],[.000514871936481,.032270754152261],[.00040926357203,.032272266266801],[.000303650824695,.032273432771295],[.000198034825504,.032274253653254],[92416705518e-15,.032274728903884]],r.MDCT_TABLE_240=[[.091286604111815,.000298735779793],[.091247502481454,.002688238127538],[.091145864370807,.005075898091152],[.090981759437558,.00746007928776],[.09075530015103,.009839147718664],[.090466641715108,.012211472889198],[.090115981961863,.014575428926191],[.089703561215976,.016929395692256],[.089229662130024,.019271759896156],[.088694609490769,.02160091619847],[.088098769996564,.02391526831181],[.087442552006035,.026213230094844],[.086726405258214,.028493226639351],[.085950820564309,.030753695349588],[.085116329471329,.032993087013213],[.084223503897785,.035209866863042],[.083272955741727,.037402515628894],[.082265336461381,.039569530578832],[.08120133662867,.041709426549053],[.08008168545593,.043820736961749],[.078907150296148,.045902014830227],[.077678536117054,.047951833750597],[.076396684949434,.049968788879362],[.07506247531005,.051951497896226],[.073676821599542,.053898601951466],[.072240673475749,.055808766597225],[.070755015202858,.057680682702068],[.06922086497684,.059513067348201],[.067639274227625,.061304664710718],[.066011326898512,.063054246918278],[.064338138703282,.06476061489463],[.062620856361546,.066422599180399],[.060860656812842,.068039060734572],[.059058746410016,.069608891715145],[.05721636009245,.071131016238378],[.055334760539699,.072604391116154],[.053415237306106,.07402800657093],[.051459105937014,.075400886927784],[.049467707067153,.076722091283096],[.047442405501835,.077990714149396],[.045384589281588,.079205886075941],[.043295668730857,.080366774244592],[.041177075491445,.081472583040586],[.039030261541332,.08252255459781],[.036856698199564,.083515969318206],[.034657875117883,.084452146364948],[.032435299259796,.085330444129049],[.030190493867775,.086150260669096],[.027924997419306,.086911034123781],[.025640362572491,.087612243096981],[.023338155101933,.088253407015092],[.021019952825636,.08883408645639],[.018687344523641,.089353883452193],[.016341928849164,.089812441759604],[.013985313232951,.090209447105664],[.011619112781631,.09054462740274],[.009244949170797,.090817752935],[.006864449533597,.091028636515846],[.004479245345574,.091177133616206],[.002090971306534,.091263142463585]];},{}],11:[function(e,t,r){var n=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,64,72,80,88,96,108,120,132,144,156,172,188,212,240,276,320,384,448,512,576,640,704,768,832,896,960,1024]),i=new Uint16Array([0,4,8,12,16,20,24,32,40,48,64,92,128]),o=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,64,72,80,88,100,112,124,140,156,172,192,216,240,268,304,344,384,424,464,504,544,584,624,664,704,744,784,824,864,904,944,984,1024]),a=new Uint16Array([0,4,8,12,16,20,24,32,40,48,64,92,128]),s=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,48,56,64,72,80,88,96,108,120,132,144,160,176,196,216,240,264,292,320,352,384,416,448,480,512,544,576,608,640,672,704,736,768,800,832,864,896,928,1024]),d=new Uint16Array([0,4,8,12,16,20,28,36,44,56,68,80,96,112,128]),c=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,48,56,64,72,80,88,96,108,120,132,144,160,176,196,216,240,264,292,320,352,384,416,448,480,512,544,576,608,640,672,704,736,768,800,832,864,896,928,960,992,1024]),f=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,44,52,60,68,76,84,92,100,108,116,124,136,148,160,172,188,204,220,240,260,284,308,336,364,396,432,468,508,552,600,652,704,768,832,896,960,1024]),u=new Uint16Array([0,4,8,12,16,20,24,28,36,44,52,64,76,92,108,128]),l=new Uint16Array([0,8,16,24,32,40,48,56,64,72,80,88,100,112,124,136,148,160,172,184,196,212,228,244,260,280,300,320,344,368,396,424,456,492,532,572,616,664,716,772,832,896,960,1024]),p=new Uint16Array([0,4,8,12,16,20,24,28,32,40,48,60,72,88,108,128]),h=new Uint16Array([0,12,24,36,48,60,72,84,96,108,120,132,144,156,172,188,204,220,236,252,268,288,308,328,348,372,396,420,448,476,508,544,580,620,664,712,764,820,880,944,1024]),g=new Uint16Array([0,4,8,12,16,20,24,28,36,44,52,60,72,88,108,128]);r.SWB_OFFSET_1024=[n,n,o,s,s,c,f,f,l,l,l,h],r.SWB_OFFSET_128=[i,i,a,d,d,d,u,u,p,p,p,g],r.SWB_SHORT_WINDOW_COUNT=new Uint8Array([12,12,12,14,14,14,15,15,15,15,15,15]),r.SWB_LONG_WINDOW_COUNT=new Uint8Array([41,41,47,49,49,51,47,47,43,43,43,40]),r.SCALEFACTOR_TABLE=function(){for(var e=new Float32Array(428),t=0;t<428;t++)e[t]=Math.pow(2,(t-200)/4);return e;}(),r.IQ_TABLE=function(){for(var e=new Float32Array(8191),t=0;t<8191;t++)e[t]=Math.pow(t,1.3333333333333333);return e;}(),r.SAMPLE_RATES=new Int32Array([96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]);},{}],12:[function(e,t,r){function n(e){this.maxBands=d[e.sampleIndex],this.nFilt=new Int32Array(8),this.length=new Array(8),this.direction=new Array(8),this.order=new Array(8),this.coef=new Array(8);for(var t=0;t<8;t++){this.length[t]=new Int32Array(4),this.direction[t]=new Array(4),this.order[t]=new Int32Array(4),this.coef[t]=new Array(4);for(var r=0;r<4;r++)this.coef[t][r]=new Float32Array(i);}this.lpc=new Float32Array(i),this.tmp=new Float32Array(i);}var i=20,o=[1,4,3],a=[2,6,5],s=[[0,-.43388373,-.7818315,-.9749279,.98480773,.86602539,.64278758,.34202015],[0,-.2079117,-.40673664,-.58778524,-.74314481,-.86602539,-.95105654,-.99452192,.99573416,.96182561,.8951633,.7980172,.67369562,.52643216,.36124167,.18374951],[0,-.43388373,.64278758,.34202015],[0,-.2079117,-.40673664,-.58778524,.67369562,.52643216,.36124167,.18374951]],d=[31,31,34,40,42,51,46,46,42,42,42,39,39];n.prototype.decode=function(e,t){for(var r=t.windowCount,n=2===t.windowSequence?o:a,i=0;i<r;i++)if(this.nFilt[i]=e.read(n[0]))for(var d=e.read(1),c=this.nFilt[i],f=this.length[i],u=this.order[i],l=this.direction[i],p=this.coef[i],h=0;h<c;h++){if(f[h]=e.read(n[1]),(u[h]=e.read(n[2]))>20)throw new Error("TNS filter out of range: "+u[h]);if(u[h]){l[h]=!!e.read(1);for(var g=e.read(1),y=d+3-g,b=s[2*g+d],m=u[h],v=p[h],S=0;S<m;S++)v[S]=b[e.read(y)];}}},n.prototype.process=function(e,t,r){for(var n=Math.min(this.maxBands,e.maxSFB),i=this.lpc,o=this.tmp,a=e.info,s=a.windowCount,d=0;d<s;d++)for(var c=a.swbCount,f=this.nFilt[d],u=this.length[d],l=this.order[d],p=this.coef[d],h=this.direction[d],g=0;g<f;g++){var y=c,b=(c=Math.max(0,o-u[g]),l[g]);if(0!==b){for(var m=p[g],v=0;v<b;v++){var S=-m[v];i[v]=S;for(var k=0,C=v+1>>1;k<C;k++){var T=i[k],P=i[v-1-k];i[k]=T+S*P,i[v-1-k]=P+S*T;}}var _,w=a.swbOffsets[Math.min(c,n)],O=a.swbOffsets[Math.min(y,n)],M=1;if(!((_=O-w)<=0))if(h[g]&&(M=-1,w=O-1),w+=128*d,r)for(var I=0;I<_;I++,w+=M)for(v=1;v<=Math.min(I,b);v++)t[w]-=t[w-v*M]*i[v-1];else for(I=0;I<_;I++,w+=M){o[0]=t[w];for(v=1;v<=Math.min(I,b);v++)t[w]+=o[v]*i[v-1];for(v=b;v>0;v--)o[v]=o[v-1];}}}},t.exports=n;},{}]},{},[4]),YUVCanvas_function=function(){!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.YUVCanvas=t();}(this,function(){function e(e){e=e||{},this.canvasElement=e.canvas||document.createElement("canvas"),this.contextOptions=e.contextOptions,this.type=e.type||"yuv420",this.customYUV444=e.customYUV444,this.width=e.width||640,this.height=e.height||320,this.animationTime=e.animationTime||0,this.canvasElement.width=this.width,this.canvasElement.height=this.height,this.initContextGL(),this.contextGL&&(this.initProgram(),this.initBuffers(),this.initTextures()),"yuv420"===this.type?this.drawNextOuptutPictureGL=function(e){var t=this.contextGL,r=this.texturePosBuffer,n=this.uTexturePosBuffer,i=this.vTexturePosBuffer,o=this.yTextureRef,a=this.uTextureRef,s=this.vTextureRef,d=e.yData,c=e.uData,f=e.vData,u=this.width,l=this.height,p=e.yDataPerRow||u,h=e.yRowCnt||l,g=e.uDataPerRow||u/2,y=e.uRowCnt||l/2,b=e.vDataPerRow||g,m=e.vRowCnt||y;t.viewport(0,0,u,l);var v=l/h,S=u/p,k=new Float32Array([S,0,0,0,S,v,0,v]);t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,k,t.DYNAMIC_DRAW),this.customYUV444?(v=l/y,S=u/g):(v=l/2/y,S=u/2/g);var C=new Float32Array([S,0,0,0,S,v,0,v]);t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,C,t.DYNAMIC_DRAW),this.customYUV444?(v=l/m,S=u/b):(v=l/2/m,S=u/2/b);var T=new Float32Array([S,0,0,0,S,v,0,v]);t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,T,t.DYNAMIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,o),t.texImage2D(t.TEXTURE_2D,0,t.LUMINANCE,p,h,0,t.LUMINANCE,t.UNSIGNED_BYTE,d),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,a),t.texImage2D(t.TEXTURE_2D,0,t.LUMINANCE,g,y,0,t.LUMINANCE,t.UNSIGNED_BYTE,c),t.activeTexture(t.TEXTURE2),t.bindTexture(t.TEXTURE_2D,s),t.texImage2D(t.TEXTURE_2D,0,t.LUMINANCE,b,m,0,t.LUMINANCE,t.UNSIGNED_BYTE,f),t.drawArrays(t.TRIANGLE_STRIP,0,4);}:"yuv422"===this.type&&(this.drawNextOuptutPictureGL=function(e){var t=this.contextGL,r=this.texturePosBuffer,n=this.textureRef,i=e.data,o=this.width,a=this.height,s=e.dataPerRow||2*o,d=e.rowCnt||a;t.viewport(0,0,o,a);var c=a/d,f=o/(s/2),u=new Float32Array([f,0,0,0,f,c,0,c]);t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,u,t.DYNAMIC_DRAW),t.uniform2f(t.getUniformLocation(this.shaderProgram,"resolution"),s,a),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.LUMINANCE,s,d,0,t.LUMINANCE,t.UNSIGNED_BYTE,i),t.drawArrays(t.TRIANGLE_STRIP,0,4);});}return e.prototype.isWebGL=function(){return this.contextGL;},e.prototype.initContextGL=function(){for(var e=this.canvasElement,t=null,r=["webgl","experimental-webgl","moz-webgl","webkit-3d"],n=0;!t&&n<r.length;){var i=r[n];try{t=this.contextOptions?e.getContext(i,this.contextOptions):e.getContext(i);}catch(e){t=null;}t&&"function"==typeof t.getParameter||(t=null),++n;}this.contextGL=t;},e.prototype.initProgram=function(){var e,t,r=this.contextGL;"yuv420"===this.type?(e=["attribute vec4 vertexPos;","attribute vec4 texturePos;","attribute vec4 uTexturePos;","attribute vec4 vTexturePos;","varying vec2 textureCoord;","varying vec2 uTextureCoord;","varying vec2 vTextureCoord;","void main()","{","  gl_Position = vertexPos;","  textureCoord = texturePos.xy;","  uTextureCoord = uTexturePos.xy;","  vTextureCoord = vTexturePos.xy;","}"].join("\n"),t=["precision highp float;","varying highp vec2 textureCoord;","varying highp vec2 uTextureCoord;","varying highp vec2 vTextureCoord;","uniform sampler2D ySampler;","uniform sampler2D uSampler;","uniform sampler2D vSampler;","const mat4 YUV2RGB = mat4","(","  1.1643828125, 0, 1.59602734375, -.87078515625,","  1.1643828125, -.39176171875, -.81296875, .52959375,","  1.1643828125, 2.017234375, 0, -1.081390625,","  0, 0, 0, 1",");","void main(void) {","  highp float y = texture2D(ySampler,  textureCoord).r;","  highp float u = texture2D(uSampler,  uTextureCoord).r;","  highp float v = texture2D(vSampler,  vTextureCoord).r;","  gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;","}"].join("\n")):"yuv422"===this.type&&(e=["attribute vec4 vertexPos;","attribute vec4 texturePos;","varying vec2 textureCoord;","void main()","{","  gl_Position = vertexPos;","  textureCoord = texturePos.xy;","}"].join("\n"),t=["precision highp float;","varying highp vec2 textureCoord;","uniform sampler2D sampler;","uniform highp vec2 resolution;","const mat4 YUV2RGB = mat4","(","  1.1643828125, 0, 1.59602734375, -.87078515625,","  1.1643828125, -.39176171875, -.81296875, .52959375,","  1.1643828125, 2.017234375, 0, -1.081390625,","  0, 0, 0, 1",");","void main(void) {","  highp float texPixX = 1.0 / resolution.x;","  highp float logPixX = 2.0 / resolution.x;","  highp float logHalfPixX = 4.0 / resolution.x;","  highp float steps = floor(textureCoord.x / logPixX);","  highp float uvSteps = floor(textureCoord.x / logHalfPixX);","  highp float y = texture2D(sampler, vec2((logPixX * steps) + texPixX, textureCoord.y)).r;","  highp float u = texture2D(sampler, vec2((logHalfPixX * uvSteps), textureCoord.y)).r;","  highp float v = texture2D(sampler, vec2((logHalfPixX * uvSteps) + texPixX + texPixX, textureCoord.y)).r;","  gl_FragColor = vec4(y, u, v, 1.0) * YUV2RGB;","}"].join("\n"));var n=r.createShader(r.VERTEX_SHADER);r.shaderSource(n,e),r.compileShader(n),r.getShaderParameter(n,r.COMPILE_STATUS)||console.log("Vertex shader failed to compile: "+r.getShaderInfoLog(n));var i=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(i,t),r.compileShader(i),r.getShaderParameter(i,r.COMPILE_STATUS)||console.log("Fragment shader failed to compile: "+r.getShaderInfoLog(i));var o=r.createProgram();r.attachShader(o,n),r.attachShader(o,i),r.linkProgram(o),r.getProgramParameter(o,r.LINK_STATUS)||console.log("Program failed to compile: "+r.getProgramInfoLog(o)),r.useProgram(o),this.shaderProgram=o;},e.prototype.initBuffers=function(){var e=this.contextGL,t=this.shaderProgram,r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),e.STATIC_DRAW);var n=e.getAttribLocation(t,"vertexPos");if(e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),this.animationTime){var i=this.animationTime,o=0,a=function(){var r=1*(o+=15)/i;o>=i?r=1:setTimeout(a,15);var n=-1*r,s=1*r,d=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,d),e.bufferData(e.ARRAY_BUFFER,new Float32Array([s,s,n,s,s,n,n,n]),e.STATIC_DRAW);var c=e.getAttribLocation(t,"vertexPos");e.enableVertexAttribArray(c),e.vertexAttribPointer(c,2,e.FLOAT,!1,0,0);try{e.drawArrays(e.TRIANGLE_STRIP,0,4);}catch(e){}};a();}var s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var d=e.getAttribLocation(t,"texturePos");if(e.enableVertexAttribArray(d),e.vertexAttribPointer(d,2,e.FLOAT,!1,0,0),this.texturePosBuffer=s,"yuv420"===this.type){var c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var f=e.getAttribLocation(t,"uTexturePos");e.enableVertexAttribArray(f),e.vertexAttribPointer(f,2,e.FLOAT,!1,0,0),this.uTexturePosBuffer=c;var u=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var l=e.getAttribLocation(t,"vTexturePos");e.enableVertexAttribArray(l),e.vertexAttribPointer(l,2,e.FLOAT,!1,0,0),this.vTexturePosBuffer=u;}},e.prototype.initTextures=function(){var e=this.contextGL,t=this.shaderProgram;if("yuv420"===this.type){var r=this.initTexture(),n=e.getUniformLocation(t,"ySampler");e.uniform1i(n,0),this.yTextureRef=r;var i=this.initTexture(),o=e.getUniformLocation(t,"uSampler");e.uniform1i(o,1),this.uTextureRef=i;var a=this.initTexture(),s=e.getUniformLocation(t,"vSampler");e.uniform1i(s,2),this.vTextureRef=a;}else if("yuv422"===this.type){var d=this.initTexture(),c=e.getUniformLocation(t,"sampler");e.uniform1i(c,0),this.textureRef=d;}},e.prototype.initTexture=function(){var e=this.contextGL,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),t;},e.prototype.drawNextOutputPicture=function(e,t,r,n){this.contextGL?this.drawNextOuptutPictureGL(e,t,r,n):this.drawNextOuptutPictureRGBA(e,t,r,n);},e.prototype.drawNextOuptutPictureRGBA=function(e,t,r,n){var i=n,o=this.canvasElement.getContext("2d"),a=o.getImageData(0,0,e,t);a.data.set(i),o.putImageData(a,0,0);},e;});},YUVCanvas_function();var decodeUrl="";function myonkeydown(e){let t=keyboard.key_dictionary[e.keyCode];return redfinger.websock&&void 0!==t&&keyboard.joystick_flag===keyboard.on&&redfinger.sendKeyDown(t),!1;}function myonkeyup(e){let t=keyboard.key_dictionary[e.keyCode];return redfinger.websock&&void 0!==t&&keyboard.joystick_flag===keyboard.on&&(redfinger.sendKeyUp(t),e.keyCode),!1;}!function(e,t){"function"==typeof define&&define.amd?define(["./Decoder","./YUVCanvas"],t):"object"==typeof exports?module.exports=t(require("./Decoder"),require("./YUVCanvas")):e.Player=t(e.Decoder,e.YUVCanvas);}(this,function(e,t){"use strict";var r=function(t){var r=this;this._config=t||{},this.render=!0,!1===this._config.render&&(this.render=!1),this._config.workerFile=this._config.workerFile||"Decoder.js",this._config.preserveDrawingBuffer&&(this._config.contextOptions=this._config.contextOptions||{},this._config.contextOptions.preserveDrawingBuffer=!0);var n="auto";if(!0===this._config.webgl?n=!0:!1===this._config.webgl&&(n=!1),"auto"==n){n=!0;try{if(window.WebGLRenderingContext){var i=document.createElement("canvas");i.getContext("webgl")||i.getContext("experimental-webgl")||(n=!1);}else n=!1;}catch(e){n=!1;}}this.webgl=n,this.webgl?(this.createCanvasObj=this.createCanvasWebGL,this.renderFrame=this.renderFrameWebGL):(this.createCanvasObj=this.createCanvasRGB,this.renderFrame=this.renderFrameRGB);var o=function(e,t,n,i){r.onPictureDecoded(e,t,n,i),e&&r.render&&(r.renderFrame({canvasObj:r.canvasObj,data:e,width:t,height:n}),r.onRenderFrameComplete&&r.onRenderFrameComplete({data:e,width:t,height:n,infos:i,canvasObj:r.canvasObj}));};this._config.size||(this._config.size={}),this._config.size.width=this._config.size.width||200,this._config.size.height=this._config.size.height||200,this._config.useWorker?(redfinger.decodeWorker=new Worker(decodeUrl),this.worker=redfinger.decodeWorker,redfinger.decodeWorker.addEventListener("message",function(e){var t=e.data;t.consoleLog||(t.decode_tag?vData&&vData.length>0?DecoderFetchFrameData(vData.shift()):inDecode=!1:o.call(r,new Uint8Array(t.buf,0,t.length),t.width,t.height,t.infos));},!1),redfinger.decodeWorker.postMessage({type:"Broadway.js - Worker init",options:{rgb:!n,memsize:this.memsize,reuseMemory:!!this._config.reuseMemory}}),this._config.transferMemory=!0,this._config.transferMemory?this.decode=function(e,t){redfinger.decodeWorker.postMessage({buf:e.buffer,offset:e.byteOffset,length:e.length,info:t},[e.buffer]);}:this.decode=function(e,t){var r=new Uint8Array(e.length);r.set(e,0,e.length),redfinger.decodeWorker.postMessage({buf:r.buffer,offset:0,length:e.length,info:t},[r.buffer]);},this._config.reuseMemory&&(this.recycleMemory=function(e){redfinger.decodeWorker.postMessage({reuse:e.buffer},[e.buffer]);})):(this.decoder=new e({rgb:!n}),this.decoder.onPictureDecoded=o,this.decode=function(e,t){r.decoder.decode(e,t);}),this.render&&(this.canvasObj=this.createCanvasObj({contextOptions:this._config.contextOptions}),this.canvas=this.canvasObj.canvas),this.domNode=this.canvas,this._config.size.width,this._config.size.height;};return r.prototype={onPictureDecoded:function(e,t,r,n){},recycleMemory:function(e){},createCanvasWebGL:function(e){var t=this._createBasicCanvasObj(e);return t.contextOptions=e.contextOptions,t;},createCanvasRGB:function(e){return this._createBasicCanvasObj(e);},_createBasicCanvasObj:function(e){var t={},r=(e=e||{}).width;r||(r=this._config.size.width);var n=e.height;return n||(n=this._config.size.height),t.canvas=document.createElement("canvas"),t.canvas.id="redPhone",t.canvas.width=r,t.canvas.height=n,t.canvas.style.backgroundColor=redfinger.backgroundColor,t;},renderFrameWebGL:function(e){if(startTime=new Date(),!redfinger.onWarmup()){var r=e.canvasObj,n=e.width||r.canvas.width,i=e.height||r.canvas.height;n==redfinger.videoinfo.width&&i==redfinger.videoinfo.height||(redfinger.videoinfo.width=n,redfinger.videoinfo.height=i,redfinger.resizePhone()),r.canvas.width===n&&r.canvas.height===i&&r.webGLCanvas||(r.canvas.width=n,r.canvas.height=i,r.webGLCanvas=new t({canvas:r.canvas,contextOptions:r.contextOptions,width:n,height:i}));var o=n*i,a=n/2*(i/2);r.webGLCanvas.drawNextOutputPicture({yData:e.data.subarray(0,o),uData:e.data.subarray(o,o+a),vData:e.data.subarray(o+a,o+a+a)});this.recycleMemory(e.data),redfinger.onDrawed();}},renderFrameRGB:function(e){if(!redfinger.onWarmup()){var t=e.canvasObj,r=e.width||t.canvas.width,n=e.height||t.canvas.height;r==redfinger.videoinfo.width&&n==redfinger.videoinfo.height||(redfinger.videoinfo.width=r,redfinger.videoinfo.height=n,redfinger.resizePhone()),t.canvas.width===r&&t.canvas.height===n||(t.canvas.width=r,t.canvas.height=n);var i=t.ctx,o=t.imgData;i||(t.ctx=t.canvas.getContext("2d"),i=t.ctx,t.imgData=i.createImageData(r,n),o=t.imgData),o.data.set(e.data);for(var a=0;a<o.data.length;a+=4){var s=o.data[a+0],d=o.data[a+1],c=o.data[a+2];o.data[a+3];s+=20,d+=40,c+=40,o.data[a+0]=s,o.data[a+1]=d,o.data[a+2]=c;}i.putImageData(o,0,0);this.recycleMemory(e.data),redfinger.onDrawed();}}},r;}),window.keyboard={},keyboard.version="1.0.0",redfinger.initLoginPoint={firstKeyDown:!0,x:.3754,y:.64},keyboard.map=new HashMap(),keyboard.key_refer=new HashMap(),keyboard.key_refer.put("a",65),keyboard.key_refer.put("b",66),keyboard.key_refer.put("c",67),keyboard.key_refer.put("d",68),keyboard.key_refer.put("e",69),keyboard.key_refer.put("f",70),keyboard.key_refer.put("g",71),keyboard.key_refer.put("h",72),keyboard.key_refer.put("i",73),keyboard.key_refer.put("j",74),keyboard.key_refer.put("k",75),keyboard.key_refer.put("l",76),keyboard.key_refer.put("m",77),keyboard.key_refer.put("n",78),keyboard.key_refer.put("o",79),keyboard.key_refer.put("p",80),keyboard.key_refer.put("q",81),keyboard.key_refer.put("r",82),keyboard.key_refer.put("s",83),keyboard.key_refer.put("t",84),keyboard.key_refer.put("u",85),keyboard.key_refer.put("v",86),keyboard.key_refer.put("w",87),keyboard.key_refer.put("x",88),keyboard.key_refer.put("y",89),keyboard.key_refer.put("z",90),keyboard.key_refer.put("A",65),keyboard.key_refer.put("B",66),keyboard.key_refer.put("C",67),keyboard.key_refer.put("D",68),keyboard.key_refer.put("E",69),keyboard.key_refer.put("F",70),keyboard.key_refer.put("G",71),keyboard.key_refer.put("H",72),keyboard.key_refer.put("I",73),keyboard.key_refer.put("J",74),keyboard.key_refer.put("K",75),keyboard.key_refer.put("L",76),keyboard.key_refer.put("M",77),keyboard.key_refer.put("N",78),keyboard.key_refer.put("O",79),keyboard.key_refer.put("P",80),keyboard.key_refer.put("Q",81),keyboard.key_refer.put("R",82),keyboard.key_refer.put("S",83),keyboard.key_refer.put("T",84),keyboard.key_refer.put("U",85),keyboard.key_refer.put("V",86),keyboard.key_refer.put("W",87),keyboard.key_refer.put("X",88),keyboard.key_refer.put("Y",89),keyboard.key_refer.put("Z",90),keyboard.key_refer.put("meta",91),keyboard.key_refer.put("meta2",93),keyboard.key_refer.put("[",219),keyboard.key_refer.put("\\",220),keyboard.key_refer.put("]",221),keyboard.key_refer.put(";",186),keyboard.key_refer.put("'",222),keyboard.key_refer.put(",",188),keyboard.key_refer.put("=",187),keyboard.key_refer.put("-",189),keyboard.key_refer.put(".",190),keyboard.key_refer.put("/",191),keyboard.key_refer.put("enter",13),keyboard.key_refer.put("shift",16),keyboard.key_refer.put("ctrl",17),keyboard.key_refer.put("alt",18),keyboard.key_refer.put("caps",20),keyboard.key_refer.put("back",8),keyboard.key_refer.put("tab",9),keyboard.key_refer.put("space",32),keyboard.key_refer.put("insert",45),keyboard.key_refer.put("home",36),keyboard.key_refer.put("pgup",33),keyboard.key_refer.put("pgdn",34),keyboard.key_refer.put("end",35),keyboard.key_refer.put("del",46),keyboard.key_refer.put("0",48),keyboard.key_refer.put("1",49),keyboard.key_refer.put("2",50),keyboard.key_refer.put("3",51),keyboard.key_refer.put("4",52),keyboard.key_refer.put("5",53),keyboard.key_refer.put("6",54),keyboard.key_refer.put("7",55),keyboard.key_refer.put("8",56),keyboard.key_refer.put("9",57),keyboard.key_refer.put("`",192),keyboard.key_refer.put("esc",27),keyboard.key_refer.put("up",38),keyboard.key_refer.put("down",40),keyboard.key_refer.put("lt",37),keyboard.key_refer.put("rt",39),keyboard.key_refer.put("F1",112),keyboard.key_refer.put("F2",113),keyboard.key_refer.put("F3",114),keyboard.key_refer.put("F4",115),keyboard.key_refer.put("F5",116),keyboard.key_refer.put("F6",117),keyboard.key_refer.put("F7",118),keyboard.key_refer.put("F8",119),keyboard.key_refer.put("F9",120),keyboard.key_refer.put("F10",121),keyboard.key_refer.put("F11",122),keyboard.key_refer.put("F12",123),keyboard.key_refer.put("left",400),keyboard.key_refer.put("right",401),keyboard.androidkey={},keyboard.androidkey.KEY_RESERVED=0,keyboard.androidkey.KEY_ESC=1,keyboard.androidkey.KEY_1=2,keyboard.androidkey.KEY_2=3,keyboard.androidkey.KEY_3=4,keyboard.androidkey.KEY_4=5,keyboard.androidkey.KEY_5=6,keyboard.androidkey.KEY_6=7,keyboard.androidkey.KEY_7=8,keyboard.androidkey.KEY_8=9,keyboard.androidkey.KEY_9=10,keyboard.androidkey.KEY_0=11,keyboard.androidkey.KEY_MINUS=12,keyboard.androidkey.KEY_EQUAL=13,keyboard.androidkey.KEY_BACKSPACE=14,keyboard.androidkey.KEY_TAB=15,keyboard.androidkey.KEY_Q=16,keyboard.androidkey.KEY_W=17,keyboard.androidkey.KEY_E=18,keyboard.androidkey.KEY_R=19,keyboard.androidkey.KEY_T=20,keyboard.androidkey.KEY_Y=21,keyboard.androidkey.KEY_U=22,keyboard.androidkey.KEY_I=23,keyboard.androidkey.KEY_O=24,keyboard.androidkey.KEY_P=25,keyboard.androidkey.KEY_LEFTBRACE=26,keyboard.androidkey.KEY_RIGHTBRACE=27,keyboard.androidkey.KEY_ENTER=28,keyboard.androidkey.KEY_LEFTCTRL=29,keyboard.androidkey.KEY_A=30,keyboard.androidkey.KEY_S=31,keyboard.androidkey.KEY_D=32,keyboard.androidkey.KEY_F=33,keyboard.androidkey.KEY_G=34,keyboard.androidkey.KEY_H=35,keyboard.androidkey.KEY_J=36,keyboard.androidkey.KEY_K=37,keyboard.androidkey.KEY_L=38,keyboard.androidkey.KEY_SEMICOLON=39,keyboard.androidkey.KEY_APOSTROPHE=40,keyboard.androidkey.KEY_GRAVE=41,keyboard.androidkey.KEY_LEFTSHIFT=42,keyboard.androidkey.KEY_BACKSLASH=43,keyboard.androidkey.KEY_Z=44,keyboard.androidkey.KEY_X=45,keyboard.androidkey.KEY_C=46,keyboard.androidkey.KEY_V=47,keyboard.androidkey.KEY_B=48,keyboard.androidkey.KEY_N=49,keyboard.androidkey.KEY_M=50,keyboard.androidkey.KEY_COMMA=51,keyboard.androidkey.KEY_DOT=52,keyboard.androidkey.KEY_SLASH=53,keyboard.androidkey.KEY_RIGHTSHIFT=54,keyboard.androidkey.KEY_KPASTERISK=55,keyboard.androidkey.KEY_LEFTALT=56,keyboard.androidkey.KEY_SPACE=57,keyboard.androidkey.KEY_CAPSLOCK=58,keyboard.androidkey.KEY_F1=59,keyboard.androidkey.KEY_F2=60,keyboard.androidkey.KEY_F3=61,keyboard.androidkey.KEY_F4=62,keyboard.androidkey.KEY_F5=63,keyboard.androidkey.KEY_F6=64,keyboard.androidkey.KEY_F7=65,keyboard.androidkey.KEY_F8=66,keyboard.androidkey.KEY_F9=67,keyboard.androidkey.KEY_F10=68,keyboard.androidkey.KEY_NUMLOCK=69,keyboard.androidkey.KEY_SCROLLLOCK=70,keyboard.androidkey.KEY_KP7=71,keyboard.androidkey.KEY_KP_UP=72,keyboard.androidkey.KEY_KP9=73,keyboard.androidkey.KEY_KPMINUS=74,keyboard.androidkey.KEY_KP_LEFT=75,keyboard.androidkey.KEY_KP5=76,keyboard.androidkey.KEY_KP_RIGHT=77,keyboard.androidkey.KEY_KPPLUS=78,keyboard.androidkey.KEY_KP1=79,keyboard.androidkey.KEY_KP_DOWN=80,keyboard.androidkey.KEY_KP3=81,keyboard.androidkey.KEY_KP0=82,keyboard.androidkey.KEY_KPDOT=83,keyboard.androidkey.KEY_ZENKAKUHANKAKU=85,keyboard.androidkey.KEY_102ND=86,keyboard.androidkey.KEY_F11=87,keyboard.androidkey.KEY_F12=88,keyboard.androidkey.KEY_RO=89,keyboard.androidkey.KEY_KATAKANA=90,keyboard.androidkey.KEY_HIRAGANA=91,keyboard.androidkey.KEY_HENKAN=92,keyboard.androidkey.KEY_KATAKANAHIRAGANA=93,keyboard.androidkey.KEY_MUHENKAN=94,keyboard.androidkey.KEY_KPJPCOMMA=95,keyboard.androidkey.KEY_KPENTER=96,keyboard.androidkey.KEY_RIGHTCTRL=97,keyboard.androidkey.KEY_KPSLASH=98,keyboard.androidkey.KEY_SYSRQ=99,keyboard.androidkey.KEY_RIGHTALT=100,keyboard.androidkey.KEY_LINEFEED=101,keyboard.androidkey.KEY_HOME=102,keyboard.androidkey.KEY_UP=103,keyboard.androidkey.KEY_PAGEUP=104,keyboard.androidkey.KEY_LEFT=105,keyboard.androidkey.KEY_RIGHT=106,keyboard.androidkey.KEY_END=107,keyboard.androidkey.KEY_DOWN=108,keyboard.androidkey.KEY_PAGEDOWN=109,keyboard.androidkey.KEY_INSERT=110,keyboard.androidkey.KEY_DELETE=111,keyboard.androidkey.KEY_MACRO=112,keyboard.androidkey.KEY_MUTE=113,keyboard.androidkey.KEY_VOLUMEDOWN=114,keyboard.androidkey.KEY_VOLUMEUP=115,keyboard.androidkey.KEY_POWER=116,keyboard.androidkey.KEY_KPEQUAL=117,keyboard.androidkey.KEY_KPPLUSMINUS=118,keyboard.androidkey.KEY_PAUSE=119,keyboard.androidkey.KEY_KPCOMMA=121,keyboard.androidkey.KEY_HANGEUL=122,keyboard.androidkey.KEY_HANJA=123,keyboard.androidkey.KEY_YEN=124,keyboard.androidkey.KEY_LEFTMETA=125,keyboard.androidkey.KEY_RIGHTMETA=126,keyboard.androidkey.KEY_COMPOSE=127,keyboard.androidkey.KEY_STOP=128,keyboard.androidkey.KEY_AGAIN=129,keyboard.androidkey.KEY_PROPS=130,keyboard.androidkey.KEY_UNDO=131,keyboard.androidkey.KEY_FRONT=132,keyboard.androidkey.KEY_COPY=133,keyboard.androidkey.KEY_OPEN=134,keyboard.androidkey.KEY_PASTE=135,keyboard.androidkey.KEY_FIND=136,keyboard.androidkey.KEY_CUT=137,keyboard.androidkey.KEY_HELP=138,keyboard.androidkey.KEY_MENU=139,keyboard.androidkey.KEY_CALC=140,keyboard.androidkey.KEY_SETUP=141,keyboard.androidkey.KEY_SLEEP=142,keyboard.androidkey.KEY_WAKEUP=143,keyboard.androidkey.KEY_FILE=144,keyboard.androidkey.KEY_SENDFILE=145,keyboard.androidkey.KEY_DELETEFILE=146,keyboard.androidkey.KEY_XFER=147,keyboard.androidkey.KEY_PROG1=148,keyboard.androidkey.KEY_PROG2=149,keyboard.androidkey.KEY_WWW=150,keyboard.androidkey.KEY_MSDOS=151,keyboard.androidkey.KEY_COFFEE=152,keyboard.androidkey.KEY_DIRECTION=153,keyboard.androidkey.KEY_CYCLEWINDOWS=154,keyboard.androidkey.KEY_MAIL=155,keyboard.androidkey.KEY_BOOKMARKS=156,keyboard.androidkey.KEY_COMPUTER=157,keyboard.androidkey.KEY_BACK=158,keyboard.androidkey.KEY_FORWARD=159,keyboard.androidkey.KEY_CLOSECD=160,keyboard.androidkey.KEY_EJECTCD=161,keyboard.androidkey.KEY_EJECTCLOSECD=162,keyboard.androidkey.KEY_NEXTSONG=163,keyboard.androidkey.KEY_PLAYPAUSE=164,keyboard.androidkey.KEY_PREVIOUSSONG=165,keyboard.androidkey.KEY_STOPCD=166,keyboard.androidkey.KEY_RECORD=167,keyboard.androidkey.KEY_REWIND=168,keyboard.androidkey.KEY_PHONE=169,keyboard.androidkey.KEY_ISO=170,keyboard.androidkey.KEY_CONFIG=171,keyboard.androidkey.KEY_HOMEPAGE=172,keyboard.androidkey.KEY_REFRESH=173,keyboard.androidkey.KEY_EXIT=174,keyboard.androidkey.KEY_MOVE=175,keyboard.androidkey.KEY_EDIT=176,keyboard.androidkey.KEY_SCROLLUP=177,keyboard.androidkey.KEY_SCROLLDOWN=178,keyboard.androidkey.KEY_KPLEFTPAREN=179,keyboard.androidkey.KEY_KPRIGHTPAREN=180,keyboard.androidkey.KEY_NEW=181,keyboard.androidkey.KEY_REDO=182,keyboard.androidkey.KEY_F13=183,keyboard.androidkey.KEY_F14=184,keyboard.androidkey.KEY_F15=185,keyboard.androidkey.KEY_F16=186,keyboard.androidkey.KEY_F17=187,keyboard.androidkey.KEY_F18=188,keyboard.androidkey.KEY_F19=189,keyboard.androidkey.KEY_F20=190,keyboard.androidkey.KEY_F21=191,keyboard.androidkey.KEY_F22=192,keyboard.androidkey.KEY_F23=193,keyboard.androidkey.KEY_F24=194,keyboard.androidkey.KEY_PLAYCD=200,keyboard.androidkey.KEY_PAUSECD=201,keyboard.androidkey.KEY_PROG3=202,keyboard.androidkey.KEY_PROG4=203,keyboard.androidkey.KEY_SUSPEND=205,keyboard.androidkey.KEY_CLOSE=206,keyboard.androidkey.KEY_PLAY=207,keyboard.androidkey.KEY_FASTFORWARD=208,keyboard.androidkey.KEY_BASSBOOST=209,keyboard.androidkey.KEY_PRINT=210,keyboard.androidkey.KEY_HP=211,keyboard.androidkey.KEY_CAMERA=212,keyboard.androidkey.KEY_SOUND=213,keyboard.androidkey.KEY_QUESTION=214,keyboard.androidkey.KEY_EMAIL=215,keyboard.androidkey.KEY_CHAT=216,keyboard.androidkey.KEY_SEARCH=217,keyboard.androidkey.KEY_CONNECT=218,keyboard.androidkey.KEY_FINANCE=219,keyboard.androidkey.KEY_SPORT=220,keyboard.androidkey.KEY_SHOP=221,keyboard.androidkey.KEY_ALTERASE=222,keyboard.androidkey.KEY_CANCEL=223,keyboard.androidkey.KEY_BRIGHTNESSDOWN=224,keyboard.androidkey.KEY_BRIGHTNESSUP=225,keyboard.androidkey.KEY_MEDIA=226,keyboard.androidkey.KEY_STAR=227,keyboard.androidkey.KEY_SHARP=228,keyboard.androidkey.KEY_SOFT1=229,keyboard.androidkey.KEY_SOFT2=230,keyboard.androidkey.KEY_SEND=231,keyboard.androidkey.KEY_CENTER=232,keyboard.androidkey.KEY_HEADSETHOOK=233,keyboard.androidkey.KEY_0_5=234,keyboard.androidkey.KEY_2_5=235,keyboard.androidkey.KEY_SWITCHVIDEOMODE=236,keyboard.androidkey.KEY_KBDILLUMTOGGLE=237,keyboard.androidkey.KEY_KBDILLUMDOWN=238,keyboard.androidkey.KEY_KBDILLUMUP=239,keyboard.androidkey.KEY_SEND=231,keyboard.androidkey.KEY_REPLY=232,keyboard.androidkey.KEY_FORWARDMAIL=233,keyboard.androidkey.KEY_SAVE=234,keyboard.androidkey.KEY_DOCUMENTS=235,keyboard.androidkey.KEY_BATTERY=236,keyboard.androidkey.KEY_UNKNOWN=240,keyboard.key_dictionary=new HashMap(),keyboard.key_dictionary[48]=keyboard.androidkey.KEY_0,keyboard.key_dictionary[49]=keyboard.androidkey.KEY_1,keyboard.key_dictionary[50]=keyboard.androidkey.KEY_2,keyboard.key_dictionary[51]=keyboard.androidkey.KEY_3,keyboard.key_dictionary[52]=keyboard.androidkey.KEY_4,keyboard.key_dictionary[53]=keyboard.androidkey.KEY_5,keyboard.key_dictionary[54]=keyboard.androidkey.KEY_6,keyboard.key_dictionary[55]=keyboard.androidkey.KEY_7,keyboard.key_dictionary[56]=keyboard.androidkey.KEY_8,keyboard.key_dictionary[57]=keyboard.androidkey.KEY_9,keyboard.key_dictionary[65]=keyboard.androidkey.KEY_A,keyboard.key_dictionary[66]=keyboard.androidkey.KEY_B,keyboard.key_dictionary[67]=keyboard.androidkey.KEY_C,keyboard.key_dictionary[68]=keyboard.androidkey.KEY_D,keyboard.key_dictionary[69]=keyboard.androidkey.KEY_E,keyboard.key_dictionary[70]=keyboard.androidkey.KEY_F,keyboard.key_dictionary[71]=keyboard.androidkey.KEY_G,keyboard.key_dictionary[72]=keyboard.androidkey.KEY_H,keyboard.key_dictionary[73]=keyboard.androidkey.KEY_I,keyboard.key_dictionary[74]=keyboard.androidkey.KEY_J,keyboard.key_dictionary[75]=keyboard.androidkey.KEY_K,keyboard.key_dictionary[76]=keyboard.androidkey.KEY_L,keyboard.key_dictionary[77]=keyboard.androidkey.KEY_M,keyboard.key_dictionary[78]=keyboard.androidkey.KEY_N,keyboard.key_dictionary[79]=keyboard.androidkey.KEY_O,keyboard.key_dictionary[80]=keyboard.androidkey.KEY_P,keyboard.key_dictionary[81]=keyboard.androidkey.KEY_Q,keyboard.key_dictionary[82]=keyboard.androidkey.KEY_R,keyboard.key_dictionary[83]=keyboard.androidkey.KEY_S,keyboard.key_dictionary[84]=keyboard.androidkey.KEY_T,keyboard.key_dictionary[85]=keyboard.androidkey.KEY_U,keyboard.key_dictionary[86]=keyboard.androidkey.KEY_V,keyboard.key_dictionary[87]=keyboard.androidkey.KEY_W,keyboard.key_dictionary[88]=keyboard.androidkey.KEY_X,keyboard.key_dictionary[89]=keyboard.androidkey.KEY_Y,keyboard.key_dictionary[90]=keyboard.androidkey.KEY_Z,keyboard.key_dictionary[32]=keyboard.androidkey.KEY_SPACE,keyboard.key_dictionary[9]=keyboard.androidkey.KEY_TAB,keyboard.key_dictionary[20]=keyboard.androidkey.KEY_CAPSLOCK,keyboard.key_dictionary[16]=keyboard.androidkey.KEY_LEFTSHIFT,keyboard.key_dictionary[17]=keyboard.androidkey.KEY_LEFTCTRL,keyboard.key_dictionary[13]=keyboard.androidkey.KEY_ENTER,keyboard.key_dictionary[8]=keyboard.androidkey.KEY_BACKSPACE,keyboard.key_dictionary[27]=keyboard.androidkey.KEY_ESC,keyboard.key_dictionary[189]=keyboard.androidkey.KEY_MINUS,keyboard.key_dictionary[187]=keyboard.androidkey.KEY_EQUAL,keyboard.key_dictionary[8]=keyboard.androidkey.KEY_BACKSPACE,keyboard.key_dictionary[9]=keyboard.androidkey.KEY_TAB,keyboard.key_dictionary[219]=keyboard.androidkey.KEY_LEFTBRACE,keyboard.key_dictionary[221]=keyboard.androidkey.KEY_RIGHTBRACE,keyboard.key_dictionary[13]=keyboard.androidkey.KEY_ENTER,keyboard.key_dictionary[186]=keyboard.androidkey.KEY_SEMICOLON,keyboard.key_dictionary[222]=keyboard.androidkey.KEY_APOSTROPHE,keyboard.key_dictionary[192]=keyboard.androidkey.KEY_GRAVE,keyboard.key_dictionary[220]=keyboard.androidkey.KEY_BACKSLASH,keyboard.key_dictionary[188]=keyboard.androidkey.KEY_COMMA,keyboard.key_dictionary[190]=keyboard.androidkey.KEY_DOT,keyboard.key_dictionary[191]=keyboard.androidkey.KEY_SLASH,keyboard.key_dictionary[18]=keyboard.androidkey.KEY_LEFTALT,keyboard.key_dictionary[32]=keyboard.androidkey.KEY_SPACE,keyboard.key_dictionary[36]=keyboard.androidkey.KEY_HOME,keyboard.key_dictionary[38]=keyboard.androidkey.KEY_UP,keyboard.key_dictionary[33]=keyboard.androidkey.KEY_PAGEUP,keyboard.key_dictionary[37]=keyboard.androidkey.KEY_LEFT,keyboard.key_dictionary[39]=keyboard.androidkey.KEY_RIGHT,keyboard.key_dictionary[35]=keyboard.androidkey.KEY_END,keyboard.key_dictionary[40]=keyboard.androidkey.KEY_DOWN,keyboard.key_dictionary[34]=keyboard.androidkey.KEY_PAGEDOWN,keyboard.key_dictionary[45]=keyboard.androidkey.KEY_INSERT,keyboard.key_dictionary[46]=keyboard.androidkey.KEY_DELETE,keyboard.key_dictionary[96]=keyboard.androidkey.KEY_0,keyboard.key_dictionary[97]=keyboard.androidkey.KEY_1,keyboard.key_dictionary[98]=keyboard.androidkey.KEY_2,keyboard.key_dictionary[99]=keyboard.androidkey.KEY_3,keyboard.key_dictionary[100]=keyboard.androidkey.KEY_4,keyboard.key_dictionary[101]=keyboard.androidkey.KEY_5,keyboard.key_dictionary[102]=keyboard.androidkey.KEY_6,keyboard.key_dictionary[103]=keyboard.androidkey.KEY_7,keyboard.key_dictionary[104]=keyboard.androidkey.KEY_8,keyboard.key_dictionary[105]=keyboard.androidkey.KEY_9,keyboard.key_dictionary[110]=keyboard.androidkey.KEY_DOT,keyboard.key_dictionary[110]=219,keyboard.key_dictionary[112]=keyboard.androidkey.KEY_F1,keyboard.key_dictionary[113]=keyboard.androidkey.KEY_F2,keyboard.key_dictionary[114]=keyboard.androidkey.KEY_F3,keyboard.key_dictionary[115]=keyboard.androidkey.KEY_F4,keyboard.key_dictionary[116]=keyboard.androidkey.KEY_F5,keyboard.key_dictionary[117]=keyboard.androidkey.KEY_F6,keyboard.key_dictionary[118]=keyboard.androidkey.KEY_F7,keyboard.key_dictionary[119]=keyboard.androidkey.KEY_F8,keyboard.key_dictionary[120]=keyboard.androidkey.KEY_F9,keyboard.key_dictionary[121]=keyboard.androidkey.KEY_F10,keyboard.joystick_flag=0,keyboard.typing_flag=0,keyboard.pcKeybord_flag=0,keyboard.pcPaste_flag=0,keyboard.on=1,keyboard.off=0,keyboard.compositionstart=!1,keyboard.isPinyin=!1,keyboard.value_index=1,keyboard.softKeyboard=!1,keyboard.toggleWheel=!1,keyboard.pcKeyDownArray=[],keyboard.currentDirection=[],keyboard.centerPoint=[],keyboard.centerPonitOffset={x:0,y:0},keyboard.direction=[{key:87,status:!1,x:0,y:0},{key:83,status:!1,x:0,y:0},{key:65,status:!1,x:0,y:0},{key:68,status:!1,x:0,y:0},{key:"wa",status:!1,x:0,y:0},{key:"wd",status:!1,x:0,y:0},{key:"as",status:!1,x:0,y:0},{key:"ds",status:!1,x:0,y:0}],keyboard.isContainNavigate=!1,keyboard.sendDelay=30,keyboard.isUseSkill=!0,keyboard.numberCount=0,keyboard.numKeyboard=[[48,96],[49,97],[50,98],[51,99],[52,100],[53,101],[54,102],[55,103],[56,104],[57,105]],keyboard.downKeyArray=[],keyboard.keyMap=[],keyboard.keyCustomconf=[],keyboard.keyArray=new Array(100),keyboard.config={KEY_UP_TYPE:1,KEY_DOWN_TYPE:2,KEY_LEFT_TYPE:3,KEY_RIGHT_TYPE:4,USER_DEFINED_1_TYPE:5,USER_DEFINED_2_TYPE:6,USER_DEFINED_3_TYPE:7,USER_DEFINED_4_TYPE:8,USER_DEFINED_5_TYPE:9,USER_DEFINED_6_TYPE:10,USER_DEFINED_7_TYPE:11,USER_DEFINED_8_TYPE:12,USER_DEFINED_9_TYPE:13,USER_DEFINED_10_TYPE:14},keyboard.joystick_init=function(){0===redfinger.config.pcKeyMode?(keyboard.joystick_flag=keyboard.on,keyboard.keyHandler()):1===redfinger.config.pcKeyMode&&keyboard.pcKeybord_init();},keyboard.joystick_destroy=function(){if(0===redfinger.config.pcKeyMode){keyboard.joystick_flag=keyboard.off;let e=document.body;e.removeEventListener("keydown",hdkeydown),e.removeEventListener("keyup",hdkeyup);}else 1===redfinger.config.pcKeyMode&&keyboard.pcKeybord_remove();};let freshPcKeyDownArray=function(e){if(e.flag)keyboard.pcKeyDownArray.push(e);else for(let t=0;t<keyboard.pcKeyDownArray.length;t++)keyboard.pcKeyDownArray[t].key===e.key&&keyboard.pcKeyDownArray.splice(t,1);},pcKeyDown=function(e){if(keyboard.pcKeybord_flag===keyboard.off)return;let t=e.keyCode||e.which||e.charCode;if(t&&void 0!==keyboard.key_dictionary[t]){if(t===keyboard.key_refer.get("alt"))return;freshPcKeyDownArray({key:keyboard.key_dictionary[t],flag:!0}),redfinger.trigCallback(redfinger.onPcKeyTrig,[keyboard.key_dictionary[t],!0]);}t===keyboard.key_refer.get("alt")&&e.preventDefault(),t!==keyboard.key_refer.get("esc")&&t!==keyboard.key_refer.get("tab")&&t!==keyboard.key_refer.get("F1")&&t!==keyboard.key_refer.get("F2")&&t!==keyboard.key_refer.get("F3")&&t!==keyboard.key_refer.get("F4")||(e.keyCode=0,e.returnValue=!1,e.preventDefault()),18===t&&e.preventDefault(),17===t&&(keyboard.isCtrlDown=!0);},pcKeyUp=function(e){if(keyboard.pcKeybord_flag===keyboard.off)return;let t=e.keyCode||e.which||e.charCode;t&&void 0!==keyboard.key_dictionary[t]&&(freshPcKeyDownArray({key:keyboard.key_dictionary[t],flag:!1}),redfinger.trigCallback(redfinger.onPcKeyTrig,[keyboard.key_dictionary[t],!1])),t!==keyboard.key_refer.get("esc")&&t!==keyboard.key_refer.get("tab")&&t!==keyboard.key_refer.get("F1")&&t!==keyboard.key_refer.get("F2")&&t!==keyboard.key_refer.get("F3")&&t!==keyboard.key_refer.get("F4")||(e.keyCode=0,e.returnValue=!1,e.preventDefault()),18===t&&e.preventDefault(),17===t&&(keyboard.isCtrlDown=!1);};keyboard.pcKeyAllUp=function(){for(let e=0;e<keyboard.pcKeyDownArray.length;e++)redfinger.trigCallback(redfinger.onPcKeyTrig,[keyboard.pcKeyDownArray[e].key,!1]);keyboard.pcKeyDownArray=[];},keyboard.pcKeybord_init=function(){if(keyboard.pcKeybord_flag===keyboard.on||!redfinger.config.keyboard)return;keyboard.pcKeybord_flag=keyboard.on;let e=document.body;e.addEventListener("keydown",pcKeyDown),e.addEventListener("keyup",pcKeyUp);},keyboard.pcKeybord_remove=function(){keyboard.pcKeybord_flag===keyboard.on&&(keyboard.pcKeybord_flag=keyboard.off);let e=document.body;e.removeEventListener("keydown",pcKeyDown),e.removeEventListener("keyup",pcKeyUp),keyboard.pcKeyAllUp();};let pcPaste=function(e){if(keyboard.pcPaste_flag===keyboard.off)return;let t=e.clipboardData;if(t&&t.items)for(let e=0;e<t.items.length;e++){let r=t.items[e];if("string"===r.kind){r.getAsString(redfinger.sendInputClipper);break;}}};function getClickCount(){redfinger.mouseClickCount=redfinger.mouseClickCount+1;}function initCountClick(){document.getElementById(redfinger.phoneDom).addEventListener("click",getClickCount);}function setDirection(e,t,r){87===e?(keyboard.direction[0].x=t,keyboard.direction[0].y=r):83===e?(keyboard.direction[1].x=t,keyboard.direction[1].y=r):65===e?(keyboard.direction[2].x=t,keyboard.direction[2].y=r):68===e&&(keyboard.direction[3].x=t,keyboard.direction[3].y=r);}function haiwanikeydown(e){var t=e.keyCode||e.which||e.charCode;if(keyboard.key_dictionary[t]){var r=keyboard.key_dictionary[t];redfinger.sendKey(r,!0);}16==t&&(redfinger.sendKey(keyboard.androidkey.KEY_LEFTCTRL,!0),keyboard.isShiftDown=!0);}function haiwaikeyup(e){var t=e.keyCode||e.which||e.charCode;if(keyboard.key_dictionary[t]){var r=keyboard.key_dictionary[t];redfinger.sendKey(r,!1);}16==t&&(redfinger.sendKey(keyboard.androidkey.KEY_LEFTCTRL,!1),keyboard.isShiftDown=!1);}function initMouseMove(e){if(!0===e){var t=document.body;t.onmousewheel=mousewheel,t.addEventListener&&t.addEventListener("DOMMouseScroll",mousewheel,!1);}}function mousewheel(e){if(keyboard.isShiftDown){var t=e||event;scalePhone(t.wheelDelta?t.wheelDelta>0?1:0:t.detail<0?1:0);}}function scalePhone(e){if(!keyboard.isStartScroll){keyboard.isStartScroll=!0;var t=[{x:-1,y:-1},{x:-1,y:-1}],r={1:250,2:185,3:155,4:100}[redfinger.config.devLevel],n=r/100;if(t[0].x=redfinger.videoinfo.width/2-n,t[0].y=redfinger.videoinfo.height/2,t[1].x=redfinger.videoinfo.width/2+n,t[1].y=redfinger.videoinfo.height/2,e>0){redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,t);for(var i=0;i<r;i+=n)t[0].x=redfinger.videoinfo.width/2-i,t[1].x=redfinger.videoinfo.width/2+i,redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_MOVE,t);setTimeout(function(){t=[{x:-1,y:-1},{x:-1,y:-1}],redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_UP,t),keyboard.isStartScroll=!1;},100);}else{t[0].x=redfinger.videoinfo.width/2-r,t[1].x=redfinger.videoinfo.width/2+r,redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,t);for(i=0;i<r;i+=n)t[0].x=redfinger.videoinfo.width/2-r+i,t[1].x=redfinger.videoinfo.width/2+r-i,redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_MOVE,t);setTimeout(function(){t=[{x:-1,y:-1},{x:-1,y:-1}],redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_UP,t),keyboard.isStartScroll=!1;},100);}}}function hdkeydown(e){if(keyboard.joystick_flag===keyboard.on){e.keyCode||e.which||e.charCode;}if(keyboard.joystick_flag===keyboard.on&&keyboard.isUseSkill){let t=e.keyCode||e.which||e.charCode;if(keyboard.map.put(t,keyboard.map.get(t)+1),1===keyboard.map.get(t))if(87===t||83===t||65===t||68===t)keyboard.isContainNavigate&&(updateDownStatus(t),sendDownDirection());else{let e=[];for(let r=0;r<keyboard.keyArray.length;r++)if(void 0!==keyboard.keyArray[r]&&keyboard.keyArray[r][0]===t){pushArr(e,keyboard.keyArray[r][1],keyboard.keyArray[r][2]);break;}if(0!==e.length){let r={key:t,status:!0,x:e[0].x,y:e[0].y};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_DOWN,r);let n=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,n),keyboard.isOpenTouch=!0;}}18===t&&e.preventDefault(),17===t&&(keyboard.isCtrlDown=!0);}}function hdkeyup(e){if(redfinger.keyboardClickCount++,keyboard.joystick_flag===keyboard.on){let t=e.keyCode||e.which||e.charCode,r=[];keyboard.map.put(t,0);for(let e=0;e<keyboard.keyArray.length;e++)if(void 0!==keyboard.keyArray[e]&&keyboard.keyArray[e][0]===t){pushArr(r,keyboard.keyArray[e][1],keyboard.keyArray[e][2]);break;}if(r.length>0)if(87!==t&&83!==t&&65!==t&&68!==t||!keyboard.isContainNavigate){keyboard.skillTouch=[];let e={key:t,status:!1,x:-1,y:-1};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_UP,e);let r=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_UP,r),freshKeyDownArray(),keyboard.isOpenTouch=!1;}else if(updateUpStatus(t),updateCurrentDirection(),keyboard.currentDirection.length>0){let e={key:"direct",status:!0,x:keyboard.currentDirection[0].x,y:keyboard.currentDirection[0].y};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_MOVE,e);let t=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_MOVE,t);}else{let e={key:"direct",status:!1,x:-1,y:-1};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_UP,e);let t=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_UP,t),freshKeyDownArray();}17===t&&(keyboard.isCtrlDown=!1);}}function hdMouseDown(e){if(0===redfinger.config.pcKeyMode&&keyboard.joystick_flag===keyboard.on){let t=[],r=0;0===e.button?r=400:2===e.button&&(r=401);for(let e=0;e<keyboard.keyArray.length;e++)if(keyboard.keyArray[e][0]===r){pushArr(t,keyboard.keyArray[e][1],keyboard.keyArray[e][2]);break;}if(0!==r&&t.length>0){let e={key:r,status:!0,x:t[0].x,y:t[0].y};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_DOWN,e);let n=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,n);}}else if(1===redfinger.config.pcKeyMode){let t=0;0===e.button?t=0:1===e.button?t=1:2===e.button&&(t=2),redfinger.sendMousePressRelative(t,1);}}function hdMouseUp(e){if(0===redfinger.config.pcKeyMode&&keyboard.joystick_flag===keyboard.on){let t=[],r=0;0===e.button?r=400:2===e.button&&(r=401);for(let e=0;e<keyboard.keyArray.length;e++)if(keyboard.keyArray[e][0]===r){pushArr(t,keyboard.keyArray[e][1],keyboard.keyArray[e][2]);break;}if(0!==r&&t.length>0){let e={key:r,status:!1,x:-1,y:-1};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_UP,e);let t=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_UP,t),freshKeyDownArray();}}else if(1===redfinger.config.pcKeyMode){let t=0;0===e.button?t=0:1===e.button?t=1:2===e.button&&(t=2),redfinger.sendMousePressRelative(t,0);}}keyboard.pcPaste_init=function(){if(keyboard.pcPaste_flag===keyboard.on||!redfinger.config.keyboard)return;keyboard.pcPaste_flag=keyboard.on,document.body.addEventListener("paste",pcPaste);},keyboard.pcPaste_remote=function(){if(keyboard.pcPaste_flag===keyboard.off||!redfinger.config.keyboard)return;keyboard.pcPaste_flag=keyboard.off,document.body.removeEventListener("paste",pcPaste);},keyboard.typing_init=function(){if(!keyboard.softKeyboard)return;keyboard.typing_flag=keyboard.on,redfinger._toggleKeyboard(0),redfinger.sendKey(keyboard.androidkey.KEY_TAB,!1),redfinger.sendKey(keyboard.androidkey.KEY_ENTER,!1),redfinger.sendKey(keyboard.androidkey.KEY_BACKSPACE,!1);let e=document.querySelector("#ch"),t=document.querySelector("#"+redfinger.dom);if(e)e.style.display="block";else{let e=document.createElement("div");e.id="myDiv",e.style.position="absolute",e.style.top=lastY+"px",e.style.left=lastX+"px",t.appendChild(e);let r=document.createElement("textarea");r.id="ch",r.setAttribute("autofocus",!0),r.width=0,r.height=0,r.style.width="1px",r.style.height="1px",r.style.borderTop="0px",r.style.borderLeft="0px",r.style.borderRight="0px",r.style.padding=0,r.addEventListener("focus",()=>{redfinger.localInput=!1;});let n=document.getElementById("myDiv");n&&(n.appendChild(r),e.style.zIndex=-2);let i=document.querySelector("#ch");i&&(i.style.display="block"),(findUserAgent("trident")||findUserAgent("edge"))&&(i.style.width="0px",i.style.height="0px",i.style.border="none",i.style.opacity=0),i.addEventListener("compositionstart",function(){keyboard.isPinyin=!0;}),i.addEventListener("compositionend",function(){if(keyboard.typing_flag===keyboard.off)return;let e="Mac68K"===navigator.platform||"MacPPC"===navigator.platform||"Macintosh"===navigator.platform||"MacIntel"===navigator.platform;keyboard.isPinyin=!1,keyboard.isPinyin||navigator.userAgent.indexOf("BIDU")>-1||navigator.userAgent.indexOf("MetaSr")>-1||(e?redfinger.sendInputString(this.value.replace(/[a-z\'|(^\s+)]/gi,""),this.value=""):redfinger.sendInputString(this.value),this.value="");}),i.addEventListener("input",function(e){if(keyboard.typing_flag===keyboard.off)return;let t=this.value;keyboard.isPinyin||(redfinger.sendInputString(t),this.value="");}),redfinger.config.isAutoFocus&&i.addEventListener("blur",function(e){keyboard.typing_flag!==keyboard.off&&keyboard.typing_flag===keyboard.on&&this.focus();});}let r=document.getElementById("myDiv");r&&(r.style.display="block");let n=document.getElementById(redfinger.phoneDom);r&&t&&n&&(1===redfinger.phone.rotation?(r.style.top=Number(t.offsetTop+redfinger.phone.width-lastX)+"px",r.style.left=Number(t.offsetLeft+redfinger.phone.height/2)+"px"):(r.style.top=Number(t.offsetTop+lastY+20)+"px",r.style.left=Number(n.offsetLeft+10)+"px")),redfinger.config.isAutoFocus||t.addEventListener("mouseup",keyboard.typing_focus),keyboard.isPinyin=!1,keyboard.typing();},keyboard.typing_focus=function(){let e=document.querySelector("#ch");e&&keyboard.typing_flag===keyboard.on&&e.focus();},keyboard.typing_destroy=function(){let e=document.querySelector("#ch");if(e){e.value="",e.style.display="none",e.blur();let t=document.querySelector("#"+redfinger.dom);redfinger.config.isAutoFocus||t.removeEventListener("mouseup",keyboard.typing_focus);}if(redfinger._toggleKeyboard(1),window.clearTimeout(timer2),!keyboard.softKeyboard){let e=document.querySelector("#myDiv");e&&(e.style.display="none"),document.body.removeEventListener("keydown",keyboard.typingHandle);}},keyboard.cleanXY=function(){for(let e=0;e<keyboard.keyArray.length;e++)keyboard.keyArray[e]=[];},keyboard.keyCtrlUi=null,keyboard.keyCtrlIsEdit=!1,keyboard.setKey=function(e,t){for(let e=0;e<keyboard.keyArray.length;e++)keyboard.keyArray[e]=[];keyboard.keyCustomconf=e,keyboard.cleanXY();for(let r=0;r<e.length;r++){if(!1===t&&("a"===e[r].key||"w"===e[r].key||"s"===e[r].key||"d"===e[r].key)){keyboard.isContainNavigate=!1;continue;}let n=keyboard.key_refer.get(e[r].key);keyboard.isContainNavigate||"a"!==e[r].key&&"d"!==e[r].key||(keyboard.isContainNavigate=!0),keyboard.keyArray[r][0]=n,redfinger.setXY(n,e[r].x,e[r].y);}for(let t=0;t<keyboard.keyArray.length;t++)for(let r=0;r<keyboard.numKeyboard.length;r++)if(keyboard.keyArray[t][0]===keyboard.numKeyboard[r][0]){keyboard.keyArray[e.length+keyboard.numberCount][0]=keyboard.numKeyboard[r][1],keyboard.keyArray[e.length+keyboard.numberCount][1]=keyboard.keyArray[t][1],keyboard.keyArray[e.length+keyboard.numberCount][2]=keyboard.keyArray[t][2],keyboard.numberCount++;break;}keyboard.numberCount=0,getPoint();},keyboard.setKeyUi=function(e,t){redfinger.isPc()&&(null===keyboard.keyCtrlUi?(keyboard.keyCtrlUi=new keyCtrlUi(),keyboard.keyCtrlUi.init(e,t),keyboard.keyCtrlUi.reBuild()):keyboard.keyCtrlUi.reBuild());},keyboard.setKeyUiByPaas=function(e,t,r,n,i){redfinger.isPc()&&null==keyboard.keyCtrlUi&&(keyboard.keyCtrlUi=new keyCtrlUi(),setTimeout(function(){keyboard.keyCtrlUi.getKeyConf(e,t,r,n,i),keyboard.joystick_init();},1e3));},keyboard.setKeyUiBySaas=function(e,t,r,n){redfinger.isPc()&&null==keyboard.keyCtrlUi&&(keyboard.keyCtrlUi=new keyCtrlUi(),setTimeout(function(){keyboard.keyCtrlUi.getKeyConfFromSaas(e,t,r,n),keyboard.joystick_init();},1e3));},redfinger.setUserSkillEnabled=function(e){keyboard.isUseSkill=e;},redfinger.mouseClickCount=0,redfinger.keyboardClickCount=0,keyboard.initMouse=function(){document.getElementById(redfinger.phoneDom).addEventListener("mousedown",keyboard.getXY,!1);},keyboard.removeMouse=function(){document.getElementById(redfinger.phoneDom).removeEventListener("mousedown",keyboard.getXY,!1);},keyboard.getXY=function(e){let t=e.offsetX,r=e.offsetY,n=document.getElementById(redfinger.phoneDom),i=n.offsetWidth,o=n.offsetHeight,a=0,s=0;a=Number(t/i).toFixed(2),s=Number(r/o).toFixed(2),keyboard.returnXY(a,s);},keyboard.returnXY=function(e,t){redfinger.trigCallback(redfinger.onReturnXY,[e,t]);},redfinger.setXY=function(e,t,r){let n=0,i=0;n=t,i=r,setDirection(e,n,i);for(let t=0;t<keyboard.keyArray.length;t++)if(e===keyboard.keyArray[t][0]){keyboard.keyArray[t][1]=n,keyboard.keyArray[t][2]=i;break;}},keyboard.keyHandlerLinux=function(e){if(redfinger.isPc()){var t=document.body;!0===e?(t.addEventListener("keydown",haiwanikeydown),t.addEventListener("keyup",haiwaikeyup)):(t.removeEventListener("keydown",haiwanikeydown),t.removeEventListener("keyup",haiwaikeyup)),initMouseMove(e);}},keyboard.isShiftDown=!1,keyboard.isStartScroll=!1,keyboard.keyHandler=function(){if(keyboard.joystick_flag===keyboard.on){let e=document.body;e.addEventListener("keydown",hdkeydown),e.addEventListener("keyup",hdkeyup);}},keyboard.isOpenTouch=!1,keyboard.isCtrlDown=!1;let timer2,phoneDomExm=document.getElementById(redfinger.phoneDom);function pushArr(e,t,r){let n=phoneDomExm;!n&&(n=phoneDomExm=document.getElementById(redfinger.phoneDom));let i=0,o=0,a=n.offsetWidth,s=n.offsetHeight,d=t,c=r;if(1===redfinger.sdkInfo.playMode){let e=c;c=1-d,d=e;}i=a*d,o=s*c,e.push(transform(i,o));}function getPoint(){let e,t,r,n,i,o,a,s,d=[];for(let d=0;d<keyboard.keyArray.length;d++)65===keyboard.keyArray[d][0]&&(t=keyboard.keyArray[d][2],e=keyboard.keyArray[d][1]),68===keyboard.keyArray[d][0]&&(n=keyboard.keyArray[d][2],r=keyboard.keyArray[d][1]),87===keyboard.keyArray[d][0]&&(i=keyboard.keyArray[d][1],o=keyboard.keyArray[d][2]),83===keyboard.keyArray[d][0]&&(a=keyboard.keyArray[d][1],s=keyboard.keyArray[d][2]);let c={x:(e+r)/2,y:(o+s)/2};0===redfinger.config.keyCtrlRotation&&(c={x:(i+a)/2,y:(t+n)/2}),pushArr(d,c.x,c.y),keyboard.direction[4].x=i,keyboard.direction[4].y=t,keyboard.direction[5].x=i,keyboard.direction[5].y=n,keyboard.direction[6].x=a,keyboard.direction[6].y=t,keyboard.direction[7].x=a,keyboard.direction[7].y=n,0===redfinger.config.keyCtrlRotation&&(keyboard.direction[4].x=e,keyboard.direction[4].y=o,keyboard.direction[5].x=r,keyboard.direction[5].y=o,keyboard.direction[6].x=e,keyboard.direction[6].y=s,keyboard.direction[7].x=r,keyboard.direction[7].y=s),keyboard.centerPoint=[{x:d[0].x,y:d[0].y}];}function CPos(e,t){this.x=e,this.y=t;}function GetObjPos(e){let t=e,r=new CPos(t.offsetLeft,t.offsetTop);for(t=t.offsetParent;t;)r.x+=t.offsetLeft,r.y+=t.offsetTop,t=t.offsetParent;return r;}function getElementPos(e){let t=navigator.userAgent.toLowerCase(),r=document.getElementById(e);if(null===r.parentNode||"none"===r.style.display)return!1;let n,i=null,o=[];if(r.getBoundingClientRect){n=r.getBoundingClientRect();let e=Math.max(document.documentElement.scrollTop,document.body.scrollTop),t=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);return{x:n.left+t,y:n.top+e};}if(document.getBoxObjectFor){n=document.getBoxObjectFor(r);let e=r.style.borderLeftWidth?parseInt(r.style.borderLeftWidth):0,t=r.style.borderTopWidth?parseInt(r.style.borderTopWidth):0;o=[n.x-e,n.y-t];}else{if(o=[r.offsetLeft,r.offsetTop],i=r.offsetParent,i!==r)for(;i;)o[0]+=i.offsetLeft,o[1]+=i.offsetTop,i=i.offsetParent;(-1!==t.indexOf("opera")||-1!==t.indexOf("safari")&&"absolute"===r.style.position)&&(o[0]-=document.body.offsetLeft,o[1]-=document.body.offsetTop);}for(i=r.parentNode?r.parentNode:null;i&&"BODY"!==i.tagName&&"HTML"!==i.tagName;)ancestors,o[0]-=i.scrollLeft,o[1]-=i.scrollTop,i=i.parentNode?i.parentNode:null;return{x:o[0],y:o[1]};}function HashMap(){let e=0,t={};this.isEmpty=function(){return 0===e;},this.containsKey=function(e){return e in t;},this.containsValue=function(e){for(let r in t)if(t[r]===e)return!0;return!1;},this.getKey=function(e){for(let r in t)if(t[r]===e)return r;return null;},this.put=function(r,n){this.containsKey(r)||e++,t[r]=n;},this.get=function(e){return this.containsKey(e)?t[e]:null;},this.remove=function(r){this.containsKey(r)&&delete t[r]&&e--;},this.values=function(){let e=[];for(let r in t)void 0!==t[r]&&e.push(t[r]);return e;},this.keySet=function(){let e=[];for(let r in t)void 0!==r&&e.push(r);return e;},this.forEach=function(e){for(let r in t)e(r,t[r]);},this.size=function(){return e;},this.clear=function(){e=0,t=[];};}function findUserAgent(e){return-1!==window.navigator.userAgent.toLowerCase().indexOf(e);}function loginKeyDown(e){let t=document.getElementById(redfinger.phoneDom);if(redfinger.initLoginPoint.firstKeyDown&&t){let e=[];pushArr(e,redfinger.initLoginPoint.x,redfinger.initLoginPoint.y),lastX=e[0].x,lastY=e[0].y,redfinger.initLoginPoint.firstKeyDown=!1,redfinger.sendTouch(redfinger.TOUCH_TYPE.TOUCH_DOWN,e[0].x,e[0].y),redfinger.sendTouch(redfinger.TOUCH_TYPE.TOUCH_CANCEL,e[0].x,e[0].y),document.removeEventListener("keydown",loginKeyDown);}}function updateKeyDownArray(e,t){let r=!1,n=0;for(let e=0;e<keyboard.downKeyArray.length;e++)if(t.key===keyboard.downKeyArray[e].key){r=!0,n=e;break;}e===redfinger.TOUCH_TYPE.TOUCH_DOWN?r?keyboard.downKeyArray[n]=t:keyboard.downKeyArray.push(t):e===redfinger.TOUCH_TYPE.TOUCH_UP?r&&(keyboard.downKeyArray[n].status=!1,keyboard.downKeyArray[n].x=-1,keyboard.downKeyArray[n].y=-1):e===redfinger.TOUCH_TYPE.TOUCH_MOVE&&r&&(keyboard.downKeyArray[n].x=t.x,keyboard.downKeyArray[n].y=t.y);}function getCurrKeyDownArray(){let e=[];for(let t=0;t<keyboard.downKeyArray.length;t++)!1!==keyboard.downKeyArray[t].status&&e.push({x:keyboard.downKeyArray[t].x,y:keyboard.downKeyArray[t].y});return e;}function freshKeyDownArray(){for(let e=0;e<keyboard.downKeyArray.length;e++)!1===keyboard.downKeyArray[e].status&&(keyboard.downKeyArray.splice(e,1),e--);}function updateCenterPointOffset(e){keyboard.centerPonitOffset.y=0,keyboard.centerPonitOffset.x=0,1===redfinger.config.keyCtrlRotation?1===redfinger.sdkInfo.playMode?87===e?keyboard.centerPonitOffset.x=-20:65===e?keyboard.centerPonitOffset.y=-20:83===e?keyboard.centerPonitOffset.x=20:68===e&&(keyboard.centerPonitOffset.y=20):87===e?keyboard.centerPonitOffset.y=20:65===e?keyboard.centerPonitOffset.x=-20:83===e?keyboard.centerPonitOffset.y=-20:68===e&&(keyboard.centerPonitOffset.x=20):1===redfinger.sdkInfo.playMode?87===e?keyboard.centerPonitOffset.y=-20:65===e?keyboard.centerPonitOffset.x=-20:83===e?keyboard.centerPonitOffset.y=20:68===e&&(keyboard.centerPonitOffset.x=20):87===e?keyboard.centerPonitOffset.x=-20:65===e?keyboard.centerPonitOffset.y=-20:83===e?keyboard.centerPonitOffset.x=20:68===e&&(keyboard.centerPonitOffset.y=20);}function updateTripleKeyStatus(e){if("keydown"===e){const e=keyboard.direction.filter(e=>!!e.status&&"number"==typeof e.key).length,t=keyboard.direction,r=t[0].status&&t[1].status||t[2].status&&t[3].status;return!(e<3||3===e&&r);}return!1;}function updateDoubleKeyStatus(e="keydown"){updateTripleKeyStatus(e)||(keyboard.direction[0].status&&keyboard.direction[2].status&&(keyboard.direction[4].status=!0),keyboard.direction[0].status&&keyboard.direction[3].status&&(keyboard.direction[5].status=!0),keyboard.direction[1].status&&keyboard.direction[2].status&&(keyboard.direction[6].status=!0),keyboard.direction[1].status&&keyboard.direction[3].status&&(keyboard.direction[7].status=!0));}function clearDoubleKeyStatus(){keyboard.direction[4].status=!1,keyboard.direction[5].status=!1,keyboard.direction[6].status=!1,keyboard.direction[7].status=!1;}function updateDownStatus(e){const t=keyboard.direction.find(t=>e===t.key);t&&(t.status=!0),updateCenterPointOffset(e),updateDoubleKeyStatus();}function updateUpStatus(e){let t=0;for(let r=0;r<keyboard.direction.length;r++)if(e===keyboard.direction[r].key){keyboard.direction[r].status=!1,t=r;break;}if(keyboard.direction.filter(e=>!!e.status).length>=3)return clearDoubleKeyStatus(),void updateDoubleKeyStatus("keyup");0===t&&!0===keyboard.direction[4].status?keyboard.direction[2].status=!0:0===t&&!0===keyboard.direction[5].status?keyboard.direction[3].status=!0:1===t&&!0===keyboard.direction[6].status?keyboard.direction[2].status=!0:1===t&&!0===keyboard.direction[7].status?keyboard.direction[3].status=!0:2===t&&!0===keyboard.direction[4].status?keyboard.direction[0].status=!0:2===t&&!0===keyboard.direction[6].status?keyboard.direction[1].status=!0:3===t&&!0===keyboard.direction[5].status?keyboard.direction[0].status=!0:3===t&&!0===keyboard.direction[7].status&&(keyboard.direction[1].status=!0),clearDoubleKeyStatus();}function updateCurrentDirection(){keyboard.currentDirection=[];for(let e=keyboard.direction.length-1;e>=0;e--)keyboard.direction[e].status&&pushArr(keyboard.currentDirection,keyboard.direction[e].x,keyboard.direction[e].y);}function sendDownDirection(){if(1===redfinger.config.keyboardControlType){for(let e=keyboard.direction.length-1;e>=0;e--)if(keyboard.direction[e].status){if(isDownCount()){let t=keyboard.centerPoint[0].x,r=keyboard.centerPoint[0].y,n={key:"direct",status:keyboard.direction[e].status,x:t,y:r};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_DOWN,n);let i=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,i);}keyboard.currentDirection=[],pushArr(keyboard.currentDirection,keyboard.direction[e].x,keyboard.direction[e].y);const t=keyboard.currentDirection[0];Promise.resolve().then(()=>{if(null!=t&&null!=t.x&&null!=t.y){let e={key:"direct",status:!0,x:t.x,y:t.y};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_MOVE,e);let r=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_MOVE,r);}});break;}}else if(2===redfinger.config.keyboardControlType)for(let e=keyboard.direction.length-1;e>=0;e--)if(keyboard.direction[e].status){if(isDownCount()){keyboard.currentDirection=[],pushArr(keyboard.currentDirection,keyboard.direction[e].x,keyboard.direction[e].y);let t={key:"direct",status:!0,x:keyboard.currentDirection[0].x,y:keyboard.currentDirection[0].y};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_DOWN,t);let r=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,r);}setTimeout(function(){let t=keyboard.centerPoint[0].x+keyboard.centerPonitOffset.y,r=keyboard.centerPoint[0].y+keyboard.centerPonitOffset.x,n={key:"direct",status:keyboard.direction[e].status,x:t,y:r};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_MOVE,n);let i=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_MOVE,i);},keyboard.sendDelay);break;}}function isDownCount(){let e=0;for(let t=0;t<keyboard.direction.length;t++)keyboard.direction[t].status&&e++;return 3!==e&&1===e;}function isForword(e){if(87===e&&isDownCount()&&6===keyboard.map.get(e)){let e=[];pushArr(e,keyboard.direction[0].x-.1,keyboard.direction[0].y),redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_MOVE,[{x:-1,y:-1}].concat(e)),keyboard.currentDirection=e;}}function isOpenFire(){if(keyboard.isFire=!keyboard.isFire,keyboard.isFire){document.querySelector("#redPhone").addEventListener("mousedown",initFire,!1);}else{document.querySelector("#redPhone").removeEventListener("mousedown",initFire,!1);}}function initFire(e){keyboard.firePoint.length>0&&(keyboard.firePoint=[]),pushArr(keyboard.firePoint,.7559523809523809,.8526785714285714),keyboard.isFire&&1===e.buttons&&(isDownDirection()&&keyboard.isOpenTouch?redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,keyboard.firePoint.concat(keyboard.skillTouch,keyboard.currentDirection)):keyboard.isOpenTouch?redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,keyboard.firePoint.concat(keyboard.skillTouch)):isDownDirection()?redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,keyboard.firePoint.concat(keyboard.currentDirection)):redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,keyboard.firePoint));}function isDownDirection(){for(let e=0;e<keyboard.direction.length;e++)if(keyboard.direction[e].status)return!0;return!1;}function sendMultiDown(e,t){isDownDirection()&&keyboard.isOpenTouch?redfinger.sendTouchMulti(e,[t].concat(keyboard.skillTouch,keyboard.currentDirection)):keyboard.isOpenTouch?redfinger.sendTouchMulti(e,[t].concat(keyboard.skillTouch)):redfinger.sendTouchMulti(e,[t].concat(keyboard.currentDirection));}function sendMultiMove(e,t){isDownDirection()&&keyboard.isOpenTouch?redfinger.sendTouchMulti(e,[t].concat(keyboard.skillTouch,keyboard.currentDirection)):keyboard.isOpenTouch?redfinger.sendTouchMulti(e,[t].concat(keyboard.skillTouch)):redfinger.sendTouchMulti(e,[t].concat(keyboard.currentDirection));}function sendMultiUp(e){isDownDirection()&&keyboard.isOpenTouch?redfinger.sendTouchMulti(e,[{x:-1,y:-1}].concat(keyboard.skillTouch,keyboard.currentDirection)):keyboard.isOpenTouch?redfinger.sendTouchMulti(e,[{x:-1,y:-1}].concat(keyboard.skillTouch)):redfinger.sendTouchMulti(e,[{x:-1,y:-1}].concat(keyboard.currentDirection));}function clickMouseRight(e){isDownDirection()?redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,[e].concat(keyboard.currentDirection)):keyboard.isOpenTouch?redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,[e].concat(keyboard.skillTouch)):redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,[e]);}function initGetMove(){document.querySelector("#redPhone").addEventListener("mousemove",startMouse,!1);}keyboard.typingHandle=function(e){let t=e.keyCode||e.which||e.charCode;return keyboard.typing_flag!==keyboard.off&&(34===t||35===t||36===t||37===t||38===t||39===t||40===t||45===t||46===t||9===t||8===t||13===t)&&(redfinger.sendCommand(keyboard.key_dictionary[t]),!1);},keyboard.typing=function(e){if(keyboard.typing_flag===keyboard.on){document.getElementById("ch").focus(),timer2=window.setTimeout(function e(){let t=document.querySelector("#ch");"ch"!==document.activeElement.id&&keyboard.typing_flag===keyboard.on&&t.focus();redfinger.config.isAutoFocus&&(timer2=window.setTimeout(e,200));},200),document.body.addEventListener("keydown",keyboard.typingHandle);}},redfinger.initLogin=function(){document.addEventListener("keypress",loginKeyDown);},keyboard.isFire=!1,keyboard.firePoint=[],keyboard.MoveType={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3};let mixtime,currentMovePoint=[];function getMouseMove(e){lastX=e.pageX,lastY=e.pageY;let t=document.querySelector("#boxFlex"),r=0,n=0;currentMovePoint.length=0,t&&(r=(e.pageX-t.offsetLeft)/t.offsetWidth,n=(e.pageY-t.offsetTop)/t.offsetHeight);}function startMouse(e){clearTimeout(mixtime),mixtime=setTimeout(function(){getSightPoint(),getMouseMove(e);},50);}function getSightPoint(){keyboard.sightPoint=[],pushArr(keyboard.sightPoint,.5,.8);}function MuteGui(){let e={phoneBoxId:"",left:0,right:0,top:0,callback:void 0};function t(){let e=document.getElementById("redfinger-mute-ctrl");e&&e.remove();}let r={show:function(e,r,n,i){let o=document.getElementById("redfinger-mute-ctrl");if(void 0===o||null==o){let o=function(e,t){let r=document.createElement("div");return r.setAttribute("id","redfinger-mute-ctrl"),r.setAttribute("style","position:absolute;top:"+t+"px;left:"+e+"px;background-color:#fff;z-index:999;"),r.innerHTML='<button id="redfinger-mute-btn"  title="取消静音" aria-label="取消静音" style="float:left;opacity:0.9;display:inline-block;width:36px;height:36px;-webkit-transition: opacity 0.1s cubic-bezier(0.4,0.0,1,1);transition:opacity 0.1s cubic-bezier(0.4,0.0,1,1);overflow:hidden;border:none;background-color: transparent;padding:0;color:inherit;text-align: inherit;font-size:100%;font-family: inherit;cursor:pointer;line-height: inherit;"><svg height="100%" version="1.1" viewBox="0 0 36 36" width="100%"><use  xlink:href="#ytp-id-72" style="stroke: #000;stroke-opacity: 0.15;stroke-width: 1px;fill:none;"></use><path d="m 21.48,17.98 c 0,-1.77 -1.02,-3.29 -2.5,-4.03 v 2.21 l 2.45,2.45 c .03,-0.2 .05,-0.41 .05,-0.63 z m 2.5,0 c 0,.94 -0.2,1.82 -0.54,2.64 l 1.51,1.51 c .66,-1.24 1.03,-2.65 1.03,-4.15 0,-4.28 -2.99,-7.86 -7,-8.76 v 2.05 c 2.89,.86 5,3.54 5,6.71 z M 9.25,8.98 l -1.27,1.26 4.72,4.73 H 7.98 v 6 H 11.98 l 5,5 v -6.73 l 4.25,4.25 c -0.67,.52 -1.42,.93 -2.25,1.18 v 2.06 c 1.38,-0.31 2.63,-0.95 3.69,-1.81 l 2.04,2.05 1.27,-1.27 -9,-9 -7.72,-7.72 z m 7.72,.99 -2.09,2.08 2.09,2.09 V 9.98 z"></path></svg></button><div id="redinger-mute-tip" style="float:left;height:36px;line-height: 36px;padding-right:5px;font-size:14px;cursor:pointer;"><span>取消静音</span></div>',r;}(r,n);if(!document.getElementById(e))return;document.getElementById(e).appendChild(o),document.getElementById("redfinger-mute-ctrl").addEventListener("click",function(e){i&&i(),t();}),setTimeout(function(){let e=document.getElementById("redinger-mute-tip");e&&(e.style.display="none");},5e3);}},close:t,checkMeted:function(){let t=document.getElementById("phoneVideo");t&&redfinger.isOpen&&t.muted?window.muteGui.show(e.phoneBoxId,e.left,e.top,e.callback):window.muteGui.close();},setPosition:function(e,t,r){let n=document.getElementById("redinger-mute-tip");n&&(n.style.top=t+"px",n.style.left=e+"px",n.style.transform="translate(0px,0px) rotate("+r+"deg)",n.style.webkitTransform="translate(0px,0px) rotate("+r+"deg)",n.style.mozTransform="translate(0px,0px) rotate("+r+"deg)",n.style.oTransform="translate(0px,0px) rotate("+r+"deg)");}};return r;}function ImagePool(e){this.size=e,this.images=[],this.counter=0;}function PointerLockUtils(e){let t=0,r=0,n=null,i=!1,o=!1;function a(){}function s(e){}function d(e,t){}function c(e){if(!1===i)return;let n=10;(redfinger.config.mouseDpi<1||redfinger.config.mouseDpi>20)&&(redfinger.config.mouseDpi=10),n=redfinger.config.mouseDpi;let o=e.movementX||e.mozMovementX||e.webkitMovementX||0,a=e.movementY||e.mozMovementY||e.webkitMovementY||0;if(0===o&&0===a)return;o>127&&(o=127),o<-127&&(o=-127),a>127&&(a=127),a<-127&&(a=-127);let s=redfinger.config.relMouseDpi;(s<0||s>20)&&(s=10);let c=parseInt((o*s/10).toFixed(0),10),f=parseInt((a*s/10).toFixed(0),10);o=o*n/10,a=a*n/10,t+=o,r+=a,d(t,r,c,f);}function f(){if(document.pointerLockElement=document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement,document.pointerLockElement)i=!0,a();else{i=!1,o?(s(redfinger.config.pointerLockKey),o=!1):s(27);let e={key:"pointLock",status:!1,x:-1,y:-1};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_UP,e);let t=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_UP,t),freshKeyDownArray();}}function u(){MLOG.warn(MLOG.w("Unable to use Pointer Lock API"));}void 0===e?(console.warn("param error,please input element id"),n=document.body):(n=document.getElementById(e),void 0===n&&(console.warn("param error,please input element id"),n=document.body)),t=parseInt(n.offsetWidth/2,10),r=parseInt(n.offsetHeight/2,10);let l=function(){document.addEventListener("mousemove",c,!1),document.addEventListener("pointerlockchange",f,!1),document.addEventListener("mozpointerlockchange",f,!1),document.addEventListener("webkitpointerlockchange",f,!1),document.addEventListener("pointerlockerror",u,!1),document.addEventListener("mozpointerlockerror",u,!1),document.addEventListener("webkitpointerlockerror",u,!1);};window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;let p={lock:function(){n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock,n.requestPointerLock();},unlock:function(){o=!0,document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock();},connect:l,dispose:function(){document.removeEventListener("mousemove",c,!1),document.removeEventListener("pointerlockchange",f,!1),document.removeEventListener("mozpointerlockchange",f,!1),document.removeEventListener("webkitpointerlockchange",f,!1),document.removeEventListener("pointerlockerror",u,!1),document.removeEventListener("mozpointerlockerror",u,!1),document.removeEventListener("webkitpointerlockerror",u,!1),d=function(e,t){},a=function(){},s=function(){};},setPosition:function(e,n){t=e,r=n;},getIsLock:function(){return i;},on:function(e,t){void 0!==e&&("lock"===e?a=t:"unlock"===e?s=t:"change"===e&&(d=t));}};return l(),p;}function UploadQRcode(){let e="baiduUploadimg";function t(e){let t=document.createElement("canvas");t.width=720,t.height=1280;let r=t.getContext("2d");r.rect(0,0,t.width,t.height),r.fillStyle="#fff",r.fill();let n=new Image();n.src=e,n.onload=function(){let e=n.width,i=n.height;r.drawImage(n,0,0,e,i,(720-e)/2,(1280-i)/2,e,i);let o=function(e){let t=e.split(","),r=t[0].match(/:(.*?);/)[1],n=atob(t[1]),i=n.length,o=new Uint8Array(i);for(;i--;)o[i]=n.charCodeAt(i);return new Blob([o],{type:r});}(t.toDataURL("image/jpeg")),a=new FileReader();a.onload=function(){let e=new Uint8Array(this.result),t=redfinger.fill_redfinger_pack(e,redfinger.MSG_TYPE.MSG_INPUT,redfinger.MSG_INPUT_TYPE.MSG_INPUT_PICTURE);redfinger.send(t);},a.readAsArrayBuffer(o);};}return{init:function(r){e=r,e&&"baiduUploadimg"!==e?function(e){let r=document.getElementById(e);r.onchange=function(){let e=this.files[0];if(e){let r=new FileReader();r.readAsDataURL(e),r.onload=function(e){t(e.target.result);};}};}(e):function(){let r=document.createElement("input");r.type="file",r.id=e,r.onchange=function(){let e=this.files[0];if(e){let r=new FileReader();r.readAsDataURL(e),r.onload=function(e){t(e.target.result);};}},r.click();}();}};}function ctrlWheelUtilsNew(){let e=!1,t=null;const r=document.getElementById(redfinger.phoneDom);function n(e){redfinger.sendMouseDown(e.x,e.y);}function i(e){redfinger.sendMouseMove(e.x,e.y);}function o(e){redfinger.sendMouseUp(e.x,e.y);}return{change:function(a){e||(e=!0,function(){const e=r.offsetHeight,n=r.offsetWidth,i=+((redfinger.phone.rotation&&redfinger.config.wheelWidth<4?4:redfinger.config.wheelWidth)/200).toFixed(4);let{x:o,y:a}=keyboard.lastMovePoint;if(redfinger.phone.rotation){const e=n*i,r=o-e<0?0:o-e,s=o+e>n?n:o+e;t={point1:{x:2===redfinger.config.wheelDirection?s:r,y:a},point2:{x:1===redfinger.config.wheelDirection?s:r,y:a}};}else{const r=e*i,n=a-r<0?0:a-r,s=a+r>e?e:a+r;t={point1:{x:o,y:1===redfinger.config.wheelDirection?s:n},point2:{x:o,y:2===redfinger.config.wheelDirection?s:n}};}}(),a>0?(n(t.point1),setTimeout(()=>{i(t.point2),setTimeout(()=>{o(t.point2),e=!1;},30);},redfinger.config.wheelInterval)):(n(t.point2),setTimeout(()=>{i(t.point1),setTimeout(()=>{o(t.point1),e=!1;},30);},redfinger.config.wheelInterval)));}};}function ctrlWheelUtils(){let e={key:"wheel1",x:.7,y:.55},t={key:"wheel2",x:.7,y:.65},r=!1;function n(e,t){let r=[];pushArr(r,t.x,t.y);let n={key:e,status:!0,x:r[0].x,y:r[0].y};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_DOWN,n);}function i(e,t,r,n){let i=[],o=[];pushArr(i,t.x,t.y),pushArr(o,r.x,r.y),0===redfinger.phone.rotation?Math.abs(n)<Math.abs(i[0].x-o[0].x)&&(o[0].x=i[0].x+n):1===redfinger.phone.rotation&&Math.abs(n)<Math.abs(i[0].y-o[0].y)&&(o[0].y=i[0].y+n);let a={key:e,status:!0,x:o[0].x,y:o[0].y};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_MOVE,a);}function o(e){let t={key:e.key,status:!0,x:-1,y:-1};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_UP,t);}return{change:function(a){if(!r)if(r=!0,a>0){n(e.key,e),n(t.key,t);let a=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,a),setTimeout(function(){i(e.key,e,t,20);let n=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_MOVE,n),setTimeout(function(){o(e),o(t);let n=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_UP,n),freshKeyDownArray(),r=!1;},keyboard.sendDelay+20);},keyboard.sendDelay+20);}else{n(e.key,t),n(t.key,t);let a=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,a),setTimeout(function(){i(e.key,t,e,-20);let n=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_MOVE,n),setTimeout(function(){o(e),o(t);let n=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_UP,n),freshKeyDownArray(),r=!1;},keyboard.sendDelay+20);},keyboard.sendDelay+20);}}};}function UpLoadLiveStream(){let e=!1,t="user",r=720,n=1280,i=!1,o=720,a=1280,s=720,d=1280,c=.5,f=[],u=0;function l(e,t){r=e,n=t,d=t,s=e,e>t&&0===function(){let e=0;return redfinger.isPc()?0===redfinger.sdkInfo.playMode?1!==redfinger.phone.remoteRotation&&3!==redfinger.phone.remoteRotation||(e=1):0!==redfinger.phone.remoteRotation&&2!==redfinger.phone.remoteRotation||(e=1):(redfinger.sdkInfo.playMode,e=0===redfinger.getorientation()?0:1),e;}()&&(i=!0,s=t,d=e),o=s,a=d,a>720&&(a=720,o=a*(s/d)),MLOG.debug(MLOG.d("camera: "+o+" "+a));let c=document.createElement("video");c.setAttribute("id","myCameraVideo"),c.setAttribute("style","display:none; transform: rotateY(180deg);object-fit:scale-down;"),c.setAttribute("width",o),c.setAttribute("height",a),c.setAttribute("playsinline","true"),c.setAttribute("muted","true"),c.setAttribute("autoplay","autoplay"),document.body.appendChild(c);let f=document.createElement("canvas");f.id="cameraCanvs",i?(f.width=d,f.height=s):(f.width=s,f.height=d),f.style.display="none",document.body.appendChild(f);}function p(e){t=e;let r="user",n={video:{width:o,height:a,facingMode:r}};"environment"===e&&(r='{ exact: "environment" }',n={video:{width:o,height:a,facingMode:{exact:"environment"}}}),redfinger.isPc()||0===redfinger.getorientation()&&(n.video.width=a,n.video.height=o),MLOG.debug(MLOG.d(n)),function(e){if(void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia)console.log("最新标准API"),navigator.mediaDevices.getUserMedia(e).then(e=>{h(e);}).catch(e=>{g(e),redfinger.trigCallback(redfinger.onOpenCameraFail,[]);});else if(void 0!==navigator.webkitGetUserMedia||void 0!==navigator.mozGetUserMedia)void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){let t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new Promise(function(r,n){t.call(navigator,e,r,n);}):(redfinger.trigCallback(redfinger.onOpenCameraFail,[]),Promise.reject(new Error("此浏览器不支持")));}),navigator.mediaDevices.getUserMedia(e).then(e=>{h(e);}).catch(e=>{g(e),redfinger.trigCallback(redfinger.onOpenCameraFail,[]);});else{if(console.log("旧标准API"),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,void 0===navigator.getUserMedia)return g("undefined"),void redfinger.trigCallback(redfinger.onOpenCameraFail,[]);navigator.getUserMedia(e).then(e=>{h(e);}).catch(e=>{g(e),redfinger.trigCallback(redfinger.onOpenCameraFail,[]);});}}(n),v();}function h(t){let r=document.getElementById("myCameraVideo");r.srcObject=t,r.play(),e=!0,y(),b();}function g(e){MLOG.warn(MLOG.w("此浏览器不支持摄像头功能！ ："+e.name||e));}function y(){let e=document.getElementById("myCameraVideo"),r=document.getElementById("cameraCanvs");if(!r)return;let n=r.getContext("2d");i?(r.width=d,r.height=s):(r.width=s,r.height=d);i?180===redfinger.config.cameraTransform?(n.translate(0,r.height),n.scale(1,-1),n.rotate(1*Math.PI/2),n.drawImage(e,0,0,s,-d)):(redfinger.isPc()||!redfinger.isIOS()||redfinger.isIOS16()||(n.translate(0,r.height),n.scale(1,-1)),n.rotate(3*Math.PI/2),n.drawImage(e,0,0,-s,d)):180===redfinger.config.cameraTransform?(n.translate(r.width,0),n.scale(-1,1),n.rotate(1*Math.PI/2),n.drawImage(e,0,0,s,d)):(redfinger.isPc()||1!==redfinger.getorientation()?(n.translate(r.width,0),n.scale(-1,1)):0===redfinger.phone.remoteRotation&&"user"===t&&(n.translate(r.width,0),n.scale(-1,1),n.translate(0,r.height),n.scale(1,-1)),n.drawImage(e,0,0,s,d)),r&&setTimeout(y,66);}function b(){let e=document.getElementById("cameraCanvs");if(!e)return;let t=e.toDataURL("image/jpeg",c);t.length>5e4&&(c-=.05,c<.3&&(c=.3)),t.length<4e4&&(c+=.05,c>=1&&(c=.99));let r=function(e){let t=e.split(","),r=t[0].match(/:(.*?);/)[1],n=atob(t[1]),i=n.length,o=new Uint8Array(i);for(;i--;)o[i]=n.charCodeAt(i);return new Blob([o],{type:r});}(t),n=new FileReader();n.onload=function(){let e=new Uint8Array(this.result),t=redfinger.fill_redfinger_pack(e,redfinger.MSG_TYPE.MSG_INPUT,redfinger.MSG_INPUT_TYPE.MSG_INPUT_PICTURE);redfinger.send(t);},n.readAsArrayBuffer(r),setTimeout(b,100);}function m(){let t=document.getElementById("myCameraVideo"),r=document.getElementById("cameraCanvs");e&&(e=!1,t.srcObject.getTracks()[0].stop(),t.srcObject.getTracks()[0].stop()),document.body.removeChild(t),document.body.removeChild(r),u>0&&clearTimeout(u);}function v(){u=setTimeout(function(){f.length>0&&(f=[],m(),l(r,n),p(t)),u=v();},redfinger.config.cameraCheckTime);}let S={initdom:l,setupCamera:p,destroy:m,setTransform:function(e){let t=document.getElementById("cameraCanvs");ctx=t.getContext("2d");let r=carmeraWidth/2,n=a/2,i=200,o=200;ctx.translate(carmeraWidth/2,a/2),ctx.rotate(e*Math.PI/180),ctx.translate(-r,-n),ctx.fillRect(r-i/2,n-o/2,i,o);},onRotateChange:function(){f.push(1);}};return S;}keyboard.pointerLock=null,keyboard.pointerLockDefPostion={x:48,y:55},keyboard.ctrlWheelUtil=null,keyboard.ctrlWheelUtilNew=null,keyboard.setPointerLockDefPosition=function(e){e&&(keyboard.pointerLockDefPostion.x===e.x&&keyboard.pointerLockDefPostion.y===e.y||(keyboard.pointerLockDefPostion=e,keyboard.pointerLock&&keyboard.pointerLock.setPosition(e.x,e.y)));},keyboard.setPointerLockCurrPosition=function(e){keyboard.pointerLock&&keyboard.pointerLock.setPosition(e.x,e.y);},keyboard.initPointerLock=function(e,t,r,n){void 0!==e&&void 0!==t?(keyboard.pointerLockDefPostion=t,(void 0===r||"number"!=typeof r||r<0||r>254)&&(r=192),keyboard.pointerLock=new PointerLockUtils(e),keyboard.pointerLock.setPosition(t.x,t.y),keyboard.pointerLock.on("change",n),keyboard.pointerLock.on("unlock",function(e){redfinger.trigCallback(redfinger.onPointerUnlock,[e]);}),document.onkeyup=function(e){if(e&&e.keyCode===r)if(keyboard.pointerLock&&keyboard.pointerLock.getIsLock()){if(keyboard.pointerLock.unlock(),0===redfinger.config.pcKeyMode){let e={key:"pointLock",status:!1,x:-1,y:-1};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_UP,e);let t=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_UP,t),freshKeyDownArray();}}else{if(0===redfinger.config.pcKeyMode){keyboard.setPointerLockCurrPosition(keyboard.pointerLockDefPostion);let e=lockPointTrans(keyboard.pointerLockDefPostion.x,keyboard.pointerLockDefPostion.y),t=transform(e.x,e.y),r={key:"pointLock",status:!0,x:t.x,y:t.y};updateKeyDownArray(redfinger.TOUCH_TYPE.TOUCH_DOWN,r);let n=getCurrKeyDownArray();redfinger.sendTouchMulti(redfinger.TOUCH_TYPE.TOUCH_DOWN,n);}keyboard.pointerLock.lock();}}):MLOG.warn(MLOG.w("initPointerLock param invalid"));},window.mackeyboard={},mackeyboard.typing_flag=0,mackeyboard.isPinyin=!1,mackeyboard.typing_init=function(){mackeyboard.typing_flag=keyboard.on;let e=document.querySelector("#ch"),t=document.querySelector("#"+redfinger.dom);if(e)e.style.display="block";else{let e=document.createElement("div");e.id="myDiv",e.style.position="absolute",e.style.top=lastY+"px",e.style.left=lastX+"px",t.appendChild(e);let r=document.createElement("textarea");r.id="ch",r.width=0,r.height=0,r.style.width="1px",r.style.height="1px",r.style.borderTop="0px",r.style.borderLeft="0px",r.style.borderRight="0px",r.style.padding=0;let n=document.getElementById("myDiv");n&&(n.appendChild(r),e.style.zIndex=-2);let i=document.querySelector("#ch");i&&(i.style.display="block"),(findUserAgent("trident")||findUserAgent("edge"))&&(i.style.width="0px",i.style.height="0px",i.style.border="none",i.style.opacity=0),i.addEventListener("compositionstart",function(){mackeyboard.isPinyin=!0;}),i.addEventListener("compositionend",function(){if(mackeyboard.typing_flag===keyboard.off)return;let e="Mac68K"===navigator.platform||"MacPPC"===navigator.platform||"Macintosh"===navigator.platform||"MacIntel"===navigator.platform;mackeyboard.isPinyin=!1,mackeyboard.isPinyin||navigator.userAgent.indexOf("BIDU")>-1||navigator.userAgent.indexOf("MetaSr")>-1||(e?mackeyboard.sendInputString(this.value.replace(/[a-z\'|(^\s+)]/gi,""),this.value=""):mackeyboard.sendInputString(this.value),this.value="");}),i.addEventListener("input",function(e){if(mackeyboard.typing_flag===keyboard.off)return;let t=this.value;mackeyboard.isPinyin||(mackeyboard.sendInputString(t),this.value="");}),i.addEventListener("blur",function(e){mackeyboard.typing_flag!==keyboard.off&&mackeyboard.typing_flag===keyboard.on&&mackeyboard.typing_destroy();});}mackeyboard.isPinyin=!1,mackeyboard.typing();},mackeyboard.typing_destroy=function(){let e=document.querySelector("#ch");e&&(e.value="",e.style.display="none",e.blur()),mackeyboard.typing_flag=keyboard.off,timer2&&window.clearTimeout(timer2);let t=document.querySelector("#myDiv");t&&t.remove();},mackeyboard.typing=function(e){if(mackeyboard.typing_flag===keyboard.on){document.getElementById("ch").focus(),document.onkeydown=function(e){let t=e.keyCode||e.which||e.charCode;if(mackeyboard.typing_flag!==keyboard.off&&(34===t||35===t||36===t||37===t||38===t||39===t||40===t||45===t||46===t||9===t||8===t||13===t)){let e=keyboard.key_dictionary[t];return 8===t?e=127:13===t?e=173:37===t?e=174:39===t&&(e=175),redfinger.sendCommand(e),!1;}};}},mackeyboard.foucsCh=function(){let e=document.querySelector("#ch");"ch"!==document.activeElement.id&&mackeyboard.typing_flag===keyboard.on&&e.focus(),timer2=window.setTimeout(mackeyboard.foucsCh,200);},mackeyboard.sendInputString=function(e){let t="",r=-1,n=0;for(let i=0;i<e.length;i++){let o=e.charCodeAt(i),a=0;10!==o&&(o>=32&&o<=127?(n=1===r,a=0):(n=0===r,a=1),n?(-1===r&&(r=a),redfinger.sendInputString(r+""+t),t="",r=a,t+=e[i]):(r=a,t+=e[i]));}t.length>0&&redfinger.sendInputString(r+""+t);},mackeyboard.home=function(){redfinger.sendKey(redfinger.KEY_TYPE.KEY_HOMEPAGE,!0),redfinger.sendKey(redfinger.KEY_TYPE.KEY_HOMEPAGE,!1);},mackeyboard.menu=function(){redfinger.sendKey(redfinger.KEY_TYPE.KEY_HOMEPAGE,!0),redfinger.sendKey(redfinger.KEY_TYPE.KEY_HOMEPAGE,!1),redfinger.sendKey(redfinger.KEY_TYPE.KEY_HOMEPAGE,!0),redfinger.sendKey(redfinger.KEY_TYPE.KEY_HOMEPAGE,!1);},redfinger.setMobilePhoneFull=function(){var e=document.getElementById(redfinger.phoneBoxId);if(e){var t=document.documentElement.clientWidth,r=document.documentElement.clientHeight,n=e.style.height;if(n&&n.indexOf("%")){var i=n.substr(0,n.length-1),o=1;if(Number(i)<100)o=Number("0."+i);else o=1;r*=o;}e.style.width=t+"px",e.style.height=r+"px",e.style.boxSizing="border-box";}},redfinger.initConfig=function(e,t){redfinger.videoId=t,redfinger.phoneBoxId=e,redfinger._isPc=redfinger.isPc(),redfinger.clientStatus={portrait:"portrait",landscape:"landscape"};},redfinger.createCanvas=function(e){var t=document.getElementById(e),r=document.getElementById("redPhone");if(t&&!r){var n=document.createElement("canvas");n.id="redPhone",t.appendChild(n),redfinger.initConfig(e,"redPhone");}},redfinger.createVideo=function(e){var t=document.getElementById(e),r=document.getElementById("phoneVideo");if(t&&!r){var n=document.createElement("video"),i={id:"phoneVideo",preload:"auto","webkit-playsinline":"true",playsinline:"true","x-webkit-airplay":"allow","x5-video-player-type":"h5","x5-video-player-fullscreen":"true","x5-video-orientation":"portraint",autoplay:"autoplay",muted:"true",style:"height:100%;"};redfinger.setEleAttributes(n,i),t.appendChild(n),redfinger.initConfig(e,i.id);}},redfinger.createAudio=function(e){var t=document.getElementById(e),r=document.getElementById("phoneAudio");if(t&&!r){var n=document.createElement("video"),i={id:"phoneAudio",preload:"auto","webkit-playsinline":"true",playsinline:"true","x-webkit-airplay":"allow","x5-video-player-type":"h5","x5-video-player-fullscreen":"true","x5-video-orientation":"portraint",autoplay:"autoplay",muted:"true",style:"height:100px;width:100px;position: absolute;pointer-events: none;top:0;left:0;"};redfinger.setEleAttributes(n,i),t.appendChild(n),redfinger.initConfig(e,i.id);}},redfinger.setEleAttributes=function(e,t){for(var r in t)e.setAttribute(r,t[r]);},redfinger.resizeWebrtcPhone=function(){var e,t=document.getElementById(redfinger.phoneBoxId),r=document.getElementById(redfinger.videoId),n=document.documentElement.clientWidth,i=document.documentElement.clientHeight;if(redfinger._isPc&&redfinger.phone.rotation!==redfinger.clientStatus.portrait){if(redfinger.phone.rotation===redfinger.clientStatus.landscape){s=n;(a=parseInt(s*redfinger.videoinfo.width/redfinger.videoinfo.height))>i&&(a=i,s=parseInt(a*redfinger.videoinfo.height/redfinger.videoinfo.width),e=0),redfinger.videoDomConfig={width:a,height:s},t.style.height=a+"px",t.style.width=s+"px";var o=r.offsetLeft+"px";t.offsetLeft;r.style.transform="translate( -"+o+","+a+"px) rotate(270deg)";}}else{e=0;var a,s=i;(a=parseInt(s*redfinger.videoinfo.width/redfinger.videoinfo.height))>n&&(a=n,e=(i-(s=parseInt(a*redfinger.videoinfo.height/redfinger.videoinfo.width)))/2),redfinger.videoDomConfig={width:a,height:s};}t&&r&&(redfinger._isPc?(t.style.position="relative",t.style.top=e+"px",t.style.textAlign="center",r.style.position="relative",r.style.width=redfinger.videoDomConfig.width+"px",r.style.height=redfinger.videoDomConfig.height+"px"):(redfinger.setMobilePhoneFull(),r.style.cssText=" width: 100%;  height: 100%;"));},redfinger.orientationchangePhone=function(){console.warn("orientationchange");},window.muteGui=new MuteGui(),setInterval(function(){window.muteGui.checkMeted();},1e3),ImagePool.prototype.next=function(){if(this.images.length<this.size){var e=new Image();return this.images.push(e),e;}return this.counter>=this.size&&(this.counter=0),this.images[this.counter++%this.size];};class AudioRecoder{constructor(e){this.leftDataList=[],this.rightDataList=[],this.allLeftDataList=[],this.allRightDataList=[],this.mediaPlayer=null,this.audioContext=null,this.source=null,this.sampleRate=e||8e3;}startRecord(){return new Promise((e,t)=>{navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.navigator.mediaDevices.getUserMedia({audio:{sampleRate:this.sampleRate,channelCount:redfinger.config.audioChannelCnt||2,audioBitsPerSecond:16,volume:1,autoGainControl:redfinger.config.autoGainControl,echoCancellation:redfinger.config.echoCancellation,noiseSuppression:redfinger.config.noiseSuppression}}).then(t=>{this.mediaPlayer=t,this.beginRecord(t),e();}).catch(e=>{console.error(e),t(e);});});}beginRecord(e){let t=new(window.AudioContext||window.webkitAudioContext)(),r=t.createMediaStreamSource(e),n=this.createJSNode(t);n.connect(t.destination),n.onaudioprocess=this.onAudioProcess.bind(this),r.connect(n),this.audioContext=t;}onAudioProcess(e){let t=e.inputBuffer,r=t.getChannelData(0),n=t.getChannelData(1);this.leftDataList.push(r.slice(0)),this.rightDataList.push(n.slice(0)),redfinger.config.isMicroDown&&(this.allLeftDataList.push(r.slice(0)),this.allRightDataList.push(n.slice(0)));let i=this.mergeArray(this.leftDataList),o=this.mergeArray(this.rightDataList),a=this.interleaveLeftAndRight(this.interSingleData(i),this.interSingleData(o)),s=this.createWavFile(a),d=new Uint8Array(s),c=redfinger.fill_redfinger_pack(d,redfinger.MSG_TYPE.MSG_INPUT,198);redfinger.send(c),this.leftDataList=[],this.rightDataList=[];}createJSNode(e){let t=e.createScriptProcessor||e.createJavaScriptNode;return t=t.bind(e),t(4096,2,2);}playRecord(e){let t=new Blob([new Int8Array(e)],{type:"audio/mp3"}),r=URL.createObjectURL(t);return this.source=t,this.blobUrl=r,r;}stopRecord(){this.resetRecord();}downLoad(){let e=this.mergeArray(this.allLeftDataList),t=this.mergeArray(this.allRightDataList),r=this.interleaveLeftAndRight(this.interSingleData(e),this.interSingleData(t)),n=this.createWavFile(r),i=new Blob([new Uint8Array(n)],{type:"audio/pcm"}),o=window.URL.createObjectURL(i),a=document.createElement("a");a.download="pcm",a.style.display="none",a.href=o,document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(o);}transformArrayBufferToBase64(e){let t="",r=new Uint8Array(e);for(let e=r.byteLength,n=0;n<e;n++)t+=String.fromCharCode(r[n]);return window.btoa(t);}resetRecord(){this.leftDataList=[],this.rightDataList=[],this.audioContext&&(this.audioContext.close(),this.mediaPlayer.getAudioTracks().forEach(e=>{e.stop(),this.mediaPlayer.removeTrack(e);}));}createWavFile(e){let t=new ArrayBuffer(2*e.length),r=new DataView(t),n=e.length,i=0;for(let t=0;t<n;t++)r.setInt16(i,32767*e[t],!0),i+=2;return t;}writeUTFBytes(e,t,r){let n=r.length;for(let i=0;i<n;i++)e.setUint8(t+i,r.charCodeAt(i));}interSingleData(e){let t=e.length,r=this.audioContext.sampleRate,n=this.sampleRate;r+=0,n+=0;let i=0,o=r/n,a=Math.ceil(t*n/r),s=new Float32Array(a);for(let t=0;t<a;t++)s[t]=e[Math.floor(i)],i+=o;return s;}interleaveLeftAndRight(e,t){let r=e.length+t.length,n=new Float32Array(r);for(let r=0;r<e.length;r++){let i=2*r;n[i]=e[r],n[i+1]=t[r];}return n;}mergeArray(e){let t=e.length*e[0].length,r=new Float32Array(t),n=0;for(let t=0;t<e.length;t++)r.set(e[t],n),n+=e[t].length;return r;}playMusic(){if(!this.value)return;let e=URL.createObjectURL(this.files[0]);document.querySelector(".audio-node").src=e;}play(e){let t=new(this.AudioContext||this.webkitAudioContext)(),r=t.createBufferSource();t.decodeAudioData(e,function(e){r.buffer=e,r.connect(t.destination),r.start(0);});}downLoad2(){if(!redfinger.config.isMicroDown)return void MLOG.warn(MLOG.w("下载语音录音需要设置 『redfinger.config.isMicroDown = true;』"));let e=this.mergeArray(this.allLeftDataList),t=this.mergeArray(this.allRightDataList),r=this.interleaveLeftAndRight(this.interSingleData(e),this.interSingleData(t)),n=this.createWavFile2(r),i=new Blob([new Uint8Array(n)],{type:"audio/wav"}),o=window.URL.createObjectURL(i),a=document.createElement("a");a.download="pcm",a.style.display="none",a.href=o,document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(o);}createWavFile2(e){let t=this.sampleRate,r=new ArrayBuffer(2*e.length+44),n=new DataView(r);this.writeUTFBytes(n,0,"RIFF"),n.setUint32(4,44+2*e.length,!0),this.writeUTFBytes(n,8,"WAVE"),this.writeUTFBytes(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,2,!0),n.setUint32(24,t,!0),n.setUint32(28,2*t,!0),n.setUint16(32,4,!0),n.setUint16(34,16,!0),this.writeUTFBytes(n,36,"data"),n.setUint32(40,2*e.length,!0),console.log(n,"view");let i=e.length,o=44;for(let t=0;t<i;t++)n.setInt16(o,32767*e[t],!0),o+=2;return r;}}!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports;}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n});},r.n=function(e){var t=e&&e.__esModule?function(){return e.default;}:function(){return e;};return r.d(t,"a",t),t;},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t);},r.p="",r(r.s=0);}([function(e,t){window.AesSign=function(e){let t="",r="";return e.originKey?(t=e.originKey,e.originIv?(r=e.originIv,{encrypt:function(e){var n=CryptoJS.enc.Latin1.parse(t),i=CryptoJS.enc.Latin1.parse(r);return CryptoJS.AES.encrypt(e,n,{iv:i,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).toString();}}):(console.error("error option.originIv"),null)):(console.error("error option.originIv"),null);};}]);var CryptoJS=CryptoJS||function(e){function t(){}var r={},n=r.lib={},i=n.Base={extend:function(e){t.prototype=this;var r=new t();return e&&r.mixIn(e),r.hasOwnProperty("init")||(r.init=function(){r.$super.init.apply(this,arguments);}),(r.init.prototype=r).$super=this,r;},create:function(){var e=this.extend();return e.init.apply(e,arguments),e;},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString);},clone:function(){return this.init.prototype.extend(this);}},o=n.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length;},toString:function(e){return(e||s).stringify(this);},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var i=0;i<e;i++)t[n+i>>>2]|=(r[i>>>2]>>>24-i%4*8&255)<<24-(n+i)%4*8;else if(65535<r.length)for(i=0;i<e;i+=4)t[n+i>>>2]=r[i>>>2];else t.push.apply(t,r);return this.sigBytes+=e,this;},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4);},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e;},random:function(t){for(var r=[],n=0;n<t;n+=4)r.push(4294967296*e.random()|0);return new o.init(r,t);}}),a=r.enc={},s=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;n<e;n++){var i=t[n>>>2]>>>24-n%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16));}return r.join("");},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new o.init(r,t/2);}},d=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;n<e;n++)r.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return r.join("");},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new o.init(r,t);}},c=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)));}catch(e){throw Error("Malformed UTF-8 data");}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)));}},f=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init(),this._nDataBytes=0;},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes;},_process:function(t){var r=this._data,n=r.words,i=r.sigBytes,a=this.blockSize,s=i/(4*a);s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0),i=e.min(4*(t=s*a),i);if(t){for(var d=0;d<t;d+=a)this._doProcessBlock(n,d);d=n.splice(0,t),r.sigBytes-=i;}return new o.init(d,i);},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e;},_minBufferSize:0});n.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset();},reset:function(){f.reset.call(this),this._doReset();},update:function(e){return this._append(e),this._process(),this;},finalize:function(e){return e&&this._append(e),this._doFinalize();},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t);};},_createHmacHelper:function(e){return function(t,r){return new u.HMAC.init(e,r).finalize(t);};}});var u=r.algo={};return r;}(Math);function MciReport(){let e="3003",t=null,r="",n=!1;function i(e,t,r){return function(){if(t)try{t.apply(this,arguments);}catch(e){}if(e.apply(this,arguments),r)try{r.apply(this,arguments);}catch(e){}};}let o=function(r,n){redfinger.inputConfigInfo.resultInfo.uuid=redfinger.config.uuid;let i={appId:e,fact:{btyp:"APP_ERROR",ptyp:"3",md:"",sv:"",src:redfinger.config.reportSrc,ver:redfinger.version,nw:"",cop:""},body:""},o={btyp:"APP_ERROR",ptyp:"3",uid:redfinger.inputConfigInfo.resultInfo.userId,cuid:"",ver:redfinger.version,vcd:"",src:redfinger.config.reportSrc,ct:n,data:{ftyp:"ERROR",etyp:"h5SdkErrCode",einf:""+JSON.stringify({sdk_config:redfinger.config,play_config:redfinger.inputConfigInfo,padCode:redfinger.inputConfigInfo.padCode,sessionId:redfinger.inputConfigInfo.resultInfo.sessionId}),et:"",md:"",rv:"",nw:"",cop:"",code:""+r,imei:"",mac:"",ua:navigator.userAgent.toLowerCase(),pckName:redfinger.config.appName,padCode:redfinger.inputConfigInfo.padCode,sessionId:redfinger.inputConfigInfo.resultInfo.sessionId}};return i.body=t.encrypt(JSON.stringify(o)),MLOG.debug(MLOG.d("err report: "+JSON.stringify(o))),i;},a=function(r,n,i){let o={appId:e,fact:{btyp:"STAT_INFO",ptyp:"3",md:"",sv:"",src:redfinger.config.reportSrc,ver:redfinger.version,nw:"",cop:""},body:""},a={btyp:"STAT_INFO",ptyp:"3",uid:redfinger.inputConfigInfo.resultInfo.userId,cuid:"",ver:redfinger.version,vcd:"",src:redfinger.config.reportSrc,ct:i,data:{ua:navigator.userAgent.toLowerCase(),pckName:redfinger.config.appName,padCode:redfinger.inputConfigInfo.padCode,sessionId:redfinger.inputConfigInfo.resultInfo.sessionId,keyword:n,params:r}};return o.body=t.encrypt(JSON.stringify(a)),MLOG.debug(MLOG.d("info report: "+JSON.stringify(a))),o;},s=function(r,n){let i={appId:e,fact:{btyp:"STAT_INFO",ptyp:"3",md:"",sv:"",src:redfinger.config.reportSrc,ver:redfinger.version,nw:"",cop:""},body:""},o={btyp:"STAT_INFO",ptyp:"3",uid:redfinger.inputConfigInfo.resultInfo.userId,cuid:"",ver:redfinger.version,vcd:"",src:redfinger.config.reportSrc,ct:n,data:{keyword:"videoInfo",params:{uuid:redfinger.config.uuid,appKey:redfinger.inputConfigInfo.resultInfo.merchantInfo.appkey,pckName:redfinger.config.appName,padCode:redfinger.inputConfigInfo.padCode,sessionId:redfinger.inputConfigInfo.resultInfo.sessionId,width:r.width,height:r.height,devLevel:r.devLevel,bitrate:r.bitrate,fps:r.fps,netDelay:r.netDelay,isWebRtc:redfinger.videoinfo.isWebRtc?1:0,type:r.type,other:""}}};return i.body=t.encrypt(JSON.stringify(o)),MLOG.debug(MLOG.d("info report: "+JSON.stringify(o))),i;},d=function(e){let t={appId:e.appId,fact:JSON.stringify(e.fact),body:e.body},n=null;if(window.ActiveXObject?n=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(n=new XMLHttpRequest()),null===n)return void MLOG.warn(MLOG.w("XHR is not support"));n.open("POST",r,!0);let i=new FormData();i.append("appId",t.appId),i.append("fact",t.fact),i.append("body",t.body),n.send(i);};return{init:function(){r=redfinger.config.reportUrl,t=new AesSign({originKey:"1000001356474191",originIv:"1545456413215484"}),n||(n=!0,redfinger.onErrorMessage=new i(redfinger.onErrorMessage,null,function(e){let t=new Date().getTime();d(o(e,t));}),redfinger.onOpen=new i(redfinger.onOpen,null,function(e){let t=new Date().getTime();d(e+""=="102"?a({sdk_config:redfinger.config,play_config:redfinger.inputConfigInfo},"start_play",t):o(e,t));}),redfinger.onUnisibilityTime=new i(redfinger.onUnisibilityTime,null,function(e){let t=new Date().getTime();d(a({time:e},"on_unvisibility_time",t));}),redfinger.onVideoInfoChange=new i(redfinger.onVideoInfoChange,null,function(e){let t=new Date().getTime();d(s(e,t));}));},imgDownloadErr:function(r){let n=new Date().getTime();redfinger.inputConfigInfo.resultInfo.uuid=redfinger.config.uuid;let i={appId:e,fact:{btyp:"APP_ERROR",ptyp:"3",md:"",sv:"",src:redfinger.config.reportSrc,ver:redfinger.version,nw:"",cop:""},body:""},o={btyp:"APP_ERROR",ptyp:"3",uid:redfinger.inputConfigInfo.resultInfo.userId,cuid:"",ver:redfinger.version,vcd:"",src:redfinger.config.reportSrc,ct:n,data:{ftyp:"ERROR",etyp:"h5SdkErrCode",einf:""+JSON.stringify({sdk_config:redfinger.config,play_config:redfinger.inputConfigInfo,padCode:redfinger.inputConfigInfo.padCode,sessionId:redfinger.inputConfigInfo.resultInfo.sessionId}),et:"",md:"",rv:"",nw:"",cop:"",code:""+r.errorCode,imei:"",mac:"",ua:navigator.userAgent.toLowerCase(),pckName:redfinger.config.appName,padCode:redfinger.inputConfigInfo.padCode,sessionId:redfinger.inputConfigInfo.resultInfo.sessionId,imgUrl:r.imgUrl}};i.body=t.encrypt(JSON.stringify(o)),MLOG.debug(MLOG.d("err report: "+JSON.stringify(o))),d(i);}};}function MciReportET(){let e=null,t="";function r(e){const r={appId:e.appId,fact:JSON.stringify(e.fact),body:e.body};let n=null;if(window.ActiveXObject?n=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(n=new XMLHttpRequest()),null==n)return void MLOG.error(MLOG.e("XHR is not support"));n.open("POST",t,!0);const i=new FormData();i.append("appId",r.appId),i.append("fact",r.fact),i.append("body",r.body),n.send(i);}t=redfinger.config.reportETUrl,e=new AesSign({originKey:"1000001356474191",originIv:"1545456413215484"});const n=function(t,r){const n={appId:"3003",fact:{btyp:"STAT_INFO",ptyp:"3",md:"",sv:"",src:redfinger.config.reportETSrc,ver:redfinger.version,nw:"",cop:""},body:""},i={btyp:"STAT_INFO",ptyp:"3",uid:redfinger.config.uuid,cuid:"",ver:redfinger.version,vcd:"",src:redfinger.config.reportETSrc,ct:r,data:_extends({padCode:redfinger.getPadCode(),sessionId:redfinger.local.deviceInfo.resultInfo.sessionId},t)};return n.body=e.encrypt(JSON.stringify(i)),n;};return{sendEndPlay:function(){const e=new Date().getTime(),t={keyword:"play_control_report",sdkTrackingData:redfinger.tracking.getTrackingData()};r(n(t,e));},sendStartPlay:function(){const e=new Date().getTime(),t=redfinger.tracking.getTrackingData(),i=redfinger.videoinfo.currSteamMode,o=redfinger.local.deviceInfo.resultInfo,a={ip:"",port:""};try{["1","2"].includes(i)?(a.ip=o.remoteList[0].remoteWsIp,a.port=o.remoteList[0].remoteWsPort):"3"===i?(a.ip=o.webRtcControlList[0].webRtcControlInfoList[0].controlIp,a.port=o.webRtcControlList[0].webRtcControlInfoList[0].controlPort):(a.ip=o.webControlList[0].webControlInfoList[0].controlIp,a.port=o.webControlList[0].webControlInfoList[0].controlPort);}catch(e){}const s={keyword:"START_PLAY",startPlayTime:t.baseInfo.startPlayTime,controlIp:a.ip,controlPort:a.port};r(n(s,e));}};}function keyCtrlUi(){MLOG.info(MLOG.i("create keyCtrlUi instance"));let e=!1,t={opacity:.8,showJoystick:!0,keys:[]},r={opacity:.8,showJoystick:!0,keys:[]},n={opacity:.8,showJoystick:!0,keys:[]},i={top:0,left:0},o=!0,a=0,s="play",d=null,c="open",f=null,u=null,l=!1,p=null,h=null,g=!1,y=redfingerCreateElement;function b(n,i){MLOG.info(MLOG.i("keyCtrlUi init")),t.keys=n.keys?n.keys:[],t.opacity=void 0!==n.opacity?n.opacity:.8,t.showJoystick=void 0===n.showJoystick||n.showJoystick,r.keys=i.keys?i.keys:[],r.opacity=void 0!==i.opacity?i.opacity:.8,r.showJoystick=void 0===i.showJoystick||i.showJoystick,document.onkeydown=function(e){if(9===(e.keyCode||e.which||e.charCode))return!1;},e=!0;}function m(t,n,i){MLOG.info(MLOG.i("keyCtrlUi buildKeyUi")),e&&(keyboard.setKey(t,i),function(){let e=document.getElementById("keyCtrlMask");e&&e.remove();}(),v(),function(){let e=document.getElementById(redfinger.dom);if(!e)return;let t=r.opacity;(t<0||t>1)&&(t=.8);let n=document.createElement("div");n.style.position="fixed",n.style.display=!0===o&&"play"===s?"block":"none",n.id="keyCtrlMask",1===redfinger.sdkInfo.playMode?3===redfinger.phone.rotation||1===redfinger.phone.rotation?(a=redfinger.phone.rotation,n.style.width=redfinger.videoinfo.height+"px",n.style.height=redfinger.videoinfo.width+"px"):(a=redfinger.phone.rotation,n.style.width=redfinger.videoinfo.width+"px",n.style.height=redfinger.videoinfo.height+"px"):1===redfinger.phone.rotation?(a=1,n.style.width=redfinger.videoinfo.height+"px",n.style.height=redfinger.videoinfo.width+"px"):(a=0,n.style.width=redfinger.videoinfo.width+"px",n.style.height=redfinger.videoinfo.height+"px");n.style.left=redfinger.phone.offSetx+"px",n.style.top=redfinger.phone.offSety+"px",n.style.pointerEvents="none",n.style.transform="scale("+redfinger.phone.width/redfinger.videoinfo.width+")",n.style.webkitTransform="scale("+redfinger.phone.width/redfinger.videoinfo.width+")",n.style.mozTransform="scale("+redfinger.phone.width/redfinger.videoinfo.width+")",n.style.oTransform="scale("+redfinger.phone.width/redfinger.videoinfo.width+")",n.style.transformOrigin="0px 0px",n.style.webkitTransOrigin="0px 0px",n.style.mozTransOrigin="0px 0px",n.style.oTransOrigin="0px 0px",n.style.opacity=t,n.style.zIndex="1",e.append(n);}(),function(){let e=document.getElementById("keyCtrlMask"),t=r.keys;for(let n=0;n<t.length;n++){if(!1===r.showJoystick&&("a"===t[n].key||"w"===t[n].key||"d"===t[n].key||"s"===t[n].key))continue;let i=C(t[n].key,t[n].x,t[n].y);e.append(i);}}());}function v(){let e=r.keys,t=0,n=0,o=0,a=0,s=0,d=0,c=0,f=0;for(let r=0;r<e.length;r++)"a"===e[r].key&&(t=e[r].x,n=e[r].y),"d"===e[r].key&&(o=e[r].x,a=e[r].y),"w"===e[r].key&&(s=e[r].x,d=e[r].y),"s"===e[r].key&&(c=e[r].x,f=e[r].y);let u={x:(t+o)/2,y:(d+f)/2};0===redfinger.config.keyCtrlRotation&&(u={x:(s+c)/2,y:(n+a)/2}),i=P(u.x,u.y,S());}function S(){let e=.05*redfinger.videoinfo.width;return 1===redfinger.sdkInfo.playMode&&(e=.05*redfinger.videoinfo.height),e<=0&&(e=36),e;}function k(){MLOG.debug(MLOG.d("rebuild "+redfinger.videoinfo.width+","+redfinger.videoinfo.height)),0===redfinger.videoinfo.width||0===redfinger.videoinfo.height?setTimeout(k,1e3):m(r.keys,r.opacity,r.showJoystick);}function C(e,t,r){let n=S(),i="key-ctrl-"+e,o=document.getElementById(i);o||(o=document.createElement("div")),o.id=i,o.style.width=n+"px",o.style.height=n+"px",o.style.lineHeight=n+"px",o.style.color="#fff",o.style.fontSize=.3*n+"px",o.style.backgroundColor="#4C5865",o.style.borderRadius="50%",o.style.position="absolute",o.style.textAlign="center";let a=P(t,r,n);a=_(e,a),o.style.top=a.top+"px",o.style.left=a.left+"px";let s=T(e);return o.prepend(s),o;}function T(e){let t=document.createElement("span");if(t.classList.add("key-name"),e.indexOf("new")>-1)return t.innerText="",t;t.innerText=e.toLocaleUpperCase(),"space"===e&&(t.innerText="空格"),"left"===e&&(t.innerText="左键"),"right"===e&&(t.innerText="右键"),"shift"===e&&(t.innerText="Shift"),"ctrl"===e&&(t.innerText="Ctrl"),"alt"===e&&(t.innerText="Alt"),"tab"===e&&(t.innerText="Tab"),"meta"===e&&(t.innerText="Meta"),"meta2"===e&&(t.innerText="Meta"),"enter"===e&&(t.innerText="Enter"),"caps"===e&&(t.innerText="Caps"),"back"===e&&(t.innerText="Back"),"up"===e&&(t.innerText="↑"),"down"===e&&(t.innerText="↓"),"lt"===e&&(t.innerText="←"),"rt"===e&&(t.innerText="→"),"insert"===e&&(t.innerText="Insert"),"home"===e&&(t.innerText="Home"),"pgup"===e&&(t.innerText="Pgup"),"pgdn"===e&&(t.innerText="Pgdn"),"del"===e&&(t.innerText="Del"),"end"===e&&(t.innerText="End"),"textm"===e&&(t.innerText="textm");let r=y("div","",[],[]);return r.append(t),r;}function P(e,t,r){let n={top:0,left:0};return 1===redfinger.sdkInfo.playMode?0===redfinger.phone.rotation?(n.top=(1-e)*redfinger.videoinfo.height-r/2,n.left=t*redfinger.videoinfo.width-r/2):3===redfinger.phone.rotation?(n.top=t*redfinger.videoinfo.width-r/2,n.left=e*redfinger.videoinfo.height-r/2):1===redfinger.phone.rotation?(n.top=(1-t)*redfinger.videoinfo.width-r/2,n.left=(1-e)*redfinger.videoinfo.height-r/2):2===redfinger.phone.rotation&&(n.top=e*redfinger.videoinfo.height-r/2,n.left=(1-t)*redfinger.videoinfo.width-r/2):1===redfinger.phone.rotation?(n.top=(1-e)*redfinger.videoinfo.width-r/2,n.left=t*redfinger.videoinfo.height-r/2):(n.top=t*redfinger.videoinfo.height-r/2,n.left=e*redfinger.videoinfo.width-r/2),n;}function _(e,t){if(0===redfinger.config.keyCtrlRotation)return function(e,t){let r=.078*redfinger.videoinfo.width;1===redfinger.sdkInfo.playMode&&(r=.078*redfinger.videoinfo.height);switch(e){case"a":0===redfinger.sdkInfo.playMode?0===a?(t.left=i.left-r,t.top=i.top):(t.left=i.left,t.top=i.top+r):1===redfinger.sdkInfo.playMode&&(3===a?(t.left=i.left-r,t.top=i.top):0===a&&(t.left=i.left,t.top=i.top+r));break;case"d":0===redfinger.sdkInfo.playMode?0===a?(t.left=i.left+r,t.top=i.top):(t.left=i.left,t.top=i.top-r):1===redfinger.sdkInfo.playMode&&(3===a?(t.left=i.left+r,t.top=i.top):0===a&&(t.left=i.left,t.top=i.top-r));break;case"w":0===redfinger.sdkInfo.playMode?0===a?(t.left=i.left,t.top=i.top-r):(t.left=i.left-r,t.top=i.top):1===redfinger.sdkInfo.playMode&&(3===a?(t.left=i.left,t.top=i.top-r):0===a&&(t.left=i.left-r,t.top=i.top));break;case"s":0===redfinger.sdkInfo.playMode?0===a?(t.left=i.left,t.top=i.top+r):(t.left=i.left+r,t.top=i.top):1===redfinger.sdkInfo.playMode&&(3===a?(t.left=i.left,t.top=i.top+r):0===a&&(t.left=i.left+r,t.top=i.top));}return t;}(e,t);let r=.078*redfinger.videoinfo.width;switch(1===redfinger.sdkInfo.playMode&&(r=.078*redfinger.videoinfo.height),e){case"a":0===redfinger.sdkInfo.playMode?1===a?(t.left=i.left-r,t.top=i.top):(t.left=i.left,t.top=i.top-r):1===redfinger.sdkInfo.playMode&&(0===a?(t.left=i.left-r,t.top=i.top):3===a&&(t.left=i.left,t.top=i.top-r));break;case"d":0===redfinger.sdkInfo.playMode?1===a?(t.left=i.left+r,t.top=i.top):(t.left=i.left,t.top=i.top+r):1===redfinger.sdkInfo.playMode&&(0===a?(t.left=i.left+r,t.top=i.top):3===a&&(t.left=i.left,t.top=i.top+r));break;case"w":0===redfinger.sdkInfo.playMode?1===a?(t.left=i.left,t.top=i.top-r):(t.left=i.left+r,t.top=i.top):1===redfinger.sdkInfo.playMode&&(0===a?(t.left=i.left,t.top=i.top-r):3===a&&(t.left=i.left+r,t.top=i.top));break;case"s":0===redfinger.sdkInfo.playMode?1===a?(t.left=i.left,t.top=i.top+r):(t.left=i.left-r,t.top=i.top):1===redfinger.sdkInfo.playMode&&(0===a?(t.left=i.left,t.top=i.top+r):3===a&&(t.left=i.left-r,t.top=i.top));}return t;}function w(e,t,r,n){n=void 0===n||n;let i=S();i-=4;let o="key-edit-"+e,a=document.getElementById(o);a||(a=y("div",o,["key-edit-ui"],n?[y("div",o+"-del",["key-edit-del"],[]),y("input",o+"-input",["key-edit-input"],[])]:[])),n||(a.style.pointerEvents="none"),a.keyName=e,a.style.width=i+"px",a.style.height=i+"px",a.style.lineHeight=i+"px",a.style.color="#fff",a.style.fontSize=.3*i+"px",a.style.backgroundColor="#4C5865",a.style.borderRadius="50%",a.style.position="absolute",a.style.textAlign="center";let s=P(t,r,i);s=_(e,s),a.style.top=s.top+"px",a.style.left=s.left+"px";let d=T(e);return d.style.cursor="default",a.prepend(d),a;}function O(){for(let e=0;e<n.keys.length;e++){let t=n.keys[e].key;if("a"===t||"w"===t||"s"===t||"d"===t){let e=document.getElementById("key-edit-"+t);e&&(e.style.display="none");}}if(n.showJoystick)for(let e=0;e<r.keys.length;e++){let t=r.keys[e].key;if("a"===t||"w"===t||"s"===t||"d"===t){let t=r.keys[e],n=document.getElementById("key-edit-"+t.key);n&&(n.style.display="block");}}}function M(){!function(){let e=document.getElementById("keyCtrlLayOut");if(!e)return;let t=r.opacity;(t<0||t>1)&&(t=.8);let n=document.getElementById("editKeyboardMask");n&&n.remove();let i=document.createElement("div");i.style.position="fixed",i.id="editKeyboardMask",1===redfinger.sdkInfo.playMode?3===redfinger.phone.rotation||1===redfinger.phone.rotation?(i.style.width=redfinger.videoinfo.height+"px",i.style.height=redfinger.videoinfo.width+"px"):(i.style.width=redfinger.videoinfo.width+"px",i.style.height=redfinger.videoinfo.height+"px"):1===redfinger.phone.rotation?(i.style.width=redfinger.videoinfo.height+"px",i.style.height=redfinger.videoinfo.width+"px"):(i.style.width=redfinger.videoinfo.width+"px",i.style.height=redfinger.videoinfo.height+"px"),i.style.left=redfinger.phone.offSetx+"px",i.style.top=redfinger.phone.offSety+"px",i.style.transform="scale("+redfinger.phone.width/redfinger.videoinfo.width+")",i.style.webkitTransform="scale("+redfinger.phone.width/redfinger.videoinfo.width+")",i.style.mozTransform="scale("+redfinger.phone.width/redfinger.videoinfo.width+")",i.style.oTransform="scale("+redfinger.phone.width/redfinger.videoinfo.width+")",i.style.transformOrigin="0px 0px",i.style.webkitTransOrigin="0px 0px",i.style.mozTransOrigin="0px 0px",i.style.oTransOrigin="0px 0px",i.style.opacity=t,i.style.zIndex="1",e.append(i);}(),function(){let e=document.getElementById("editKeyboardMask"),t=n.keys;for(let r=0;r<t.length;r++){let n=w(t[r].key,t[r].x,t[r].y,t[r].edit);e.append(n);}O();}(),function(){let e=y("div","lock-mouse-tip",["mouse-lock-tip"],[]);document.getElementById("editKeyboardMask").append(e);}();}function I(){document.body.addEventListener("keyup",E),document.getElementById("edit-panel-back").addEventListener("click",R),function(){let e=document.getElementById("edit-panel-ui-opacity");e.addEventListener("mouseover",function(e){document.getElementById("keyCtrlLayOut").style.background="unset",e.stopPropagation();},!1),e.addEventListener("mouseout",function(e){document.getElementById("keyCtrlLayOut").style.background="",e.stopPropagation();},!1),h=new redfingerSlidBar({defaultValue:n.opacity,eleId:"ui-opacity",change:function(e){n.opacity=e,document.getElementById("editKeyboardMask").style.opacity=n.opacity,document.getElementById("keyCtrlMask").style.opacity=n.opacity,G();}});}(),document.getElementById("edit-panel-reset").addEventListener("click",D),document.getElementById("edit-panel-save").addEventListener("click",x),document.getElementById("edit-panel-direct").addEventListener("click",B),document.getElementById("ctrl-panel-fold").addEventListener("click",N),U(),K();}function E(e){let t=e.keyCode||e.which||e.charCode;"esc"===keyboard.key_refer.getKey(t)&&R(),e.stopPropagation();}function R(e){g?redfingerMsgBox({msg:"是否保存当前设置",cancelText:"放弃",confirmText:"保存并返回",cancelCallback:function(){A("back");},confirmCallback:function(){L();}}):A("back");}function L(){n.keys=n.keys.filter(function(e){return-1===e.key.indexOf("new");});let e={showJoystick:!0===n.showJoystick?1:0,opacity:n.opacity,keys:JSON.parse(JSON.stringify(n.keys))};e.keys=e.keys=e.keys.map(function(e){return e.edit=!0===e.edit?1:0,e;}),e.keys=e.keys.filter(function(e){return-1===e.key.indexOf("new");}),p.keysSave(e,function(e){0===e.code?(redfingerToast({type:"success",msg:"键位设置成功"}),function(){let e=JSON.parse(JSON.stringify(n.keys));e.keys=e.filter(function(e){return-1===e.key.indexOf;}),r.showJoystick=n.showJoystick,r.opacity=n.opacity,r.keys=JSON.parse(JSON.stringify(e));}(),keyboard.setKey(JSON.parse(JSON.stringify(n.keys)),n.showJoystick),k(),A("save")):redfingerToast({type:"fail",msg:"键位设置失败，请稍后重试"});});}function A(e){s="play",document.body.removeEventListener("keyup",E),keyboard.joystick_init(),document.getElementById("keyCtrlLayOut").remove(),document.getElementById("keyCtrlMask").style.display="block",keyboard.keyCtrlIsEdit=!1,redfinger.trigCallback(redfinger.onKeyCtrlEditClose,[e]);}function D(e){redfingerMsgBox({msg:"是否将键鼠键位恢复为默认键位?",cancelText:"放弃",confirmText:"确定",cancelCallback:function(){},confirmCallback:function(){let e=JSON.parse(JSON.stringify(t));e.showJoystick=!0===e.showJoystick?1:0,e.keys=e.keys.map(function(e){return e.edit=!0===e.edit?1:0,e;}),p.keysSave(e,function(e){if(0===e.code){r=JSON.parse(JSON.stringify(t)),n=JSON.parse(JSON.stringify(r)),M(),U(),K(),G();let e=document.getElementById("edit-panel-direct");!0===n.showJoystick?e.classList.remove("disable"):e.classList.add("disable"),O(),h&&h.setValue(n.opacity),k(),redfingerToast({type:"success",msg:"恢复默认键位成功"});}else redfingerToast({type:"fail",msg:"键位恢复失败，请稍后重试"});});}});}function G(){let e=!1;n.opacity-r.opacity!=0&&(e=!0);let t=!1;n.showJoystick!==r.showJoystick&&(t=!0);let i=!1;for(let e=0;e<r.keys.length;e++){let t=r.keys[e],o=!1;if(!1!==r.showJoystick||"a"!==t.key&&"w"!==t.key&&"d"!==t.key&&"s"!==t.key){for(let e=0;e<n.keys.length;e++){let r=n.keys[e];if(!(r.key.indexOf("new")>-1)&&t.key===r.key&&(o=!0,t.x!==r.x||t.y!==r.y)){i=!0;break;}}if(!o){i=!0;break;}}}let o=!1;for(let e=0;e<n.keys.length;e++){let t=n.keys[e],i=!1;if((!1!==t.showJoystick||"a"!==t.key&&"w"!==t.key&&"d"!==t.key&&"s"!==t.key)&&!(t.key.indexOf("new")>-1)){for(let e=0;e<r.keys.length;e++){r.keys[e].key===t.key&&(i=!0);}if(!i){o=!0;break;}}}g=!!(e||t||i||o),g?document.getElementById("edit-panel-save").classList.add("on"):document.getElementById("edit-panel-save").classList.remove("on");}function x(){g&&redfingerMsgBox({msg:"是否保存并返回游戏",cancelText:"取消",confirmText:"保存并返回",cancelCallback:function(){},confirmCallback:function(){L();}});}function B(){let e=document.getElementById("edit-panel-direct");!0===n.showJoystick?(e.classList.add("disable"),n.showJoystick=!1):(e.classList.remove("disable"),n.showJoystick=!0),O(),G();}function N(){let e=document.getElementById("edit-panel"),t=document.getElementById("ctrl-panel-fold");"open"===c?(c="close",e.style.display="none",t.classList.add("on")):(c="open",e.style.display="block",t.classList.remove("on"));}function U(){let e=n.keys.slice(0);for(let t=0;t<e.length;t++)e[t].edit&&F(e[t]);}function F(e){let t="key-edit-"+e.key,r=e.key,i=document.getElementById(t),o=document.getElementById(t+"-del");if(i){i.addEventListener("click",function(r){let n=t;i.classList.add("active"),f=n,u={key:e.key,x:e.x,y:e.y,edit:e.edit},document.getElementById(n+"-input").focus(),document.body.addEventListener("keydown",V),r.stopPropagation();}),i.addEventListener("contextmenu",doRightMouseDown,!1),o.addEventListener("click",function(e){let i=t,o=r;document.getElementById(i).remove();for(let e=0;e<n.keys.length;e++)if(n.keys[e].key===o){n.keys.splice(e,1);break;}G(),e.stopPropagation();}),document.getElementById(t+"-input").addEventListener("blur",function(){let e=t;if(document.getElementById(e).classList.remove("active"),l){if(e.indexOf("new")>-1){let t=document.getElementById(e);t&&t.remove();}else{document.getElementById(e).classList.remove("conflict"),document.getElementById(e).getElementsByClassName("key-name")[0].remove();let t=T(u.key);t.style.cursor="default",i.prepend(t);}}else if(void 0!==u.newKeyName&&u.newKeyName!==u.key)!function(){for(let e=0;e<n.keys.length;e++)if(n.keys[e].key===u.key){n.keys[e].key=u.newKeyName;break;}let e=document.getElementById(f);e&&e.remove();let t=w(u.newKeyName,u.x,u.y,u.edit);u.key=u.newKeyName,document.getElementById("editKeyboardMask").append(t),F(u);}();else if(void 0===u.newKeyName&&u.key.indexOf("new")>-1){for(let e=0;e<n.keys.length;e++)if(n.keys[e].key===u.key){n.keys.splice(e,1);break;}let t=document.getElementById(e);t&&t.remove();}for(let e=0;e<n.keys.length;e++){let t=document.getElementById("key-edit-"+n.keys[e].key);t&&t.classList.remove("conflict");}f=null,u=null,document.body.removeEventListener("keydown",V),G();});}}function V(e){let t=e.keyCode||e.which||e.charCode,r=keyboard.key_refer.getKey(t);if("esc"!==r&&(93===t&&("MetaRight"===e.code?(t=91,r=keyboard.key_refer.getKey(t)):"ContextMenu"===e.code&&(r="textm")),null!==r)){let e=!1,i=!0;for(let t=0;t<n.keys.length;t++)n.keys[t].key!==u.key&&n.keys[t].key===r&&(e=!0,i=n.keys[t].edit);let o=document.getElementById(f);o.getElementsByClassName("key-name")[0].remove();let a=T(r);if(a.style.cursor="default",o.prepend(a),t>=112&&t<=123&&(e=!0,i=!1),e){l=!0,o.classList.remove("active"),o.classList.add("conflict"),function(e,t){let r="该按键已被占用";t||(r="该按键已被占用且无法修改，请更换其他按键");let n=e.getElementsByClassName("key-tips");n.length>0&&n[0].remove();n=y("div","",["key-tips"],[r]),e.append(n);}(o,i);for(let e=0;e<n.keys.length;e++){if(n.keys[e].key===u.key)continue;let t=document.getElementById("key-edit-"+n.keys[e].key);t&&t.classList.remove("conflict");}let e=document.getElementById("key-edit-"+r);e&&e.classList.add("conflict");}else{l=!1,o.classList.remove("conflict"),o.classList.add("active"),r!==u.key&&(u.newKeyName=r),function(e){let t=e.getElementsByClassName("key-tips");t.length>0&&t[0].remove();}(o);for(let e=0;e<n.keys.length;e++){let t=document.getElementById("key-edit-"+n.keys[e].key);t&&t.classList.remove("conflict");}}G();}}function K(){let e=document.getElementById("editKeyboardMask");e.addEventListener("click",function(t){let r=function(e,t,r){let n=r.offsetX,i=r.offsetY,o=0,a=0;return 1===redfinger.sdkInfo.playMode?0===redfinger.phone.rotation?(o=1-Number(i/t).toFixed(3),a=Number(n/e).toFixed(3)):3===redfinger.phone.rotation?(o=Number(n/e).toFixed(3),a=Number(i/t).toFixed(3)):1===redfinger.phone.rotation?(o=1-Number(n/e).toFixed(3),a=1-Number(i/t).toFixed(3)):2===redfinger.phone.rotation&&(o=Number(i/t).toFixed(3),a=1-Number(n/e).toFixed(3)):0===redfinger.phone.rotation?(o=Number(n/e).toFixed(3),a=Number(i/t).toFixed(3)):1===redfinger.phone.rotation&&(o=1-Number(i/t).toFixed(3),a=Number(n/e).toFixed(3)),{x:Number(o),y:Number(a)};}(e.offsetWidth,e.offsetHeight,t);MLOG.debug(MLOG.d("add key position: "+JSON.stringify(r)));let i={key:"new"+new Date().getTime(),x:r.x,y:r.y,edit:!0};n.keys.push(i);let o=w(i.key,i.x,i.y,i.edit);o.classList.add("active"),e.append(o),F(i),f="key-edit-"+i.key,u={key:i.key,x:i.x,y:i.y,edit:i.edit},document.getElementById(f+"-input").focus(),document.body.addEventListener("keydown",V),t.stopPropagation();});}return{init:b,getKeyConf:function(e,t,r,n,i){MLOG.debug(MLOG.d("getKeyConf param: domain:"+e+" appKey:"+t+"appSecret:"+r+"sessionId: "+i)),p=new RedfingerApi(e,t,r,n,i),p.keysInfo(function(e){null===e?MLOG.debug(MLOG.d("getKeyConf failed")):(b(e.defaultKeyConf,e.customKeyConf),k());});},getKeyConfFromSaas:function(e,t,r,n){MLOG.debug(MLOG.d("getKeyConfFromSaas param: domain:"+e+" serverToken:"+n)),p=new RedfingerSaasApi(e,t,r,n),p.keysInfo(function(e){null===e?MLOG.debug(MLOG.d("getKeyConf failed")):(b(e.defaultKeyConf,e.customKeyConf),k());});},buildKeyUi:m,reBuild:k,resize:function(){if(!e)return;let t=r.keys;"play"===s&&keyboard.setKey(t,r.showJoystick),v();let i=r.opacity;(i<0||i>1)&&(i=.8);let d=document.getElementById("keyCtrlMask");if(d){if(d.style.display=!0===o&&"play"===s?"block":"none",1===redfinger.sdkInfo.playMode?3===redfinger.phone.rotation||1===redfinger.phone.rotation?(d.style.width=redfinger.videoinfo.height+"px",d.style.height=redfinger.videoinfo.width+"px"):(d.style.width=redfinger.videoinfo.width+"px",d.style.height=redfinger.videoinfo.height+"px"):1===redfinger.phone.rotation?(d.style.width=redfinger.videoinfo.height+"px",d.style.height=redfinger.videoinfo.width+"px"):(d.style.width=redfinger.videoinfo.width+"px",d.style.height=redfinger.videoinfo.height+"px"),d.style.left=redfinger.phone.offSetx+"px",d.style.top=redfinger.phone.offSety+"px",d.style.transform="scale("+redfinger.phone.width/redfinger.videoinfo.width+")",d.style.webkitTransform="scale("+redfinger.phone.width/redfinger.videoinfo.width+")",d.style.mozTransform="scale("+redfinger.phone.width/redfinger.videoinfo.width+")",d.style.oTransform="scale("+redfinger.phone.width/redfinger.videoinfo.width+")",d.style.transformOrigin="0px 0px",d.style.webkitTransOrigin="0px 0px",d.style.mozTransOrigin="0px 0px",d.style.oTransOrigin="0px 0px",d.style.opacity=i,a!==redfinger.phone.rotation){a=redfinger.phone.rotation;for(let e=0;e<t.length;e++){let r=document.getElementById("key-ctrl-"+t[e].key);if(!r)continue;let n=S(),i=P(t[e].x,t[e].y,n);i=_(t[e].key,i),r.style.top=i.top+"px",r.style.left=i.left+"px";}}if("edit"===s){let e=document.getElementById("edit-panel"),r=document.getElementById(redfinger.dom).offsetWidth;r>760&&(r=760),r<410&&(r=410),e.style.width=r+"px",e.style.height="153px",e.style.left="calc(50% - "+r/2+"px)";let i=document.getElementById("editKeyboardMask");if(1===redfinger.sdkInfo.playMode?3===redfinger.phone.rotation||1===redfinger.phone.rotation?(i.style.width=redfinger.videoinfo.height+"px",i.style.height=redfinger.videoinfo.width+"px"):(i.style.width=redfinger.videoinfo.width+"px",i.style.height=redfinger.videoinfo.height+"px"):1===redfinger.phone.rotation?(i.style.width=redfinger.videoinfo.height+"px",i.style.height=redfinger.videoinfo.width+"px"):(i.style.width=redfinger.videoinfo.width+"px",i.style.height=redfinger.videoinfo.height+"px"),i.style.left=redfinger.phone.offSetx+"px",i.style.top=redfinger.phone.offSety+"px",i.style.transform="scale("+redfinger.phone.width/redfinger.videoinfo.width+")",i.style.webkitTransform="scale("+redfinger.phone.width/redfinger.videoinfo.width+")",i.style.mozTransform="scale("+redfinger.phone.width/redfinger.videoinfo.width+")",i.style.oTransform="scale("+redfinger.phone.width/redfinger.videoinfo.width+")",i.style.transformOrigin="0px 0px",i.style.webkitTransOrigin="0px 0px",i.style.mozTransOrigin="0px 0px",i.style.oTransOrigin="0px 0px",i.style.opacity=n.opacity,i.style.zIndex="1",t=n.keys,a!==redfinger.phone.rotation){a=redfinger.phone.rotation;for(let e=0;e<t.length;e++){let r=document.getElementById("key-edit-"+t[e].key);if(!r)continue;let n=S();n-=4;let i=P(t[e].x,t[e].y,n);i=_(t[e].key,i),r.style.top=i.top+"px",r.style.left=i.left+"px";}}}}},isShow:function(e){o=!0===e;},customSet:function(){document.getElementById(redfinger.dom)&&(keyboard.keyCtrlIsEdit=!0,null===d&&(d=new KeyCtrlLoadCss(),d.loadCss()),s="edit",f=null,u=null,g=!1,keyboard.joystick_destroy(),n=JSON.parse(JSON.stringify(r)),document.getElementById("keyCtrlMask").style.display="none",function(){let e=document.getElementById("keyCtrlLayOut");e&&e.remove();}(),function(){let e=y("div","keyCtrlLayOut",["key-ctrl-lay-out"],[]);document.getElementById(redfinger.dom).append(e);}(),function(){let e,t=document.getElementById(redfinger.dom).offsetWidth;t>760&&(t=760),t<410&&(t=410);let r=y("div","edit-panel",["edit-panel"],[]);r.style.width=t+"px",r.style.height="153px",r.style.left="calc(50% - "+t/2+"px)",e=y("div","edit-panel-head",["edit-panel-head"],[y("span","edit-panel-back",["edit-panel-back","btn"],["< 返回"]),y("div","edit-panel-ui-opacity",["edit-panel-ui-opacity"],[y("p","edit-panel",["head-text-not-first"],["按键透明度"]),y("div","ui-opacity",["ui-opacity-sub","ui-opacity-progress"],[y("div","",["progress"],[y("div","",["progress-con"],[y("div","",["progress-ing"],[])]),y("div","",["progress-tag"],[]),y("div","",["progress-drag"],[])])])]),y("span","edit-panel-reset",["edit-panel-reset","btn","head-text-not-first"],["恢复默认"]),y("span","edit-panel-save",["head-text-not-first","edit-panel-save"],["保存"])]),r.append(e);let i=y("ul","",["ctrl-con-area"],[y("li","edit-panel-direct",["ctrl-con-li"],[y("i","",["icon","direct-img"],[]),y("div","",["ctrl-con-title"],[y("p","",["f16"],["方向摇杆"]),y("p","",[],["使用“WASD”控制人物移动"])])]),y("li","",["ctrl-con-li"],[y("i","",["icon","point-img"],[]),y("div","",["ctrl-con-title"],[y("p","",["f16"],["新增按键"]),y("p","",[],["使用“鼠标左键”新增按键"])])])]),o=y("div","ctrl-panel-fold",["ctrl-panel-fold"],[y("i","",["icon","icon-kbsfold"],[])]);r.append(i);let a=document.getElementById("keyCtrlLayOut");a.append(r),a.append(o),n.showJoystick||document.getElementById("edit-panel-direct").classList.add("disable");}(),M(),I());},destroy:function(){e=!1;let n=document.getElementById("keyCtrlMask");n&&n.remove();let u=document.getElementById("keyCtrlLayOut");u&&u.remove(),t={opacity:.8,showJoystick:!0,keys:[]},r={opacity:.8,showJoystick:!0,keys:[]},i={top:0,left:0},opacity=.8,o=!0,a=0,s="play",d=null,c="open",f=null,p=null;}};}function RedfingerApi(e,t,r,n,i){let o=e,a=t,s=r,d=n,c=i;function f(e,t,r,n){let i,o={auth_ver:n,appkey:e,nonce:r,s:""},a="appkey"+e+"auth_ver"+n+"nonce"+r+t;i=CryptoJS.MD5(a).toString(),o.s=i;let s=Object.keys(o),d=[];for(let e=0;e<s.length;e++){let t=s[e],r=t+"="+o[t];d.push(r);}return encodeURI(d.join("&"));}function u(e,t,r){let n=null;window.ActiveXObject?n=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(n=new XMLHttpRequest()),null!==n?(n.onreadystatechange=function(){4===this.readyState&&(200===this.status?(MLOG.info(MLOG.i("paas keys request success ret:"+this.responseText)),r(this.responseText)):(MLOG.warn(MLOG.w("paas keys request failed url: "+e)),r(null)));},n.open("POST",e,!0),n.setRequestHeader("content-type","application/json"),n.timeout=1e4,n.ontimeout=function(){MLOG.debug(MLOG.d("paas keys request timeout url:"+e));},n.send(JSON.stringify(t))):MLOG.warn(MLOG.w("XHR is not support"));}return{keysInfo:function(e){let t=new Date().getTime(),r=f(a,s,t,3);u(o+"/distribute/apps/h5keys-info.html?"+r,{uuid:d,sessionId:c,packageName:redfinger.config.appName},function(t){if(MLOG.debug(MLOG.d("get keysInfo ret:"+t)),null!==t){if("string"==typeof t&&(t=JSON.parse(t)),0===t.code){let r={defaultKeyConf:{showJoystick:!0,opacity:.8,kes:[]},customKeyConf:{showJoystick:!0,opacity:.8,kes:[]}};for(let e=0;e<t.data.length;e++)1===t.data[e].keyType?(r.defaultKeyConf.opacity=t.data[e].opacity,r.defaultKeyConf.showJoystick=0!==t.data[e].showJoystick,r.defaultKeyConf.keys=t.data[e].keys.map(function(e){return e.edit=0!==e.edit,e;})):2===t.data[e].keyType&&(r.customKeyConf.opacity=t.data[e].opacity,r.customKeyConf.showJoystick=0!==t.data[e].showJoystick,r.customKeyConf.keys=t.data[e].keys.map(function(e){return e.edit=0!==e.edit,e;}));e(r);}else e({customKeyConf:{keys:[],showJoystick:!1,opacity:1},defaultKeyConf:{keys:[],showJoystick:!1,opacity:1}});}else e({customKeyConf:{keys:[],showJoystick:!1,opacity:1},defaultKeyConf:{keys:[],showJoystick:!1,opacity:1}});});},keysSave:function(e,t){let r=new Date().getTime(),n=f(a,s,r,3),i={uuid:d,sessionId:c,packageName:redfinger.config.appName,showJoystick:e.showJoystick,opacity:e.opacity,keys:e.keys};u(o+"/distribute/apps/h5keys-save.html?"+n,i,function(e){MLOG.debug(MLOG.d("get keysInfo ret:"+e)),"string"==typeof e&&(e=JSON.parse(e)),t(e);});}};}function KeyCtrlLoadCss(){let e='.key-ctrl-lay-out{position: absolute;top: 0;left: 0;right: 0;bottom: 0;background: rgba(0,0,0,.8);z-index: 997;}.edit-panel{position: absolute;top: 0;background: #1e2831;color: #8b969f;border-radius: 0 0 4px 4px;z-index: 3;font-size: 12px;}#edit-panel .edit-panel-head{height: 40px;display: -webkit-box;display: -webkit-flex;display: flex;-webkit-box-pack: center;-webkit-justify-content: center;justify-content: center;-webkit-box-align: center;-webkit-align-items: center;align-items: center;border-bottom: 1px solid #2f3c47;padding: 0;}#edit-panel-head .edit-panel-back{margin-right: auto;color: #8b969f;padding: 0 30px;position: relative;cursor: default;}#edit-panel-head .edit-panel-ui-opacity{height: 100%;display: -webkit-box;display: -webkit-flex;display: flex;-webkit-box-align: center;-webkit-align-items: center;align-items: center;position: relative;}#edit-panel .edit-panel-ui-opacity:hover{background: #28333d;}.edit-panel-ui-opacity .ui-opacity-sub{visibility: hidden;opacity: 0;-webkit-transition: visibility .1s .1s,opacity .1s linear;transition: visibility .1s .1s,opacity .1s linear;position: absolute;width: 100%;background: #28333d;height: 228px;bottom: -228px;z-index: 1;border-radius: 0 0 4px 4px;}.edit-panel-ui-opacity:hover .ui-opacity-sub{visibility: visible;opacity: 1;-webkit-transition: opacity .1s linear;transition: opacity .1s linear;}.edit-panel-ui-opacity .ui-opacity-progress{display: -webkit-box;display: -webkit-flex;display: flex;-webkit-box-pack: center;-webkit-justify-content: center;justify-content: center;-webkit-box-align: center;-webkit-align-items: center;align-items: center;}.edit-panel-ui-opacity .progress{width: 12px;height: 196px;position: relative;}.edit-panel-ui-opacity .progress-con{width: 4px;margin: 0 auto;height: 100%;border-radius: 2px;background: #a5a9ac;overflow: hidden;position: relative;-webkit-user-select: none;-ms-user-select: none;user-select: none;}.edit-panel-ui-opacity .progress-ing{position: absolute;background: #03c47e;width: 100%;bottom: 0;}.edit-panel-ui-opacity .progress-drag{position: absolute;background: #03c47e;cursor: pointer;left: 50%;margin-left: -5px;margin-top: -5px;width: 10px;height: 10px;border-radius: 100%;-webkit-transition: -webkit-transform .2s ease-in-out;transition: -webkit-transform .2s ease-in-out;transition: transform .2s ease-in-out;transition: transform .2s ease-in-out,-webkit-transform .2s ease-in-out;-webkit-transform: translateY(5px);transform: translateY(5px);z-index: 1;bottom: 0%;}.edit-panel-ui-opacity .progress-tag{visibility: hidden;position: absolute;width: 68px;height: 36px;text-align: center;padding-left: 5px;line-height: 30px;left: 50%;margin-left: 10px;-webkit-transform: translateY(18px);transform: translateY(18px);color: #03c47e;background: url(data:image/png;base64,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) 0 0 no-repeat;background-size: contain;bottom: 0%;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}.ui-opacity-progress:hover .progress-tag{visibility: visible;}.edit-panel-ui-opacity .progress-drag:hover{-webkit-transform: scale(1.5);transform: scale(1.5);}#edit-panel-head .edit-panel-reset{padding: 0 30px;position: relative;cursor: default;}#edit-panel-head .head-text-not-first {padding: 0 30px;position: relative;margin: 0;}#edit-panel-head .head-text-not-first:before{position: absolute;content: "";top: 20%;bottom: 20%;width: 1px;overflow: hidden;background: #2f3c47;left: 0;}#edit-panel-head .btn:hover{color: #fff !important;cursor: pointer !important;}#edit-panel .ctrl-con-area{display: flex;flex-wrap: wrap;list-style: none;padding: 0;margin: 0}#edit-panel-head .edit-panel-save{color: rgba(139,150,159,.5);cursor: default;}#edit-panel-head .edit-panel-save.on{color: #03c47e;cursor: pointer;}.ctrl-con-area .ctrl-con-li{display: -webkit-box;display: -webkit-flex;display: flex;-webkit-box-pack: center;-webkit-justify-content: center;justify-content: center;-webkit-box-align: center;-webkit-align-items: center;align-items: center;width: 50%;-webkit-flex-shrink: 0;flex-shrink: 0;box-sizing: border-box;height: 112px;}.ctrl-con-area .ctrl-con-li:first-of-type{position: relative;}.ctrl-con-area .ctrl-con-li:first-of-type:before{position: absolute;content: "";top: 30%;bottom: 30%;width: 1px;overflow: hidden;background: #2f3c47;right: 0;}.key-ctrl-lay-out .icon{background-position: 50%;background-repeat: no-repeat;background-size: 100%;display: inline-block;vertical-align: middle;}#edit-panel .direct-img{width: 48px;height: 48px;background-image:url(data:image/png;base64,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);}#edit-panel .point-img{width: 48px;height: 48px;background-image:url(data:image/png;base64,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);}#edit-panel .f16{font-size: 16px;}#edit-panel .ctrl-con-title{margin-left: 8px;text-align: left;}#edit-panel .ctrl-con-title p:first-of-type{color: #fff;}p{padding: 0;margin: 0;}.edit-panel #edit-panel-direct{cursor: pointer;}.edit-panel #edit-panel-direct.disable{opacity: .3;}.key-ctrl-lay-out .ctrl-panel-fold{position: absolute;width: 26px;height: 26px;line-height: 20px;text-align: center;border-radius: 100%;top: 126px;left: 50%;margin-left: -13px;z-index: 4;cursor: pointer;}.ctrl-panel-fold .icon-kbsfold{display: inline-block;width: 8px;height: 8px;background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAARxJREFUOBGNkU0OAUEQhadlJFZ2IrEilogVKzfwcwlHsnYJHMGKlVhL7F1AMonxPaZH6+kRlZTqea/eq+oWRT8iTdOO8kdLFJeRCIdwA/Gc68aYU6jXhEBX7PDnkEnBwBPvM4NJVgsmX1fwxUy8SgiuIpOBzu4m+QZlYikV8G1KYZOXQZkYfCwxEw+qIZMYUC/9em3q3ll7zveMlLAJvhXHWZC9zqPCR18IERKrWzlDKENtc6XYx+0biBZAAnGjapqdLOFaGLEkdd2dNhFAX4NSzR8xA7/ENB8zfEQtmIjLDfzJVqwmBXzQxP4Lwclv6ec3ZKI3mNKy0BBy7U/+yN8nz2QjgxVU9R+xNXNMEhn0IO5MvtiGfyq6Ln21J2G4qk5rsRMeAAAAAElFTkSuQmCC);}#ctrl-panel-fold:hover .icon-kbsfold{background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAMJJREFUOBGNUcENwyAMhAW6TyboCJE6C49sl30qnpXoHe1FDrIRlk4E++7smJQm0Vp7ERNKXILwABRHzHQqUEn8wTfBWDMhsdN/wh3fxJrJKNZwSyaReMkkEiN/ewV3EiQLwOB/7qajdsHatUByAO2kJFzqP+GJSRTZM6k0eAKb07lPhJrtaE02aqXrJxIau4tVjExUn4pFmppEnSXW6ZogWQDGbWyJxhM8uxP/FUbReDcmNePCTb5zzudInN2h48s9vsEnwrFzjx/VAAAAAElFTkSuQmCC);}.mouse-lock-tip {position: absolute;width: 22.08333333%;height: 0;padding-bottom: 4.44444444%;background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAnwAAACACAYAAACRIrQdAAAAAXNSR0IArs4c6QAAQABJREFUeAHsvQd0HceRNnovciRAAEQgAZAgSII5Z4oUk6icoy1bttbrZ6933771hv+dd/49Z89/zr7zwq7tfft2Ze1zkCzLtkRbkcpizjmTADMAAiRAJCJn3Fdf99RMT9+5mHsJQCKlaRK3qqurqquqe2Z6enp6/L6vYPrZK6+k9/VEl0QFBkoCgUCJz+ef5PMF0nwBX6rPT38+f2qA8UAg7isYAs8lLwJeBLwIeBHwIuBFQI2A399D44BWv9/XSmOCVuA0JiDc30z5i36//9yAP+pcTFz/uR+/+OJNVfSrgPvvdCf+c+PGlM76zpUBX2Ctzx9Y4vf5McjLvtP98uz3IuBFwIuAFwEvAl4EvpwI0ODvBo0rzvkC/gM0rtiamJW46y+feabty7FmeGq94wZ8GzdujKto6LrL5xtYSyFYSyP0RTQyjxmecHhavAh4EfAi4EXAi4AXAS8CegT8fTQbeIioW32+qK3jMxN2P/PMMz061+2cv2MGfD956ZWlAb/v2xTM5+hxbMbtHFTPNi8CXgS8CHgR8CLgReCrGwF6LNxI3r3hD/h++3c/enH/neDpbT3g+9nPX5nQH/B/iwL5bZpanRJuQAcCgf6O9rb2Nvp/s7m1vaX1ZltHR1dPb29PX09PH/119XX3dPf1dFGmv59UG5oRDeBGVKIIHaA/QKQBKouiMkCR3PiJiXUYEoMC5jXr0+Tdyk3bQ9gXVDn7GoI/qD7i8/z32t/r/8aR5B3/g58vtfNX0PlHIwSdbzR5t3Lv/EcB4z6J2DIO6JS+huf/mJhof1x8XEx8XHxMXGxCDIGY2Ji4mKSkhLhRaekp6aNSk1NSklOSklOSo/z+aKewOdHoke95ov822h94/cd/8WK5E8/tQAvVFb5U23768msLBwYG/jt12EdpPZ6rje3tHa036m401F6vqb9+o7a5pbmlMzCAoZo98eCNS9xOIHq5XZs1GBwpfXp9uj1u/ujybvxu5V+0Pr0+z3+rzyE2t1t7DXf7eO1vj8Bwx/d212f33rp5ht1IXv+3YoJ46O0Jmprc4uVWruoC7sbvVu6mTy/X/Ruq/sH0RUVF+UanjUrMzs5Jy83Lzcoek52ZnJxEL3wOnmjdHyaQ3iP5//1vf/jC4cG5v/hS18HUF2nST1/67cp+X/8/0m3jhsHq7e3p7akRqba+8mp5Q2tre/dg/F6ZFwEvAl4EvAh4EfAi4EXgViOQmpoaX1hQmJmbm5OVSyk2LtZlhw//Z9G+6H/+2x99e9et1jnccrfFgO8nL7+6jh7D/hONjFeGcpBm+vprKV28VF51+fKluoH+Pn4QaYr46R4nQPcdgEiMA45EGmp97vKD3YMEe+SuL1hmKJSh1ucu7/lv3UejpfR7WnvrucfTzj/U3FDrc5f32t9qc7SW1/7WPFZw73XvT8EyQ6EMtT53ea//W30eLXX79P+o6Bh/8cTiMcXFE/JzKNHMXujHv37fLno8/D/+7off3TKU/jYcsl/qgO/ff/F6Pq2i+xkN5p4K5UxLS/PNS5fKK8+fP3+tq7NLjPJCGR20JIGOlwD1ET+OG0qMAyJBD8sIgsvxxbzWSNPeAfUDWJ9jx2NmP00V8+Nmd35pe0h7hdHWj24f/GafwcV4SH2e/9Y5BQGzN6/ZV7z2R3CQ7AFy789e//eOf+/8553/5QXY/XxxZ1z/EhPjYqZMKRlbXFRUOCo9LV2eG4N/aVD4p7iYmB//9fe/VRVc+sVQQo2dRrT2bdu2xRw9V/E3NPD4J3rgneJUWVNjU/2pk6cuXimvqOcLrJ/eGAjQinFAJMYBkfQBjiAqP0EDHm1ApF2/gi7wev2KaonCDvWtBm0ANdz1e/7LvuC1v9f/cQB6x791Uxd0biLCcJ9/gurwzn/e+f9rfv0rKirKmjVrxqTRGaOzgo4PItDLHW10nvof80vG/9uaNWv6nHhGkvaFD/j+9eVXV9HA6iUa6M1wcqyuvv7GyVOnL1RdrWpyKo+Mhgshz+NBkvEv3O3IzB42bs9/q8299rdi4fX/YTvEbmtF3vFv9Xnv+Ldi4R3/I33Y5hfkj549a+bkMVlZjh+BoIHfGXoC+KO//+F3d460Lar+L6zlxaxeafk/B/z+/+b05m1zc0vTwYOHTl+7fp0+cTJCCd7yORBVMA6IRBvr+GiTPwGRZxwQyU1ecoX+ddMfWnJ4Stzsd7PPTd7NSjf9bvJDLXez380+N3k3+9z0u8kPtdzNfjf73OTd7HPT7yY/1HI3+93sc5N3s89Nv5v8UMvd7Hezz03ezT43/W7yQy13s9/NPjd5N/vc9LvJD7XczX43+9zk3exz0+8mP9RyN/vd7HOTd7BvbF5e2uLFi2ampY0arRfjjV5/IPB/z5824R+/qNk+uDDi6Se//kPBQHf3H2gAtUKvrK+3r+fU6dNlNKtXGTTg0pmDR2jEwaM2oMZgzRygkXtMC9IFAssaAzot626Po9LQRLaF7dM59Q6nl+v26iNQXX+k+jz/rUE9Yu8av6AGGpygt4/O7VpfUAORBqYBJZx1QDfjgI6JZQEpaVl3eSkW9q9uny4Yqb1e/1caDajX/mafRd+KtD95/Z9iZnSpsOIHpgiS3j910UjbyzTWOL/p+iPVN4LtP3vWjMJZM2ZOxaZ/utvUT/fQdoDPfRFr+0JdCYJsulXCv/zXqw/6+n2/obNRpqoDo9urlVev7jt0qLSro6MXZfoSEJX/q4jzcgdjSaLnPx1wHJOvYnvrPrGvXvvLyHjHv9f/+ZjQj5WvYp599Y7/r8fxn5ScFLts0aJpBYUFBcFPOf0Nvmjfd/7hB9/9cCT7+ogN+MihqJ+8/Jv/g4z/B9257q6uzr0HDh6rrLzaaA7SidHtAIi4HDrpT74TRIg2gnfTRxL2hGixDpQwDkhJ1yep1q/9nUaiu8jrF0Bdv2s5bKI/z3+jDSKMtyFlAa/9rT6LqLjE0wqcxLz+P7Tj0Tv+rUkB9Cjv/GddcxCPoP4BGuKEQiSX41WPpxRSfr3znxXDMOKpRE6gfP7LLyjIWL5k8bz4hIRElQeTYJT/l7/74Xf+N8LNZlN5hoqPyIBv48aNcZX17a+R9c/qBtbXNdRu27XzeAfN6nFnBETSO5xbBw6SJx1MEwpdOrjgGeSHG4gjz7pNe/X6dF1a/ebg1oh6kD7iZ5+hinFApIjt0erX9UmtoX8jrk9XpdXv+U8B4pgQ6rW/1afRdbzj3zrmEQ/9eI34eOS+BuigT1JD/0Zcn65Kq987/ilAHBNCveP/63v8JyUlxa5ZtWpuVlZmjn7Y0OX+zcKs5BeeeeaZHr1sqPlhH/D96lfvpTZ2N71NPXu9ahzN8g2Ulp0rO3Lk2GXZzCgN6vIKTZVm3M4/QEOgKPoHiGQvdaYIxhA/7vp0weAadQ57fqinUHt97vba+e22BOfc9ekykem3Dm/ZXsEtpsdn8Prc7Y3MPnd9g9ujlwbndf90+/RyXYOd391eO7+uTc+769MlItPvtb/evnr89PLB4+3eXrp+XZ89767Pzh98/Orlel73T7dPL9fl7fzu9tr5dW163l2fLhGZfq//6+2rx08vHzze7u2l69f12fPu+uz8w9H/FyyYN3Ha1JKpNKMHY5Xk35wRP/qJ733v0VaFOGR0WAd8//Lz17L9gYGPaMuVBaplPT09nbv37D9SXX31phUkcNgbBMYoN0Ambtygqiq/EFy3R6+UbbXs0zus3T+3A16vL1i/bsHI5nV79NqC7fP8t/o0ouW1v9XnEY/B+4fe34L7F3R8cUm3R6852L7B/fP8Hzw+eryD46u3wMjmdXv02oLtG9w/r/0Hj48e7+D46i0wsnndHr22YPsG9y9U+48bV5B+14qlC+Li4uyPeH3+I3EJSff/9Z89U6fXfat5+DQs6V9/+bvxgd6ez2mUNllV2NHe0bp5244DLTebu1Q6cBoY0iw/baZM/5CCA2ynBPNLWehwSjq/zsN1s7wbf6Tyun5dXq/P7i247ZRgfs9/jokeW+S5DNAp6e3jxq/rcJPXy3V5vT57a4PbTgnm99qfY6LHFnkuA3RKevu48es63OT1cl1er8/e2uC2U4L5vfbnmOixRZ7LAJ2S3j5u/LoON3m9XJfX67O3NrjtlGB+r/05JnpskecyQKekt48bv67DTV4v1+XV+ugLHQn3rFm9hF7sSLXx+X0X/LFx9/z9nz9fYaPfYgY9asgJM3s+X/9uiqttsNfc0tK0ZfPWgx1dXeIt3OAvQ1CHpYU7/OUMfQJADQiMDPrShb7oRztAIpxgCY5DpAN20bH4ICV12iIc9tX6MoTnP8dEBF+Lt9f+2g0R9Sd7vOhExn1MBJD7nnFYRzbB6PV/PQJaf3Q9n3jHP0WQ+yCh3DcBKXHf9c5/cgASfD1DzOgP/Y6Sd/77ep3/khISY9etX7M4bZS2Zx8N+ny+6Lv+4S9euCF7xq3/GleGW1eANXtN3U3bqHPaHuPWNzTc2LJ1x+He3h6j+956HWFLup2gdUUjza/XN9L5kfYnUv0j7a+uP1L7Rppft2+k8yPtT6T6R9pfXX+k9o00v27fSOdH2p9I9Y+0v7r+SO0baX7dvpHOj7Q/keofaX91/ZHaN9L8un1h5GNj46LWrb17YVZmpu0LHTRbeGR0/Og1Q13TN6QBH97GrajvoH1j7C9o1NTUVm/bvvN4/0C/fS6Vb/64VpQyLYxguLKwrnD1jzS/bnCk9enybvlI9Y80v25vpPXp8m75SPWPNL9ub6T16fJu+Uj1jzS/bm+k9enybvlI9Y80v25vpPXp8m75SPWPNL9ub6T16fJu+Uj1jzS/bm+k9enybvlI9Y80v25vpPXp8m75SPWPNL9ub5j1RUdF+9esXjU3NzdnnF2Ff/P4rKQHh/L2LiaQbylhnz1svaIP9jCzZw724CASoOosBnrqYI/LdciygEj8IgugistS91/oR+J6GBdEg840lZfLefgayn6WZX5VB3DVZxVne3QYpM9oLs9/r/29/i+PMo4DH3ODQf14DDq+DGE+DvVy7/iXAfLOf/Zzeaj+ovc39Zyv4iyvQ73/cV/3zv9f6fN/f6A/sG3nzuMYSxlnJAME1ovt7mjsZaeHn4sOn9XOmZpb9H9Sn/2BSsWavc+37DjY19+Lh++UMDBDz4Z9RGAc0KlcjIjACxlKooODF3pIIEBzsMABwQMd4nMq4MV/8KHqKPoDAb8SWp/ZgTzrl2rAIhOVmTaAaNQdyh7WLRSgHuiVNkidBu75T3EJIz5m7Ll9jPbw2l/0Za//e8e/d/6jc4J3/jeuTQC4RhmnV+/6J67BX4XrP02o+Soqr10vyB+blRAfr769O3PfkROJn3347mZq9YgTukrECZ9Lo32gN6lf0Oho72z9ZPPmvR0dneIFDSiFcly6uRLGjcs5WGxpuPnd9OnlNmMcMm726yK6fjf54eZ306eX6/breTf7dX5dv5v8cPO76dPLdfv1vJv9Or+u301+uPnd9Onluv163s1+nV/X7yY/3Pxu+vRy3X4972a/zq/rd5Mfbn43fXq5br+ed7Nf59f1u8kPN7+bPr1ct1/Pu9mv8+v63eSHm99Nn16u26/n3ezX+XX9bvLDze+mTy/X7dfzbvbr/Lp+N3kn/uSkxNh7169fnpScaL69iy9y0Bzfw7fyGTZMoUSUfvLrPxTg27jqYA/77G3dsesABntiRs3UCBeQAFVcEIkiaXIeDq+Yg0tC4EgMgbvxQxsH1dIsJZ3qt9NkvaBBh9Mf28b26lDWxH5yvQyZztDdH0h6/iMKMnntb/VqtS9yX0UpcECLE7GzKFwCqoXLctnXvP7P8dShGnP92Ff7poxtcHwlXbaMLLVaSdXN9YJHtglLDs6PUvADWpyQtShcAqqFy3JZl9f+HH8dqm3ktX9wBGSPkj1PdC+jF4bqf9DAMmpsOe4ok31SsBH34PwoBT+gxQlZi8IloFq4LJd13V79v53GVJt37DiAMZa0mXwMBPwYg4mxGBPDhDIuYTJv27Yt5nBZxXaqcQWLUOUDO3ft2VtVfZ02Vb69UtBr7dTwTLu9LB0Za9hXQCR5UMlX3UemxttLq+e/tq2B1/+9458iwBfO2+toHX5rvOPfO/75mofexfid2P/zx+Wlr1q5Yrntixx+/56FU8evXrNmTV+4R09EM3xHS8v/WR3soZKycxfKwh3sRRm1Aaq4aSxbA6jiJkNkCDcsIP6hToZO9as0FTdrVW1ScZNhcETVqeKmlKpTxU2GyBD4iiS99/xHzL32l/3Aqf+pNBU3e53aJ1XcZBgcUXWquCml6lRxkyEyxOv/3vGPHuOd/2QEcMx557878/yHMRbGWrYzIE28iTGZjTh4JuwZvn99+dVVdHO4XX2U21DfWPvZli2HBq/CKh2gNdfodIAi4aQO3Di5a1nJo/wyawhxoVfVzzigU9L1OfGoNDf7VF4n3PPfa3/uk6J/aB1KywZ1Ib2/6vx6/+K6vP4fFEpB0OPpzGVR9XhbJeFhevuI8x4bQSrc9DMrIJLOr+v32l9ea7z+L/uL/qv3J71cz+v9TS93y+v9U+/Abvp1e3V+Xf9Xsf/ft27dosysjByONdbz0Sh+9d//8Ls7mTYYRMxcEx7l0sDsJXWw193d1blz797jEEZD8EmIIdMZisai2hiiMaLo7UsT4k1MSqBxYl2AQk6B4FJpAidlDKOgmBJD4ChDAhR81OMYkiWi/1kQJ1SVZugTXEJNkD7WLUsd6iMVoj6Cpt/AEQfPfxE2joMaS6u9uN3QNhZulnvtb/Qv6k9e/5f9yYiDc3/yjn/v/MfnefVcL88voOA8IyEwiQuEfhA7JD7/MC6IBp1pIs6kgqF3/qdY4rpHMfGufxSHMK//GHNh7MV9TIzJaGwmxmhMHATGDFJmFh0uLf8xZWYwAaPKg4ePHevq6u7FNgHyUJClTrgTTXCLFZZUKpeY0XyzgbPzopw6hFGOnVmAAyIxzuU00iUa6TDnLblmCaOMbV0EJHldn3jDnWR51xZRifqj22eUcS3IOuFONCEq/KNSwz/PfyMWXvuL7iH6tejTIhvUX73+bx3DIkLe8e+d/7zzv3f9+wpf/7s6u3sP0dhr5V3Ll/EEHK1VnWGM0f5FXilC/5qhCcXy7794Pb+nt6+UlKYwT/W165W7du87qS+K5fJwISoXYx5DIGjApTNoirEegW1AEeOAIrFyc0AlmJQDQrLxr15dsLhLfawoTBhUH1WIQag54NQZNL2e/y7tEdyA9g4XFE97cbC4S32aPres3rxe//f6v3f8e+c/7/xvnDn1E6R2Qv06X/9W3bV89rixeYUcEopFW1xszLS//v63qpjmBF1n+Lr7+v6NDkFzsNfX19dz5MixUihDwFUoMhH+SA2GkNi4mCgCSv0B8YjaxmXWoA/w9A5gzvSp4ipuapKIqz5iY58hwThDqSWyX5s5nv8iql77Y6jp9X9xPHvHv3meEZ1C+XE9X/HJhaHsVIoGO+qqj9jVcx3jDO3awsuppsnjnije+V8Ez+v/dIPtHf+2Y46PKozBcrLH5MbExMSBRsduihyr+Z5iHieoPm0MKv/Jy6+uo+mmJ9WC0rLzZR2dXebmymrZUHE+cQCqeCi9Ko+Kh+J3o6s6JI5fnJL4Dxpspyg3lRGVB9dvP8HqyiLl1+X1fLA+UNh39puhLj30fHD9nv8cE6fochmgijvxhkNTdUic9XIfgBav/cOJ5a3wBMff6/8cE6d4cpnspbJfMs2J343GspY+ick+z/2eoZu2yMuD6/fan2PiFE0uk6309Wp/jMFKy87pb+0+KcZsTsEyaIMO+AYCgX9SZVtaWpvOnC2rtGjc+QFVnDlUGvOoEHzMo+Iqj4qrPIRHGbKAAlegqdfggWhQ4jJAFWdGOdMiH/SpOJerMioeqpzrYQg+llNxLtehykO45z8CIuPgtT8FgvoLx8HsV2r/EtFSfriM+xmKmAZc7fMqjjIk5g0lr5czH0NVh4pzuQ5VHsK9/o+AeP0f/YD7PUNb35RhCv5F/0Lifsa4INKP2udVnMvd5PVyroehXl+E/F7/lw3xNW3/M2XnKzEm494IqI/Z1DLgIQd8P33ptyupv69UBY4eP3navKionc1k0jqs0E40QK6JIWRUHSpu6tMQlQe4eOXJgMCRGALX+XFgCxpBgYMJNPDij3GFz8bPclxuyBCQCeVIzGfgrB9Zz39EQaag9iEy05hHhVwGiD+v/a04cL9niLjp8fL6vxGTEMen6FdG3ETsjH5mHs8sx3Qlxoi34GMIHgP3jn8jFhQP7/yHTiFT0PFJZKYxjwq5DBB/3vnPigOf9xgibnq8voLnPzkmUzoJjdnE2E0hqWjINXz9vv5/VBkbGhtv1NTcaBYHLAcVB6/odCqnhtsOcKPMiYYipjPUVImsWsY4Q7aF7dPlmY+hzg860yDLfAy5jPXr/Hp9qg4VZ30qTcXVctDVpJYxztCwLyYq2j9//tzckqkluTlZY9LoO3wJ0dHRIdtaVf9l4f39/X30Peau2vq65nNl52qOHjte09ffz7fVllnsKyiMM9Tbx5KSGPMx1PlBZxokmI8hlwEi6fySav9lWeZXYShclbFrs2xSZZlfty+UbCh+0FlHOPp1fr0+VYeKc/0qTcXVctDVpJYxzpBt5/ZR5YAzH0OdH3Sm3Qo/ZPTEdYHOOEOVpuJqOehqUssYZ8i2e/6rEbNwjhNDPV6gMw1SzMeQyzi+Or9Vk4WxrJM+labiqoylSWJqGeMMdftCyYbiB511QJb5GHKZ57+MrB4vSbX/cuxAZZyhSlNxtRx0NallhNfcuNGMsVlmRkY2sxljt3s5r0K6TQhOP335tYX9A/22DZV37tm/p6bmetMAXYJ54Mw4IBJs4T6BPONm/8BNySDykBlKEjc9Eegfbv7bwf/58+blrlm9alpKSkryUGL5Zcu2trW1b9++s/Tw0WM14doy3O2p1+um/3Zo/0iOLzd/PP/tEXCLl9f+1jkfkfPO/9Y1EfFw6z/gGUqKVP9w83v93+rzaMcvqv+Py8sbvXLFUvNzt6g7Oip60d/+8IXDwNXkOOszMDDw31Wm5ubm+mvXr5vPis0BnssADpsJDtDed7ypIOOASHqHsw4PdB0KmCFr8Q+uTwgN8qPbgyaRtrE9ssuGspf9Zqjbzxdbq3xwe3X5ofgPmx995MFpc+fMLkYIbt5saT19+nTlhKLxWfnjxuVUV1278d6mD0/WNzZ2x8fF+KNjYqNoJjAqJjaGIElHR0VFx8b6Y6KBxvpp4176Izw6lrZd9Mt8NHaNIauN2wSA/gHylv4BUr+hLyv3Bfr6CEOe/vX29Q4M9BHWHxjo7e8N9FNZb3/PQF9vH5H7A6PTRyc8/shDs8aNG5tdVX2ttryivH7m9JmF6emjUh9+6IGFBQX5l957/8NS0iDaiiF8ZBwwnIQYsYzk/+q0v+e/ewS89vf6v3f88zkPxwvjd/71z/3ox3jjq9n/q2lshjFaWlpaFseBrr8Ywz3OeYbGpZuzPt/Pfv7KhH6f/zJv6oeSffsP7a+oqqoPDpglJzF0HB7ng8K4HMBJnsF+B5fng5Uv8O722OuKVD5SfhxAls+o+4vznwd7/WT0nj17z2zfsauC2tD3D3//N+uTEhMT/uOl/9pcV1/fxTET1gUdAKBa6YvyPzMzI+GvfvSD9bSRd9f/9S8/3Yy9yFbfvXL8ihUrZkSTwcdPnAwa9MFK9gUwnBSpP5Hyf5nt7/nvHoFI2zNSfq/9v7zzn3vrU+soN43gdzt/RMrvtb/X/tY1X/Qw+uGYIO+WmBcQyT5+GKw/FubnZy1dsmCplKPVxPRxjGhfYOKP/+LFcqYBBl0p+wP+b6mDvdbW1ptXr12rd/pUk6pI4qwOMAqVmlDiwpBgMYPi90cLDFDFWYAv7IACJ/UMedbJhBAS9RtQzE2RXQZUdbF+1Ubg8Jnh7ez/Alqvh5k9DPbefue9A9u27xSDPfiKwR78a2hsEoO929H/hobGLtiYkBAvbKVG8m3fsbvi7bffOwCf4Bt8VNuM252h2e7qLQz5LxIg2hMDQwOquiQTiiQ/ILc7w9u5/YXv7DdDOGX4I6DhN3D47vkvz1UcBxkur/05DtzvGXr93+gvyqf6ECt7kjzysupd/9B3eBwgcesca4+bzKnXfBVnXj5WzfMXqRc0VCMPXQtC6Gt0/qusrqrHWI1jhTEcxnKcZ8g9lPPY6PAFM0NIRWVVpXg7ndbGiUYzIHD9D3LcsKqOUDjzsh7MSAEHxB8SQ+A6P+wSNLDiDw3MEPZJoZDXQ8Fv8AAXdan1ky5BM/RzXYBOf1IV9zzkBk9CH7GwLtQFHFDUS2UMoUnnh6+xsTF+mg2bhvI9e/adOXu2tIEYRSxUSxhnCH7Bx9CoFzSz/i/Qf2GPMMmq/2xpaQNmK1EGH+ErcI6X1/5GnzD6p2hP4Gr7E46gcbszRBwFH8Mvuf253zPkfs9Qmimt99pfnn+8/u/1fxwL4prHxz1D47jHMY6jho97hjievOPfiAZiSH/iXGNAgVMsGarHGp9/dChDaouwCHOoH9F2ohnk8Yy6QAMU9VIZQ+jQ+VWbgFdWXasEn5K+reACtQ34fvLSK0tJcLLJFAj0Xy6vvMaOgc6VmjwKwmWh+CMtZz0M9fp1fQi14AWkP9H3DSiPAwom81BgdX5TFmUOfyR62/k/d+6cXLygcbO5pXXnrt0Vpg+G37AZif1maPJxHIjHRvsS/BeGsh1G/Tt37amAb/ARvsJGTowLu9kPhsQkfDUg+83Q5ivx2PqCUbep18ijXq4TuJ64jOVQzjQVD7ec+RiqOlScy20+EIPnv2xXxIHbnaGIGdFNqOJe+8u4aHGgENn6M/JqQiyRuD8yLogGnWkqb6hy1sOQZUPyU4HgBaQ/r/9bceB+z9CME9rYiJeNprU9ypAYioz2w2VCjwN/pOWsh6Fev65P+KH483Vr/0uXy6/RCLGfm4WGjVPEmI4JBG0DvoDfZxsR1tU31HZ3d/cp/HcUKruo7PQqfkc54WJsyZQpuWA5c+ZMJS3UtHGzzyAyztDGeBtn4BN8g4nsa7jmsq+AKh6u/J3Op/qs4ne6X+Har/qs4uHK3+l8qs8qfqf7Fa79qs8qHq78nc6n+qzid7pf4dqv+qzi4crfaXwYq2HMptqtj+nMAd/GjRvxTbbnVObyq9VVat7Db78IZI/JSoNVZecv1t1+1g2PRewb+zo8Wj0tXgS8CHgR8CLgReCrEwGHMdtzxthOOGkO+Coauu6iR8cZ7Hpvb1/P1avVxiACbMzKkDmHAHkBLKCKh1TJdQOquCGg6lDxW9Vnq8OhvpB6wyxQbVTxkOKqDRKndzLEiw6NDY2dthiyvpC6UBCsz6KFUz6ocvdCtpGhqJJtssSFb5RlX6WNzMeQGFgPoIpbqjSMZQFVnNlUmopz+RChaqOKh1Sr2qDihoCqQ8VvVZ8tJg71hdQbZoFqo4qHFFdtUHFDQNWh4reqz/OfA0vQId4h4xpmgdpGKh5SXLVBxQ0BVYeK36o+m88O9YXUG2aBaqOKhxRXbVBxQ0DVoeK3qs/znwNL0CHeIeMaZoHaRioeUly1QcUNAdJx9WpVHcZurAJjOoztOK/swzewlomANDVY00+vSKo0cREVbw5zZbbSyDOsi59EwmmmQZvADYg8qh2gH7N6RhiCxwFnmps+vRx1qkm3Ty27FZx9BUTS9ev2wDXN/xhKEO3s7pbP7tlXEHXcTZ9eDh1q0u1Ty24FF/WRU4CcmIa8YU9np/RN+kr8ZhMzwpBkdJ+hh2mGPrM+iKnx1Mshq6aR9l/Xr9uj22sGwvPfbCZuaxAYZ+gWT73cVGogevvo5ZHmRX3UdoBIun7dHq/97cer1/9lvzHjYPQhg+r1f+O8+DU6/vvpLY+6hoaasbk5hdwN6KBZS/hW5I2IiCIQzVRX11gvSqNoqxRw0R+9aG5CgQsyPx03RcNGaGNfwQsocDrBMeSLvQnZUoZK3bAlLHtYFlDF2WL4iiR8Zr8ZQuT29F+YbKxS4zgIP/Qf1WcVZ74v0X/TBLEbNeXUix3bCiYFZ18BVZx1BUGWBVRxZvwS/ed+zzDIfwd7VZ9VnN0JgqoOFWdGz38ZiTvs+Pf6v3f8e8e/MZYwroN8SrNB9Zyn4sz0FTn/1d1oqGeXDLiW82J26D83bkzpqO9YxETAa7XXGtCJBuhdJ+5M8hoMmkxR9EaM/LqEMehTX4sBC8hMI1TySohiWU5Mhri4CAM3GkPUH2XVH6yPyoQNciJSt1fnF3UO8kPfiRhU3+3oP7vD7cRQ0DmulEGc3NKX7j8MHKz9qVj0RcMVN3u/Du3/de//nv84B399z39e+3vt7/V/+/F/vbamYY5vunW5D/gWYYz3l8880yYfB9Z3rqSRmfl4t7Ozq7Wjo6sbF0we7EE6aFBM9YhJOlmfnJQg3BwQkowcJFl1D4bxoIQheNX69QGjPNhhgzWYUfnNwaZhX9AAAHSIGuXQk5oyKi6/cOwo1H3u/MUGX18fS7v6P2FiYdrUSVOyP/ps8wXII14j7T/qQeIYBPkvi62BN/sMOuOK/6CxLrCo+ka6/VEfUqj6RSG1Fy80AJ/thgOyokEFZ5B/Zltzd7lN/F99910Tysou3Kipre2A5aH8d+r/c2fPyqFH3VH0WbpmyI+U/3FxcVGr7lpRVF5Z0Xjx4mX5mUXRV8hgo/+Ivk74cB3/8QlxUZMmTsqIi4mOPnbyVK2T/8PR/vPnzMnNzhmTUlFZ2VRaer4hVPxHuv9zvQxFX1D680j4n5ySErtu7d2TUNfRY8evVl2tbgtVv+q/n078q1euLKpvaGg/derMDcgPV/vnj8tNHps7dhQ+z3j0+AnzW9qR+j9l8mT6cmNaUk9Xd+/xE6duhDr+Z8ycPqb07Lk63wCtihF9mk8Q9vOJ6j/8lbwSIjtc/q+8a1nBjGlT8yuvVtUfPHz0Kq1hFhvTR+q/OC6V61so//n4Fe0epv/3bVg/qaOzo+fI0RPX2tvaxU4ew+V/qP6n+z+1ZHLG1JKSHMR+y9btF9rb2/tG6vyHOr6o9g/Xf/DJmNj7a3tHZzfGcLTmPRV2U0eN6RRjPN/HYpBH+7WslQXyl77K0KDmQ+JcjwH1gICMASGzMS4GiYZSFQ9Zj8bLMrp+XHdAAxSJK2YIohOu0IonTRj90P33itnOn/z7f3zS2dcXelsaliO4Zs3dRSuWLp6BKujbds2nTp+5gWL2GXTG2X6mAYaTWI4hVw9Z4CH9ZwYVqriuCGXhJJYz4Ei3P5uk+g+czQjpPzNAgRPuROPKBoMsZ8Bb8X/m9KmZdy1fNpP+fB9/+vnhI0ePmxc4vWr2myGq3bBh3dy42NjYPfsOnKEB3xXQhtL/bfExDBgzJjvxhW8+szyRPtsyb+6s7ld/+/vddXX1nSbvEPxnX1BVBn1ib1xeTmpBfsHo/HFjszKzstLxaT3amWegsbl5d0VFZQv4WAbVAjeqD93/mQHCDvi06SV5RRPGj6ONvS+Wlp0P79yn6jJ03kr7sy9Q55aYlyGqHar/iYnxMbNnTi9G3ZVXrzZWVVW3udmB8ueffXr+hAnjx/b09PZcr6ndWY/PNhqCDHX72Fa2H+xp6amxrc2tvYaoANOnTc9dunjhtIH+/n4a8H3MZSzHUNevH/+LFs6bgHZtaW5tO36SBnxIEDJS1pjMxOeeenIhDQrTMkenn9y5a2+lWs58ISHrMiD7zRBk9hk6GGf7mQbIadzYcSmrViyfGU0pNSU1acfuPVe4jOUY6vp1/01f2E4ocsKdaFypA5w2dUrmwgXzpqIobdSopE0fflIGnP1mqNsXjv/QEyqx3wwLxo1L4767Z+++Kxjwoc7hPv+FsseMpRE/9pvhSPuv61fbH2O4/HF5xoAPMRFjPDng8/kDS6wo4YWN+noOHEM4zTggklqBpET2G6m+cPjNxiZTsKUkOSogLGMcEEnXxzRRaPwwD5exz8gzDnjq1Oma5YsXTvVHRUWvXbNqemlZaV1/H8bfoRPrBkRS9UmK/deJnzm4Ioagyy01JYcai8H8Z32Auj1O9TNNlQsXZ1lATkzjvBNkft0+8Or+c5vLsoAvJibWHxMbLY5J/Ii7UhQ6JC4DRNL59XLJZf3q/HRtHFD7BPygE+cESPT0dHefPH1W3CSoPuDkOn58YcYnn26+wLFR/YesmlRZtPmy5UsL6GKWvGXrjgt0R97P/QAyuj5VD3COb13djc7aGzea6AKfGE/p2aefXPTrV36zp6Ozi/TZY67rGCy/jm6SsrKyRmVkpKfQhSOVX0BSZXrphutm082WiRPGZ1TSgG81yeRl54itiNg+1WdV9tix45Vl58838nHAfUHv/6oMxxY01v/AA/eVjEodlci+Mg+Xh6qf+VtbWzo//OiTc2o9wLk8Un2D8au2cFsP5r9qE/SybtB1/1DGtENHjl2h/pAXFxcb9/QTjyz45a9f20ttpVYPFYMm6PvO888to/uI+KNHT1zcvG2HuGEJJaTWDx62Ra1UxVU9aiy4/W/ebO6Kjo0WC7dpgFly5Oixax3tneYNPut/7rmn541KSUlU9YWLt7S1db7xxh+POfHr/sTQLPrjjz0wH4M98G/etu1Up2KPzs/2qT6ruOoz9On9PzYmyp+ckhqbnJgUl5KaEkuHYMKotFGJ6SmjEpNTkhJps/vE117/w742GkhBHvXHko333rN+NvL49jlm1oDfSgrHH1Wvzq+WYTYY+Uj8H0wf62Ie5BkHREJdTBOECH9YNlx94fCz/xjD0YBvgmkSxniUxAwfdYwSPghApG+bNgPKE8VgAyb7gAoyemJnQDe+c2FASWGazOFXBlFiwb92fbKcaXqHtppfhsHdH0sCmumLo6ICKYcyGQuOFehMa6hv7DxTeq5i5oxpE1PpSFmxbFkh3TFWsG1QxL5KKClMkzn8Ru6/lLFsYfvs3nA7MnTyR0qwze7xsuoUhjv8sC5pozxEQvkvxTnaDsqIpJaybobcFsH+W+2/bOnigrtXLhcnLOcaRo564ODh0s1btl9i/zMzsxIK6PkVajx95lx5X08vjSEtD2fNnDHmkYfvFwdqY0NT26HDR6+zr5BRceSRIM3+543NTl61YtnMGHokOr4wf8xL//XrXQF6bMU16PGCPtlCQpXBJ/vLW+99ePIHf/6dtJTk5OSU5KQkepQy5tjxkzWsQ0oE/6o2Sr+lheBcsGDeFMxOslRHe3sH3Zm20A4BLbU1N1popryltvaGeMwtefy+grF5mYWFBSJmLBcKVlaUY/FyIx8H0u/g/q/KO/lfVFiYjVkglS8S/GZTM51P/ed0/7m1uCU5Vgyd6lDLGGfIbcHtz34zvFX/nfrLufMXmo6fOH1x7pyZkzMzM0c//OD909957wPxGUTVbrYNNN3/3JzcpPS0dLF8prOrm2ZnJDdDKaNq4EjJGrikZMqk0enp6Ultbe3d9GnJest/ySd/ud0Z+mi1Tl9g774D5+69Z92CuLj4+PXr1k557/0Pz7JejteYjMy0UWmpKaq2cPH4uHiaMWW/Bj//PfzgfdM4HtD/wL0b5tNfuFX5Dh46cm7rtp1XLP/leU9t/6TkhJgffO/FVeRunNMNll5ZcdGEDNyIgg69992zvoQ+epSMfDwdvH/5Fz9cB9wt/cfLv9ja1YGBI6Ia8P0v//OP1tC4Vl5g3YSp/Gxp2VW66T3PbWOImNkAvZ4KmtRu91v1Hzj3L/ij8kOZbCGpXfINxg9PrHIpZf81DSSy3v/ZWkAk5mUoiNqPWsY4Q7YFkMdwLE6+lACP+dkrr6T3dQayuYDe6u1vbe/sdKoe6zYwJSIgBBjHVAeSPqUBOtNEuZQXc9vIi3KDhvwQk7N9pJTtE/o5PIYfVGbzh56L25OVd9Zv2b9t584LtK6gkO4c6UJV1yr0fMn+W76wHwxD+K/aK4Td+C3/zbaGDqTbsv2laV/KL/ct45nE0iULx9Pngfx4dLV7z/4K3abTZ0vrli9b3JiVlZlBs8azaV9MsU5P5+O82j9pkOd/7JFH5mGwR+WB7Tv2lAbEl1hkez779BNzssaMSWfZcGAsXSHA19vf17d8+bIS/IUj193d2fPLX722Txz3fMwrgkePnTi/Y9eeyx3tHebsilJsQ0+dKb1afe06DeIcktF3lyxaUBJlzJJwTCzu4P6sljnxl547X5WanFwvzsjqFYFxvr5ANdOg1MBb29q7RB3G+fO2Ov8Jw/iHLgtsI5PMy1Dw+eLTzz4/X1g4LpvGwimtreQjnzvCPP5nzpieh2roEAicLT1n+0KAWX0YCGbJ8eiWzrn1GPAJH4LkuN0ZSn8OHz52fdHC+c0Zo0enzZg2fcLuvQcuN9Y3yPYSOiz+G3X1jecvXKwOUu1AmDJ50jjaKD5DCR9dC0mX2v8ZJ4i1uNOnlhSpqqgLi+NNpQ2G02yliLzpP+n1c5sYgh3tXX1oZKfBHtqhg/bA6sQasK6urg6CPX39crsvki+eWJQ2a9b0iWwDnmbFx/OrrUx1htE49yn+J9H+sXyMOkvYqfRgISgWJG8yBWg1G/fdwfyniJgyw8NvtCm0cqxFK1BetK8BRbnBizggKe0vCUP7Vf1ppYbEWI7aVASJ8GyM9WL6eqLppG22qa+zq7Md1VJj+nCBYChMgYFIBuQyQCQKuuQ3GES5QRPluj6x7xQpM+QRBtv5UuN3rI+ijHplIjuigDtHPFheHhDm+VqIsazUyDLIrV+9pnju3NnFskR2HZu9VOCPio5KTR2V8vBDDyx8hPJB5QbtwoWLV9/78ONSHy7CQ/CfbZEuO/lvcphtCZ+QhG2Eqv4zTZRr8TfDbISbY2PpG1r7C6PINuNwCO5/gkH2TWEf+laE7U8v4tR3dnYelvJWGyIf1P/oppEOGNsHrMHHicsAkfLzx2bMnD5tInBaJH6hpvZGM991gXbt+vVWjhmdwKLpcW0h6PSWWeAbzz65ELia9u0/eGHTpk9OvPDCc6voBB37xOMPLfj/fvXaHhofihaw+j1LWe1/34Z7SjJo3gMlZMvFM+JCaB3TqampielpqeYaD9YQDkyMT0jAXzi84Onqiutivxmqss3NzXRt6eoTZVQQqv1Rfvz4yVpAJHG+0duf+gTNHE6OMwZ88lwgOyzXbcmjL0GTrFE2I/U/qd7sf1vpUSO49BSsz94fuW+KTUPI5qDzKfwY4vHPdUjbSF+E5z9aImm65Re45f+smdOz16xeOcM8QZicBkJhi42Oje2n52kzZk4txJ/OwvmTJ09f2bZ9VznHDPRJk4vETG0P7RR7990rzPNqdnaW6LfEG/Xoow9OM887MBVNSfDmzaaOHeIJimU/dJrnQZGx/3DdgEh8rtu1e3/psmULJ+/aue9cY2OT6Kui3Dj/CWb6obLWHTt2V3A+WJ/V/lmZmaPEgI+Yzfr086nR/hlZWQnr16+dA71YE/nZ51uOd/V09wboKSUu4oBIjIsLO+UT4uNj6eUJuqmLiaWwDFRWVDfZ/TeCZQSQ7aWbq9OY4Gvv6OqlWfWeSZMmZi+YN2cKnRd7fvr/vLRZP/5Qd0HBuNQnH394MZ3r/K1tbW0Uh7PmgQoGLUVFx/jXrFwxE+t+MXjs6+3thxlsw25ac0zjRapKtIImzVkuC/iuX69pYVmOJ4myqT7sPycaP8L+jy4vowvbrD4BC4KOV4QTyYC6PbfT+AfRoPZsT0pKEjPoMBtjvRh/f2AqOwwi3QGEXLSrOwh+M/jIyN6mQJUGsnFwGhCtFSCcWw12CBrEKIn6DIh8UAOQLGisV8pa+pjOUG8Q2BufmBCzfOmSQuiHdfR0wrwIrlyxbAJdW6mGAV9FRVVTbFxsFB1j+ATdoCk6DJ4Ymi4ZDv8tQ6TfyiY2ZlzAI2NpH5DBYzloMNrFUuaIjXT7Czvph/uj3v6inNscGcYJijL6cfTfKIevtLSho66eHxNCDkevKi/7IPTp/c3Jf/BxouuTnwZ8IltRWdVIg6w67tMgmjjZs379mklYDwc67rbHjMk0v3IDGlJqakr8KdJx8OCRsmXLFs8YTbMQjz503/S33tl0WjCQHvnYgTygsxX3/6lTJmXMmTVTXEBv1NU1fPr51nPO7e/ztbV3tF+4cOma0DfMPzT7Q3OTGaNNtUY78PHI9OiY2KikhIRojo/Z/sQAnNoh0N3TM4D2iI+Lo3sq41EQRmg4sxkDbuk/ssAoERSY0v5jc/OS88ePs81spqYmJ4E9MyMzdfGi+eP4aKC1Sz1n8PamkZzaHzQrMc4QJQrOvAYU9hJuWGv2D9N/KgPOdej98Vb6f1FR0agpUyYaT3T8voSEePOR+rSpk8fSYCsV9pSXVzZSrKPxCB9euKUUGnQMxkO3CLFmu5NfkyYWpXPfoFNhLB035oCP9WBw4URHOa0pbdixa38FYkJJhFA2txVPi46ZS3muo3Vy/tgYfpQoWsB36fKVJvo7iBxNPGEUQuPwgQCNU4RyytoStwetO43LyR0j4nPpUnlTnzlvorS5Kkk2iGRA1JOdl5P03NNPLsF1hXzp37Tp48NlFy+KGWxpneEc8artj8vHd77z/FIM9ihMgS2fbz1Os48kp/iv1cfXv6PHjxuzqbBnwJebl2sMCvzc9YSZ/JNfkJ/67FNPLKM39eNocN77p7ffO3T9eq2YGGIeQNFXDfjUE4/MwmAP9O07dp/qwfpOxZ5de/ZXBvlHvEyDHOOAuH+j818Cjm0xtiNafII165eWlkbZxBi2AfJq6uzo6O3oojXMZIO85qGU8RDtpSogXMhSf+P2R7GKW8e6qk/BFf+FLP2M5PiHdlppUwd8UYEBGvD5ArR+z0q0H0u7eQI1pkz9PHWKGQ/gOMk6JHl6xbAbTUSJgOhCRtY8OYeSx4kadQAiMW7wc3AZCjsRxBD8gg5Zo9wfkLwCQj/RRyUlxy5bvGA6snriN5FAj49LOKf6/clnW8QskS5jy8MNpQfClHVrVs1R1y2p/MJv9hkFjEOQEvvNkP0SZfBR41fLgTv5Tz3OjI/Qgx8jcbvn5OYmTiouyrpOa6oqq6410xM9ZrFBtDudh/x0bBsGk2rFfxE/w06boJYJ1f7MZvN/iO0fjv8cBxHfQfs/W0h+AxUxBzToCAvR8sZkJ9P6PHGBu3y5oqqyusrxzdDyK5VNiMW2nbuvFE8qys2mUWFRUdHY0RnpF27ebKFtk0gx6zYg+GlbBzxq9XfTKOntdz44Rvcsot6g9iemluaW9o8/2xz0QoFhsR0Y9ot2tJcYORhhNfijDz8QzRd1YWsI+VV3LZuNP0eVRMSjul+9+tv9aPe1a1dPmj9vdliPkk19iBMl+F88eWJmqLrG0SvC+GO5hoaGpjOl5+vCb3/p/+18/qNZ6PSF8+UbluwnQzwWpT+RpVH1uYaGevPmn17SKKP+1Cv6G5o4nEThWLZ44XS6WEeL9ocM2oL6wZrVd4k7ox76DFRVdbV8g9ZQnkGv7hprJgOXyyvpEWpwhbRVSZs4T4iLqGxfqV7ql+ZZdNSL9l+2ZFFBqPaXMvK3lp7f/urV1/eLnKpGOf5nTJ+aQ1sqiZm5n/37zz/pp1lq2CrbXxUycK3/jy/IH/XkE48upkE3BjKBz7fvOnGOBnvCL1RM/AKHHCU+7wE+9eSjs3Oyx2SCvnvv/jOHjh4XN20qP8daQMg7XP9w/lMslfVBKSX0+8L8/NSnn3x0Gc0I0oA0MPDxJ5uPZGWNSR5Lg0TakuW65JS/0u+Ab/3a1cUlkyeJjlRZWXX92IlTtTZbDH9UWeBsu5P/Genpid//8++s02U4/+K3v7mGcSd44NCRs/Ti2mXYIeIAJtEX3a9/d+rxj7FclvW1XIztp8YE/L5i9XiiV5vbrDw6GrqDccAZB6sIFAKmJ8FO/Aa7Xswdi6EMPjFDL5KTvKpLr187gGQDKvqgk3UDd0i9NIXX2HjzJhfFxcfG8l0tFlvjcRvK6E27bnpUK2ZkkD9KC9YBkWgUHTOWtpO4ePFKkxouE2eHSdWaVXfN9MXSPySyzc8+IH8r/kMOifUwlNTIfkX90CXFUlOSYp956okFOTljslgRLXTuu3SlvPrzzdvLWlq17RSmTs3asG7V7Pc++OTIlfJK8eIPywFyGBgG+S+YqNSoX8iquCBAkaGBfQVE0vsH00RhGD9QA9VmnRrBSX8YapmF/b7v3nUzsN0IPcfsePf9TSe7xMsaRr2O9ft872/6+MTdq+6a9OnnW0pbWtvowkuM5Dff7YoNmQza7958+9CjD9w383RpaTV1bWU9ElsSAmruykAoBrn5L+Rhl7N+aEJiKHPiN0AXkxBSdJ7iIqofd+e48CiyQSg98qKzuJFgs5KwsB9rsRSSL2tMVjoJRNHapc7W9nZavyxT082brdIXw7Th9p/0Dfn4Z5tgMuOAnFScaLr/MdExUfSWtJjxpOO5ld68FFuk0I1Ap9qOhw4drbzZ0tJjnmdYvwpF+xOBW5LMWLxw/lQx4CMyWzVn1vRs3LxA9OjRYxe27th9BbiQIyZ6e7t4yaL5abS2deCNN986birU/UO/IBqJiBrpBweEjAOps+iiWFQR9g9ERL9jq6EQGi395lpMKKUBG4DkEVjQD2sCnDKlePSjDz+4GLObYLzZfLOV3gROoD0RJ5rx0zVAkGqhSfOUiROLClDcSq8Bow3XrV41UQQYVnBFhGKmchvHFwLhJOmJb0zW6IRnnnxsGV0Txezjx59tPdrW1trz3DNPrqCZxSga+J2n85H1li7JrVq1YvzSxQum4rzU1HSz+a13PqD2k4nNYijaTo2nsJ1KjfqFlIqzoluAA/pnYp10iPqpwKxTI+jtr+sQ7Jr9Cg/7zTBi//X6OXaASFq5GMvJEvGLsV4M8YqDnel0wIsNl2WeTWNIVCgNlbiIIfhsuJFRddhwQ7EpwwhD6HPAnWiGKhtgPoZUeLO5ufvlX76ym/mwePaB+9aLffhe/d0b+zo6rIXktF5iMvOpcNGCufkrli2ZiQs4bS1AW/CVmo+BHP2HMNvAUNAMraaLjDBU5AS/A13VZ6gzAZcxDNJhcJLaxMTE6G9+85nFmTSP3k2psrK6ls7RaenpaWm4eyuaMCHv9Okz5ecuXKylWb+WebNn5q5dvXIOHk8WFuaPvlJhDPgUE519Vhms+iXGZQyJ6mS7E81QZQPMx5AKE/AIR8wS2DgHzQT6+wNd9IgxiEkx02x3G80vFmePHZsrHqlt37nnjDnYgzLmZUiECYWFo4qLJ4gBd2NTUxstMBcneq47hp4jA88vGJdJs8emZF1DfQvNAKTiD+Vbtu0Ud7fARQxNTkGRP0xjGGyQPf6KqEBZjmFQuVGgxB8s27bvPLHv4JEqnd2WN2Q+/XzbBfzZyrTM3//4r+51nEUnHbQfWy3+WCQrc3TC//S9765H/sLly9UffPRZGZcJKExWHNJsD+YlisJuxx38V/WxHENT2CTY48+yDGGMituMk2W6/2OyMhO//2cviJmT3XsOlKmxofOaeKlCqOGF5qS/ZNKkjMpr11roMZltqp9mgaLo8WAq7ZcYdLMndBi20Z6TYoaWHjl17tp3sMI0U3HTTlMKVP9UnAWcaErZyVNnauitH0f7sPXPsiULZ4C9oamx1TGWin66rzANE4+WOQfIONcNaMjOmjUz+4F71y3ggTCK6DXgUUtCPGlCeahEy8VTBpPDY2JzwMe2M4RSFedKDNvrGpq6rtVcr8/PH5fzwYefHTpbVlZP74D5L1+pqJ48aWLhApppz8xIT6UlJsfxkuzjDz8wi+gFGOzROnOnU4sAAEAASURBVL/237/51gF6/cN80G3WpdZpww0DzNgx4vfdbGvrfnfTh/vYRMDZM2YWTJw4Pp9mBAPvvP+BnI1VGOLjE2Lv37BuIUj9NOIbSv2mWtVek2gglrlWCdNAYVmGKk3g+KFkyjDCEGUOuBONWMVYDvqMhLFeDClPtUa09AZeX7/tIGZmD/p8ZWXna1taWoJmTGbOkIuVaf1HQk1NjXw7N0TAaPr9LI2JomnjWvNxSQjWL5W8bu3KyRjs0U76Ta+9/uZ+ug8QBy42x11398opUyYXF8ynhb74w0mFBk30rN/no42Dy3bs2lv+pRofQeV/9aPvr3ccHAyio4Wm2P7j5V9uH4QlZFFScqJYA3qDvnBNS9GiaLG0dVFVpDDTcqa0rL5oQmHmkkXOSw4Udh+2d+EtXlQ642LAxxmCv9/49mFayuTvC+fOV5GLBP186/bzu/bsu4xZhkjkvkjeGdOniRcHvsg675S62js6eng2tL+vX7Th3Xctn0Bvjs9ooqcfv3vjjwfowi5mBBNof7ZvfuPpxTljxmQcPHK0jPtbPY0asF65hfYiZL83ffjxsXVrVk8/f/HS9V6nGydmHAFIs5g9+NNV0wsQ0Y8+dP980HHjTjcV9oG/LkB5WrJrXn1pkBNWHy+ZXJzx0H33LMQsNAYq9CJIy+jR6WLLH8yIkZKQerAdCs5V9NJWXzOdgxxMMklJeA2WRjwmwUBoOUTuPWtXz1XpMAR5+jJD/P/6d399n1q26cPPDu/dd+hieaXc9Jxe2g388e33Tq5ffXf74sXzp00YXzj2xe88nwT3M+ktMcg20tT4xrffO9yMGeFhSugnZ+krOKq6iRMmjEEeM8F6Gej05rXpP9kdfIMOpq9wChrL0VgPa/hS1B5GL0xZI3ItGNiXDi8w8P50jAPKhMkG4PxEhXEuN9jCBkPT525v2IYIRlqP0IKOD72se1JxcTruzsBAjzGv1dNd0WD+06dyIlggP3T/2UO2lyHTQ8FPPtlybqBvYIAW117hwR5k8Zmft97edLKoaEIlPZrJzxubkzGKXvm8QSOY06XnKvcfOFQ9mP+h6nOm6/6Di2nOEiqVfQVECu6vKndkuKrb3v9ZD18L7Pbu3XfwasnkyWNpD7tynklmCRViUEnrx7YzDY8xayjGnA8H4qSfRo0DXtXe++5dM4UWOIuBZzh6hoOnpb21c/OWHZecdE0qnpgzatQo8+Rs8SCGODtxLBlXz1gWN2M86yke9hFxsPanukMO+DD7NX/u7HGsV9rBNoDKONszuL20DKSa9hg0Bz6W3lAY9x3Zf61za3jnU7XNUUOk/R8XUfrbC9loWpz75GMPz6I978YjP4pmlsaOy029cO5yI/SOzhydOIo2aMRABjcoY/PGZrzz3qbjr77+5kFpN6TEi0ixARpgbN6+oxR5WlMo+idwTjSuEUtnsM+GLA/tf8312kEHPqxTjYV1vHIp7Xl3/4bpZL54AeOzLdtO0huOQddB7oXcn8gNJvnkgEJvL0s/YxcuXWksPX++YtqUyYWf08x2SlJy/LKli8SA7xevvr6H3mZVGteu71vfeHJhYUF+7k1aavBf9LY+63SCeBo1f+6sEgzE2F74HR0VQ0vSnLd7Id6gsv5A3wAP9tQYbt2+6xJN0PasXrViDu8GADuwJvmd9z86iZespF3sg8zFxMZG0QbPYZ57WBaQZulo4/rmljYaRErVtCGGKKA1ynwAykqM34S4eClIeXJD8LAPNsYwMyyrxpNpUoXd3kiP12AzhqavTxvLYaxHe9v46YCz4kVMNMMn44RwYr23DCtwGuxRBpCT08HDZcHQ7kCwflmXpR71sAywwQecbJvxlMvV3mB9sNg8hmmJBnDikuFw1DdvzsxCSCHt3X/I8YImS/HLvkiFw+G/pZu0G22j+s/l3E4MpTV6PC0L6YY+8MnnW8/L9pf2qu1/6crlm/iDHkzz485PSnONTnBw/yEhfWBZe/tLaugbDif/mWZptPou2p/TxYuXK/cdOHyZ8wLazaVvh66YyrNoHEeGNrmQGanwd7//48HMMZlJdAeMm4coPJaBCL0V2k537/04HGnvNhoYWLbS3nf9v3ntDwdQH9vNONvAvgIiLVk4L3/N6lXibp55AKdMKs5PSpZvpgrGL+AH62E3b9lFxwe3qVVpQUF+Hv4syvBg2BKHY8IaOQ7Ip6WmxdLWGWItmSyPwjYjtM+gvNbT1hpJC+bPncqyQ4UVldVNcsAn22c4jn/0BfaJfeX2V49Xtp15ked+xGU490l9ksL2jUpNjqW3Lhfk5mRnoYS+1dn5zrsfHKysqjKfZuCtzV+/9uaup598aEEOvepLzZn7ve8+v+rd9z85XHFVzg6hxoXz5ubTAEc8NrXqdcawzvWFbz57t3OppP7i169v0cvZf5XOfjNEGcduBq09pjfbx4N27sKlirOlF+pFKTWTdS2SV0mOMXhpsk02JBXhsIXM4EleOykmZ/ZkHbrc0NjQSTOmRZYMxV+cw5nCx4o8D1hXJst29gESbBugyqv6fOHSpYb2jjbj0SjsHfBhaxfMBuIFmo8++fwI1w4l1VU1LdCHxP0J49yFC+aOmzd39kTmhey+A4fK9uzdXxk6DlG+qZOLMx95SG4mz7LhQpxDXvrFr3dxvxVvfpNwT0+fmGVW/YfOKHqSxrr7AnKGT40Fx4712aONeMr2N9w3/b9Txj+0w4/2tNafijV8tjus3oFei0n2M/QJkUTDE84dgINph7JzGBJGkRONioQuCcEoAss0EAZIDqKASMgyTWQlnRtMsHDroNzAGcrBC6kz/DF1G+qFn+qRQhdeqTPGP0CvnsbExmHVuI+3mkykvYwmFo0fCx7ac63uWm1tm+ARUu4/FGq8lS3iAG7GTRfYVxf/pawRC1PY8p/Lw/JfsYfbnWGo9seLLRxjqhXVGYlxhiArOLc1tweKmSZw4gU7+0+oaGtDBbc7Q4hYdlg40xz9hxAluob1XK2+3obwcf8QVVOZUZ1PvKUouC3dRjYI4F6B67U0gC3K1zfQF6itrW3/+cuv7KS3EeN++P3vbkDJ+5s+OYJZZK5Q9QvloOv9//5715fQC3SxFy5erqVHwHVWnXT5tiYghC3sfx09c0mkje+Ezgh+aLKQdk+Rj4n4UV+44jRj2S67JkfTkqSdYxpos/KgbR4sjsiwicVF+RgssP8cE/af25f2jcslHvOIxyO6bzz7+ML6xputH32y+Vx7W0fPtWvXzfV+TlbQp+FG4/NieOGDnmSJb/068YFG64F72BbBw33d6P8iPkwDQ5jHv9pPVP2MM9T9l/1Maw9kDXsAx+XlJj/x+IOLU+l5IkxqaGpq2vjWu4eb6S1x1gs6Ult7a+9vfvfHAw/df8+06VOnTKQdXZKee+ax5Z9u3n7s5KnTg8ZRariFX7Se2YJ0fCjnP53u5H9SQnLMhvWrxZu2GMh+8unms6YVHAeDIKoR7SNjFkvfaEQRDfYGrHplmWKS3Sbj4MZgz4wz64eQ0G8Q9PY3yAJQNdzuDEG37LCYmQb/6TjsoQnCBsnr840vLEzjR7/03cdA2bnzDXx8cFeQHvl89IGd6AVz54ybO392cUqSnA2FnstXyq/S5EApdHNdsnaWZGg/J0meyH6Fr4a6ZHqCAWnaPsfsi2r9CXHWgI92lkBkKT7W+V00BccYiohD0pChhDySAYVuaFH7mORQfi1fpTIUOdGILHRJKLjAxjQQ2DZAJAL6+V+SLf2qbX3UoELO+MFYL2gNX193bx+d+JiF6gBujHyARwG3yiXO5YZYuEDUgxGUoo9p0MF4qHLTNkXepAUbwe3EUFRhxYoakvVI2aLi8aNpNiSXPuc05j9/8er2f/ibv3wgWKuk0N3vmP/24798MFS5E/2jT7ceOnmKFpCb9XIsjHiG5T9rhu2QY8h0C7LfDFFix6WsFQfe1c6wB7pHtP1hkGI/42Z8tHLTV8ggRe6/lJO/0m/MCln6gvq/YEU528lQ1RQmbtaj8LPPINnKDZvUcrJhGn3ZhbbHiqdrVTcGfJZdik4D5bb+w5tvHQ0uBYV9MerS4vn4Iw/RI73i8eD89W9+T4/6Bo83+AZL++lTc9G0+SrtgVZP4yoa8On6pD2j00fH004dCT2077/FB83O9s6ZOb2W9urzV1ZV2xbns/8Mp9LXEKCF1kO14tE3zd5mA9Ii9VxazhT7zvsfnn7t9388JO1yru/PvvPNZXjjtLqmtp72JzsBrrATt6XZzuQ/06CE8VDlIfy37LVbwn4zFKXc1MjQ2Jceh/tp65oM2ve3jz7DFXffvevn85uktBfptbfoMS1tDkyXJTX2aDeZMGh4/4OPz9La37aVy5fOwuNDekFhYVbG6LKtO3Zd2rF77xX6msUVya3qAEW2/5q7V0yiGaSpWBv8r//20seyLqvc8s9Pi/FxTbM5YegBvz2x3wzpuIl67unHFvJ+cTt37j1NmwT3Bx//rIfqEdcLWR895hYDvj56vMEcEUGzXaVU7pgxSRg8htJB37EV9dFj2ajc7OykUHyg041Z0GNT9psh+ObPn10IqCbV/9iYuKhZ0ydnTyuZOjY/Py9HfdEEXwjCt65pl4v2Hvo0nqojFH6pvLLpDxvf2SXLZfvT/vCJ921YsxC00rLzV46fPGO8wCXLuX37env6zWOCeGnJinj039XV2e3UH/FtYlkPPqM3QINymWOInB2X9an+B53/R/T6N7zHP8Zy7L+AWMNnIyAjdjTg/is7Ngdc8jKNqHSCoFGjOZMgcToccdxSwr0z05BnnMvlOYOYWCW9N2zSICASF8p6pA5Jw/oEaYNRoRQmKVmu128oDAmgm74ZbR4oD99/7xJmpvUA4mDj/LBAYSb9SHMpQAYOaCYLD443+w1m4OBliHiBLpMykcGkIMixBZSJFTAE1cKD7ZF1srwef6lf9gOhH6rYZ0Ew1Ifw32QxHBue9pf+yK8MwH7Zp2Vd7CtDtsAoNXit2Kp8tILMLJf8jv4r8RSxhYoQ/lv6ZD3wX0acbgbFOhYhDJqsULmztGw0ijRA3wqN7+7o7u2mdTLcfpYe1mcXCrZHWsPyaCb2GZKMc/nE8YXZtCtFzI36ujaaIm+fWFSUXlNT20aL5pUTlR9bexTOmzuzhL4P2fSLV17fk0kvDtFAMYo2le6QNsgOm5GRkfD9F7+1DnX94Y9v72psbKTH4mgHUOyJ3jTPyM3NzqKZxWb6EmIbBno0oKmlbV9q5syaMZnWqk149qnHY/74zqYTdGEzjwgrJvAVfUVuxyGvJbIu9s/Nf9FMav9nPIL2V/2Xtok+IZzV67dHQOYgz2n50gUl9667e1407fNx8nTpRXqCm86DvRMnz1z4+LMt55gXUNYtIfJq+9JC/8rO9o6eDevXzMMLXfTJyfw9+w+V9/R005DGGNOgastcE6dSEW/oM3lFfVYdsj7es1Wwg0NTyL7JYxEynLCW7Llnn1jIj6lBpy+K9jzx6IOzPv18exm9sEKPCaW8GSPbpqL0koOxaXUvLbyzYiFtNERFjFhejY+wQ6hnG32+bz//zGpBd/nBHoXffeEba13YjOJg31kOL6oU096LnAdcuXxJIZ0Lo3bu2V9O95FRP/rBi2t5BhDl3XSCoMfCV/EVoXW0ByE2jy/IH5vV3dt7EfHiPgdexrmLwf9u+uhGReVVeSMG14lGG4HLly/oNLZ9976LdEDSAC44sR6OJz1sEDN8HTTDJ7uModAIfqwyw0fnR3xmLFipQpHt43b+t3RYbS5pevs6+c80Ua0wl35Y5TAf/3IspzhIaAwFHOswzHUsMXExMf1d/eKZuJ01OIfDTDigFPGhp5DCRlkXoFMKDqh9wCllLGHdPpQImqGc9Y3LG5s6fcaUvOKiojxe5M710w1Mb3nl1eu0UdjA2+9+YC6UxczfzJlyd/i9Bw6evnb9RrOp3AgCbuBmzJyWXzKpGN9MDXz00eeHOru7enmJac2NG7YFx7fiP9tpdWa7/1zOfjMEnf0HRBL1Ex4q/pLL+hW6qDpDXBSouMUZGTZY/WwjNOoHnKzF7r/gN6pHibDZyLPfyKqxCFW/ekPOehkaKocEePc4tX4VV21ERaLNrYY32s3yXzWG/WaIMlXfow/eP2cczWRj8PPyL17ZocqauKKa/WbIPJG0f3ZOTmYcPRdLSU6tSElJiX3s4QeWUIz99Pm7CloPe4W2oZGPnbV6adZpJi0Ry6ELx/V9B45eqrwqtwGhQ3SAwiG4aT23vDxTjm1CAfu/csVSsfFv6bkLV0nVaNgPyY/oZSV64zS2pGTyhHHjxmbnZGUm0XHaTm+sJ2AQwC8wgZ/1AudpGaaNycpKqm+o70BZuIljKT0IllLbC6VwVdKEy4aAhQtfKcs2oQQ47S2dTFuQZJJ/WXm5ueYXXmjHJfHyGRTRO55xG//07uHnv/HUkhOnzpQfPHS0WrdL1w85rgv4cdoChVYOHKS95WaSrgO0uxNddFHinFCmyoNL5Q/lP3GZCpXDwaQBEbYaMJZmlZ976vEFY3NyjC+OSNYHaTYzMSkhkWZs09/44zsH9LdMUYtqD21JIuLVQ2s92G6GUuPt8cs2wX6OAyybM3vWWGyjxVbGJSTErqBZWcr7M7MyUzd99Mnpc+fOVxLflNob9fWnz5ypPH7qbA1tVRv9Zy88v5J3ZsDiiaefemyuqdyoULQn4RyzTR98SjOo6s2crJluvgqAVVZU1tBnFruZX5Zav2r7x1Ab0ixmLG56O9s7SYb7AEN89s96pEtf+hCHqOq/qg+16PZaNTtjQhdVZ7grmFTcWSo0VdRPxaYrGmuwvYMf/xjL2VTQWI++i+BrJUXmgC+ebum6jc03bcyU4WCxU3oHMo87jjlBgRp5xo2sVG/LGPx6xUaeA8EQylmnYNEMZNUMwWPDKbN+zd2TFsyf47gwmz44T5/uPHWN3zg6f+lyk5CnK/P6tXLdB00QtNC3GMtF/foPMdPedDNBpsXaTSfPnr0hDOAAEt30xZBV7TNIJmBehnZniC2E/1DAehkKmpEx9YFPZQCTkjT1piumCCMKFKiRZ5yLhWpbxrJTqTYINW0kWdYpmDQDWTVD8NhwJcM6GQZVSgS+qKNMrYrVqANCMeNDBaLMYACYOm1y1kP3bhCPLww9RqnP98yTj64wVKPI99nmrbZHr2wbQyincY2oitZryGl5aINxWuJKGKKY9QDSpEEKnTz9PZQ0Ucesk/9mcLkSggI18owbWVMvHBiTOToJF05sPUFfMCimRWBF5bTB9569By+ZjITQ9cnfRyvEcYLHlhD4o9mG+sNHjl8sv1plPsKlL0Wwe6ZZ0IO6586ZmUOzhKOpPQeOnzhZnZd7jxjwiXJiePeDj08/RmE9cep0FQZ7oD/4wIY59H5HOi3qv7rpo0/FOi/VD/iACvG5rfs2rJsxvjB/LG1Lc/TY8VPX2QDBTz+qnD2jlaFiJbFDDCHLOgWb2ihE4HoYgmfDujXi7U3Br/200h4rdHNbc+ny5bpLF8sbqU8FTp4+W0H768WuvGvpBI097OyxkycvNdykb9TCEPoDwOwS6SxyUkKDUHE9opkm/z3r7p7kxNNOG2jvPXj4KnTZEgiD9H96CuunzYTnjxubmwM5fOcV22kB33/4cBkeQ2Ov0eefe2r5G396Zz++rYsyJFYrwkz9Y5QxQMbOFkXjC9JaW9u7Gxobu9hHKUW/hpEC0I+RFcXRsTHi+EXm31/6xSfYgVwUOPw89fijwu4GWiz6+u/f3Ccm8HFSYg2ME1y7auWkWfQsFjFX61Px2ca3j7GZPgZ+OK7wyTpa2pBH28eMT3/u6eRNH312/PiJM9U4DoTfVN03nnpsAW0vZT5SxpIG28jZwXaQYuNjSunha59qw2TapoYOebE+lN5iv6KW0Yb/SfSVHfOmifs9IJUl43wFvW2dHXLvYDbQiKDyUo2vv0++/azqV/VBDxLTZM7+q6kXcWWa4GTlChSokWeci20yRlW2Mnv1pm2mjcTMOgUrG2P4j7GcqoLkWokQwAyfmWidAK3roychSNjQHtcTY2N7UREpMytk3KhACkXwy7oBkbT6JFH5hXeoi6PCONevl+tHhK6f+Ltoxo1roL0i22hWoZVefc8D7XTp2Rp6DI7DSCT2f/HCueOwLQGIh44cvyBLg3/HFxaMwskDJXShoO1KtDQc/rNKNRYcH/NMQExqXUZ7BvdYtAOfNQjV4sX+j1j7wxe2E3ioxP6pPoP3FtrfVoXoh6H95/OqqMqoi2Ni0zNIJoYuYqG2RVDXxwgVfvFZT0ub7h/5T8d0FO5yac1Vf5D/NoMpo7Un8yckxUcn0Qpo6KHHpDfNRwE6v2UJ7fuXJ/fvZJuUMhOlsr6e/oGaOjloMuk6QqbRF7SaX/7Vq9sXz1+Qv3D+nMm4oEwsmlBQcbWK3pg0EvTRy1Mb3373OM1GXrx75YqSAkLwWI4ew/ZdqrhyjFlpIExzhQiAvT1p3RV9XmuxuMGrrqq+QbvfmMe/kIU/dNxg0MfxIl9HUSXisRO2fFH7v5BRfvCdePrqThYNSP1LFi2ccuLEmevqm4EKq9XXhZ1UMki8hRzHWtgIfvpjGhgY53KH8x89Lzcfl9ESrL76hsabtPw4C+J7DxwqlRsvWx1nyYL5U2iNm3lxB1+kiV5o6dh/4HCVKocNz+fPdb7RZj4KS1QoHnpppHnvgcNXhc8sAMgxUWnAEWOK76oVy4swoAGJBmdN+/YfPvfQAxuWIn+16trNDz759NAj99+/mL5jnfL8M08t3/jOe/sxsyKTDCzaP4++oUu7E4hlPjRRmEWP/1fSt2wraEuSU8ztCskmGkuLizItA+ynrWD62E4nWXoqKS2hQaGYaWZf2T6l/WnJmrhuCdsd+tfsmdOyaQnEaOqmgXO0Q8EMesmGjv+BN99698hjjzwwe1JRUSH8wt6Ev37td7Rel0JI+mn/vUljqYMjjxstmpFTvswFqpJEnPKycK0k3YH+Xm19Itk1d9YMMbtHEyfN9OIZfakqCueWUffds352Oi2z+PkvX93cZuz1qPbvyZPlY2DUVlVZ1WS2O8eE6LGxcs0jeHr41XvEAscZkhIvSQg+X6jtIY570q8e/0yT8hH+si2ASMN8/MfGWd8aNiqgAZ98pCvz9EvToNaokA1hqBukG2xqURAElRPjDEFn3Squ0liWoU3WIDItyD4qVzqAWRfrJ/76pqZ2vGVEC0WvYo+k2TOn5/CAD68siKTw0x2Zf9GCeVNAxx3xcXEHb/BJbvN33my5IJaqGaDHInSnz/pMluHxH+qg28l/pSqrfsMOJ36XeJn16HWq9ag4t43gNwpsNIfYcZxUPYyrZayH4a34w3oZDuY/8wAKPiXmoKmuCJx+2DaUE37pSlXTG2+9twtZJHrvNe5BY63olu27j9ILq2JGCWX19fXtC+fNUS62dn3J9Ok7Oo+KGujmvM9mExToiWPH0IhXXnZuKuupvnZdbLUjRJmPoaLv+WefvlvJhkQ72js7/t//+tVWqc9gU2OiSNJSucC+Q4evHjp6tIo+z1QwYfz4nIOHj1dvWLd6sslm2FJ9rbbt92++fWQizaysWL5kypadu87STTxaRSR8bkogWnsuoq1qRqWmpOJCt3f/wQvmMWHIOZ0vli9ZVIxiCtfArgO09RLXoseF8rhBpP0oy+fPmVWC5SG0KH7s4aMnrwn17DdDEFUdjDMUQtqPTdYoY1oY/Z/2y2wtO3/hyqVLl2+UXbjckJaeFv/nL3xzHTSJZaBavOpoRX5ie4I5y6VaQ5/ciqEZTfFYEwOwnl666XBItIyF5JW+C3uV1fLXaFqpu7PLnFmmL72lpqWPwo1ygPY2td0ojx6dNsp89OwUJ9AQB6dEZfTSj5gFphv7pt+/8daBnLwccePO7OfOXWr4LG7bkXvXr1tIl8IYuhGK4zIBDf3jcvPMx99mOa7+bJM5KkCp7IrmuYDbi0roDXs54KNpQkvW4DcVOyFaPMGit78uZthG6xf9K1csn4Fi+upIbVNjk7m0iHZ/8r31zocn6U3rXszybdmx+zTbNXf29Bx6GlYCOexK8bs3/nQQN2BcDrqaCgrGjvrGpGIxoMPLGO2dmFyx7KbJkDjaWF7scnHqTGk566FlAD2jqf3lTdOC8Vu276L1gUYyYkfXaHED1kt7j5Tj5SyjXUxI7LQ8WAzIISn2pDPbxoivHi/o1vo/ZNmuoPiqdQpGhx+lrZ3a39St1sN2OqgzdQh+g4Hr0PyhyQBrLAdWPNIlBcb3IqUwFlEbaoKBH/GjiAiIYsYRJSQ9Yhy9cMulllv+dbVP00z8ZWUX68vKLlmzCLaIBvMvnj8/n6egO+k2K5PW6tTV81ody/8J4/PTJk8pLoSG6prrdTQ4pBOaVS416/HR6os06+T/YDqc+JnmJMdlAoKB7Gea4Hfzz63cqdIIaGxLSPs0XSafzzd92pQiWqgv2kvjMrN0/jBPIKbfXKfggn+cGGefQffTI6TOPno5wHj0SN+6SU83Lyh0MW6jN0sH3dqDtQNOKCgQs8fA8Y1Uu02guiTDdto8XJw8wV1ZrQz4XMQjL+ZYcGzsGuhxbiz5QQ/IBgK7adE//uwcMod94fCmaFd3T//liqvN9Edv0iL5MWiht/H8UbQjSKwkGecskcGekfIigM9D0T7p5iNgo1jrz7S4OSsjcXxBoZgRulJZUd1QTy+CmP2Gz2ssLf3be+BIOb0pXIyZ3MULFkw5duL0Nfnype7/F3D82/on3XBcLm/Cn7TYoR00fnqjUllWYLe/ZHJRBq27XA5dH3225QQ+sSjOCeI8B6runypv1U1fHzp/5UqleaOxZvVdxYvnz6Vv6Q4MbHz7/ePQxAmD/3lzrLWGTLdBs31sVJG5ePlyA+0ZeONP731wtKNL36eMWEj2xOnSG7Qk4GhNbW1rTW2deQNmaiOe4uKJok/Qh6l66SXRbuq7NIvFHNbCf4uGMtV/5AM++nKGHPANxxeuuO0EtOKLmtR094plE7F0AjT6EMCl7Kxsa2s2Q8cHH39euv/wkfL6Orz45PPdtWxR4fKli8X6PgzuN7696bD4Sg/XCSbFP/pqR/Qj9987H+v8aADX+fn2HefUcnAvXThvAsrx6c4jx06aA3v6uFNX1bXrNZi9nz6tZPz23Xsu9RsbJ0OOhihRNCstHvvTVmj15r7LbIuA8ukH+JFoq77gmxGNP/h6JmXNX1f+4Pa1fIYWt3KzpltDNPvocmUfy8lHun466Zk9ldZWxNEFiDuLfsAyH0PdAXaK7WU9DHV9TvIsGwwxLse9mzE+N3H7/RzXFSwfHHDwqPwqzvJsI/IB+vRcTx86MG0BRIt7MzNf/NZzq6+Ul1fv3Hfwglxv4McnaqIfvO+e+WRnFKbqN2/dccZe92Dx43qDoZP/FhfbztAqsTD2ReVxwpmmtxfbzXCo+tzkLcstDJvDysR9YWjtL3XhcSqSVY8bpsaG46XLMJ2hKgNe9l+VY16mWXlsEcA+o5QW3Y9mLnoiYszCWPxcZkGuT+Xx+yZNnDAOPNRV++mtVdLD5bq9lqZXX39jq5ULjdGjJVLips/vo6/4xX/vhefW3LhR33jw2InLZWXY/JYTyyPv9z1034bZObk5WRcuXqrcf4guSvVNxhoUvEXY3U3HX2K8w7YUkD128vQ1mqGfumXbrjKp3a7bTgv4li9eVEQ33PQY1x/Ys483VkdckFRZSQGN1pf1ll24JB6TpaYmp9Dn88ZhplKeZyGjynOMWT40dDr+mWZJOdnEpVx3KB6mM2Tb2F4dMh/rB1RpjDNU9bEulmEezgMiWXR53Ft5lPG5QPLa+S0aY7SNCz1VfO0PfzrIFFW/SqMnPjXcXqfOnLmckJgQV1NTJ24QaNeeVFptkEez4jSArrhG26mkq7LAL14qr6GN1OlK0W3c6IOq+o+830cboCcCo498JP71X/z5OuChEl2axc0hbVOU5sZLb6jaL/ZCqd+XTm/jz5szazKytKy88cLF8ibbgM/gE+VisOf3PXDvmpJZM6YLGTyef+Otdw/mZWel0Ku6rb3d+KKGvU0g+8gD987BIBg4fWrzdFcnBlyW//ju8tSSkgkoP3Gm7DK9/WvTc+TYqXIM+HCdpW/m5h47ceo69/WS4uIMPldXXq2uc6ofepkHeHcX28k2gIoUbLtFY15AJB1ClnkEA/1Eos9JnvUEQ/af+zxfCwCtZNVP62TNyQRZ7m+OoVfZLrEbINJjItFIBoMENicMEgFpgHXQORtg8VvBkEa5yYfjoOpsML+0jb6arBih4grZEWVehj7f4aOnrh8/VVa7dNH8gvlzZk7CxWXixAkFRUXj869UVFbRB8gvrrxr2WT+TM/BI8dKa280GAtPWY+Ew+G/araT/1a5vW6LPhg2uIyb/cGa7fp0efCzDyoOGie1HLThan+aWbt26kxZFdczGOwVj66svqXaN5icU/+3aFJS9U/Xqx9fObljxICPnub2YiaCZS05jjd0M85Q1kfvFtBDObkeFSfIFUsXj99pvoTEvAylDH7Rp/X6dPssbsZYD0Om0wxrSXEOPYGIzsvLyX40b0P23SuWNh8/fvrKkeMnqlVuzAJmZmSk4e3eGdNKirHBb3nF1erd+w5frLl+vY326uvBMUkvW8bCZ2mjpYE2U+794KNPD9LCd2OAbNmgYxiETpk8cTzolVeraulxID36snRZcbYkOSb79h26PG3qlAmUj1o0f+7kw0dPVPNuJKyDbWM9evxYV6hy1Dpc/d/yQMXYV4ZqGXthp7HNdirnWA8g4xJjOfaVJQCZBl8tKckBGjZE76ShFT1wocGVxS85+JclGTJ9MCh5qW9VWlx+36q7lk3hJRB0A1F5/7o15oCP/Th9tqwOf5BbtmhBAR5/Hz5+qgo3A+wFeOmzZOLRMG4q0G+tekJjmMEOl1c+WbZ8Xr3yrsnYdofsD2zetut06FrwglSs/4lHH5hDL6Tkg6+tvaP9T+9+cGBsXl7qg/euW1Tf2ND0hz+9d6inU35nHW1BS4r9Dz+wYSY94RoLGXpkfJ22+DE23WY7/PTVomWT4uNj42gpSs+BA4fLOW4M6U39hv+/ve+Azuu4zvx/FAJgA0GCvTeRFCkWkSJVqEJJluUS10S24xJpnZzY3pPsOra3nM3ZPdmTnC22k+zuie3sJrFiJ5EjW45ly7YsyVSh2CmKpNgrSLBCJAEQrCDKft/Mu+/Nu+/9mB/6QYqQ3pD475R779x7p7x5M/NmzrXd2YZdEUMWLZw7ZSsGfOTP9AXz55o2Sf579h00NqZfaAnp5GBs+rHdIDjqSWRgrM8JrsA4vs3vxh3/xMdylL17fwWstNvtNThQcbZXxDUUixPCqaDZlsFOrRC9pEUdn+Ujv4bOpRc/M4KTghSoS1jzJz+JMwzIx5aSCYb+kGFcdjaWmC4BfRfuO1yzZv3hdRs3N961bPEkfPU3g2cV4aiDifhj4zA15E20iNVr1jcID5GlT/W3msRsL/wlX6IYfxH6B+zSgaJXwZgMaQx8+gtNKDcyCOWWRMCwuKQsgwjNn7QSZ8gTAkdMW1vbLu7ctbspiknxOfRu1oxOOF13gCCyEKa6oF9x9XfxAjWN/tguMGIc1jWYjr0alZ/4+IcW4Zy07ZhVuCr83W1EoR1FcBLCj/PtzB4bBunwwcSs7dt3HeeWLBuT/itsBBIrYW9F2pP+a9e9hpu6TjYvX75s1gR8h8ELqu+7986FOPYr6Kgts4t4YOIe0ReXLl006dYF880LF/YBTcBESfV3v//kukvtl9trc0PxBeWQgSLPgyuWT8fkSMXWbbuOnTh14vyBAw3NlFvaf2gnVWb333fXLG7M5+zeq+s27HVpSM5iDIqMwZj+za0tlxuwbIybeCZypuPWhfPG8mVRZDIE6kfKyECmIQOJwyb70fcst/uutu/c1fDSK2sOivwGEj3Al/KXvFx+IQ35QyEtf4jLdO2osFPg7kQBURP5KXotn0oOdTV2DhKNPMwXzo034UCWn+L4EIS3a/5huZJW5BZoGMT1T/T3xHEd5JiErTqceWL0WRRyY7g9wyIaEylBR4+ur+W5jrNnzZiIcyRfkfKpqxvGE4DMLMzevQcb8NFRU2zCiAZmAQWGXrpk0Uy87NTha+Dzr65dtzNMk0J08G+eddP4yZMnmpn7sEwh3NkWu18Pe+oONh5txNWOyELo4Q9x4cdhyHNksMc9j0/+6KcbkXX76Prhg0GUx9e59Z/95Mdv/6cfPr2BA9mBA6vLP/7R38BxN6PMR7u4+vsMjnbZKjylfKZPm1Y3f/4tM5AFDlre3YChullulTIixPF+5YcaDp9YcMu8IVhIG4GrF4c2Nh49x61SOPfP2P/4qZNNzbjbXfMX++L0GFMSXLnAJyO2/jAmqE9hXTZYlMbjTOECJ6BXwb6r/yIPMhCbUDKJFqjlF/uK/jLpJFqhyPZUdOXLsLYeLW/jMMlohi+hUaBskGM5ahzvqySk4xfluNLIQBNBPOEBrwgqkBFlTnpIYzwpP4pfyJs84MQ4UgHCOJP6Fn6kRwv4awN3Y2PBqjXrGjZsev3IXXcsnYqH5Wx582NuvP0AKzoD2EgYFr0F9on+ZEwHGdP0t4lv8VfKpoD+1738RQ0xoJIvTX+3Lgi5C9/YsfMA93U1Hj1mrhty03T90uWv9Y/RunUnkFfEFmjKP0aEQJB40wzedtDRiVkC3O51sgX7ce03RNC5ZlBNxUP337sQ2GFXjXeN8Z//nd+uxxFB2zdvw1EgcLv3HmjCWcWr6U9zY0aPHjxrxszJTMNtE+fwxo2V0OoqdNpL/+nJp9bhfKuOUGfNAHJq/Xvd/l2e4Nd4/FjbE0/+eNMUXPe0/K5lszDhV75t+46T71lxX7THCDS8mg7n9B3GF/KNt9+2eDLe+KevfHH1DpY1rne6iFsIcMzMMNOPMa5++PChfPhh21LNj37ys9ieMFcE1z9x3PghM7Bux7gGbPY7egT708ArrBPwmn5PSoBPTZSN2/9hL9+B6dOmTGCfgDtkZ2zGgI/8yMY4eIrt/yZNnliPaUvzAQ/2yp2NyRK0z7dS/0WUVKjaVyxPEOABEpKZg8uV/hpf9CYUf8hAIgSGCY4HabwyL4xR8qXpH+K+FY/iP7RuSNUHHnqA7Q6D6+6u53790jatiFv+ov+AKvu15OXL7VdIKwpMnjwhnBnc+PrmBjuDTIzAqfzn3Tx70gicmtiO49HRLzSFdZF4dGQc0OBom1o27Pgewlzutde3HsWs+KQXVr6C537PjrPUN02bOgFH8DU/9S/PvIaXL/PBOT5KwvFi+U3vffD+JcMxDY5B3x3Pv/Dy1gcfuHuBfFCDSffjT/3051s6uVQbKEzAtv2RDz58B/wmtmpAdeWHP/S+eZixrMKsPI5SxswJR3volF3p8Gyd2njs6FasnoVHqK1+deOeUGcg6/IvQ/9BHjx2xuVVtF/ZP8wr0Kfk/o9GkDxEqIC3BGOQaS6++AnhtP6xsRzSOdarqBjQuacj3AHDAzdrBrEho5MCBzZogWQpfkATikOcOAEMfrRjOwLxE9L50g2S88NTKSiHnE5BkbgvMazEcs2JgbYD6oZfOiJDK7qQrxgzgEbPBL4gAV/6lkCfQvrjuVCHL5omsmN3xM/hGTPu8499euSWbdv38TohfAEF0Qvbx6Wlvzj9AyqInaZPjKeo1qP+QdmT8AYrf4pkbUIfXB+U/0p8ASb1hSyNDaWC9VJ/7JEVC4OP9UqdN7zBT5c/4103euTIQbhaag6Ojhizas36rQ04VBhHFpgHBaTLVVSVY8nkvfNxrZBZ/tm7/2AD76G9DS8bvGLtgfvvWTzrppknf/HCC29gc/WVtra2dtOWmYlIF8CHHrh3LsQ0oVVr1u7gqQ8f+sB7bx+O0dKnfusjy3709M83nWs9d8XWA1dK65d2LVB0Lbb9JznamIYjR1qPHj++ETawX0I6rcotfyyt44Vr/aG1G7AkxNNS0NZx3uU5HIqO8/CGmEEi4wYENyJgTGu3VgT6m7KWOhQIY+JQ/phdvBlRefSlXS++uhYPFrcvjPd7ltS2a7d8T5w8cf7osRNNPPMNR7bV4ly0UXjBwAcB6f1jIEII3PaPo2fM8j3PjTvYcLiFdaEv6n/0ymCzFf1NKKYzY6C3xBkEawebgo0zSHP1F3+h+mFYFPFDO9DhPKP8mLGjzWZ9jJ2u2pordkA6+3qnPzcRLn9V/4mvXSH9a2trqz758Q/fMRjHtZBm0+tbdjcexb3XjsM5QKn6yzl/uEvZbCOQ8seSP1eDclyOTgz2EO+Wv81GFGBI9BaYor8lin5BzqNfnvjhU2s5eBN7RQgBj6D/a8a+4B/+5Jm1+CK3DZNkFi0ofzPghBk46ENbG/qbH/vg3cJnN855wV3UOzsxqyZ1gmn04zy/813dnZ1luMSPcZj1nErYg2Mly0/D17wL59/SxCtMiXvs+MlT7BuRFLSDQHan/Afj2izi4kQWO+AT8wVQ9Jd6kBwvgHdY58kpXv+lXgsUXaV8ffVfpzMH1+nyZ7EUO/7hnbocy7n8ONar+PJjj7V849uPN0FZMw2LNlA+BG/Cbdhwqg0gjSEyEI0MMwTt3gJWeutsA2CR0HBwAHmOiYKgQaQ/IND8GW/yEoaMMGMqG+HDF1oDjQDxH2NAdhIB/yQeOjGTnsyPBp07Z85oLNVMx4GseO+yjm82q/EBxx1LF0/Hcs54LrdhD8/NeKuavHb9pl1btm4/2Zf6S74xXVP0Sepmy83qZ7mIX3Cvd/nHdGEAehhZAn1MuvHbCCtvNMDX+EIr+gh/gWnlL3HE6a3+ON6rXnjjA8OuYuo/jp8wh76SDrc/3IQzrkahPzJdEvZd42B0NJBAf7y1D/7Aww8srBtWa2YGuMzy82ef38EVCwwCTr/voQdvrR06GHfBjh3z2Kc/NXzt+o07Mft8NE3/pYsXTUDfaTpPfrW4a/f+M8xq89bte7A3dTaXjj7/2U+twGbpvai3DTx83OVDv7WVrUeUPygVERfV3PYFhdo/83Md2koeB7HWz7lpJu7tHD+mBSPZhsNH1rk4ljlWEnA11hzgzpw2bQyOfxiNgd8bbFs4LcI8hLlUhqvbhh063NiCS99Nx89le1cHt6yZh+mKoMS4cWMGjRo9ygws9u09cORNXOFm0o3OUX0jPZ7/Qacq/Z5A8svn1m96ff/HPvQ+c27Z9GmTR2/fscsevk6GNJjJlAFb16XOmQikU94qXOuIUyrM4Bcz0cHHBIXxpQCMrgEPw0/9UP5y82WfTeBLimsTkYWQzpZ5pD9iLKH5Ba2Bcf0Zl1r+LmnAJeIfRADwLFPcgLEYH7F2cuaHjqm4Zq81wg+YITPRmTgj6oaZQT+uy4vVXabRUS13wpB9epr+OD6kGnfu3j54oP0IAftlT7/y6tqDRjNkLXcRVlUPMPtGrR2s3vTjGCAzM9t2vu2SsQVoeJUhjnYxz9zG48fNVhKfPnZ6x4hO6ZPl4eiPi1LCDfvGJkIGeB77WG1egb2cNK3/8RMncDGD1ciVj10T5uIqLl2+eBm7wIx+XDrd9Pq23bDNIbKkrqR0yx+XOnTu3X+occ7MmVP4RQsHuzgb8jK2oly+iL+28xcu88QB2Opyc/P5K7j5bdgD9929AO34xH3L77jF8MUWC7T3Pa48jGdmRldAHB1ZMWbkaNMfY7k51u4NLtED/EC9wJ6RTXz139JbPkH2AEXWfyFg1aWR4HrSx2IAscjxz6Dqmhp0HeFHiODd9OXHHm0x06YYaXJ611Q+MsZG0loO+IzxEBbI51Ce77z2eRT6bRwp+ZyK0hkTNEV64ZBmZj6IE/EtxD8kDpjIN4oWkkNcHvM+ThmMjDY9jGMwlE3yN5HQw0L+YvBmZxXg57EAjHPlmzJlfO3c2bPH41zKsTVVVeZBQhzc/3kRe/p2b96y9TjleurpX2yZNnVSw4p77prHBzQeOoMeXHHPEuxJOPPSK6/uwIGy54SvwKQ+5AzXg/4Wgb+it0Abxw39HHQOGjik8sLFNnsOkrED9bLUAhmK+y1CIfmkLpRa/rhaCx0l3sSCOymNLkYY/sA55cP6cy3L36f/iLoh1RewSfwKNiqL/jiaMY8B/ahJEyaYBztFPtvaiuM7KKvrkvX/5tkzxwoG967Rz/sqN2OgtX7Da4dpi/LKsvzy25dOXbxw/ixcIWsa8dmWluanfvKLjRzsEQfjgLbH//GJVQ8/8MCcWViHwWkPA7C5fCEOKB337PMvb8MDErMLrM58UZk5avnyO+YH+Xa/vGrtLtF75Uuv7Mdl5O3YaD4XnXoFvmi9GWcBzjr15plmuTuUdPPnzR2Nq8yw0gwNMTXIt1W0FvZIWFooy2NFpgz/cd9FeR53vVPsssYTx1uONp7AgKwrh2NTKngkBTtVzIANnzpp4ijs0xlNuQO5cGQFH6BlxDWDYohTvnjxovHTp04ePR6v+u6yD95mB1CUI0eOteCykCuc7Zw9+6axjSdOnsP7q3kgNTe3YOAmfVS8rkuetAMGwBce/94TK29ftmQa9uA6M8Dx/uamGZOHy+Z5tH9c7yS8Ca3D8S/NW9/YhSM+G5oOHjpkDpa15cD8kRmcQMomdcommF/cKDJ5GFgbpnv3HTxZGN+Wb2/6P1S5qL/DmrzUg7vuWDYF5o4UCQXi08nKjZmdcAZhwS1zJsyYPgV1LEq30ke/+w8caDp2nNdJmm41TOCgy+ok+lv+RDh58vR5jNcHIj2MxO1/bbiX94DYCxc1VKAqdl+6dBHTUJg7Qnucf8vcsbiuzwz4cBYk1rDcsrH5RxxDUSBH5Mf2zdzihQsmYO/cLCnnEydOnvrR07/cLHkTXrh86VJdrrZ23Jgx9ejrq1pa28yMPJoBDvm+bQrlJ9emU6fPyfNv+e3LpkuZ4qOjprj+gdlFlgBGnwdInRF7Cb4tf1yaMwA30Jh+BS9q2E4kxRjUD9X/RxqTbxQSkwskH4yhq25bvGDy7JtumoSPQE27RCfQte/gwUZ87LW3pbUlaAeWj8MOEcgfSj/3/Mpdzz73653B2dBRhrEystHYlnIacygvf/I3P3IHugPTN/BsxqPHeHyV1X8ZPorBMU0dFy5caL944XL7yFHDB2P5ezI/biEXzPpjRpzedP3jOtt8+St6C5T8LC+mW36lPv8K8Q8fHmH5B/mF7Se9/Nn+hw8fFh7ZRV2CMR7u0jWh/HpEhVOyQK4/fPQE3iTTnFSetDQdFzdw3OgaV8Iufx+9L508XX6Sh8CyHB4edffgXk1+6YVnU56nizMV4cuoQ10VlQPKFsybMxYNCPdOjhrJLQZCTYiXk0tb33hjP97kj+C6PvZ2ocOBzi1ozK/iZo6Jy5bcOgdXvQwYWT98BK7QuhtnYR195pe/fgPnRlIJx7ny+vRzSV1cy4NvYVjoMoH3P3z/vB//9JktnR3yPsMsmSR0jgg9el35ekR0eIucyfzwTMl/5EMPLyInjBuA6PIX2YTeYOFHcHR6kn+ES1rt0vA1Tjz86U8+cg+/LsNApbuzC5s48VKAAQ7PaA33nPCtFYf44yHTs3x8oOCDA7OxmrmAX+cunIb70qr1BzDo6sC5p8PnzJ41fvLEiWOZp0jSgE+Kn/75s1uvYtYtKkMMmNtzXT/75bM7Dh6a3YQPDhZyNmQsKvRnP/mx+7DfbdfqdRsOT586pe6hB+9bDM2pPK4P27kfTb3NtdMafEBx7NjJlgdWLL+Fe3R4VhYumghnL0mH5eDbCHvj8IXfKrHJXcuW8WR/05XNvmnmVOGDzq8bm73P7sXNNNi/dwKDigGTJow3A2ke8rvi7jtMXRF8bpzff+DgsR27dmF/XFkOM0HdWOXmPqXpWC6agqXUgRhsmkHy6bPNF4TOQil/iaU4xizckH8Z9+ruFLx7cA3YLTfPnobzvGD2q1fLcVkvDgg2y6zEOfWmPbLD4suvLf/nV77IF2o4yc/mYeP0r5tm6SdMsPfd4kPDdjxYz4iMYksLC/F3+eVyPFLk/nuXz8XScDsfNHKDCKlbWtowYLP4OEpmFr+E1tIVCsPe0wqlSfylixfbsRSHAV8ZZsXsUibTUO+DesxQXF72jy/8+uXX8HZQjtWhbiwzXsIqSos58DdoX5B14tLFC+fy/YP7tfigd9vjsRMnYbM0F88Lj/Awf34kg4HEbM6YC+WevQcafvHcyu14yZIoA48ePX4ak+pj+LLyu49++kHctnkO489ubJofyD6fSNwj+8auPXimduUwWKrHF+ZTgZLDTS9tO3ftwwyfyCKQVLb8o/JlnDjideVW3LN8+hzc+4wJUHZGndA9j3104UHqmCQ3M95CFYeWh9VbUtz8bRy3mcyYOWXkFBx2jOOQRgLDILGt4vl2/OXVa/fgDNHgZUr4EGr5bX4dnWYfBdKTecXjunLoWPMf/o2Hb8VA2gxgeAbgM794fpvFs/znzZk9GQdyh/shXQnYp27cvO2wGxf5rTzxPKPUdF+azOmYhfTvOT+Xf7r9IvrC6RzDxaTq5hgPX1HzB1OuKzEC/Cr9dMNrh5rlDBvq6VeEE0hc189+lmMg0986/ti4CPGFnPASKA2SkI7xEmcigjjxayh8BObxqfmF9hEj6oZrzJ2795lKgvrSdeui+dNrhwwJ34TRULuxhaAJp4MfxlJYU7wDEN7kWM7Nvbl1G7Y07txzoOn9D664hcttIM/juqKq5GBPSyG8BIqurv5CIzgCc7llSxZOwqACxs93Yz/h+D/4/c+PvoCZSOx9wmmCmE/DjdJ4AeQpI4S4ShGxuIPmCtI6cFUXcRDfiSSY4Won8AC5WGkHtpzJAfsyfg1VXl5Zjg8hyzCzUj4AJ2NWVFWWVwHirawcL2YV/EoSeIToArF1lGnoIXGj10B2zuw88MZYNdUsw8khrKKLQOpKv6u/2ETbQcIuFD4ChVb4sV7SX7h+tmJTG26iMldnYRarMqzaQTZ86Kxau2E7el8w6bn+s948+9zLmz/6kfffeQrXFP3yVyu3ncVxIaNG1Q/8/Oc+ca/MKogGbefOn1+74bVd23bsPmXjxBaiD2PLcjt2733zCN6KP/i+BxeMxxOd9sXDa+7hw8fOsuzwPDQEOEXo2PNm83ZSfzxUz/3d9/55NcgHL5p/80TcXTkcRYU91dVVMjMhchUD0c4uNJgvGq1NcMKDmQURWiwzncehuEe3bNt5DNd9YbBsXf2IgTWoZ66CXJICbsOxN/A1MVbXMIhzy6ss9/Kra/dNGD9uFG/UwKypmenAYa4wLfYjGifspPyDzAxIL//W5tZLLI+aXPLoDF7RhYGz+SDjWvR/sn+P+wHtC5uUF/XQOohurk7iL8vh5sjLrL8SI5ADEizfYXBg9b94AaMztFdJ7wuId2rspbLlz4Po/+r/Pv7rYvjinLZg8kHKhlD0zudw9q4Z1HCgJ1+9Cl8OENbhIGwbFtsIFD6CTZjP8SgSnLQ1UWLRQbZv3Lx195p17vEsTLV8sIf0MNrJcO7ZJgPu1xRaQixRtr3y6oYdttss53ViU/gMYJ/36xdf3WYHry6F+EVOgRIvcpflWs+fvyT7eSUVvI2XvfXq9Rv3SrzIG8HIhhEO4yz9e+6/dxZmbcehjw5ncolHezQeO3lqw+bXDx1t5GHbdCKjQMb13P8Ro2dXlsPWkppRuPiaeDxj88fPPLsRMzEY6USyY7XjXNqAj3K+9PKaYHWDHEQ2gREPplq9I/1tXE+/wkcgcV1/6frb3IWnlpfxEmcxJX89huMYjximQdfU16y6ePoiGmOlNgbRAAAp5ElEQVS3CaNXH4I94VX8ytQylA5VjEFIx3iJY1j8hdKJI7yKwffx86UzD9dpfO4FabmILxmbOXjh+jhugrqMfUOn1m14vZGUXNTFjMfu9z5w7xK8xZ8+ePDwyZ2795/ESxymykV/yUPzl3S8yWHzO67U2sSrlu7AbN9zz7/yht9ehfnZHJkuzsXtzmFQVYbjYmYyddPmLbumT50yjtO8tUMrwoGrUL6dkJ3e2bOtLZioOYeNuZOW33nbLJxnaN5GkvahpKKn6xc7RPZO10loBV94CLbEC9T88ryp4ATGvJ2YbMD8iNmdwo4by9EdHS3N5y5s3bGj8cQJns7v5kU+4lx/PgddW37y01+uwWCoBXdlAimfw+HDF082vXkaRyKYhw5nsXCMwhF0sI32gS883DzIP5KXD9QnnvzJxrtuXzJ56W2Lbl67/rXtdiavG3dE79mP4+5G/Mszz221copsorfA7tyJk03nsYq1y2JgUwhW+fAAqDSLtLiIHiu1+BgOA398P4mlWxBiaZe68+WT8ziEeKHHTDi2E9BZ2Vev23QYMwfDRo0aMewlfFm8G1daRfJbTMrGwd+LL6/e+tCD9952HMfqr96wcW90UwnlFJ2FN9owvi7Glor1H3z4gUWYUK/DrF/Huo2v48Gn8Ulj99xwWQplGhiWeHTCuxtfEJ9o4cyqQeE0Csocz5+rTU1nWze+9lqjfZhr/hG95Sc8JeTDxyIe+nSsCpiZxP37D2LgIzTkIX5CurT8bIr9hW0uXsCZjU1vYvIXZZgvw46ArmZU3JdfWbdXjnMg37/5+ydWJfn58vOlu7LQXwg/DY9xWj9Lj4HwOX68BARTLvxpR9ngWKw27EE9Zm6EIHkiP4kziUE6+/tNB3CM3Fg8u/O7dh84hA+a9rNOJemtPHy5++GPf7Z51KhRu3lkCb7KNTOjaM9dh48cx5sGt1OI68797JcvbP3MJz46+ASmsrHUj1tPqAddun6Svv/AoeM4PxIXel7AC5HFbTxytAXt4Vieny+bDqkszzfyc9iviq/1j7Avsbz5q+0tcRGG9Vl5ruBQSxns4bF4ES+BJ/fu33/qQEPjWX6AKDJYKLxEB4bFTyjO9Wt5NL7tC3/1wqpND7/nniW/+NWLm3gLh86P5XXwwOEmbn3h/hF0UXnMbF46cvRkK1dKJGe//lIOApPyRDqRa2/ThUYk8usf5SG0QsOw+OPyDqwZwK+dw5lp4HVwjCcUhLmvf/vxNdjFeIcJ4GfXnkObD+L7fwmnQg4wTYeemmrGum4yOxR2YGHHoukFmZBOp9vY6FfjRynWp+hVMBRdsktGRAzxdl+OpTo+kSOnGUYpxqeTRX88HvOYgQ+P2QhfCrQ+moHiT3m/+m9+/4OM/sb/+utn3GQuQS1dvGBuMz7x/Nvv/8AUNlcYcBUlpimqK3BqeyW2ORFW8FBQQjpeOD0AU1eYgsNzvAJ74/HtKdevMIdHgMkhDo1NDcPjHNdto1szk35YUoAH92LB4RHLERBmDrEdDY9bM5PYgT4YM4jtHbiJqAN7S67yovnm5nOXsV33KmX73d/57ftxfVnl0z97bs2+g4diR0989Q8CPf+Po6e2l2sA+pX9VDBZ3D5+Hv6+ZCn/Yuo/69udty+ZtmPn3hMn3+S+pxTnkzdQeCj23eC4kiuiPyZu8rg4oOLchYtXJc5w9/HTIggxYYrTyVp/LNOVYT2vu6ObDw84nb/DYMK4cUPw5S6Wnh2n8Z0k4wX9oJqaig7sTeNmcYedSU6QJyI0QxXWDD3JWn9dP9P0x0EV5WjHk8ka20YaLptl/CAjn7xKPhVMZJeMUArpoGao0nVysfoPr62rxhJeDfeFcg9k2D8q/l55lQAqaMjZFoYMHmQ+BGltO3+F73JMmDlt6nAMri5iLsAZrCkBNENPsqs/VpWqsfOjA3vO7NFHpNXl6eGfwFf56/ql2Ul2dcPrqnGU0VB01F279+OaUSbA4WFQdvedS6ehL26KZvJsmvnVDJ0kenWyq38qvQgU5O8ywNaS6kRZaHyVv0ufKo8joyH18fPw9yWXor/m3ZO80yZNGIcdA7eGNPn82q998dE7GXan7FciHA74RgyvrW/A5gSxQUjseEwaSpXQOEEOIrqCEjfQQQm8CWAGg4iVBRwffxk8xvBBH8rDHChDsU5wAxiIb1hcuXIZ+yPijHzyFdIfIyT7gIuzs4NhxEk+Pv6CRzb0G3z4K3GM0YJbZs9gPD4k2UNIhz00V7FSYx7yDAs+YZpz9U9LT9DrCM2gh3TKtWPn7oML58+dddedS2YdaDi01qAHesXyZwKc0Rl+sYNmb5HMb3E/lJcugFp8mxj9JuRTAhQq/4hD3BeWITJmfcPF5ftEJIOp+BerPwd7bk4YkHefv9ARzLg5KZJZAAkkSwcr9JaqP94IzLleob2RofBkJuInNIM9ExEkABSjP/brO2/4IOrJXWf9tShu+TON6rIevLxm/UGD+xb0F9saet/PDaJ/S2vzZf4ZdYM6ca30Z1vAB1bxQR3y3Ndw6KwxB34MTLGdT76e2r+ZqVKM08pf4q6V/uSLFa7L/AtVDOTq6rza9eKq1fsZpBzalaK/5sWw6Cp5ufzNYM9EAJEQzuDDH8NHfJBscAoWnk2N/4qOASSQLOOINmTSgBTmJ8hBRE/ln8avJ/0NvuJfSH+O3RT/lRJ2BnxliOz8T5KAs7jG5PPlb5Th7TuQX5JCmDBIYKjQyJwHYpzMOIo/wDPyw1+QP+kwNOJCkXGKnl/8lPHkQvtdAlaOrN9AEBj+ASS95COQ7ASH6dpJmuDr9AQ9I+gEXgf9bYb4pS0C/e9aungKtsNVcakaS4HYEGyd6CEwIb8gOviCo5JMUNJE3VBvieil/mvWbzp48+xZU3HKzYhZM2fW79mP+1Td8keupi6E/LPyf7fX/0x/tOZ3cf+XlX9W/ln9tw9EPv+xrybPsVv8eV22UsLy6MxNHlH9KralnJUELOgNwL7nkWYggQc3H7RYz3NgkEnQ2QhdHAp7QtdvsciPzvKN/DYVvzIPRsg/4gs0/qCyc6ATDHZCiHTDP4AmD7AIIfxGtwAa3uTp/JnBhaEnncgpMEVe8oo5iwMKxLp+i2TkY0ogI2MlzmAUo79BxE+gP74irrhl7uzpjF6LY2KMjgF/IwX9SDPSBH5XZ9d/vfXHEm/nGzt3HaDsdyxbNCtW/oyky8o/qqNunXf9KFcpd4Fhvb+By5/F2+v6T12pe6a/rRdiB5azUw+y8g/6vaz+37D9f9b+S+//xo0ZOZJjN9qSjmM6ju1sKHjuM/DII4/gI4TcDySBcPyYURMIef6PnAEkkPFmcCAQDcmcABLA4DQQG2eQk/gmmp1S4Fwal5cMQjhhRD+h65f0WKfPjo9OIP2SFyH/pHMkFDyBRLfDIgNdP1kZp/i5Mru6CHoifyYID3oDP6HLy+AwLsB39WeUcaSF7LzijUcB8B5fnNl1JtSLSAF/4Xcj6r9uw+ZD/BqLx4HMnTt7lNjBKml1cPUXmxidWHaBHUK9nfLsD/qbYmJZUw8HGr9JzOp/Vv6oGk5dMPVa6r1AqfcCA3yCYvHdPs/1Gx7CR6BTV8P+i1lRHnHiJ3T9QbrghvTAMXEBvquz6y9Wn1ie5OnpL1ydXb+oo/mJrKH8QDRxQuDq7Poz/Y0FxFah/WAjE0db0U+sALp+Uw7E8ZSnLi8fvlvmrj8orngdplyUIYCuLoXwTTxpAufSuLxEP1dn1y/p1Gf8WDtmE56APwjGdiYqyg3BfHfu+w4ijmcZMpob+iUu2KsPw9t/jJc4i2PEMLFMicdFuIXo9YQW6SUuzou8U/gHp8ZjKRrG5013+CcwwHflZRqd4IvfRKb8CK3hm8IvLlOKfA6Ny0uyEl0JXb+kp/OPUgfiAOO5c2ZMY8yaDZt3Gzn7mf680WHL9l37qcOyxYtmiR0YjlxW/vG6YC2j63N/LH9q0rv6L+3MtmPSS3vO9IcF+ln7z8o/q/9Z++/N8z/q/6qrqys4ZmMbEqfHdLEB31e+9Ng6dBE4viBw6C0mjR0zzj5chLFAxlq/6Vgdf0juxFlcXAdj4myRil/ofZB8LY3NQfxCp9MtVvTrw0+mW843uv6i9934qpNnw+FIjzcPHuTn/nGX1M9nz7dH/42vbT2ML3kvDcN5Vgvm3TxG5BY9RSuJt1JGdVHSNfThJ9Mt5xu9/DP9pZzi9Tkr/7gFkvU7bq9kutiVbUv6fYERrcVKtr8kv6z/tzbJnn8c0ogtpP74IGuzpbH1WvxCp9MtVvTrw0+mW8627ku9FxjJUij/JL9I52uh/6RxY8eZN7xAZeS/l2O6yALOkq4TGZvlGzemfpKTFvOK6oSuP4YUC7hYrjmKpY8xSwSwXm0coetPIPZRRFybIO8eeccpbMjawU3pkUWBRNzpOWBOcBE17j7FPYOBPMK4AF0p0cKa0PUX5uliFS5/HP7ctWXrjn3ks+TWBbNkqrswX5vi6uz6fXRvNT2uTSBDj8ziFDbUN+XPbF2dXX+PIpWQGNfGMpK4dLaSSli4/NNp/bGuzq7fT/nWMOLaWB4Sl85RUjP9s/LP6r9tDVn/Z3uDYvqP9F5FYnH2tx6rxcZyxIvN8DEC99f8A86t5CuIcTgfbdj4MSNxs4ANC2RIkOz7in3g0E+ctD/S9IZe4wcimMGFMRLzcfLjsankT+j6RZYEPxLDSboPCq4hwg91pSPkn8k7gGm8kNTn+l/GuQ3ku+LeO3nPagUOQD/ZcPhYS3/X/7XNWxp5PzGvNrp96aIp1FF0NWWOsLGxwKDcTRm8i8rf2AI/orfA/l7+1INOoPGbGMQxPkgLITyuzq6fPISPQMOPxHCS7oOCa4jwcyO0/0z/qPzcMnf9Uq66/KQuSLoPavqs/G1LoB34R/sJTLNlb+2n8YPmmrV/2jqwt0CO0ThWo83oOIbjWM6Got/EgO/LX3ysAaX2dISSy+G6zxlpDYgzL7Zg7YZFW9hlptDppxNoQ/Ff0tJJ5RC/iUz7USVOmag5YZp8Xn5peThxhj/ChfjfCPo34VZ7ijwdt1SwkNes3bS3aHs6uqZ53079eTr+69u2m+0Fty2eP5vyia7S4o187/Lyf7fX/0z/wv0T24z0sfT31r2d7T9V1qz/t2ahHYJ+TyDLimUtUMpdYKo9PZFZ+VsD0Q5iV4G0643w/Jfy5xgtVpwYw5mxXCwyfvBymIS7FP4MJ45/RCKGDB5YP3rkiLqm02ea7fIavoZMceaKTvOhZDCONH4gBuhS+QSSheuPTsWzBLguBlG4qImQjvz4nUXIjx4ONoMInESIe2UQJfiBn3FwkpdA4sXxDTuHvyEL6Zhwo+n/4qsbdn3mE2NH4RqMSt6h+Fsf/cA9Vup3zi9u6q3AIfDt1NXWCSkXluu7u/wz/bPyfzf3f1n9z+r/u73+jx5ZW8cxmvvE5xjODYuf7wqp7uvfevxXGNc+JIm4dqZp3ebtG8xgKxhPhX47nhLUwpB09hltccQv9L50zdmHr9M1fW/z1/w0veavwz56X3oBfnUjhlXff88dN+NS9OFVlZXVGq0/h/HV7pWmU2dOr1y1dldzc0t0GjyV8tlLp2tD6PLT+L1N1/x1uK/595aflqe3+vny0/x12EfvSy+Vn6bP9I/aEG3js78vXdtXh330vvRS+Wn6rPyjMqdtfPb3pWv76rCP3pdeKj9N/w4p/9uXzFtaO2TwqEi9/HNf+9Kj743CkS88ciWKsj5chv6nnbmOcMBHhvV1dbWnm5tbMVdmkVhAdAJtqIdfzI2a03wB6YROIPniovXC/CUtoE/gB+mGBzNQ/BjlOskrxEdiKIvjD+MUP4kX6PJO9UO+a6A/iuTyU08/uxkDdOTKsnHsE8alCaTx03DcOOFN+FacLz8Pf2NnwWH+8EsZMij+sDxVOnFcl8BHoluW4heYyC9gFqa7zNP80P8alH/UXgL7ZvoHxs/KP2wTadUxq/+witSRwEBuWxa/wBAXNHQSL9DG9vCbtf+s/2PdYT8NJ/VGoLd+Bf270AO/fsTQ2vhgD99hYOxmM0j+hlnppD/60mdXgd8qN37OjEnznPVNJAWCG+j6XSrXHzQUKsY/s7YaQFlnFeiShX5Fb+IljiwDP6HrD+ldGeE3OAE0fqEjH8dfLD+Tj+QRZup4yJeuWP4WO/pV9CZB4sg28Bcrr8HP9Dd2M7aA/QRm5R/Zotj6ZOpjVv+j9qp90lYJnbpW0L4eepMsPMky8BfkJ2VDGLR7gYbWkako+RQ/I4/EmYD6EVkJnbwKyqvISWNcQB/6JTpIL8hPZCPEn9E5gJn+sIlTJq6/WHuaYhAbB2USA6r8XJsbP0UQnBhhEJA0QtcvyUFcsfKavPp3+c+ZMWVezFIYs5mxWywyChSc4SNKWT7/J13d3S8I+sCBNXXTJo2fdPDI8SMSFxmeA9Z8sGIrhRFh0adnUGONDunIDzjdBlp8+A1PW4nET5iWbisscaXgDVoYZBs3FcqyS8hr8nbyC6gj4FaQMDbSNdM/K39bx6M6EVYTeLL6b19qaQfr0BClTSEia/9Z/5f1/9nzj/0AnX4eZ8//oH8IxjdTJo2bxDGZMVbwwzGbG9b+9CeTg/WNbz/+Q3wM8JsS1dnZ1b7mtW0vXr6Mw9IQySnCqAMXrOKg0Mo0o7+A4/kl6ePpdgaSKtoRXrLCxPF9/HzpxWkdYSX5+Qa4vZM309+M8LPyz+q/aXRZ+48/MHT/neyPetvfRH1bMb5kfln/J3WU9hM/IV1vyyvr/9+5/X919YDK5YvnrygvL3Puzc3/6KtffPS3TGUp8NPjDB9pBlRUfLn9asfD3bnuwQwzgznTp8x5fcfebWywdAJtqHe/Lq1UbIGWdzQmFVyBvgYQTe25PFy/lbV4fnFdhU5g7zSP5+3qmunvlpHrj9ssK/+eH8hZ/Ze6I9A+RKWdSrsV6K9PWfsXW9n+Kt4exa69gXF+tpyy/q+v6qvwEZjV/3jditff/tT+52IMFhvs5fLnOVbztT23vaXi/uHvfeYojtv7EzdxZH3dxNEjhg9nXFSVXIy35hdehK6/EDcRntD1F8L3xbs86KcMAkUmF5KfyEl/qU54SR7kJ3FpvLW8xJG4NHxfnNAS8o95CxSZXEh+PcnH9N444SV5kFbi0vhoeYkjcWn4vjihJeQf8xYoMrmQ/HqSj+m9ccJL8iCtxKXx0fISR+LS8H1xQkvIP+YtUGRyIfn1JB/Te+OEl+RBWolL46PlJY7EpeH74oSWkH/MW6DI5ELy60k+pvfGCS/Jg7QSl8ZHy0sciUvD98UJLSH/mLdAkcmF5NeTfEzvjRNekgdpJS6Nj5aXOBKXhu+LE1pC/jFvgSKTC8mvJ/mY3hsnvCQP0kpcGh8tL3EkLg3fFye0hPxj3gJFJheSX0/yMb03TnhJHqSVuDQ+Wl7iSFwavi9OaAn5x7wFikwuJL+e5GN6b5zwkjxIK3Eun1EYe3EM5sZxjMaxmhuX5hcd09LCuFtnTf5LXICyQyKwxJufc9PkRTWYVpRJUxFMIHHNuXwBpF//uTj0a6fpmS5xrj/kG6T7DEZaOuEl9G4c/XYh2EL69R/zyfS3lVLKXSDtp+0rdhbo4tCvnaZnusS5fuFnyp31jHhEgBNoQ/Ff4SX0Bl/OcEQgK39rL13vJUzbZvXf1jGpZwLduiT1S0MXx1o6/uurnzqdeZs8CANWAuOcbUjTM1bi6M/qP61g7SB13oW0bVb/s/pv2p2pKVG7Y1DakmmTfTT+qampqrwZYy+OwYIs0dbzOzhGk3BPMCTqCYlp3/jO4/egdr/kZtR67vypjdt2b+ThyKmOD0/nIORu+Kk8IZ34xTAhbpAujYmQzodvDlx28rNU1/BX8grkTeSU6Z+Vv9QRVI6s/mftX/ow9hXiz/q/YN5B2krQn2b9P+oI+w1WFjhffcmef/HxhrXaNfxV9TWR0zV4/t82f/ZtuG50tORlrsHN5+776hcefUXieoJFD/jI5Jvf+u5/x1Dt37sMjxw7uXPvoaMHbZxUT2Grm6xLmeYvlT6N5/WMK1X+Uumvp65peZUqf6n0aTJdz7hS5S+V/nrqmpZXqfKXSp8m0/WMK1X+Uumvp65peZUqf6n0aTJdz7hS5S+V/nrqmpZXqfKXSp8m0/WMK1X+nulvmjoBh6SMudnVCEPc//GVLz32H9y4nvzBq1VPKFHarXOm/DGOUVgdxeRyE8ePmT2ybpi9tJfy0hG6fhPJuCCS0PVLevguw4GivNcILILe5Sl5uJD5CI7rFxw3jv6YEiJzAIWPwBT0GAuTnulvbSK2RMi1X6zMpdwFOriFykt4SbqGbhm4fsFz4+jPyt9YwdpByiyr/6bOunUtsJKuLiY6aPLWHwQK1jep64SuP8jAzdP1B8lhWxL+GhJP6Fy/4Llx9GuFDG1W/ln5B3VA1xep64Sun3h0UvcK1je3zrt+S+6l1/wlH4GuDK6/UHpMCdE5gG5egXga3USLHYrKz9XZ9edyHGNxrCVZWd751WZMFovsOeCK0zNmkPrNv3tiYtflK6+jQxohBLjn9NLGN3avvnDxUvzqK0EQSB2Yo+gi/l5LIQw9sNT8SqXX4vU1P81fh0vNr1T6vpZH8/OFS5W/VHotX1/z0/x1uNT8SqXva3k0P1+4VPlLpdfy9TU/zV+HS82vVPq+lkfz84VLlb9Uei1fX/PT/HW41PxKpe9reTQ/X7hU+Uul1/K9RX6DBtZU33bL7LsqKspqIpb5M2XVVYu+8q8+1RjF+X29muEjO5NBee53zNpxwJ+C3HrzzGXVVQMqe8xSBnaErr9HohIS3Txcf7EsXRrXXyy9xnN5uH6N11dhNw/XXyx/l8b1F0uv8Vwerl/j9VXYzcP1F8vfpXH9xdJrPJeH69d4fRV283D9xfJ3aVx/sfQaz+Xh+jVeX4XdPFx/sfxdGtdfLL3Gc3m4fo3XV2E3D9dfLH+XxvUXS6/xXB6uX+P1VdjNw/UXy9+lcf3F0ms8l4fr13h9FXbzcP3F8ndpXH+x9BrP5eH6NV5fhd08XH+x/F0a118svcZzebh+jeeEOabi2Mod7JmxF8ZgvR3skW2vB3wk+trvP/pzgK/TL66qqnLIorkzl1aWV4Y8xUPo+oVGQxfH9Ws8Cbs4rr/YdMET6PKgX/8RT3CEpicouMLHR9/X+KXyE7kF+uTXtig1f19+Pv6+dJ+8ordAnzw+fj76UuXV/EvlJ3oL1Py1vjpcav6+/Hz8fek+eUVvgT55fPx89KXKq/mXyk/0Fqj5a311uNT8ffn5+PvSffKK3gJ98vj4+ehLlVfzL5Wf6C1Q89f66nCp+fvy8/H3pfvkFb0F+uTx8fPRa3k5lroVYyqOrRTvrwdjMBXtD0oefkyF8ZUv/M5/xCD1n93oQTXVdYvmzVhSjiGoG1/IXxYMnwj5j9/uCrTf8cZv8WAancVO4jPV8pCBWUQhMRGMfKRzackj7U9kk/w1BJmRjbAYF0lnOVnZrV700wmk34fv6kC/S2E1tHEmyaRaX6a/tY61f3rZu2Wjy13C1rrW8mLjnqCvPEmblX9kQZ+9svpv64u056z9RzUm6/+kXxIYt4jbdtjnpP3RmtIP0q//saUyrlgnuMJHeEve5EO/OB++q4OVIqKIa2s5iqSELq3kryG5MU7k1ZBcJUf6fU5whY/wJsQQKr9o3vQlWM2NXZ3GMRfHXj7ehdKLGpgVIn7yyScHHD59EbN93Q+6OM2t549t3bV/S1dnN+/KiZeai+jzCy0hnbVIYX4KvwufTZfh02hCOhq2C//E0KFsxfI3XHr4Ufl75e2BlUnqLT+Fn+mflX9W/7P2n/V/Wf/P50n2/Osfz3/ch5tfMHfGwrrawePjQ4T8C5PrB37gkUceaY/HFx8qacDHbP72b58e0nyl+UVcvbbYzfbc+YtNW3bu39RxtZMjLONwQCC+1+jGr822uwv+MsQBGqcGLDbS+dUDPh++Q2q9zFd2TsLLfJG/gQiKLIR0Xvm0PIbK+VHyZfpn5Z/V/6z9Z/1fkf2r05Uar+5vVf+q0ZPhrP/Pnn839vO/Il9ethCrpEMHDxzl1l/0Ga/VVdWt+PznP9zmxvfWb1teb6kU/te//T0I1/kqxlIz3aSLl640Y6Zvw+UrV68yXh52hGlOD4g0jqbX+L70JL/4R8NRYxD54h1EPKS5+cNaPk2h9dHpml7j+9KT/DL9pUytbaQzyMrf2kOsQxjVFRuyGL351fVT0+r6rNM1vcb3pSf5RTrZtKz84xbJyj96JkSWyeq/bknFhXX71FS6Pet0Ta/xfelJflGZ2rS3t/3X4AONBXOmL9XLuJgf25fLlS//2hc/16R16G34rdbdRD7f+Jt/nNx9tf15Pei7cuVq2+u7Dq6/eOnS5Xj3ARY6QtlbBX3o5pgeLCKHx/WYcaXkgewS/JDWE74vwwQ/Jw8ayJfe5/w9+iTk8eD3uXyOTWifPufv0SfTPzK5Mb/HXn1ePshUyoD59zl/jz6SNyEddxpn7d/awRgkYSDEShwRxB8YUAV9xZlIT0QohiroQ/eWZ4JfVv5Z/UelCL84SFQQp85f4/rPo1cWzJq2LPGBBgZ7+coB7/nq7376MEUo1aHK953jTF++u+sXGGnHlnd5Tt+uA4dfO93c2tJ3ub0FTr0s0EQP8xayvKFIMv2jQQYLhrVfbMKw+AnpdLqN7b+/Pv186f1Xcyu5Tz9feqZ//7aAr3x96f1be3//lukf9fks6+vU/9fX1Q6bM33yYvfoFZt9/rXufNn7+2JmT6punw74yJR7+s5eaf4xalfsQw7Upa6jJ97cvf/wsYOSeQYzC2QWyCyQWSCzQGaBzALvRgvMmDx+2oSxI2djIMYdqY7LvzC8qu5jpe7Zcxgab58P+MiVX+8eOX3hexjkfUJneK7t4qkd+w9tsfv69K7b3u7K7S2+lkaHffx86ZqfDvvofem95afxfWFf/r70682/VHm0vD5+vnTNT4d99L703vLT+L6wL39f+vXmX6o8Wl4fP1+65qfDPnpfem/5aXxf2Je/L/168y9VHi2vj58vXfPTYR+9L723/DS+L+zL35d+vfmXKo+W18fPl6756XBEX11VWTl3xtSFQ4cMHK2xMCj750n1gz5Xyte4mqeEr8mAj8y7u7vLvvmdv/9v8H4N/lg+V69evbT74LHXTzefO2vPWFGDW5HuHQejAreq6QHvO05hpVCmv32Rox3osvLP2r+0CVsj3tm/omtW/205Z+3/3dj+6+uGDp89bfyiyspK56o0rCDn81xU/7o54zifl0bSp11CbCDWp5wDZl//68c/kOvM/T2GgOHdu0yicqfPtjbuO3J816VL7eYrXp0/zqPBiSk4yi/YVSl+Qjqdruk1vk7X9D58TZ9c5KdcNOn1kU/Lr+Xz6aPpffiaf6SrVKNM/8gm175+6vLT5eMrT03vw9f8I12z8re2yep/VCey+q/bl24/vvam6TW+Tu9r/ppfMizPuqz9W9v03P6rqisrZ04ePwcDvol6Egzt5kwO16W91Rs0kmWTHiMllZ7aR7Hf/LsnJnZdufIEpv3u0iw7O7vaG0807T587M0j6lg8oPZsQI0vR+oFx+jprPo8rPPXGWh5fA02yS/Tv6cHiLaXtrcuj74O6/w1fy1PVv725Y12oNMPrKQ9s/qf1X8ZVPjri25vuj32dThZX+M5aHmy9v/ubf+Tx4+cNHHsqNnl5WUD4rUEoXx+dVlV1afeyt24CV6eiOsy4KMML774YsXmXQ1/2p3P/7vk6DaXu4Qz+/YdPrm9ufVcq+3kSBXv8KPOT8SOp/d2wcCPL52Nza8L8pRhBo+QLjkhH8dPym/Ievjx0fec7tcnnrUfP55fpn9W/ln9z9p/1v9l/T+fJNnzTy9Ix5+XfP7X1Q6tnTl5zLyamqrYFWm0H1c5893d//PWOVP+eMWKFR2Mu9aOEl5X943vPH4PRkzfwtEtc9MybrtwqanhWNO+s83nmhMDPF3D1CtW4qYMZCBFYPJSI5w8+HUjjpAucbNGSG3N5MNP5A/5JI78xU9IJ3kTWhcfwEbSB8WU6R9vYVn5c9oDNrEPoET9QqVizbGp8GT1P3pK0TZZ+w/7IJgj6/9Ufx21Htv/+upLov0pfsn0qA7S/ralui1W/Db/xAgr6/9u2P5v+LChdZPH1c8cMih+Y4YtZ9as/A6U55e++oVHX5G46wGDmnQ9sory4Gzfpl0NX4bS/xkDv8FRSuS7cOnKaSzz7j/d3HJaHliq+psHmcSRUvyilB5Q6QYb5Zbu0/S6wSXyc2Qgx0R6MLiUAZ5PHs/wL9PfsXFf2Js8XJeVv3ogqReORP2G8SSOdhQ/IZ22Z1b/I5tYC8V/s/Yf1SFaJlGfnLjU9F72t+ThOl1fs/4f1pGXRnivdXn0x/o/um5Y/cTxI2cMqqmqd+uS+DHmOY8xz39dMmfKX1yvWT3Jm1D6Yjfuuvn/9//7hwlXOjr+Env7Pl4o00uXr7ScOt165MTpM8fbr3Z2SCUjvvhDJXSEqjEqmKRXQnjxPfkpdt6gLz9fekIhRaCCCXQtoBc/0z96KafxtMG0QT1hTe4zr05PFKhiqIIJdC2eF18LoAk0Q09Yk/vY6/SEQoqhCibQtXhefC2AJtAMPWFN7mOv0xMKKYYqmEDX4nnxtQCaQDP0hDW5j71OTyikGKpgAl2L58XXAmgCzdAT1uQ+9jo9oZBiqIIJdC2eF18LoAk0Q09Yk/vY6/SEQoqhCibQtXhe/ECAygHlFWPrR4wbPaJ2Uk111TDNJwzn809VVVT82z/8vc8cDeOus4civ+3um995/AFsaP0veGDeXVCY7lxn6/kLp06eaT3adKb1ze7uTpZH3PlKyJeuX+HC1xm+1sBpehsb/aoamAe/bvAgpOvGK2Me0xqEqU7RJ/LT6ZqJlk/j+9Iz/WFR5xU29Gflb6qarj+6/qn6ltX/rP1n/V/W/78Tn3/5fHl+VH3tyDEjaifUDh40Gg/5ct0dhuF8bhU+UPuTr3zh0V+HcW+Th130DeP+/Fvfv7sz1/nHGBo91JNQ/LK3te3Cyea2izjZ5dwZzAJesfjxNSf1/AkHX+yE0vCjh72kx6XQD7B4KseDtnEXy1/zS9CrB6wMFgnpEvhqwJbpTxtF09g+e2XlL4PdrP6bBqZ+dHtVyd72qOuX5peon1J5CeGy9m9flrP+L+v/2R4S7eUaP/8we1c1vHboiLohA+trhwwak/rFLQULXf658lz5n/7Rlz67Kox6mz031IBPbPHn3/nekq6urv+EUfOH077oFTyBV9o72s5duHjm3LkLp1vOX2jFLR6XurChVfWX3ilc4ddfoE8/X3p/0bOQnD79fOmF+PaXeJ9+vvT+omchOX36+dIL8e0v8T79fOn9Rc9Ccvr086UX4ttf4n36+dL7i56F5PTp50svxJfxZfgYbmBVZc3QwYNqa4cOqsfHFyOqBlQM6YmGaebw5O7c02VlZX/2R1/43CYf/vVOvyEHfGKEv/j2d6d0duc/g2+XP4fR20yJ90EUdOeV9vYL7Vc6zl+80n7h4qUr5692dmK7YFdnZ0dXB346EO6gp7OTh4KxatAl58SiuGLSDZMefuL8OSTFJk782vzFT2gd44WmB7YFk4RW+GlEzV/j9zZd89fhOP9M/6z8pc6zpog/q//SXnX70+3JF463tyS25q/xe5uezCEeE+eftf+s/UubZz0R/7Vs/5iVy1eUl1VUlpdXlPMP/yoq8uWV5RVVA2uqB2OQN2hAVcXgqgEDBqG2Fl6mjVdsCr8Ph6x8rzzf/Q9f/uJjDTr5RgmzBfYL981vffd2XND2WQj7SQzRhvcLoTMhMwtkFsgskFkgs0BmgXecBXABGK6Gzf0AF6J9/ytfemxdf1Cw3wz4xJhPPvnkgMNnLi/Hfpj7EXc/JsduwwxdhaRnMLNAZoHMApkFMgtkFsgs0LcWyHdgJm8jeK7Eou/KySOqX33kkUfa+zaPa8ut3w34tDn+6sknB186feluLA/cn8t3L8N08Czs+xul8bJwZoHMApkFMgtkFsgskFmgGAtgP14TxhV7ct359RhXrKypr1n1rx955HwxtDcqTr8f8KUZ9i+++91hHe3ls/Kd3bOxQ24WloKnYxl4GEbnQxDGQc/5IQgPYRhnpCTvtktjmsVlFsgskFkgs0BmgcwC/dcC+Xw7VgXbsBzbhpXBNuyiPB+EW7A0ewDhPd3l+d0VAzr3fPmxx1r6r6Lpkv9/3k5dRnu0CtsAAAAASUVORK5CYII=) 0 0 no-repeat;background-size: contain;z-index: 999;top: 2.77777778%;left: 50%;margin-left: -11.04166667%;}.ctrl-panel-fold.on{line-height: 30px!important;top: -10px!important;background: #1e2831;}.ctrl-panel-fold.on:hover{background: #28333d;}.ctrl-panel-fold.on .icon{-webkit-transform: rotate(180deg);transform: rotate(180deg);}.key-ctrl-lay-out .key-edit-del:hover{border: 1.5px solid #fff;}.key-ctrl-lay-out .key-edit-ui:hover{border: 2px solid #fff;}.key-ctrl-lay-out .key-edit-ui.active{border: 2px solid green;}.key-ctrl-lay-out .key-edit-ui.conflict{border: 2px solid #CF5046;}.key-ctrl-lay-out .key-edit-ui input{opacity: 0;height: 0;width: 0;padding: 0;margin: 0;border: 0;}.key-ctrl-lay-out .key-tips{white-space: nowrap;position: absolute;-webkit-transform: translate3d(0,-200%,0);transform: translate3d(0,-200%,0);background: #304051;color: #fff;padding: 10px;border-radius: 4px;}.key-ctrl-lay-out .key-edit-del{display: block;width: 50%;height: 50%;right: -22.22222222%;top: -44.44444444%;background-image: -webkit-gradient(linear,left top,left bottom,from(#28333d),color-stop(98%,#4d6275));background-image: linear-gradient( -180deg,#28333d,#4d6275 98%);border-radius: 100%;cursor: pointer;position: absolute;box-sizing: border-box;}.key-ctrl-lay-out .key-edit-del:before{-webkit-transform: rotate(-135deg);transform: rotate(-135deg);}.key-ctrl-lay-out .key-edit-del:after{-webkit-transform: rotate(-45deg);transform: rotate(-45deg);}.key-edit-del:before, .key-edit-del:after{position: absolute;content: "";width: 60%;left: 20%;height: 2px;background: #8b969f;top: 48%;-webkit-transform-origin: center;transform-origin: center;}.key-ctrl-lay-out .key-edit-ui{border: 2px solid #4C5865;}.key-ctrl-lay-out .key-edit-input{position: absolute;top: 0;}.redfinger-msg-box{position: fixed;top: 0;bottom: 0;left: 0;right: 0;background: rgba(0,0,0,.7);z-index: 998;display: -webkit-box;display: -webkit-flex;display: flex;-webkit-box-pack: center;-webkit-justify-content: center;justify-content: center;-webkit-box-align: center;-webkit-align-items: center;align-items: center;}.redfinger-fadein{-webkit-animation: animate_in .45s;animation: animate_in .45s;}.redfinger-msg-box .confirm{max-width: 382px;min-width: 320px;box-shadow: 0 0 12px rgb(0 0 0 / 50%);}.redfinger-msg-box .confirm-con{padding: 24px 32px;border-radius: 4px;background: #28333d;color: #8b969f;}.redfinger-msg-box .confirm-msg{min-height: 48px;padding-top: 8px;padding-bottom: 16px;font-size: 12px;}.redfinger-msg-box .confirm-btns{display: -webkit-box;display: -webkit-flex;display: flex;-webkit-box-pack: center;-webkit-justify-content: center;justify-content: center;}.redfinger-msg-box .confirm-btns.double{-webkit-box-pack: justify;-webkit-justify-content: space-between;justify-content: space-between;}.redfinger-msg-box .g-btn{vertical-align: middle;text-align: center;padding: 0 32px;height: 36px;line-height: 34px; display: inline-block;border-radius: 20px;box-sizing: border-box;white-space: nowrap;-webkit-user-select: none;-ms-user-select: none;user-select: none;cursor: pointer;}.redfinger-msg-box .btn-cancel{background: transparent;-webkit-box-flex: 1;-webkit-flex: 1;flex: 1;margin: 0;padding: 0;font-size: 14px;display: block;white-space: nowrap;border: 1px solid #61686f;color: #8b969f;margin-right: 16px;}.redfinger-msg-box .btn-cancel:hover{border-color: #fff;color: #fff;}.redfinger-msg-box .btn-confirm{-webkit-box-flex: 1;-webkit-flex: 1;flex: 1;margin: 0;padding: 0;font-size: 14px;display: block;white-space: nowrap;border: 1px solid #03c47e;background: #03c47e;color: #fff;font-weight: 700;margin-left: 16px;}.redfinger-msg-box .btn-confirm:hover{-webkit-transition: background-image 3s ease-in-out 1s;transition: background-image 3s ease-in-out 1s;background-image: radial-gradient(ellipse farthest-corner at bottom,#aafced 0,#03c47e 65%);}.redfinger-msg-toast{background-color: #304051;min-width: 274px;max-width: 90%;position: fixed;left: 50%;-webkit-backface-visibility: hidden;backface-visibility: hidden;-webkit-font-smoothing: antialiased;-webkit-transform: translate3d(-50%, -50%, 0px);transform: translate3d(-50%, -50%, 0px);color: #fff;padding-top: 20px;border-radius: 4px;box-sizing: border-box;-webkit-flex-wrap: wrap;flex-wrap: wrap;z-index: 999;top: 50%;}.redfinger-msg-toast p{-webkit-box-flex: 1;-webkit-flex-grow: 1;flex-grow: 1;text-align: center;padding: 0 32px 20px;display: -webkit-box;display: -webkit-flex;display: flex;-webkit-box-pack: center;-webkit-justify-content: center;justify-content: center;-webkit-box-align: center;-webkit-align-items: center;align-items: center;margin: 0;}.redfinger-msg-toast p .icon {-webkit-flex-shrink: 0;flex-shrink: 0;display: inline-block;vertical-align: middle;margin-right: 4px;}.redfinger-msg-toast .icon {margin: 0 6px;}.redfinger-msg-toast .icon-fail, .redfinger-msg-toast .icon-suc{width: 32px;height: 32px;}.redfinger-msg-toast .icon-suc{background-image: url(data:image/png;base64,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);}.redfinger-msg-toast .icon-fail{background-image: url(data:image/png;base64,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);}.redfinger-msg-toast p span{min-width: 0;display: block;text-align: justify;font-size: 12px;}.redfinger-msg-toast .icon{background-position: 50%;background-repeat: no-repeat;background-size: 100%;display: inline-block;vertical-align: middle;}';return{loadCss:function(){let t=document.createElement("style");t.type="text/css";try{t.appendChild(document.createTextNode(e));}catch(r){t.styleSheet.cssText=e;}document.getElementsByTagName("head")[0].appendChild(t);}};}function RedfingerSaasApi(e,t,r,n){let i=e,o=n,a=t,s=r;function d(e,t,r){let n=null;window.ActiveXObject?n=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(n=new XMLHttpRequest()),null!==n?(n.onreadystatechange=function(){4===this.readyState&&(200===this.status?(MLOG.info(MLOG.i("paas keys request success ret:"+this.responseText)),r(this.responseText)):(MLOG.warn(MLOG.w("paas keys request failed url: "+e)),r(null)));},n.open("POST",e,!0),n.setRequestHeader("content-type","application/json"),n.timeout=1e4,n.ontimeout=function(){MLOG.debug(MLOG.d("paas keys request timeout url:"+e));},n.send(JSON.stringify(t))):MLOG.warn(MLOG.w("XHR is not support"));}return{keysInfo:function(e){let t=new Date().getTime(),r=i+a+"?serverToken="+o+"&auth_ver=3&nonce="+t,n=BgsSdk._getServerTokenKey(o),s=BgsSdk._get8RandStr();d(r,{p:BgsSdk._XOR(n,s+BgsSdk._Base64.encode(JSON.stringify({client:"web"})))},function(t){if(MLOG.debug(MLOG.d("get keysInfo ret:"+t)),null!==t){if("string"==typeof t&&(t=JSON.parse(t)),0===t.code){let r={defaultKeyConf:{showJoystick:!0,opacity:.8,kes:[]},customKeyConf:{showJoystick:!0,opacity:.8,kes:[]}};for(let e=0;e<t.data.length;e++)1===t.data[e].keyType?(r.defaultKeyConf.opacity=t.data[e].opacity,r.defaultKeyConf.showJoystick=0!==t.data[e].showJoystick,r.defaultKeyConf.keys=t.data[e].keys.map(function(e){return e.edit=0!==e.edit,e;})):2===t.data[e].keyType&&(r.customKeyConf.opacity=t.data[e].opacity,r.customKeyConf.showJoystick=0!==t.data[e].showJoystick,r.customKeyConf.keys=t.data[e].keys.map(function(e){return e.edit=0!==e.edit,e;}));e(r);}else e({customKeyConf:{keys:[],showJoystick:!1,opacity:1},defaultKeyConf:{keys:[],showJoystick:!1,opacity:1}});}else e({customKeyConf:{keys:[],showJoystick:!1,opacity:1},defaultKeyConf:{keys:[],showJoystick:!1,opacity:1}});});},keysSave:function(e,t){let r=new Date().getTime(),n=i+s+"?serverToken="+o+"&auth_ver=3&nonce="+r,a={client:"web",showJoystick:e.showJoystick,opacity:e.opacity,keys:e.keys},c=BgsSdk._getServerTokenKey(o),f=BgsSdk._get8RandStr();d(n,{p:BgsSdk._XOR(c,f+BgsSdk._Base64.encode(JSON.stringify(a)))},function(e){MLOG.debug(MLOG.d("get keysInfo ret:"+e)),"string"==typeof e&&(e=JSON.parse(e)),t(e);});}};}function BgsReport(){let e=!1,t="",r="";function n(){return{statType:"",merchantId:"",cuid:"",uuid:"",versionName:BgsSdk.version,versionCode:BgsSdk.versionCode,reportTime:"",reportSrc:"H5_SDK",reportType:"",sceneType:BgsSdk.sceneType,data:"",osInfo:{version:BgsSdk.version,isPc:redfinger.isPc(),ua:navigator.userAgent,sdkConfig:redfinger.config}};}function i(e,t,r){return function(){if(t)try{t.apply(this,arguments);}catch(e){}if(e.apply(this,arguments),r)try{r.apply(this,arguments);}catch(e){}};}let o=function(e){let n={statType:e.statType,merchantId:e.merchantId,cuid:e.cuid,uuid:e.uuid,versionName:e.versionName,versionCode:e.versionCode,reportTime:e.reportTime,reportSrc:e.reportSrc,reportType:e.reportType,sceneType:e.sceneType,data:JSON.stringify(e.data),osInfo:JSON.stringify(e.osInfo)},i=new Date().getTime(),o=t+r+"?serverToken="+BgsSdk.local.userParams.serverToken+"&auth_ver=3&nonce="+i;MLOG.debug(MLOG.d("BgsSdk report "+JSON.stringify(n)));let a=BgsSdk._getServerTokenKey(BgsSdk.local.userParams.serverToken),s=BgsSdk._get8RandStr(),d={p:BgsSdk._XOR(a,s+BgsSdk._Base64.encode(JSON.stringify(n)))},c=null;if(window.ActiveXObject?c=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(c=new XMLHttpRequest()),null===c)return void MLOG.warn(MLOG.w("XHR is not support"));c.open("POST",o,!0);let f=new FormData();f.append("p",d.p),c.send(f);};return{init:function(a,s){e||(t=a,r=s,e=!0,BgsSdk.onConnectFail=new i(BgsSdk.onConnectFail,function(e,t){let r=n();try{r.statType="ERROR_INFO",r.merchantId=BgsSdk._getMerchantId(),r.uuid=BgsSdk.local.userParams.uuid,r.reportTime=new Date().getTime(),r.reportType="CONNECT_ERROR",r.data={sessionId:"",clientToken:BgsSdk.local.clientToken,serverToken:BgsSdk.local.userParams.serverToken,errorCode:e,errorInfo:t,instanceCode:"",appName:"",playInfo:{}};}catch(e){return void MLOG.debug(MLOG.d("report msg error"));}o(r);},null),redfinger.onErrorMessage=new i(redfinger.onErrorMessage,function(e){let t=n();try{t.statType="ERROR_INFO",t.merchantId=BgsSdk._getMerchantId(),t.uuid=BgsSdk.local.userParams.uuid,t.reportTime=new Date().getTime(),t.reportType="PLAY_ERROR",t.data={sessionId:BgsSdk.local.deviceInfo.resultInfo.sessionId,clientToken:BgsSdk.local.clientToken,serverToken:BgsSdk.local.userParams.serverToken,errorCode:e,instanceCode:BgsSdk.local.deviceInfo.padCode,appName:BgsSdk.local.deviceInfo.resultInfo.packname,playInfo:{deviceInfo:BgsSdk.local.deviceInfo,videoInfo:redfinger.videoinfo,phoneInfo:redfinger.phone}};}catch(e){return void MLOG.debug(MLOG.d("report msg error"));}o(t);},null),redfinger.onImgDownloadError=new i(redfinger.onImgDownloadError,function(e){let t=n();try{t.statType="ERROR_INFO",t.merchantId=BgsSdk._getMerchantId(),t.uuid=BgsSdk.local.userParams.uuid,t.reportTime=new Date().getTime(),t.reportType="IMG_DOWNLOAD_ERROR",t.data={sessionId:BgsSdk.local.deviceInfo.resultInfo.sessionId,clientToken:BgsSdk.local.clientToken,serverToken:BgsSdk.local.userParams.serverToken,errorCode:e.errorCode,instanceCode:BgsSdk.local.deviceInfo.padCode,appName:BgsSdk.local.deviceInfo.resultInfo.packname,playInfo:{deviceInfo:BgsSdk.local.deviceInfo,videoInfo:redfinger.videoinfo,phoneInfo:redfinger.phone},imgUrl:e.imgUrl};}catch(e){return void MLOG.debug(MLOG.d("report msg error"));}o(t);},null),redfinger.onReconnectFail=new i(redfinger.onReconnectFail,function(){let e=n();try{e.statType="STAT_INFO",e.merchantId=BgsSdk._getMerchantId(),e.uuid=BgsSdk.local.userParams.uuid,e.reportTime=new Date().getTime(),e.reportType="RECONNECT",e.data={sessionId:BgsSdk.local.deviceInfo.resultInfo.sessionId,clientToken:BgsSdk.local.clientToken,serverToken:BgsSdk.local.userParams.serverToken,instanceCode:BgsSdk.local.deviceInfo.padCode,appName:BgsSdk.local.deviceInfo.resultInfo.packname,playInfo:{deviceInfo:BgsSdk.local.deviceInfo,videoInfo:redfinger.videoinfo,phoneInfo:redfinger.phone},reconnectionCount:redfinger.reconnectCount,reconnectionStartTime:redfinger.reconnectionStartTime,reconnectionFailTime:new Date().getTime(),reconnectionSuccessTime:"",reconnectionResult:0};}catch(e){return void MLOG.debug(MLOG.d("report msg error"));}o(e);},null),redfinger.onReconnectSuccess=new i(redfinger.onReconnectSuccess,function(){let e=n();try{e.statType="STAT_INFO",e.merchantId=BgsSdk._getMerchantId(),e.uuid=BgsSdk.local.userParams.uuid,e.reportTime=new Date().getTime(),e.reportType="RECONNECT",e.data={sessionId:BgsSdk.local.deviceInfo.resultInfo.sessionId,clientToken:BgsSdk.local.clientToken,serverToken:BgsSdk.local.userParams.serverToken,instanceCode:BgsSdk.local.deviceInfo.padCode,appName:BgsSdk.local.deviceInfo.resultInfo.packname,playInfo:{deviceInfo:BgsSdk.local.deviceInfo,videoInfo:redfinger.videoinfo,phoneInfo:redfinger.phone},reconnectionCount:redfinger.reconnectCount,reconnectionStartTime:redfinger.reconnectionStartTime,reconnectionFailTime:"",reconnectionSuccessTime:new Date().getTime(),reconnectionResult:1};}catch(e){return console.log(e),void MLOG.debug(MLOG.d("report msg error"));}o(e);},null),BgsSdk.onApiRetrySuccess=new i(BgsSdk.onApiRetrySuccess,function(){let e=n();try{e.statType="STAT_INFO",e.merchantId=BgsSdk._getMerchantId(),e.uuid=BgsSdk.local.userParams.uuid,e.reportTime=new Date().getTime(),e.reportType="APAAS_BIND_DEVICES_RECONNECT",e.data={sessionId:"",clientToken:BgsSdk.local.clientToken,serverToken:BgsSdk.local.userParams.serverToken,reconnectionCount:BgsSdk.local.apiRetryCnt,reconnectionStartTime:BgsSdk.local.apiRetryStartTime,reconnectionFailTime:"",reconnectionSuccessTime:new Date().getTime(),reconnectionResult:1};}catch(e){return console.log(e),void MLOG.debug(MLOG.d("report msg error"));}o(e);},null));},startPlayReport:function(e){let t=n();try{t.statType="STAT_INFO",t.merchantId=BgsSdk._getMerchantId(),t.uuid=BgsSdk.local.userParams.uuid,t.reportTime=new Date().getTime(),t.reportType="START_PLAY",t.data=e;}catch(e){return void MLOG.debug(MLOG.d("report msg error"));}o(t);},endPlayReport:function(e){let t=n();try{t.statType="STAT_INFO",t.merchantId=BgsSdk._getMerchantId(),t.uuid=BgsSdk.local.userParams.uuid,t.reportTime=new Date().getTime(),t.reportType="END_PLAY",t.data=e;}catch(e){return void MLOG.debug(MLOG.d("report msg error"));}o(t);}};}function MultiProxy(){let e={serverId:"",ws:null,stopped:!1,connected:!1,shaked:!1,reconnecting:!1,reconnectCnt:0,netDelay:0,lastDelayTime:0,delayTimer:0,config:{serverUrl:null}};function t(){e.stopped=!1,e.ws=new WebSocket(e.config.serverUrl);let t={error:function(t){e.reconnecting=!1,e.stopped||(MLOG.error(MLOG.e("Error connecting to the WebSockets server... "+e.config.serverUrl)),s(MultiSdk._ERR.MULTI_SERVER_OPEN_ERROR,"multi server error"));},open:function(){e.connected=!0,e.reconnecting=!1,e.reconnectCnt=0,i(),setTimeout(r,MultiSdk.local.config.reconnectCheckTime);},message:function(t){!function(t){"string"==typeof t&&(t=JSON.parse(t));if(t.code+""!="0")return MLOG.warn(MLOG.w("multiServer error code: "+t.code+" msg: "+t.msg+"data:"+JSON.stringify(t.data))),void s(t.code,t.msg);switch(t.opType){case MultiSdk.CONSTANT.MSG.OP_TYPE.SHAKE:e.serverId=t.data.serverId,e.shaked=!0,o(e.serverId),MLOG.info(MLOG.i("shake success serverId: "+e.serverId)),d();break;case MultiSdk.CONSTANT.MSG.OP_TYPE.DELAY:{let r=t.data.time;e.lastDelayTime=new Date().getTime(),e.netDelay=e.lastDelayTime-r,MLOG.debug(MLOG.d("netDelay serverId: "+e.serverId+" delay: "+e.netDelay));break;}case MultiSdk.CONSTANT.MSG.OP_TYPE.BUSINISS:a(t);}}(t.data);},close:function(){null!==e.config.serverUrl&&e.connected&&(e.connected=!1,e.reconnecting=!1,e.stopped||MLOG.warn(MLOG.w("multiProxy onclose:"+e.config.serverUrl+" serverId"+e.serverId)));}};for(let r in t)e.ws.addEventListener(r,t[r]);}function r(){e.stopped||(1===e.ws.readyState&&e.connected||function(){if(e.reconnecting)return;e.reconnecting=!0,e.reconnectCnt++,MLOG.info(MLOG.i("MultiProxy doReconnect cnt:"+e.reconnectCnt+" serverId"+e.serverId)),t();}(),e.reconnectCnt>=MultiSdk.local.config.reconnectCntLimit?s(MultiSdk._ERR.MULTI_SERVER_SERVER_CLOSE,"multi server close"):setTimeout(r,MultiSdk.local.config.reconnectCheckTime));}function n(t){null!==e.ws&&1===e.ws.readyState&&e.connected?("string"!=typeof t&&(t=JSON.stringify(t)),e.ws.send(t)):MLOG.warn(MLOG.w("MultiProxy ws invalid serverUrl: "+e.config.serverUrl));}function i(){}function o(e){}function a(e){}function s(e,t,r){}function d(){n(MultiSdk.fillDelayMsg(e.serverId)),e.delayTimer=setTimeout(d,1e3);}function c(){e.ws.addEventListener("message",function(){}),e.ws.addEventListener("error",function(){}),e.ws.close();}return{local:e,init:function(t){let r=!1;return t.serverUrl?(e.config.serverUrl=t.serverUrl,t.callBacks&&function(e){e.onConnected&&(i=e.onConnected);e.onShaked&&(o=e.onShaked);e.onMsg&&(a=e.onMsg);e.onError&&(s=e.onError);}(t.callBacks),r=!0,r):r;},start:t,sendMsg:n,getServerId:function(){return e.serverId;},stop:function(){e.delayTimer&&clearTimeout(e.delayTimer),n(MultiSdk.fillStopMsg(e.serverId)),setTimeout(c,1e3),e.stopped=!0;}};}!function(){var e=CryptoJS.lib.WordArray;CryptoJS.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp(),e=[];for(var i=0;i<r;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<r;a++)e.push(n.charAt(o>>>6*(3-a)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("");},parse:function(t){var r=t.length,n=this._map;!(a=n.charAt(64))||-1!=(a=t.indexOf(a))&&(r=a);for(var i,o,a=[],s=0,d=0;d<r;d++)d%4&&(i=n.indexOf(t.charAt(d-1))<<d%4*2,o=n.indexOf(t.charAt(d))>>>6-d%4*2,a[s>>>2]|=(i|o)<<24-s%4*8,s++);return e.create(a,s);},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};}(),function(e){function t(e,t,r,n,i,o,a){return((e=e+(t&r|~t&n)+i+a)<<o|e>>>32-o)+t;}function r(e,t,r,n,i,o,a){return((e=e+(t&n|r&~n)+i+a)<<o|e>>>32-o)+t;}function n(e,t,r,n,i,o,a){return((e=e+(t^r^n)+i+a)<<o|e>>>32-o)+t;}function i(e,t,r,n,i,o,a){return((e=e+(r^(t|~n))+i+a)<<o|e>>>32-o)+t;}for(var o=CryptoJS,a=(d=o.lib).WordArray,s=d.Hasher,d=o.algo,c=[],f=0;f<64;f++)c[f]=4294967296*e.abs(e.sin(f+1))|0;d=d.MD5=s.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878]);},_doProcessBlock:function(e,o){for(var a=0;a<16;a++){var s=e[d=o+a];e[d]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8);}a=this._hash.words;var d=e[o+0],f=(s=e[o+1],e[o+2]),u=e[o+3],l=e[o+4],p=e[o+5],h=e[o+6],g=e[o+7],y=e[o+8],b=e[o+9],m=e[o+10],v=e[o+11],S=e[o+12],k=e[o+13],C=e[o+14],T=e[o+15],P=t(P=a[0],O=a[1],w=a[2],_=a[3],d,7,c[0]),_=t(_,P,O,w,s,12,c[1]),w=t(w,_,P,O,f,17,c[2]),O=t(O,w,_,P,u,22,c[3]);P=t(P,O,w,_,l,7,c[4]),_=t(_,P,O,w,p,12,c[5]),w=t(w,_,P,O,h,17,c[6]),O=t(O,w,_,P,g,22,c[7]),P=t(P,O,w,_,y,7,c[8]),_=t(_,P,O,w,b,12,c[9]),w=t(w,_,P,O,m,17,c[10]),O=t(O,w,_,P,v,22,c[11]),P=t(P,O,w,_,S,7,c[12]),_=t(_,P,O,w,k,12,c[13]),w=t(w,_,P,O,C,17,c[14]),P=r(P,O=t(O,w,_,P,T,22,c[15]),w,_,s,5,c[16]),_=r(_,P,O,w,h,9,c[17]),w=r(w,_,P,O,v,14,c[18]),O=r(O,w,_,P,d,20,c[19]),P=r(P,O,w,_,p,5,c[20]),_=r(_,P,O,w,m,9,c[21]),w=r(w,_,P,O,T,14,c[22]),O=r(O,w,_,P,l,20,c[23]),P=r(P,O,w,_,b,5,c[24]),_=r(_,P,O,w,C,9,c[25]),w=r(w,_,P,O,u,14,c[26]),O=r(O,w,_,P,y,20,c[27]),P=r(P,O,w,_,k,5,c[28]),_=r(_,P,O,w,f,9,c[29]),w=r(w,_,P,O,g,14,c[30]),P=n(P,O=r(O,w,_,P,S,20,c[31]),w,_,p,4,c[32]),_=n(_,P,O,w,y,11,c[33]),w=n(w,_,P,O,v,16,c[34]),O=n(O,w,_,P,C,23,c[35]),P=n(P,O,w,_,s,4,c[36]),_=n(_,P,O,w,l,11,c[37]),w=n(w,_,P,O,g,16,c[38]),O=n(O,w,_,P,m,23,c[39]),P=n(P,O,w,_,k,4,c[40]),_=n(_,P,O,w,d,11,c[41]),w=n(w,_,P,O,u,16,c[42]),O=n(O,w,_,P,h,23,c[43]),P=n(P,O,w,_,b,4,c[44]),_=n(_,P,O,w,S,11,c[45]),w=n(w,_,P,O,T,16,c[46]),P=i(P,O=n(O,w,_,P,f,23,c[47]),w,_,d,6,c[48]),_=i(_,P,O,w,g,10,c[49]),w=i(w,_,P,O,C,15,c[50]),O=i(O,w,_,P,p,21,c[51]),P=i(P,O,w,_,S,6,c[52]),_=i(_,P,O,w,u,10,c[53]),w=i(w,_,P,O,m,15,c[54]),O=i(O,w,_,P,s,21,c[55]),P=i(P,O,w,_,y,6,c[56]),_=i(_,P,O,w,T,10,c[57]),w=i(w,_,P,O,h,15,c[58]),O=i(O,w,_,P,k,21,c[59]),P=i(P,O,w,_,l,6,c[60]),_=i(_,P,O,w,v,10,c[61]),w=i(w,_,P,O,f,15,c[62]),O=i(O,w,_,P,b,21,c[63]);a[0]=a[0]+P|0,a[1]=a[1]+O|0,a[2]=a[2]+w|0,a[3]=a[3]+_|0;},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;r[i>>>5]|=128<<24-i%32;var o=e.floor(n/4294967296);for(r[15+(64+i>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(64+i>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(r.length+1),this._process(),r=(t=this._hash).words,n=0;n<4;n++)i=r[n],r[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t;},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e;}}),o.MD5=s._createHelper(d),o.HmacMD5=s._createHmacHelper(d);}(Math),function(){var e=CryptoJS,t=e.lib,r=t.Base,n=t.WordArray,i=(t=e.algo).EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e);},compute:function(e,t){for(var r=(s=this.cfg).hasher.create(),i=n.create(),o=i.words,a=s.keySize,s=s.iterations;o.length<a;){d&&r.update(d);var d=r.update(e).finalize(t);r.reset();for(var c=1;c<s;c++)d=r.finalize(d),r.reset();i.concat(d);}return i.sigBytes=4*a,i;}});e.EvpKDF=function(e,t,r){return i.create(r).compute(e,t);};}(),CryptoJS.lib.Cipher||function(){var e=(l=CryptoJS).lib,t=e.Base,r=e.WordArray,n=e.BufferedBlockAlgorithm,i=l.enc.Base64,o=l.algo.EvpKDF,a=e.Cipher=n.extend({cfg:t.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t);},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t);},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset();},reset:function(){n.reset.call(this),this._doReset();},process:function(e){return this._append(e),this._process();},finalize:function(e){return e&&this._append(e),this._doFinalize();},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,r,n){return("string"==typeof r?p:u).encrypt(e,t,r,n);},decrypt:function(t,r,n){return("string"==typeof r?p:u).decrypt(e,t,r,n);}};}});function s(e,t,r){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var i=0;i<r;i++)e[t+i]^=n[i];}e.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0);},blockSize:1});var d=l.mode={},c=(e.BlockCipherMode=t.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t);},createDecryptor:function(e,t){return this.Decryptor.create(e,t);},init:function(e,t){this._cipher=e,this._iv=t;}})).extend();c.Encryptor=c.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize;s.call(this,e,t,n),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n);}}),c.Decryptor=c.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=e.slice(t,t+n);r.decryptBlock(e,t),s.call(this,e,t,n),this._prevBlock=i;}}),d=d.CBC=c,c=(l.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,i=(n-=e.sigBytes%n)<<24|n<<16|n<<8|n,o=[],a=0;a<n;a+=4)o.push(i);n=r.create(o,n),e.concat(n);},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2];}},e.BlockCipher=a.extend({cfg:a.cfg.extend({mode:d,padding:c}),reset:function(){a.reset.call(this);var e,t=(r=this.cfg).iv,r=r.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode=e.call(r,this,t&&t.words);},_doProcessBlock:function(e,t){this._mode.processBlock(e,t);},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e;},blockSize:4});var f=e.CipherParams=t.extend({init:function(e){this.mixIn(e);},toString:function(e){return(e||this.formatter).stringify(this);}}),u=(d=(l.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?r.create([1398893684,1701076831]).concat(e).concat(t):t).toString(i);},parse:function(e){var t,n=(e=i.parse(e)).words;return 1398893684==n[0]&&1701076831==n[1]&&(t=r.create(n.slice(2,4)),n.splice(0,4),e.sigBytes-=16),f.create({ciphertext:e,salt:t});}},e.SerializableCipher=t.extend({cfg:t.extend({format:d}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n);return t=i.finalize(t),i=i.cfg,f.create({ciphertext:t,key:r,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:n.format});},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext);},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e;}})),l=(l.kdf={}).OpenSSL={execute:function(e,t,n,i){return i=i||r.random(8),e=o.create({keySize:t+n}).compute(e,i),n=r.create(e.words.slice(t),4*n),e.sigBytes=4*t,f.create({key:e,iv:n,salt:i});}},p=e.PasswordBasedCipher=u.extend({cfg:u.cfg.extend({kdf:l}),encrypt:function(e,t,r,n){return r=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize),n.iv=r.iv,(e=u.encrypt.call(this,e,t,r.key,n)).mixIn(r),e;},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),r=n.kdf.execute(r,e.keySize,e.ivSize,t.salt),n.iv=r.iv,u.decrypt.call(this,e,t,r.key,n);}});}(),function(){for(var e=CryptoJS,t=e.lib.BlockCipher,r=e.algo,n=[],i=[],o=[],a=[],s=[],d=[],c=[],f=[],u=[],l=[],p=[],h=0;h<256;h++)p[h]=h<128?h<<1:h<<1^283;var g=0,y=0;for(h=0;h<256;h++){var b=y^y<<1^y<<2^y<<3^y<<4;n[g]=b=b>>>8^255&b^99;var m=p[i[b]=g],v=p[m],S=p[v],k=257*p[b]^16843008*b;o[g]=k<<24|k>>>8,a[g]=k<<16|k>>>16,s[g]=k<<8|k>>>24,d[g]=k,c[b]=(k=16843009*S^65537*v^257*m^16843008*g)<<24|k>>>8,f[b]=k<<16|k>>>16,u[b]=k<<8|k>>>24,l[b]=k,g?(g=m^p[p[p[S^m]]],y^=p[p[y]]):g=y=1;}var C=[0,1,2,4,8,16,32,64,128,27,54];r=r.AES=t.extend({_doReset:function(){for(var e,t=(i=this._key).words,r=i.sigBytes/4,i=4*((this._nRounds=r+6)+1),o=this._keySchedule=[],a=0;a<i;a++)a<r?o[a]=t[a]:(e=o[a-1],a%r?6<r&&4==a%r&&(e=n[e>>>24]<<24|n[e>>>16&255]<<16|n[e>>>8&255]<<8|n[255&e]):(e=n[(e=e<<8|e>>>24)>>>24]<<24|n[e>>>16&255]<<16|n[e>>>8&255]<<8|n[255&e],e^=C[a/r|0]<<24),o[a]=o[a-r]^e);for(t=this._invKeySchedule=[],r=0;r<i;r++)a=i-r,e=r%4?o[a]:o[a-4],t[r]=r<4||a<=4?e:c[n[e>>>24]]^f[n[e>>>16&255]]^u[n[e>>>8&255]]^l[n[255&e]];},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,a,s,d,n);},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,c,f,u,l,i),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r;},_doCryptBlock:function(e,t,r,n,i,o,a,s){for(var d=this._nRounds,c=e[t]^r[0],f=e[t+1]^r[1],u=e[t+2]^r[2],l=e[t+3]^r[3],p=4,h=1;h<d;h++){var g=n[c>>>24]^i[f>>>16&255]^o[u>>>8&255]^a[255&l]^r[p++],y=n[f>>>24]^i[u>>>16&255]^o[l>>>8&255]^a[255&c]^r[p++],b=n[u>>>24]^i[l>>>16&255]^o[c>>>8&255]^a[255&f]^r[p++];l=n[l>>>24]^i[c>>>16&255]^o[f>>>8&255]^a[255&u]^r[p++],c=g,f=y,u=b;}g=(s[c>>>24]<<24|s[f>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^r[p++],y=(s[f>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&c])^r[p++],b=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[c>>>8&255]<<8|s[255&f])^r[p++],l=(s[l>>>24]<<24|s[c>>>16&255]<<16|s[f>>>8&255]<<8|s[255&u])^r[p++],e[t]=g,e[t+1]=y,e[t+2]=b,e[t+3]=l;},keySize:8});e.AES=t._createHelper(r);}(),window.redfingerCreateElement=function(e,t,r,n){let i=document.createElement(e);if(""!==t&&null!=t&&(i.id=t),null!==r&&r.length>0)for(let e=0;e<r.length;e++)i.classList.add(r[e]);if(null!==n&&n.length>0)for(let e=0;e<n.length;e++)"string"==typeof n[e]?i.innerText=n[e]:i.append(n[e]);return i;},window.redfingerMsgBox=function(e){let t=redfingerCreateElement;if(document.getElementById("redfinger-msg-box"))return;e.cancelText=void 0===e.cancelText?"取消":e.cancelText,e.confirmText=void 0===e.confirmText?"确定":e.confirmText;let r=t("div","redfinger-msg-box",["redfinger-msg-box","redfinger-fadein"],[t("div","",["confirm"],[t("div","",["confirm-con"],[t("div","",["confirm-msg"],[e.msg]),t("div","",["confirm-btns","double"],[t("a","redfinger-msg-cancel",["g-btn","btn-cancel"],[e.cancelText]),t("a","redfinger-msg-confirm",["g-btn","btn-confirm"],[e.confirmText])])])])]);document.body.append(r),document.getElementById("redfinger-msg-cancel").addEventListener("click",function(t){e.cancelCallback&&e.cancelCallback(),document.getElementById("redfinger-msg-box").remove();}),document.getElementById("redfinger-msg-confirm").addEventListener("click",function(t){e.confirmCallback&&e.confirmCallback(),document.getElementById("redfinger-msg-box").remove();});},window.redfingerToast=function(e){let t=redfingerCreateElement,r=t("div","redfinger-toast",["redfinger-msg-toast","redfinger-fadein"],[t("p","",[],[t("i","",["icon","success"===e.type?"icon-suc":"icon-fail"],[]),t("span","",[],[e.msg])])]);document.body.append(r),setTimeout(function(){let e=document.getElementById("redfinger-toast");e&&e.remove();},2e3);},window.redfingerSlidBar=function(e){let t=e,r=0,n=0,i=null;function o(e){n=100*e;let t=i.getElementsByClassName("progress-ing")[0],r=i.getElementsByClassName("progress-tag")[0],o=i.getElementsByClassName("progress-drag")[0];t.style.height=n+"%",r.style.bottom=n+"%",o.style.bottom=n+"%",r.innerText=Math.ceil(100*e)+"%";}let a={setValue:o};return function(){if(i=document.getElementById(t.eleId),!i)return void MLOG.warn(MLOG.w("redfingerSlidBar init error because ele not fond"));let n=i.getElementsByClassName("progress")[0];r=n.offsetHeight,o(e.defaultValue),function(){let t=i.getElementsByClassName("progress-drag")[0];t.addEventListener("mousedown",function(n){let i=r-t.offsetTop-10,a=(n||window.event).clientY;function s(t){let n=(t||window.event).clientY-a,s=i-n;s<0&&(s=0),s>r&&(s=r);let d=(s/r).toFixed(2);o(d),e.change(d);}window.addEventListener("mousemove",s,!1),window.addEventListener("mouseup",function(){window.removeEventListener("mousemove",s);},!1);},!1);}();}(),a;},window.redfingerV2={},redfingerV2.local=null,redfingerV2.resetLocal=function(){redfingerV2.local={isInit:!1,userParams:null};},redfingerV2.init=function(e){if(redfingerV2.resetLocal(),null==e)return MLOG.error(MLOG.e("params invalid")),!1;if(e.logLevel&&MLOG&&MLOG.setLevel(e.logLevel),void 0!==e.callbacks)for(let t in e.callbacks)redfingerV2.registerCallback(t,e.callbacks[t]);return redfinger.onOpen=function(e,t){102===e&&t?(redfinger.videoinfo.isWebRtc&&redfinger.setStreamConfig(redfinger.config.devWidth,redfinger.config.devHeight,redfinger.config.bitrate,redfinger.config.minFPS),redfinger.trigCallback(redfingerV2.onConnectSuccess,[])):redfinger.trigCallback(redfingerV2.onConnectFail,[e]);},void 0===e.deviceInfo||null===e.deviceInfo?(MLOG.error(MLOG.e("params.deviceInfo invalid")),redfinger.trigCallback(redfingerV2.onInit,[20101,"params.deviceInfo invalid"]),!1):void 0===e.viewId||null===e.viewId?(MLOG.error(MLOG.e("params.viewId invalid")),redfinger.trigCallback(redfingerV2.onInit,[20103,"params.viewId invalid"]),!1):void 0===e.uuid||null===e.uuid?(MLOG.error(MLOG.e("params.uuid invalid")),redfinger.trigCallback(redfingerV2.onInit,[20102,"params.uuid invalid"]),!1):!!redfingerV2.setConfig(e)&&(redfingerV2.local.isInit=!0,redfingerV2.local.userParams=e,redfinger.trigCallback(redfingerV2.onInit,[0,"success"]),!0);},redfingerV2._initForBgsSdk=function(e){if(redfingerV2.resetLocal(),null==e)return MLOG.error(MLOG.e("params invalid")),!1;if(e.logLevel&&MLOG&&MLOG.setLevel(e.logLevel),void 0!==e.callbacks)for(let t in e.callbacks)redfingerV2.registerCallback(t,e.callbacks[t]);return redfinger.onOpen=function(e,t){102===e&&t?(redfinger.videoinfo.isWebRtc&&redfinger.setStreamConfig(redfinger.config.devWidth,redfinger.config.devHeight,redfinger.config.bitrate,redfinger.config.minFPS),redfinger.trigCallback(redfingerV2.onConnectSuccess,[])):redfinger.trigCallback(redfingerV2.onConnectFail,[e]);},void 0===e.viewId||null===e.viewId?(MLOG.error(MLOG.e("params.viewId invalid")),redfinger.trigCallback(redfingerV2.onInit,[20103,"params.viewId invalid"]),!1):void 0===e.uuid||null===e.uuid?(MLOG.error(MLOG.e("params.uuid invalid")),redfinger.trigCallback(redfingerV2.onInit,[20102,"params.uuid invalid"]),!1):!!redfingerV2.setConfigForSaas(e)&&(redfingerV2.local.isInit=!0,redfingerV2.local.userParams=e,redfinger.trigCallback(redfingerV2.onInit,[0,"success"]),!0);},redfingerV2.start=function(){if(!redfingerV2.local.isInit)return MLOG.debug(MLOG.d("redfingerV2.init is invalid, please redfingerV2.init first。")),void redfinger.trigCallback(redfingerV2.onConnectFail,[]);redfinger.play(redfingerV2.local.userParams.viewId,-1,redfingerV2.local.userParams.deviceInfo.resultInfo.packname||"",redfingerV2.local.userParams.deviceInfo);},redfingerV2._startForSaas=function(e){if(!redfingerV2.local.isInit)return MLOG.debug(MLOG.d("redfingerV2.init is invalid, please redfingerV2.init first。")),void redfinger.trigCallback(redfingerV2.onConnectFail,[]);redfinger.play(redfingerV2.local.userParams.viewId,-1,e.resultInfo.packname||"",e);},redfingerV2.stop=_async(function(){return _await(redfinger.destroy(),function(){0,redfingerV2.local.isInit=!1,redfingerV2.local.userParams=null;});}),redfingerV2.webrtcRePlay=function(){redfinger.webrtcRePlay();},redfingerV2.sendCommand=function(e){redfinger.sendCommand(e);},redfingerV2.sendInputClipper=function(e,t){redfinger.sendInputClipper(e,t);},redfingerV2.sendInputString=function(e){redfinger.sendInputString(e);},redfingerV2.keyCtrlEdit=function(){redfinger.keyCtrlEdit();},redfingerV2.keyCtrlUiDisplay=function(e){redfinger.keyCtrlUiDisplay(e);},redfingerV2.setPhoneRotation=function(e){redfinger.setPhoneRotation(e);},redfingerV2.setKey=function(e,t,r,n){redfinger.setKey(e,t,r,n);},redfingerV2.setGPS=function(e,t){redfinger.setGPS(e,t);},redfingerV2.setupVideoQuality=function(e,t,r){redfinger.setupVideoQuality(e,t,r);},redfingerV2.changeResolution=function(e,t){redfinger.changeResolution(e,t);},redfingerV2.setStreamConfig=function(e,t,r,n){redfinger.setStreamConfig(e,t,r,n);},redfingerV2.sendTransparentMsg=function(e,t,r,n){redfinger.sendTransparentMsg(e,t,r,n);},redfingerV2.setDebug=function(e){redfinger.setDebug(e);},redfingerV2.audioPauseOrResume=function(e){redfinger.audioPauseOrResume(e);},redfingerV2.setTrackingDataThreshold=function(e,t,r){redfinger.setTrackingDataThreshold(e,t,r);},redfingerV2.setCloudPhoneType=function(e){redfinger.setCloudPhoneType(e);},redfingerV2.setVideoStreamingType=function(e){redfinger.setVideoStreamingType(e);},redfingerV2.getSdkTrackingData=function(){return redfinger.getSdkTrackingData();},redfingerV2.getPadCode=function(){return redfinger.getPadCode();},redfingerV2.switchKeyboard=function(e){redfinger.switchKeyboard(e);},redfingerV2.setNavBarState=function(e){redfinger.setNavBarState(e);},redfingerV2.getAudioState=function(){return redfinger.getAudioState();},redfingerV2.setRemoteKeyboardActive=function(e){redfinger.setRemoteKeyboardActive(e);},redfingerV2.onInit=function(e,t){MLOG.debug(MLOG.d("onInit code:"+e+" msg:"+t));},redfingerV2.onConnectSuccess=function(){MLOG.debug(MLOG.d("onConnectSuccess"));},redfingerV2.onConnectFail=function(e){MLOG.debug(MLOG.d("onConnectFail code:"+e));},redfingerV2.version=redfinger.version,redfingerV2.defaultConfig={deviceInfo:"",viewId:"",uuid:"",isDebug:!1,protocol:"wss",width:720,height:1280,bitrate:4096,fps:30,vfmt:2,webrtcFmt:2,playMode:0,isReport:!0,reportSrc:"",isReportET:!0,reportETSrc:"apaas",reconnectCntLimit:8,QRcodeSetType:0,reconnectCheckTime:3e3,pointerLockPosition:{x:48,y:55},pointerLockKey:192,screenShotType:2,isCameraLive:!1,isMicLive:!1,mouseDpi:1.9,pcKeyMode:0,relMouseDpi:10,keyCtrlConfigType:"paas",isAutoFocus:!0,isRotationResetToV:!1,audioChannelCnt:2,heartBeatTimeOut:1e4,logLevel:4,cameraCheckTime:2e3,callbackType:"sync",isAudioPlay:!0,autoControlQuality:!1,videoLevels:[],isTVBox:!1,keyboard:null,cloudKeyboard:!0,useWCS:!1,wheelWidth:2,wheelDirection:1,wheelInterval:25},redfingerV2.registerCallback=function(e,t){void 0!==e&&"string"==typeof e&&"function"==typeof t&&("onInit"===e?redfingerV2.onInit=t:"onConnectSuccess"===e?redfingerV2.onConnectSuccess=t:"onConnectFail"===e?redfingerV2.onConnectFail=t:void 0!==redfinger[e]&&(redfinger[e]=t));},redfingerV2.setConfig=function(e){let t=JSON.parse(JSON.stringify(redfingerV2.defaultConfig));for(let r in e)"callbacks"!==r&&t.hasOwnProperty(r)&&(t[r]=e[r]);t.uuid+="";for(let e in t){if("callbacks"===e)continue;let r=redfinger.checkParam.check(e,e,t[e]);if(-1===r.code)return MLOG.error(MLOG.e("please check init params")),!1;1===r.code&&(t[e]=r.data);}for(let e in t)redfinger.config.hasOwnProperty(e)&&(redfinger.config[e]=t[e]);if(void 0!==e.isWebRtc){redfinger.config.isWebRtc=e.isWebRtc;let t=redfinger.checkParam.check("isWebRtc","isWebRtc",redfinger.config.isWebRtc);if(-1===t.code)return MLOG.error(MLOG.e("please check init params")),!1;1===t.code&&(redfinger.config.isWebRtc=t.data);}return redfinger.config.isMicrophoneLive=t.isMicLive,redfinger.config.devLevel=0,redfinger.config.devWidth=t.width,redfinger.config.devHeight=t.height,redfinger.config.minFPS=t.fps,redfinger.config.maxFPS=t.fps,redfinger.config.bitrate=t.bitrate,void 0!==e.isWebRtc&&(redfinger.config.isWebRtc=e.isWebRtc),!0;},redfingerV2.setConfigForSaas=function(e){let t=JSON.parse(JSON.stringify(redfingerV2.defaultConfig));for(let r in e)"callbacks"!==r&&t.hasOwnProperty(r)&&(t[r]=e[r]);t.uuid+="";for(let e in t){if("callbacks"===e)continue;if("deviceInfo"===e)continue;let r=redfinger.checkParam.check(e,e,t[e]);if(-1===r.code)return MLOG.error(MLOG.e("please check init params")),!1;1===r.code&&(t[e]=r.data);}for(let e in t)redfinger.config.hasOwnProperty(e)&&(redfinger.config[e]=t[e]);if(void 0!==e.isWebRtc){redfinger.config.isWebRtc=e.isWebRtc;let t=redfinger.checkParam.check("isWebRtc","isWebRtc",redfinger.config.isWebRtc);if(-1===t.code)return MLOG.error(MLOG.e("please check init params")),!1;1===t.code&&(redfinger.config.isWebRtc=t.data);}return redfinger.config.isMicrophoneLive=t.isMicLive,redfinger.config.devLevel=0,redfinger.config.devWidth=t.width,redfinger.config.devHeight=t.height,redfinger.config.minFPS=t.fps,redfinger.config.maxFPS=t.fps,redfinger.config.bitrate=t.bitrate,void 0!==e.isWebRtc&&(redfinger.config.isWebRtc=e.isWebRtc),!0;},window.TrackingConfig={netWorkDelayThreshold:100,packetLossRateThreshold:0,receiveFrameDelayThreshold:100,cloudPhoneType:"android",videoStreamingType:"VideoStreaming"},window.Tracking=function(){let e=!1,t={},r=function(){return{changeStartTime:0,changeEndTime:0,changeTime:0,changResult:0,originalType:"",targetType:"",historicalInfo:""};},n=function(){return{sdkType:"H5",sdkVersion:redfinger.version,cloudPhoneType:"android",sessionId:"",platformType:redfinger.isPc()?"pc":"phone",ua:navigator.userAgent,packageName:"",padCode:"",startPlayTime:"",tcpLinkConnectResult:-1,tcpConnectTime:-1,signalLinkConnectResult:-1,signalConnectTime:0,webrtcLinkConnectResult:-1,webrtcLinkConnectTime:0,firstFrameTime:0,firstFrameReceiveTime:0,cloudEncodeType:2,sdkDecodeType:"",bitrate:0,fps:0,resolution:"",videoStreamingType:"VideoStreaming",streamingProtocol:"",decodeChangeInfo:new r(),surfaceResolution:"",stopPlayTime:0,playTime:0};},i=function(){return{netWorkDelayThreshold:100,netWorkDelayNum:0,netWorkDelayMaxValue:0,netWorkDelayAverageValue:0,packetLossRateThreshold:0,packetLossRateNum:0,packetLossRateMaxValue:0,packetLossAverageValue:0,receiveFrameDelayThreshold:100,receiveFrameDelayNum:0,receiveFrameDelayMaxValue:0,receiveFrameDelayAverageValue:0,qualityChangeInfo:"",reconnectNum:0,reconnectMaxNum:0,reconnectMinNum:0,reconnectAverageNum:0,reconnectMaxTime:0,reconnectMinTime:0,reconnectMinAverageTime:0,reconnectHistoryNum:"",reconnectHistoryTime:""};},o=function(){return{serverErrCode:!0,errTime:0,sdkErrCode:!1,errorCode:0};};function a(e,t,r){return function(){if(t)try{t.apply(this,arguments);}catch(e){}if(e.apply(this,arguments),r)try{r.apply(this,arguments);}catch(e){}};}function s(e){for(let r in e)void 0!==t.baseInfo[r]&&(t.baseInfo[r]=e[r]);}function d(e){for(let r in e)void 0!==t.statisticalInfo[r]&&(t.statisticalInfo[r]=e[r]);}function c(e){let r=new Date().getTime();t.errorCodeInfo.errTime=r,t.errorCodeInfo.errorCode=e,e<=20103?(t.errorCodeInfo.sdkErrCode=!0,t.errorCodeInfo.serverErrCode=!1):(t.errorCodeInfo.sdkErrCode=!1,t.errorCodeInfo.serverErrCode=!0);}return{initData:function(){e||(e=!0,initTrackTmpData(),t={baseInfo:new n(),statisticalInfo:new i(),errorCodeInfo:new o()},s({startPlayTime:new Date().getTime(),cloudPhoneType:TrackingConfig.cloudPhoneType,videoStreamingType:TrackingConfig.videoStreamingType}),d({netWorkDelayThreshold:TrackingConfig.netWorkDelayThreshold,packetLossRateThreshold:TrackingConfig.packetLossRateThreshold,receiveFrameDelayThreshold:TrackingConfig.receiveFrameDelayThreshold}),redfinger.onErrorMessage=new a(redfinger.onErrorMessage,function(e){c(e);},null),redfinger.onOpen=new a(redfinger.onOpen,function(e){e+""!="102"&&c(e);},null),redfingerV2.onInit=new a((redfingerV2.onInit,function(e,t){c(e);}),null));},stopPlay:function(){e=!1;let r=new Date().getTime();s({stopPlayTime:r,playTime:r-t.baseInfo.startPlayTime});},setBaseInfo:s,updateNetDelayInfo:function(e){e||(e=0),e<=t.statisticalInfo.netWorkDelayThreshold||(e>t.statisticalInfo.netWorkDelayMaxValue&&(t.statisticalInfo.netWorkDelayMaxValue=e),t.statisticalInfo.netWorkDelayNum++,TrackingTmpData.netDelayTotalTime+=e,t.statisticalInfo.netWorkDelayAverageValue=Math.round(TrackingTmpData.netDelayTotalTime/t.statisticalInfo.netWorkDelayNum));},updatePacketLoss:function(e){e||(e=0),e<=t.statisticalInfo.packetLossRateThreshold||(e>t.statisticalInfo.packetLossRateMaxValue&&(t.statisticalInfo.packetLossRateMaxValue=e),t.statisticalInfo.packetLossRateNum++,TrackingTmpData.packetLossTotal+=e,t.statisticalInfo.packetLossAverageValue=parseFloat((TrackingTmpData.packetLossTotal/t.statisticalInfo.packetLossRateNum).toFixed(2)));},updateReceiveFrameTime:function(e){e||(e=0),e<=t.statisticalInfo.receiveFrameDelayThreshold||(e>t.statisticalInfo.receiveFrameDelayMaxValue&&(t.statisticalInfo.receiveFrameDelayMaxValue=e),t.statisticalInfo.receiveFrameDelayNum++,TrackingTmpData.receiveFrameTotalTime+=e,t.statisticalInfo.receiveFrameDelayAverageValue=Math.round(TrackingTmpData.receiveFrameTotalTime/t.statisticalInfo.receiveFrameDelayNum));},updateQualityChangeInfo:function(e){let r="resolution:"+e.width+"x"+e.height+",bitrate:"+e.bitrate+",fps:"+e.fps;t.statisticalInfo.qualityChangeInfo.length>0?t.statisticalInfo.qualityChangeInfo+="->"+r:t.statisticalInfo.qualityChangeInfo=r;},updateReconnectInfo:function(e,r){t.statisticalInfo.reconnectNum++,e>t.statisticalInfo.reconnectMaxNum&&(t.statisticalInfo.reconnectMaxNum=e),(e<t.statisticalInfo.reconnectMinNum||0===t.statisticalInfo.reconnectMinNum)&&(t.statisticalInfo.reconnectMinNum=e),TrackingTmpData.reconnectSubTotalCnt+=e,t.statisticalInfo.reconnectAverageNum=Math.round(TrackingTmpData.reconnectSubTotalCnt/t.statisticalInfo.reconnectNum),r>t.statisticalInfo.reconnectMaxTime&&(t.statisticalInfo.reconnectMaxTime=r),(r<t.statisticalInfo.reconnectMinTime||0===t.statisticalInfo.reconnectMinTime)&&(t.statisticalInfo.reconnectMinTime=r),TrackingTmpData.reconnectTotalTime+=r,t.statisticalInfo.reconnectMinAverageTime=Math.round(TrackingTmpData.reconnectTotalTime/t.statisticalInfo.reconnectNum),t.statisticalInfo.reconnectHistoryNum.length>0?t.statisticalInfo.reconnectHistoryNum+="->"+e:t.statisticalInfo.reconnectHistoryNum=e+"",t.statisticalInfo.reconnectHistoryTime.length>0?t.statisticalInfo.reconnectHistoryTime+="->"+r:t.statisticalInfo.reconnectHistoryTime=r+"";},setStatisticalInfo:d,setErrorCodeInfo:function(e){for(let r in e)void 0!==t.errorCodeInfo[r]&&(t.errorCodeInfo[r]=e[r]);},getTrackingData:function(){return JSON.parse(JSON.stringify(t));}};},redfinger.tracking=new window.Tracking(),window.initTrackTmpData=function(){window.TrackingTmpData={streamingProtocolMap:{1:"p2p",2:"tcpP2P",3:"gw",4:"js"},netDelayTotalTime:0,packetLossTotal:0,receiveFrameLastTime:0,receiveFrameTotalTime:0,tcpStartTime:0,signalLinkStartTime:0,webrtcLinkStartTime:0,reconnectSubTotalCnt:0,reconnectTotalTime:0};},initTrackTmpData(),window.BgsSdk={},BgsSdk.version=redfinger.version,BgsSdk.versionCode=12710,BgsSdk.sceneType="",BgsSdk.local=null,BgsSdk.resetLocal=function(){BgsSdk.local={isInit:!1,clientToken:"",openApiHost:"https://platform.armvm.com",connectUrl:"/sdk/instance/connect",connectPhoneUrl:"/sdk/instance/cloud-phone-connect",userParams:null,deviceInfo:null,keysInfoUrl:"/sdk/app/keys-info",keysSaveUrl:"/sdk/app/keys-save",isReport:!0,reportApiHost:"https://stat.armvm.com",reportUrl:"/stat/info/collection",apiRetry:!1,apiRetryCnt:0,apiRetryLimit:2,apiRetryCheckTime:2e3,apiRetryTimer:0,apiRetryStartTime:0};},BgsSdk.getClientToken=function(){if(null===BgsSdk.local||!BgsSdk.local.isInit)return MLOG.error(MLOG.e("BgsSdk.getClientToken is invalid, please BgsSdk.init first。")),BgsSdk.onConnectFail(redfinger.SAAS_ERROR.NOT_INIT_BEFORE_START,"please BgsSdk.init first"),"";let e=BgsSdk._get8RandStr(),t=BgsSdk._getUUID(),r=redfinger.version,n=redfinger.isPc()?1:2,i=BgsSdk._getBrowerInfo(),o=i.browserType,a=i.browserVersion,s=new Date().getTime(),d=t+",2,"+r+","+n+","+o+","+a+","+BgsSdk.local.userParams.appId+","+s;MLOG.debug(MLOG.d("client info : "+d));let c=BgsSdk._Base64.encode(d);return BgsSdk.local.clientToken=e+c,MLOG.debug(MLOG.d("getClientToken: "+BgsSdk.local.clientToken)),BgsSdk.local.clientToken;},BgsSdk.initGame=function(e){if(BgsSdk.sceneType="CLOUD_APP",BgsSdk.resetLocal(),BgsSdk.local.isInit=!1,null==e)return MLOG.error(MLOG.e("params invalid")),!1;if(void 0!==e.callbacks)for(let t in e.callbacks)BgsSdk.registerCallback(t,e.callbacks[t]);let t=JSON.parse(JSON.stringify(e));if(void 0===t.callbacks&&(t.callbacks={}),t.callbacks.onInit=BgsSdk._onSdkInitRet,t.callbacks.onConnectSuccess=BgsSdk._onConnectSuccess,t.callbacks.onConnectFail=BgsSdk._onConnectFail,void 0!==e.callbacks)for(let r in e.callbacks)"onInitFail"!==r&&"onInitSuccess"!==r&&"onConnectSuccess"!==r&&"onConnectFail"!==r&&"onStoped"!==r&&(t.callbacks[r]=e.callbacks[r]);if(void 0===t.onlineTime||null===t.onlineTime||""===t.onlineTime)return MLOG.error(MLOG.e("params.onlineTime invalid")),BgsSdk.onInitFail(redfinger.SAAS_ERROR.ONLINE_TIME_VALID,"params.onlineTime invalid"),!1;let r=redfinger.checkParam.check("onlineTime","onlineTime",t.onlineTime);return-1===r.code?(MLOG.error(MLOG.e("please check init params.onlineTime")),BgsSdk.onInitFail(redfinger.SAAS_ERROR.ONLINE_TIME_VALID,"params.onlineTime invalid"),!1):void 0===t.appId||null===t.appId||""===t.appId?(MLOG.error(MLOG.e("params.appId invalid")),BgsSdk.onInitFail(redfinger.SAAS_ERROR.APP_ID_VALID,"params.appId invalid"),!1):(r=redfinger.checkParam.check("appId","appId",t.appId),-1===r.code?(MLOG.error(MLOG.e("please check init params.appId")),redfinger.trigCallback(BgsSdk.onInitFail,[redfinger.SAAS_ERROR.APP_ID_VALID,"params.appId invalid"]),!1):(void 0!==t.openApiHost&&null!==t.openApiHost&&""!==t.openApiHost&&(BgsSdk.local.openApiHost=t.openApiHost),void 0!==t.connectUrl&&null!==t.connectUrl&&""!==t.connectUrl&&(BgsSdk.local.connectUrl=t.connectUrl),void 0!==t.keysInfoUrl&&null!==t.keysInfoUrl&&""!==t.keysInfoUrl&&(BgsSdk.local.keysInfoUrl=t.keysInfoUrl),void 0!==t.keysSaveUrl&&null!==t.keysSaveUrl&&""!==t.keysSaveUrl&&(BgsSdk.local.keysSaveUrl=t.keysSaveUrl),void 0!==t.isReport&&null!==t.isReport&&"boolean"==typeof t.isReport&&(BgsSdk.local.isReport=t.isReport),void 0!==t.reportUrl&&null!==t.reportUrl&&""!==t.reportUrl&&(BgsSdk.local.reportUrl=t.reportUrl),void 0!==t.reportApiHost&&null!==t.reportApiHost&&""!==t.reportApiHost&&(BgsSdk.local.reportApiHost=t.reportApiHost),t.instanceCode=t.instanceCode||"",r=redfinger.checkParam.check("instanceCode","instanceCode",t.instanceCode),1===r.code&&(t.instanceCode=r.data),t.clientIP=t.clientIP||"",r=redfinger.checkParam.check("clientIP","clientIP",t.clientIP),1===r.code&&(t.clientIP=r.data),void 0!==t.keyCtrlConfigType&&"paas"!==t.keyCtrlConfigType||(t.keyCtrlConfigType="saas"),!!redfingerV2._initForBgsSdk(t)&&(BgsSdk.local.isReport&&!BgsSdk.report&&(BgsSdk.report=new BgsReport(),BgsSdk.report.init(BgsSdk.local.reportApiHost,BgsSdk.local.reportUrl)),BgsSdk.local.isInit=!0,BgsSdk.local.userParams=t,redfinger.trigCallback(BgsSdk.onInitSuccess,[]),!0)));},BgsSdk.startGame=function(e){if(!BgsSdk.local.isInit)return MLOG.debug(MLOG.d("BgsSdk.init is invalid, please BgsSdk.init first。")),void redfinger.trigCallback(BgsSdk.onConnectFail,[redfinger.SAAS_ERROR.NOT_INIT_BEFORE_START,"please BgsSdk.init first"]);if(null==e||""===e)return MLOG.error(MLOG.e("params.serverToken invalid")),redfinger.trigCallback(BgsSdk.onConnectFail,[redfinger.SAAS_ERROR.SERVER_TOKEN_IS_NULL,"params.serverToken invalid"]),!1;if(-1===redfinger.checkParam.check("serverToken","serverToken",e).code)return MLOG.error(MLOG.e("please check init serverToken")),redfinger.trigCallback(BgsSdk.onConnectFail,[redfinger.SAAS_ERROR.SERVER_TOKEN_IS_NULL,"serverToken invalid"]),!1;BgsSdk.local.userParams.serverToken=e,BgsSdk._bindDevice(function(e){if(MLOG.debug(MLOG.d("deviceInfo: "+JSON.stringify(e))),null===(e=BgsSdk._transDeviceInfo(e)))return redfinger.trigCallback(BgsSdk.onConnectFail,[redfinger.SAAS_ERROR.SAAS_API_DEVICE_INFO_INVALID,"deviceInfo error"]),!1;if(BgsSdk.local.deviceInfo=JSON.parse(JSON.stringify(e)),BgsSdk.local.isReport){let t={sessionId:e.resultInfo.sessionId,clientToken:BgsSdk.local.clientToken,serverToken:BgsSdk.local.userParams.serverToken,instanceCode:e.padCode,appName:e.resultInfo.packname,playInfo:{deviceInfo:e},startPlayTime:new Date().getTime()};BgsSdk.report.startPlayReport(t);}redfingerV2._startForSaas(e),redfinger.isPc()&&"saas"===redfinger.config.keyCtrlConfigType&&keyboard.setKeyUiBySaas(BgsSdk.local.openApiHost,BgsSdk.local.keysInfoUrl,BgsSdk.local.keysSaveUrl,BgsSdk.local.userParams.serverToken);});},BgsSdk.stopGame=_async(function(){return _await(redfingerV2.stop(),function(){if(0,BgsSdk.local.isReport&&null!==BgsSdk.local.deviceInfo){let e={sessionId:BgsSdk.local.deviceInfo.resultInfo.sessionId,clientToken:BgsSdk.local.clientToken,serverToken:BgsSdk.local.userParams.serverToken,instanceCode:BgsSdk.local.deviceInfo.padCode,appName:BgsSdk.local.deviceInfo.resultInfo.packname,playInfo:{deviceInfo:BgsSdk.local.deviceInfo},endPlayTime:new Date().getTime()};BgsSdk.report.endPlayReport(e);}BgsSdk.local.isInit=!1,BgsSdk.local.userParams=null;});}),BgsSdk.onInitFail=function(e,t){MLOG.error(MLOG.e("BgsSdk.onInitFail fail code:"+e+",msg:"+t));},BgsSdk.onInitSuccess=function(){MLOG.info(MLOG.i("BgsSdk.onInitSuccess"));},BgsSdk.onConnectSuccess=function(){MLOG.info(MLOG.i("BgsSdk.onConnectSuccess"));},BgsSdk.onConnectFail=function(e,t){MLOG.error(MLOG.e("BgsSdk.onConnectFail fail code:"+e+",msg:"+t));},BgsSdk.onStoped=function(){MLOG.info(MLOG.i("BgsSdk.onStoped"));},BgsSdk._onSdkInitRet=function(e,t){20102===e?e=redfinger.SAAS_ERROR.UUID_IS_NULL:20103===e&&(e=redfinger.SAAS_ERROR.SDK_VIEW_IS_VALID),0!==e&&redfinger.trigCallback(BgsSdk.onInitFail,[e,t]);},BgsSdk._onConnectSuccess=function(){MLOG.info(MLOG.i("onConnectSuccess")),redfinger.trigCallback(BgsSdk.onConnectSuccess,[]);},BgsSdk._onConnectFail=function(e,t){MLOG.warn(MLOG.w("onConnectFail "+e+","+t)),redfinger.trigCallback(BgsSdk.onConnectFail,[e,t]);},BgsSdk._onBindDeviceFail=function(e,t){MLOG.warn(MLOG.w("onBindDeviceFail "+e+","+t)),redfinger.trigCallback(BgsSdk.onConnectFail,[redfinger.SAAS_ERROR.SAAS_API_SERVER_ERROR,e+":"+t]);},BgsSdk._onBindDeviceNull=function(e,t){MLOG.warn(MLOG.w("onBindDeviceNull "+e+","+t)),redfinger.trigCallback(BgsSdk.onConnectFail,[redfinger.SAAS_ERROR.SAAS_API_DEVICE_INFO_INVALID,e+":"+t]);},BgsSdk._onBindDeviceNetInvalid=function(e,t){MLOG.warn(MLOG.w("_onBindDeviceNetInvalid "+t)),redfinger.trigCallback(BgsSdk.onConnectFail,[redfinger.SAAS_ERROR.SAAS_API_SERVER_INVALID,t]);},BgsSdk._onBindDeviceNetError=function(e,t){MLOG.warn(MLOG.w("_onBindDeviceNetError "+t)),redfinger.trigCallback(BgsSdk.onConnectFail,[redfinger.SAAS_ERROR.SAAS_API_ERROR,t]);},BgsSdk.setupVideoQuality=function(e,t,r){redfinger.setupVideoQuality(e,t,r);},BgsSdk.changeResolution=function(e,t){redfinger.changeResolution(e,t);},BgsSdk.webrtcRePlay=function(){redfinger.webrtcRePlay();},BgsSdk.sendCommand=function(e){redfinger.sendCommand(e);},BgsSdk.sendInputClipper=function(e,t){redfinger.sendInputClipper(e,t);},BgsSdk.sendInputString=function(e){redfinger.sendInputString(e);},BgsSdk.keyCtrlEdit=function(){redfinger.keyCtrlEdit();},BgsSdk.keyCtrlUiDisplay=function(e){redfinger.keyCtrlUiDisplay(e);},BgsSdk.setPhoneRotation=function(e){redfinger.setPhoneRotation(e);},BgsSdk.setGPS=function(e,t){redfinger.setGPS(e,t);},BgsSdk.setStreamConfig=function(e,t,r,n){redfinger.setStreamConfig(e,t,r,n);},BgsSdk.sendTransparentMsg=function(e,t,r,n){redfinger.sendTransparentMsg(e,t,r,n);},BgsSdk.setDebug=function(e){redfinger.setDebug(e);},BgsSdk.audioPauseOrResume=function(e){redfinger.audioPauseOrResume(e);},BgsSdk.getPadCode=function(){return redfinger.getPadCode();},BgsSdk.switchKeyboard=function(e){redfinger.switchKeyboard(e);},BgsSdk.setNavBarState=function(e){redfinger.setNavBarState(e);},BgsSdk.setWheelState=function(e){redfinger.setWheelState(e);},BgsSdk.setRemoteKeyboardActive=function(e){redfinger.setRemoteKeyboardActive(e);},BgsSdk.getAudioState=function(){return redfinger.getAudioState();},BgsSdk._getUUID=function(){let e=[],t="0123456789abcdef";for(let r=0;r<36;r++)e[r]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="",e.join("");},BgsSdk._get8RandStr=function(){let e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",t="";for(let r=0;r<8;r++)t+=e[0|Math.random()*e.length];return t;},BgsSdk._Base64={encode:function(e){return e=e||"",CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(e));},decode:function(e){return CryptoJS.enc.Base64.parse(e).toString(CryptoJS.enc.Utf8);}},BgsSdk._XOR=function(e,t){let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t.charCodeAt(n)^e);return r;},BgsSdk._getBrowerInfo=function(){let e=window.navigator.userAgent.toLowerCase(),t="",r="";null!=e.match(/msie/)||e.match(/trident/);if(null!=e.match(/msie/)||null!=e.match(/trident/))t="IE",r=function(){let e=document.documentMode,t=window.navigator.userAgent.toLowerCase(),r=/(msie\s|trident.*rv:)([\w.]+)/.exec(t);try{return r[2];}catch(t){return e;}}();else if(window.opera||e.indexOf("opr")>0)t="opera",r=function(e){let t="";try{if(window.opera){let r=e.match(/opera.([\d.]+)/);null!==r&&r.length>1&&(t=r[1]);}else if(e.indexOf("opr")>0){let r=e.match(/opr\/([\d.]+)/);null!==r&&r.length>1&&(t=r[1]);}}catch(e){return"";}return t;}(e);else if(e.indexOf("ubrowser")>0){t="ubrowser";let n=e.match(/ubrowser\/([\d.]+)/);null!==n&&n.length>1&&(r=n[1]);}else if(e.indexOf("bidubrowser")>0){t="bidubrowser";let n=e.match(/bidubrowser\/([\d.]+)/);null!==n&&n.length>1&&(r=n[1]);}else if(e.indexOf("metasr")>0||e.indexOf("se 2.x")>0){t="sougou";let n=e.match(/trident\/([\d.]+)/);null!==n&&n.length>1&&(r=n[1]);}else if(e.indexOf("tencenttraveler")>0){t="tencenttraveler";let n=e.match(/tencenttraveler\/([\d.]+)/);null!==n&&n.length>1&&(r=n[1]);}else if(e.indexOf("qqbrowser")>0){t="qqbrowser";let n=e.match(/qqbrowser\/([\d.]+)/);null!==n&&n.length>1&&(r=n[1]);}else if(e.indexOf("maxthon")>0){t="maxthon";let n=e.match(/maxthon\/([\d.]+)/);null!==n&&n.length>1&&(r=n[1]);}else if(e.indexOf("firefox")>0){t="firefox";let n=e.match(/firefox\/([\d.]+)/);null!==n&&n.length>1&&(r=n[1]);}else if(e.indexOf("edge")>0){t="Edge";let n=e.match(/edge\/([\d.]+)/);null!==n&&n.length>1&&(r=n[1]);}else if(e.indexOf("chrome")>0){t=function(e,t){let r=window.navigator.mimeTypes;for(let n in r)if(r[n][e]===t)return!0;return!1;}("type","application/x360mmplugin")?"360":"chrome";let n=e.match(/chrome\/([\d.]+)/);null!==n&&n.length>1&&(r=n[1]);}else if(e.indexOf("safari")>-1){t="safari";let n=e.match(/version\/([\d.]+)/);null!==n&&n.length>1&&(r=n[1]),n=e.match(/crios\/([\d.]+)/),null!==n&&n.length>1&&(r=n[1]);}return{browserType:t,browserVersion:r};},BgsSdk._bindDevice=function(e){let t=null;if(window.ActiveXObject?t=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(t=new XMLHttpRequest()),null===t)return MLOG.error(MLOG.e("XHR is not support")),void BgsSdk._onBindDeviceFail(-1,"XHR is not support");let r=new Date().getTime(),n=BgsSdk.local.openApiHost+BgsSdk.local.connectUrl+"?serverToken="+BgsSdk.local.userParams.serverToken+"&auth_ver=3&nonce="+r,i={uuid:BgsSdk.local.userParams.uuid,onlineTime:BgsSdk.local.userParams.onlineTime,appId:BgsSdk.local.userParams.appId||"",instanceType:BgsSdk.local.userParams.instanceType||"",instanceCode:BgsSdk.local.userParams.instanceCode||"",clientIP:BgsSdk.local.userParams.clientIP||""},o=BgsSdk._getServerTokenKey(BgsSdk.local.userParams.serverToken),a=BgsSdk._get8RandStr(),s={p:BgsSdk._XOR(o,a+BgsSdk._Base64.encode(JSON.stringify(i)))};t.onreadystatechange=function(){if(4===this.readyState)if(BgsSdk.local.apiRetry&&BgsSdk.local.apiRetryCnt>0&&this.status>=100&&(BgsSdk.onApiRetrySuccess(),BgsSdk.local.apiRetry=!1,BgsSdk.local.apiRetryCnt=0,BgsSdk.local.apiRetryStartTime=0),200===this.status){MLOG.info(MLOG.i("connect instance success ret:"+this.responseText));let t={};t="string"==typeof this.responseText?JSON.parse(this.responseText):this.responseText,0===t.code?e(t.data):(MLOG.error(MLOG.e("connect instance fail "+JSON.stringify(t))),BgsSdk._onBindDeviceFail(t.code,t.msg));}else if(this.status<100){if(MLOG.debug(MLOG.d("connect instance error status:"+this.status+"url:"+n)),BgsSdk.local.apiRetry&&BgsSdk.local.apiRetryCnt>=BgsSdk.local.apiRetryLimit)return void(BgsSdk.local.isInit&&BgsSdk._onBindDeviceNetError(408,"connect instance request error"));0===BgsSdk.local.apiRetryTimer&&(BgsSdk.local.apiRetryTimer=setTimeout(function(){0===BgsSdk.local.apiRetryStartTime&&(BgsSdk.local.apiRetryStartTime=new Date().getTime()),BgsSdk.local.apiRetryTimer=0,BgsSdk.local.apiRetry=!0,BgsSdk.local.apiRetryCnt++,BgsSdk._bindDevice(e);},BgsSdk.local.apiRetryCheckTime));}else MLOG.error(MLOG.e("connect instance fail,state:"+this.status+",url:"+n)),BgsSdk._onBindDeviceNetInvalid(-1,"connect instance fail,state:"+this.status+",url:"+n);},t.open("POST",n,!0),t.setRequestHeader("content-type","application/json"),t.timeout=1e4,t.ontimeout=function(){MLOG.debug(MLOG.d("connect instance timeout url:"+n)),BgsSdk.local.apiRetry&&BgsSdk.local.apiRetryCnt>=BgsSdk.local.apiRetryLimit?BgsSdk.local.isInit&&BgsSdk._onBindDeviceNetError(408,"connect instance request timeout"):0===BgsSdk.local.apiRetryTimer&&(BgsSdk.local.apiRetryTimer=setTimeout(function(){0===BgsSdk.local.apiRetryStartTime&&(BgsSdk.local.apiRetryStartTime=new Date().getTime()),BgsSdk.local.apiRetryTimer=0,BgsSdk.local.apiRetry=!0,BgsSdk.local.apiRetryCnt++,BgsSdk._bindDevice(e);},BgsSdk.local.apiRetryCheckTime));},t.send(JSON.stringify(s));},BgsSdk._transDeviceInfo=function(e){let t=null;try{t={padCode:e.instanceCode,resultCode:0,resultInfo:{streamModeList:e.streamModeList,webControlList:e.connData.webControlList,controlList:e.connData.controlList,webRtcControlList:e.connData.webRtcControlList,sessionId:e.sessionId,packname:e.appPackageName,userId:-1,webRtcMode:e.connData.webRtcMode,remoteList:e.connData.remoteList}};}catch(r){MLOG.error(MLOG.e("deviceInfo error :"+JSON.stringify(e))),t=null;}return t;},BgsSdk._getPhoneConnectInfo=function(e){let t=null;if(window.ActiveXObject?t=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(t=new XMLHttpRequest()),null===t)return MLOG.error(MLOG.e("XHR is not support")),void BgsSdk._onBindDeviceFail(-1,"XHR is not support");let r=new Date().getTime(),n=BgsSdk.local.openApiHost+BgsSdk.local.connectPhoneUrl+"?serverToken="+BgsSdk.local.userParams.serverToken+"&auth_ver=3&nonce="+r,i={uuid:BgsSdk.local.userParams.uuid,clientToken:BgsSdk._getClientTokenForPhone(),serverTokens:[BgsSdk.local.userParams.serverToken]},o=BgsSdk._getServerTokenKey(BgsSdk.local.userParams.serverToken),a=BgsSdk._get8RandStr(),s={p:BgsSdk._XOR(o,a+BgsSdk._Base64.encode(JSON.stringify(i)))};t.onreadystatechange=function(){if(4===this.readyState)if(BgsSdk.local.apiRetry&&BgsSdk.local.apiRetryCnt>0&&this.status>=100&&(BgsSdk.onApiRetrySuccess(),BgsSdk.local.apiRetry=!1,BgsSdk.local.apiRetryCnt=0,BgsSdk.local.apiRetryStartTime=0),200===this.status){MLOG.info(MLOG.i("connect instance success ret:"+this.responseText));let t={};if(t="string"==typeof this.responseText?JSON.parse(this.responseText):this.responseText,0===t.code){if(null==t.data||!Array.isArray(t.data.successList))return void BgsSdk._onBindDeviceNull(-1,"deviceInfo is null");if(t.data.successList.length>0){let r=null;for(let e=0;e<t.data.successList.length;e++)if(t.data.successList[e].serverToken===BgsSdk.local.userParams.serverToken){r=t.data.successList[e];break;}if(null!==r)return r.appPackageName=BgsSdk.local.packageName,void e(r);let n="",i=0;for(let e=0;e<t.data.errorList.length;e++)if(t.data.errorList[e].serverToken===BgsSdk.local.userParams.serverToken){i=t.data.errorList[e].errorCode,n=t.data.errorList[e].errorMsg;break;}MLOG.error(MLOG.e("connect instance fail "+JSON.stringify(t))),BgsSdk._onBindDeviceFail(i,n);}else MLOG.error(MLOG.e("connect instance fail "+JSON.stringify(t))),BgsSdk._onBindDeviceFail(t.code,t.msg);}else MLOG.error(MLOG.e("connect instance fail "+JSON.stringify(t))),BgsSdk._onBindDeviceFail(t.code,t.msg);}else if(this.status<100){if(MLOG.debug(MLOG.d("connect instance error status:"+this.status+"url:"+n)),BgsSdk.local.apiRetry&&BgsSdk.local.apiRetryCnt>=BgsSdk.local.apiRetryLimit)return void(BgsSdk.local.isInit&&BgsSdk._onBindDeviceNetError(408,"connect instance request error"));0===BgsSdk.local.apiRetryTimer&&(BgsSdk.local.apiRetryTimer=setTimeout(function(){0===BgsSdk.local.apiRetryStartTime&&(BgsSdk.local.apiRetryStartTime=new Date().getTime()),BgsSdk.local.apiRetryTimer=0,BgsSdk.local.apiRetry=!0,BgsSdk.local.apiRetryCnt++,BgsSdk._getPhoneConnectInfo(e);},BgsSdk.local.apiRetryCheckTime));}else MLOG.error(MLOG.e("connect instance fail")),BgsSdk._onBindDeviceNetInvalid(-1,"connect instance fail");},t.open("POST",n,!0),t.setRequestHeader("content-type","application/json"),t.timeout=1e4,t.ontimeout=function(){MLOG.debug(MLOG.d("connect instance timeout url:"+n)),BgsSdk.local.apiRetry&&BgsSdk.local.apiRetryCnt>=BgsSdk.local.apiRetryLimit?BgsSdk.local.isInit&&BgsSdk._onBindDeviceNetError(408,"connect instance request timeout"):0===BgsSdk.local.apiRetryTimer&&(BgsSdk.local.apiRetryTimer=setTimeout(function(){0===BgsSdk.local.apiRetryStartTime&&(BgsSdk.local.apiRetryStartTime=new Date().getTime()),BgsSdk.local.apiRetryTimer=0,BgsSdk.local.apiRetry=!0,BgsSdk.local.apiRetryCnt++,BgsSdk._getPhoneConnectInfo(e);},BgsSdk.local.apiRetryCheckTime));},t.send(JSON.stringify(s));},BgsSdk._getServerTokenKey=function(e){let t=e.substr(0,8),r=0;for(let e=0;e<t.length;e++)r+=t.charCodeAt(e);return r;},BgsSdk.registerCallback=function(e,t){void 0!==e&&"string"==typeof e&&"function"==typeof t&&("onInitSuccess"===e?BgsSdk.onInitSuccess=t:"onInitFail"===e?BgsSdk.onInitFail=t:"onConnectSuccess"===e?BgsSdk.onConnectSuccess=t:"onConnectFail"===e?BgsSdk.onConnectFail=t:"onStoped"===e&&(BgsSdk.onStoped=t,redfinger.onDestroy=BgsSdk.onStoped));},BgsSdk._getMerchantId=function(){let e="";return null!==BgsSdk.local.userParams&&void 0!==BgsSdk.local.userParams.serverToken&&(e=BgsSdk.local.userParams.serverToken.substring(32,BgsSdk.local.userParams.serverToken.length)),e;},BgsSdk.onApiRetrySuccess=function(){MLOG.debug(MLOG.d("api retry success"));},BgsSdk._getClientTokenForPhone=function(){if(null===BgsSdk.local||!BgsSdk.local.isInit)return MLOG.error(MLOG.e("BgsSdk.getClientToken is invalid, please BgsSdk.init first。")),BgsSdk.onConnectFail(redfinger.SAAS_ERROR.NOT_INIT_BEFORE_START,"please BgsSdk.init first"),"";let e=BgsSdk._get8RandStr(),t=BgsSdk._getUUID(),r=redfinger.version,n=redfinger.isPc()?1:2,i=BgsSdk._getBrowerInfo(),o=t+",2,"+r+","+n+","+i.browserType+","+i.browserVersion+","+new Date().getTime();MLOG.debug(MLOG.d("client info : "+o));let a=BgsSdk._Base64.encode(o);return BgsSdk.local.clientToken=e+a,MLOG.debug(MLOG.d("getClientToken: "+BgsSdk.local.clientToken)),BgsSdk.local.clientToken;},BgsSdk.initPhone=function(e){if(BgsSdk.sceneType="CLOUD_PHONE",BgsSdk.resetLocal(),BgsSdk.local.isInit=!1,null==e)return MLOG.error(MLOG.e("params invalid")),!1;if(void 0!==e.callbacks)for(let t in e.callbacks)BgsSdk.registerCallback(t,e.callbacks[t]);let t=JSON.parse(JSON.stringify(e));if(void 0===t.callbacks&&(t.callbacks={}),t.callbacks.onInit=BgsSdk._onSdkInitRet,t.callbacks.onConnectSuccess=BgsSdk._onConnectSuccess,t.callbacks.onConnectFail=BgsSdk._onConnectFail,void 0!==e.callbacks)for(let r in e.callbacks)"onInitFail"!==r&&"onInitSuccess"!==r&&"onConnectSuccess"!==r&&"onConnectFail"!==r&&"onStoped"!==r&&(t.callbacks[r]=e.callbacks[r]);return void 0!==t.packageName&&null!==t.packageName&&""!==t.packageName?BgsSdk.local.packageName=t.packageName:BgsSdk.local.packageName="",void 0!==t.openApiHost&&null!==t.openApiHost&&""!==t.openApiHost&&(BgsSdk.local.openApiHost=t.openApiHost),void 0!==t.connectPhoneUrl&&null!==t.connectPhoneUrl&&""!==t.connectPhoneUrl&&(BgsSdk.local.connectPhoneUrl=t.connectPhoneUrl),void 0!==t.keysInfoUrl&&null!==t.keysInfoUrl&&""!==t.keysInfoUrl&&(BgsSdk.local.keysInfoUrl=t.keysInfoUrl),void 0!==t.keysSaveUrl&&null!==t.keysSaveUrl&&""!==t.keysSaveUrl&&(BgsSdk.local.keysSaveUrl=t.keysSaveUrl),void 0!==t.isReport&&null!==t.isReport&&"boolean"==typeof t.isReport&&(BgsSdk.local.isReport=t.isReport),void 0!==t.reportUrl&&null!==t.reportUrl&&""!==t.reportUrl&&(BgsSdk.local.reportUrl=t.reportUrl),void 0!==t.reportApiHost&&null!==t.reportApiHost&&""!==t.reportApiHost&&(BgsSdk.local.reportApiHost=t.reportApiHost),void 0!==t.keyCtrlConfigType&&"paas"!==t.keyCtrlConfigType||(t.keyCtrlConfigType="custom"),!!redfingerV2._initForBgsSdk(t)&&(BgsSdk.local.isReport&&!BgsSdk.report&&(BgsSdk.report=new BgsReport(),BgsSdk.report.init(BgsSdk.local.reportApiHost,BgsSdk.local.reportUrl)),BgsSdk.local.isInit=!0,BgsSdk.local.userParams=t,redfinger.trigCallback(BgsSdk.onInitSuccess,[]),!0);},BgsSdk.startPhone=function(e){if(!BgsSdk.local.isInit)return MLOG.debug(MLOG.d("BgsSdk.init is invalid, please BgsSdk.init first。")),void redfinger.trigCallback(BgsSdk.onConnectFail,[redfinger.SAAS_ERROR.NOT_INIT_BEFORE_START,"please BgsSdk.init first"]);if(null==e||""===e)return MLOG.error(MLOG.e("params.serverToken invalid")),redfinger.trigCallback(BgsSdk.onConnectFail,[redfinger.SAAS_ERROR.SERVER_TOKEN_IS_NULL,"params.serverToken invalid"]),!1;if(-1===redfinger.checkParam.check("serverToken","serverToken",e).code)return MLOG.error(MLOG.e("please check init serverToken")),redfinger.trigCallback(BgsSdk.onConnectFail,[redfinger.SAAS_ERROR.SERVER_TOKEN_IS_NULL,"serverToken invalid"]),!1;BgsSdk.local.userParams.serverToken=e,BgsSdk._getPhoneConnectInfo(function(e){if(MLOG.debug(MLOG.d("deviceInfo: "+JSON.stringify(e))),null===(e=BgsSdk._transDeviceInfo(e)))return redfinger.trigCallback(BgsSdk.onConnectFail,[redfinger.SAAS_ERROR.SAAS_API_DEVICE_INFO_INVALID,"deviceInfo error"]),!1;if(BgsSdk.local.deviceInfo=JSON.parse(JSON.stringify(e)),BgsSdk.local.isReport){let t={sessionId:e.resultInfo.sessionId,clientToken:BgsSdk.local.clientToken,serverToken:BgsSdk.local.userParams.serverToken,instanceCode:e.padCode,appName:e.resultInfo.packname,playInfo:{deviceInfo:e},startPlayTime:new Date().getTime()};BgsSdk.report.startPlayReport(t);}redfingerV2._startForSaas(e),redfinger.isPc()&&"saas"===redfinger.config.keyCtrlConfigType&&""!==BgsSdk.local.packageName&&void 0!==BgsSdk.local.packageName&&keyboard.setKeyUiBySaas(BgsSdk.local.openApiHost,BgsSdk.local.keysInfoUrl,BgsSdk.local.keysSaveUrl,BgsSdk.local.userParams.serverToken);});},BgsSdk.stopPhone=_async(function(){return _await(redfingerV2.stop(),function(){if(0,BgsSdk.local.isReport&&null!==BgsSdk.local.deviceInfo){let e={sessionId:BgsSdk.local.deviceInfo.resultInfo.sessionId,clientToken:BgsSdk.local.clientToken,serverToken:BgsSdk.local.userParams.serverToken,instanceCode:BgsSdk.local.deviceInfo.padCode,appName:BgsSdk.local.deviceInfo.resultInfo.packname,playInfo:{deviceInfo:BgsSdk.local.deviceInfo},endPlayTime:new Date().getTime()};BgsSdk.report.endPlayReport(e);}BgsSdk.local.isInit=!1,BgsSdk.local.userParams=null;});}),window.MultiSdk={},MultiSdk.version=redfinger.version,MultiSdk.sceneType="",MultiSdk.local=null,MultiSdk.config=null,MultiSdk.resetLocal=function(){MultiSdk.local={isInit:!1,userParams:null,instanceListMap:new HashMap(),multiServerListMap:new HashMap(),multiServerGroupMap:new HashMap(),mainInstanceInfo:null,queryCallBack:null,queryLastTime:0,width:720,height:1280},MultiSdk.local.config={protocol:"wss",reconnectCheckTime:3e3,reconnectCntLimit:8};},MultiSdk.init=function(e){if(MultiSdk.resetLocal(),null==e)return MLOG.error(MLOG.e("params invalid")),!1;if(void 0!==e.callbacks)for(let t in e.callbacks)MultiSdk.registerCallback(t,e.callbacks[t]);if(void 0===e.mainCtrlConfig||""===e.mainCtrlConfig)return MLOG.error(MLOG.e("please check init params.mainCtrlConfig")),MultiSdk.onInitFail(MultiSdk._ERR.MAIN_CTROL_CONFIG_INVALID,"params.mainCtrlConfig invalid"),!1;let t=JSON.parse(JSON.stringify(e));return void 0===t.callbacks&&(t.callbacks={}),void 0!==e.mainCtrlConfig.callbacks&&"object"==typeof e.mainCtrlConfig.callbacks||(e.mainCtrlConfig.callbacks={}),t.mainCtrlConfig.callbacks=MultiSdk._registerProxyCallback(e.mainCtrlConfig.callbacks),redfingerV2._initForBgsSdk(t.mainCtrlConfig)?(void 0!==t.multiCtrlConfig&&(t.multiCtrlConfig.protocol&&(MultiSdk.local.config.protocol=t.multiCtrlConfig.protocol),void 0!==t.multiCtrlConfig.reconnectCheckTime&&(MultiSdk.local.config.reconnectCheckTime=t.multiCtrlConfig.reconnectCheckTime),t.multiCtrlConfig.reconnectCntLimit&&(MultiSdk.local.config.reconnectCntLimit=t.multiCtrlConfig.reconnectCntLimit)),MultiSdk.local.width=redfinger.config.devWidth,MultiSdk.local.height=redfinger.config.devHeight,MultiSdk.local.isInit=!0,MultiSdk.local.userParams=t,MultiSdk.onInit(0,"success"),!0):(MLOG.error(MLOG.e("please check init params.mainCtrlConfig")),MultiSdk.onInitFail(MultiSdk._ERR.MAIN_CTROL_CONFIG_INVALID,"params.mainCtrlConfig invalid"),!1);},MultiSdk.start=function(e,t){let r=[];for(let t=0;t<e.length;t++){let n=MultiSdk._transDeviceInfo(e[t]);null!==n&&r.push(n);}if(0===r.length)return void MLOG.error(MLOG.e("no valid instance token can control"));let n=[];for(let e=0;e<r.length;e++)n.push({padCode:r[e].padCode,multiControlList:JSON.parse(JSON.stringify(r[e].resultInfo.multiControlList))});for(let e=0;e<r.length;e++)MultiSdk.local.instanceListMap.put(r[e].padCode,r[e]);for(let e=0;e<n.length;e++){let t=n[e].padCode;MultiSdk.local.multiServerListMap.put(t,n[e]);}void 0!==t&&""!==t&&null!==t||MultiSdk.onError(MultiSdk._ERR.MAIN_CTROL_INSTANCE_CODE_INVALID,"main control instance is invalid");let i=MultiSdk.instanceGroupParse(MultiSdk.local.instanceListMap,n,t);if(0===i.size())return void MultiSdk.onError(MultiSdk._ERR.MULTI_SERVER_IS_NULL,"multi server info error");let o=MultiSdk.local.instanceListMap.get(t);null!==o?(MultiSdk.local.mainInstanceInfo=JSON.parse(JSON.stringify(o)),MLOG.info(MLOG.i("main instanceInfo:"+JSON.stringify(MultiSdk.local.mainInstanceInfo))),redfingerV2._startForSaas(MultiSdk.local.mainInstanceInfo),MultiSdk.local.multiServerGroupMap=i,MultiSdk.local.multiServerGroupMap.forEach(function(e,t){0===t.instanceListMap.length?t.multiProxy=null:MultiSdk.createMultiServerLink(e,t);})):MultiSdk.onError(MultiSdk._ERR.MAIN_CTROL_INSTANCE_CODE_INVALID,"main control instance is invalid");},MultiSdk.stop=function(){redfingerV2.stop(),MultiSdk.local.multiServerGroupMap.forEach(function(e,t){null!==t.multiProxy&&null!==t.serverId&&t.multiProxy.stop();}),setTimeout(MultiSdk.onStoped,3e3);},MultiSdk.switchMainInstance=function(e){if(!MultiSdk.local.instanceListMap.containsKey(e))return void MLOG.warn(MLOG.w("switchMainInstance fail mainInstanceCode invalid"));let t=MultiSdk.local.instanceListMap.get(e);if(null===MultiSdk.local.multiServerListMap.get(e))return void MLOG.warn(MLOG.w("switchMainInstance fail, not found multiServerNode"));redfingerV2.stop(),MultiSdk._reduceInstance([e]);let r=JSON.parse(JSON.stringify(t));MultiSdk.local.instanceListMap.put(e,r);let n=JSON.parse(JSON.stringify(MultiSdk.local.mainInstanceInfo));setTimeout(function(){MultiSdk.local.mainInstanceInfo=r,redfingerV2._initForBgsSdk(MultiSdk.local.userParams.mainCtrlConfig)?redfingerV2._startForSaas(MultiSdk.local.mainInstanceInfo):(MLOG.error(MLOG.e("please check init params.mainCtrlConfig")),MultiSdk.onInitFail(MultiSdk._ERR.MAIN_CTROL_CONFIG_INVALID,"params.mainCtrlConfig invalid")),MultiSdk._addInstance([n],MultiSdk.local.multiServerListMap.values());},3e3);},MultiSdk._reduceInstance=function(e){MultiSdk.local.multiServerGroupMap.forEach(function(t,r){if(null===r.multiProxy||null===r.serverId||void 0===r.serverId)return void MLOG.warn(MLOG.w("multiServer is not shaked, serverCode: "+r.multiServerCode));let n=[];for(let t=0;t<e.length;t++)e[t]!==MultiSdk.local.mainInstanceInfo.padCode&&r.instanceListMap.containsKey(e[t])&&n.push(e[t]);if(n.length>0){n.forEach(function(e){r.instanceListMap.remove(e),MultiSdk.local.instanceListMap.remove(e);});let e=MultiSdk.fillReduceInstanceMsg(r.serverId,n);r.multiProxy.sendMsg(e);}});},MultiSdk.getCurrInstanceList=function(e){e&&"function"==typeof e?new Date().getTime()-MultiSdk.local.queryLastTime<3e3?MLOG.warn(MLOG.w("getCurrInstanceList Too often，please try after 3s.")):(MultiSdk.local.queryCallBack=e,MultiSdk.local.queryResultList=[],MultiSdk.local.multiServerGroupMap.forEach(function(e,t){if(null!==t.multiProxy&&null!==t.serverId&&void 0!==t.serverId){MultiSdk.local.queryResultList.push({multiServerCode:t.multiServerCode,instanceList:[],isReturn:!1});let e=MultiSdk.fillQueryMsg(t.serverId);t.multiProxy.sendMsg(e);}})):MLOG.warn(MLOG.w("getCurrInstanceList param is invalid, must be callback function."));},MultiSdk.onInit=function(e,t){MLOG.info(MLOG.i("multiSdk init code: "+e+" msg: "+t));},MultiSdk.onConnectFail=function(e){MLOG.warn(MLOG.w("multiSdk onConnectFail instanceList: "+JSON.stringify(e)));},MultiSdk.onDisconnect=function(e){MLOG.warn(MLOG.w("multiSdk onDisconnect instanceList: "+JSON.stringify(e)));},MultiSdk.onStarted=function(){MLOG.info(MLOG.i("multiSdk onStarted"));},MultiSdk.onError=function(e,t){MLOG.error(MLOG.e("multiSdk onError code: "+e+" msg: "+t));},MultiSdk.onStoped=function(){MLOG.info(MLOG.i("multiSdk onStoped"));},MultiSdk._ERR={MAIN_CTROL_CONFIG_INVALID:400101,MULTI_SERVER_IS_NULL:400102,MAIN_CTROL_INSTANCE_CODE_INVALID:400103,MULTI_SERVER_OPEN_ERROR:400104,MULTI_SERVER_SERVER_CLOSE:400105},MultiSdk.CONSTANT={MSG:{OP_TYPE:{SHAKE:"2000",DELAY:"2001",BUSINISS:"2002"},BUSI_TYPE:{CONTROL:"control",PROXY:"proxy",ADD_INSTANCE:"addInstance",REDUCE_INSTANCE:"reduceInstance",QUERY:"query",STOP:"stop"}}},MultiSdk._transDeviceInfo=function(e){if(void 0!==e.resultCode)return e;let t=null;try{if(void 0===e.multiControlList)return MLOG.error(MLOG.e("instance token error, no  multiControlList info:"+JSON.stringify(e))),MultiSdk.onError(MultiSdk._ERR.MULTI_SERVER_IS_NULL,"multi server info error"),t;t={padCode:e.instanceCode,resultCode:0,resultInfo:{webControlList:e.webControlList,controlList:e.controlList,webRtcControlList:e.webRtcControlList,sessionId:e.sessionId,userId:-1,remoteList:e.remoteList,multiControlList:e.multiControlList}};}catch(r){MLOG.error(MLOG.e("instance token error :"+JSON.stringify(e))),MLOG.error(r),t=null;}return t;},MultiSdk._addInstance=function(e,t){let r=[];for(let t=0;t<e.length;t++){let r=MultiSdk._transDeviceInfo(e[t]);null!==r&&(e[t]=r);}if(r=e.filter(function(e){return 0!==e.resultCode;}),r.length>0&&(MultiSdk.onConnectFail(r),e=e.filter(function(e){return void 0!==e.resultCode&&0===e.resultCode;})),0===e.length)return;if(0===t.length)return void MultiSdk.onError(MultiSdk._ERR.MULTI_SERVER_IS_NULL,"addInstance multi server info error");for(let e=0;e<t.length;e++)MultiSdk.local.multiServerListMap.put(t[e].padCode,JSON.parse(JSON.stringify(t[e])));let n=new HashMap();for(let t=0;t<e.length;t++)n.put(e[t].padCode,e[t]),MultiSdk.local.instanceListMap.put(e[t].padCode,e[t]);let i=new HashMap();i=MultiSdk.instanceGroupParse(n,t,MultiSdk.local.mainInstanceInfo.padCode),0!==i.size()?i.forEach(function(e,t){if(0!==t.instanceListMap.size())if(MultiSdk.local.multiServerGroupMap.containsKey(e)){let r=MultiSdk.local.multiServerGroupMap.get(e);if(t.instanceListMap.forEach(function(e,t){r.instanceListMap.put(e,JSON.parse(JSON.stringify(t)));}),null===r.multiProxy||null===r.serverId||void 0===r.serverId)MultiSdk.createMultiServerLink(e,r);else{let e=MultiSdk.fillAddInstanceMsg(r.serverId,t.instanceListMap.values());r.multiProxy.sendMsg(e);}}else t.instanceListMap.forEach(function(e,t){MultiSdk.local.instanceListMap.put(e,JSON.parse(JSON.stringify(t)));}),MultiSdk.local.multiServerGroupMap.put(e,t),MultiSdk.createMultiServerLink(e,t);}):MultiSdk.onError(MultiSdk._ERR.MULTI_SERVER_IS_NULL,"addInstance multi server info error");},MultiSdk.registerCallback=function(e,t){void 0!==e&&"string"==typeof e&&"function"==typeof t&&("onInit"===e?MultiSdk.onInit=t:"onConnectFail"===e?MultiSdk.onConnectFail=t:"onDisconnect"===e?MultiSdk.onDisconnect=t:"onStoped"===e?MultiSdk.onStoped=t:"onError"===e&&(MultiSdk.onError=t));},MultiSdk.instanceGroupParse=function(e,t){let r=new HashMap();for(let n=0;n<t.length;n++){let i=t[n].padCode,o=t[n].multiControlList[0].multiControlCode,a=e.get(i),s=null;r.containsKey(o)||(s={multiServerCode:o,multiServerInfo:t[n].multiControlList[0].multiControlInfoList,multiProxy:null,instanceListMap:new HashMap()},r.put(o,s)),s=r.get(o),null!==a&&s.instanceListMap.put(a.padCode,a);}return console.log(r),r;},MultiSdk.createMultiServerLink=function(e,t){let r=MultiSdk.local.config.protocol+"://"+t.multiServerInfo[0].multiControlIp+":"+t.multiServerInfo[0].multiControlPort+"/multi-server";if(t.multiServercallBack={serverUrl:r,callBacks:{onConnected:function(){let t=e,r=MultiSdk.local.multiServerGroupMap.get(t),n=MultiSdk.fillShakeMsg();r.multiProxy.sendMsg(n);},onShaked:function(t){let r=e,n=MultiSdk.local.multiServerGroupMap.get(r);n.serverId=t;let i=MultiSdk.fillControlMsg(t,n.instanceListMap.values());n.multiProxy.sendMsg(i);},onMsg:function(t){let r=e,n=MultiSdk.local.multiServerGroupMap.get(r);switch(t.data.busiType){case"control":MLOG.info(MLOG.i("instance control result: "+JSON.stringify(t)));break;case"proxy":MLOG.info(MLOG.i("instance proxy result: "+JSON.stringify(t)));break;case"addInstance":MLOG.info(MLOG.i("instance addInstance result: "+JSON.stringify(t)));break;case"reduceInstance":MLOG.info(MLOG.i("instance reduceInstance result: "+JSON.stringify(t)));break;case"query":MLOG.info(MLOG.i("instance query result: "+JSON.stringify(t))),MultiSdk.processQueryResult(n,t);break;case"instanceConnectFail":MLOG.warn(MLOG.w("instance connectFail msg: "+JSON.stringify(t))),MultiSdk.onConnectFail(t.data.instanceList);break;case"instanceDisconnect":MLOG.warn(MLOG.w("instance disconnect msg: "+JSON.stringify(t))),MultiSdk.onDisconnect(t.data.instanceList);}},onError:function(t,r){let n=e;MultiSdk.local.multiServerGroupMap.get(n);MultiSdk.onError(t,r||"");}}},t.multiProxy=new MultiProxy(),console.dir(t),t.multiProxy.init(t.multiServercallBack))try{t.multiProxy.start();}catch(e){MLOG.error(MLOG.e("connect multiServer error serverNodeInfo: "+JSON.stringify(t.multiServerInfo))),MLOG.error(MLOG.e(e));}},MultiSdk.processQueryResult=function(e,t){if(void 0===MultiSdk.local.queryCallBack||null===MultiSdk.local.queryCallBack)return;void 0!==MultiSdk.local.queryResultList&&null!==MultiSdk.local.queryResultList||(MultiSdk.local.queryResultList=[]);for(let r=0;r<MultiSdk.local.queryResultList.length;r++)MultiSdk.local.queryResultList[r].multiServerCode===e.multiServerCode&&(MultiSdk.local.queryResultList[r].instanceList=null===t.data.instanceList?[]:t.data.instanceList,MultiSdk.local.queryResultList[r].isReturn=!0);if(0===MultiSdk.local.queryResultList.filter(function(e){return!e.isReturn;}).length){let e=[];MultiSdk.local.queryResultList.map(function(t){return t.instanceList.map(function(t){return e.push(t),t;}),t;}),MultiSdk.local.queryCallBack&&MultiSdk.local.queryCallBack(e),MultiSdk.local.queryCallBack=null,MultiSdk.local.queryResultList=[];}},MultiSdk.fillShakeMsg=function(){return{opType:MultiSdk.CONSTANT.MSG.OP_TYPE.SHAKE,data:{version:MultiSdk.version}};},MultiSdk.fillDelayMsg=function(e){return{opType:MultiSdk.CONSTANT.MSG.OP_TYPE.DELAY,data:{serverId:e,time:new Date().getTime()}};},MultiSdk.fillControlMsg=function(e,t){let r=[];for(let e=0;e<t.length;e++)t[e].padCode!==MultiSdk.local.mainInstanceInfo.padCode&&r.push({userId:t[e].resultInfo.userId||0,sessionId:t[e].resultInfo.sessionId,instanceCode:t[e].padCode,appName:t[e].resultInfo.packname,width:MultiSdk.local.width,height:MultiSdk.local.height});return{opType:MultiSdk.CONSTANT.MSG.OP_TYPE.BUSINISS,data:{serverId:e,busiType:MultiSdk.CONSTANT.MSG.BUSI_TYPE.CONTROL,instanceList:r}};},MultiSdk.fillProxyMsg=function(e,t){return{opType:MultiSdk.CONSTANT.MSG.OP_TYPE.BUSINISS,data:{serverId:e,busiType:MultiSdk.CONSTANT.MSG.BUSI_TYPE.PROXY,msg:t}};},MultiSdk.fillAddInstanceMsg=function(e,t){let r=[];for(let e=0;e<t.length;e++)t[e].padCode!==MultiSdk.local.mainInstanceInfo.padCode&&r.push({userId:t[e].resultInfo.userId,sessionId:t[e].resultInfo.sessionId,instanceCode:t[e].padCode,appName:t[e].resultInfo.packname,width:MultiSdk.local.width,height:MultiSdk.local.height});return{opType:MultiSdk.CONSTANT.MSG.OP_TYPE.BUSINISS,data:{serverId:e,busiType:MultiSdk.CONSTANT.MSG.BUSI_TYPE.ADD_INSTANCE,instanceList:r}};},MultiSdk.fillReduceInstanceMsg=function(e,t){return{opType:MultiSdk.CONSTANT.MSG.OP_TYPE.BUSINISS,data:{serverId:e,busiType:MultiSdk.CONSTANT.MSG.BUSI_TYPE.REDUCE_INSTANCE,instanceList:t}};},MultiSdk.fillQueryMsg=function(e){return{opType:MultiSdk.CONSTANT.MSG.OP_TYPE.BUSINISS,data:{serverId:e,busiType:MultiSdk.CONSTANT.MSG.BUSI_TYPE.QUERY}};},MultiSdk.fillStopMsg=function(e){return{opType:MultiSdk.CONSTANT.MSG.OP_TYPE.BUSINISS,data:{serverId:e,busiType:MultiSdk.CONSTANT.MSG.BUSI_TYPE.STOP}};},MultiSdk._registerProxyCallback=function(e){return e.onDeviceEvent=function(e){MultiSdk.local.multiServerGroupMap.forEach(function(t,r){if(void 0===r.serverId||null===r.serverId)return void MLOG.warn(MLOG.w("do not send ProxyMsg before shake, serverNode: "+r.multiServerCode));let n=MultiSdk.fillProxyMsg(r.serverId,e);r.multiProxy.sendMsg(n);});},e;},MultiSdk.interFaceLocal=null,MultiSdk.resetInterFaceLocal=function(){MultiSdk.interFaceLocal={server:{getTokenUrl:"",releaseTokenUrl:"",screenUrl:"",screenInfoUrl:""},mainInstanceCode:"",instanceCodeList:[]};},MultiSdk.startControl=function(e){if(MultiSdk.resetInterFaceLocal(),void 0===e.server||void 0===e.server.getTokenUrl||""===e.server.getTokenUrl)return MLOG.error(MLOG.e("startControl param server.getTokenUrl invalid, please check")),!1;if(void 0===e.server||void 0===e.server.releaseTokenUrl||""===e.server.releaseTokenUrl)return MLOG.error(MLOG.e("startControl param server.releaseTokenUrl invalid, please check")),!1;if(void 0!==e.server&&void 0!==e.server.screenUrl&&""!==e.server.screenUrl||MLOG.warn(MLOG.w("startControl param server.screenUrl invalid, so skip")),void 0!==e.server&&void 0!==e.server.screenInfoUrl&&""!==e.server.screenInfoUrl||MLOG.warn(MLOG.w("startControl param server.screenInfoUrl invalid, so skip")),void 0===e.instanceCodeList||0===e.instanceCodeList.length)return MLOG.error(MLOG.e("startControl param instanceCodeList invalid, please check")),!1;if(void 0===e.mainInstanceCode||""===e.mainInstanceCode)return MLOG.error(MLOG.e("startControl param mainInstanceCode invalid, please check")),!1;if(MultiSdk.interFaceLocal.server=e.server,MultiSdk.interFaceLocal.instanceCodeList=e.instanceCodeList,MultiSdk.interFaceLocal.mainInstanceCode=e.mainInstanceCode,!MultiSdk.init(e))return MLOG.error(MLOG.e("startControl init fail,please check param")),!1;let t=[],r=[];for(let n=0;n<e.instanceCodeList.length;n++)r.length<50||(t.push(r),r=[]),r.push(e.instanceCodeList[n]);r.length>0&&t.push(r);let n=[];for(let r=0;r<t.length;r++){let i={server:e.server,instanceCodeList:t[r]};MultiSdk._getInstanceTokenList(i,function(e){null!==e&&n.push(...e);});}return MultiSdk.start(n,e.mainInstanceCode),!0;},MultiSdk.stopControl=function(){if(MultiSdk.stop(),""!==MultiSdk.interFaceLocal.server.releaseTokenUrl&&void 0!==MultiSdk.interFaceLocal.server.releaseTokenUrl){let e=[];MultiSdk.local.instanceListMap.forEach(function(t,r){e.push(r.resultInfo.sessionId);});let t=[],r=[];for(let n=0;n<e.length;n++)r.length<50||(t.push(r),r=[]),r.push(e[n]);r.length>0&&t.push(r);for(let e=0;e<t.length;e++){let r={server:MultiSdk.interFaceLocal.server,sessionIds:t[e]};MultiSdk._disconnectTokens(r);}}},MultiSdk.addInstance=function(e){let t=[],r=[];for(let n=0;n<e.length;n++)r.length<50||(t.push(r),r=[]),r.push(e[n]);r.length>0&&t.push(r);let n=[];for(let e=0;e<t.length;e++){let r={server:MultiSdk.interFaceLocal.server,instanceCodeList:t[e]};MultiSdk._getInstanceTokenList(r,function(e){null!==e&&n.push(...e);});let i=[];for(let e=0;e<n.length;e++){let t=MultiSdk._transDeviceInfo(n[e]);null!==t&&i.push(t);}if(0===i.length)return void MLOG.error(MLOG.e("no valid instance token can control"));let o=[];for(let e=0;e<i.length;e++)o.push({padCode:i[e].padCode,multiControlList:JSON.parse(JSON.stringify(i[e].resultInfo.multiControlList))});MultiSdk._addInstance(i,o);}return!0;},MultiSdk.reduceInstance=function(e){if(MultiSdk._reduceInstance(e),""!==MultiSdk.interFaceLocal.server.releaseTokenUrl&&void 0!==MultiSdk.interFaceLocal.server.releaseTokenUrl){let t=[];for(let r=0;r<e.length;r++)if(MultiSdk.local.instanceListMap.containsKey(e[r])){let n=MultiSdk.local.instanceListMap.get(e[r]);t.push(n.resultInfo.sessionId);}let r=[],n=[];for(let e=0;e<t.length;e++)n.length<50||(r.push(n),n=[]),n.push(t[e]);n.length>0&&r.push(n);for(let e=0;e<r.length;e++){let t={server:MultiSdk.interFaceLocal.server,sessionIds:r[e]};MultiSdk._disconnectTokens(t);}}},MultiSdk._getInstanceTokenList=function(e,t){let r=null;if(window.ActiveXObject?r=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(r=new XMLHttpRequest()),null===r)return void MLOG.error(MLOG.e("XHR is not support"));let n=e.server.getTokenUrl,i={instanceCodeList:e.instanceCodeList};if(r.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){let e={};e="string"==typeof this.responseText?JSON.parse(this.responseText):this.responseText,0===e.code?(MLOG.info(MLOG.i("startControl get instance tokens success ret:"+JSON.stringify(e))),t(e.data)):(MLOG.error(MLOG.e("startControl get instance tokens fail:"+JSON.stringify(e))),t(null));}else MLOG.error(MLOG.e("startControl get instance tokens, please check server is ok?")),t(null);},r.open("POST",n,!1),r.setRequestHeader("content-type","application/json"),void 0!==e.server.header&&"object"==typeof e.server.header)for(let t in e.server.header)r.setRequestHeader(t,e.server.header[t]);r.ontimeout=function(){MLOG.error(MLOG.e("startControl get instance tokens timeout url:"+n)),t(null);},r.send(JSON.stringify(i));},MultiSdk._disconnectTokens=function(e){let t=null;if(window.ActiveXObject?t=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(t=new XMLHttpRequest()),null===t)return void MLOG.error(MLOG.e("XHR is not support"));let r=e.server.releaseTokenUrl,n={sessionIds:e.sessionIds};if(t.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){let e={};e="string"==typeof this.responseText?JSON.parse(this.responseText):this.responseText,0===e.code?MLOG.info(MLOG.i("stopControl release tokens success ret:"+JSON.stringify(e))):MLOG.error(MLOG.e("stopControl release tokens fail:"+JSON.stringify(e)));}else MLOG.error(MLOG.e("stopControl release tokens, please check server is ok?"));},t.open("POST",r,!0),t.setRequestHeader("content-type","application/json"),void 0!==e.server.header&&"object"==typeof e.server.header)for(let r in e.server.header)t.setRequestHeader(r,e.server.header[r]);t.ontimeout=function(){MLOG.error(MLOG.e("stopControl release tokens timeout url:"+r));},t.send(JSON.stringify(n));},MultiSdk.picTaskList=[],MultiSdk.getPicResultCnt=0,MultiSdk.getPicTime=0,MultiSdk.onPicResult=function(){},MultiSdk.startPic=function(e,t,r){if(t=t||20,r=r||432,void 0===MultiSdk.interFaceLocal.server.screenUrl||""===MultiSdk.interFaceLocal.server.screenUrl)return void MLOG.error(MLOG.e("server.screenUrl is invalid"));if(void 0===MultiSdk.interFaceLocal.server.screenInfoUrl||""===MultiSdk.interFaceLocal.server.screenInfoUrl)return void MLOG.error(MLOG.e("server.screenInfoUrl is invalid"));if(0===e.length)return void MLOG.error(MLOG.e("no instance to get pic"));let n=null;if(window.ActiveXObject?n=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(n=new XMLHttpRequest()),null===n)return void MLOG.error(MLOG.e("XHR is not support"));let i=MultiSdk.interFaceLocal.server.screenUrl,o={instanceCodeList:e,fullQuality:t,scale:r};if(n.onreadystatechange=function(){if(4===this.readyState){if(200===this.status){let e=this.responseText;if("string"==typeof this.responseText&&(e=JSON.parse(this.responseText)),0===e.code){MultiSdk.picTaskList=[];for(let t=0;t<e.data.length;t++)MultiSdk.picTaskList.push(e.data[t]);MultiSdk.getPicResultCnt=0,MultiSdk.getPicResult();}else console.error(e);}else MLOG.error(MLOG.e("startPic screen request fail, please check server is ok?"));MultiSdk.getPicTime=setTimeout(function(){MultiSdk.startPic(e,t,r);},1e3);}},n.open("POST",i,!0),n.setRequestHeader("content-type","application/json"),void 0!==MultiSdk.interFaceLocal.server.header&&"object"==typeof MultiSdk.interFaceLocal.server.header)for(let e in MultiSdk.interFaceLocal.server.header)n.setRequestHeader(e,MultiSdk.interFaceLocal.server.header[e]);n.timeout=1e4,n.ontimeout=function(){MLOG.error(MLOG.e("startControl get instance tokens timeout url:"+i));},n.send(JSON.stringify(o));},MultiSdk.getPicResult=function(){if(MultiSdk.getPicResultCnt>=3)return;let e=MultiSdk.picTaskList.map(function(e){return e.taskId;}),t=null;if(window.ActiveXObject?t=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(t=new XMLHttpRequest()),null===t)return void MLOG.error(MLOG.e("XHR is not support"));let r=MultiSdk.interFaceLocal.server.screenInfoUrl,n={taskIds:e};if(t.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){let e,t=this.responseText;if("string"==typeof this.responseText&&(t=JSON.parse(this.responseText)),MultiSdk.getPicResultCnt++,0===t.code){e=[];for(let r=0;r<t.data.length;r++)if(t.data[r].taskStatus+""=="7"){let n=t.data[r].url,i=t.data[r].padCode;e.push({instanceCode:i,imgUrl:n}),MultiSdk.picTaskList=MultiSdk.picTaskList.filter(function(e){return e.padCode!==i;});}e.length>0&&setTimeout(function(){MultiSdk.onPicResult(e);},1);}else console.log("查询实例截图结果失败");MultiSdk.picTaskList.length>0&&setTimeout(function(){MultiSdk.getPicResult();},300);}else MLOG.error(MLOG.e("startPic screen request fail, please check server is ok?"));},t.open("POST",r,!0),t.setRequestHeader("content-type","application/json"),void 0!==MultiSdk.interFaceLocal.server.header&&"object"==typeof MultiSdk.interFaceLocal.server.header)for(let e in MultiSdk.interFaceLocal.server.header)t.setRequestHeader(e,MultiSdk.interFaceLocal.server.header[e]);t.timeout=1e4,t.ontimeout=function(){MLOG.error(MLOG.e("startControl get instance tokens timeout url:"+r));},t.send(JSON.stringify(n));},MultiSdk.stopPic=function(){MultiSdk.getPicTime&&clearTimeout(MultiSdk.getPicTime);},MultiSdk.homeCommand=function(){BgsSdk.sendCommand(redfinger.KEY_TYPE.KEY_HOMEPAGE);},MultiSdk.backCommand=function(){BgsSdk.sendCommand(redfinger.KEY_TYPE.KEY_BACK);},MultiSdk.menuCommand=function(){BgsSdk.sendCommand(redfinger.KEY_TYPE.KEY_MENU);},MultiSdk.otherCommand=function(e){BgsSdk.sendCommand(e);};
